"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="03b727be-fc8f-5506-b3a7-5d2edca8061e")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[9004],{701283:(e,t,i)=>{i.d(t,{Kk:()=>o,XI:()=>_,iG:()=>l,iU:()=>s,m5:()=>c,o1:()=>d,rV:()=>r,s:()=>n,xT:()=>a});let l="notification--centeredContainer--KOKEL",n="notification--topCenterNotification---nbgh notification--notification--Q5PkV text--_negText--j9g-L _overlayBase--_overlayBase--Rkj8l",a="notification--bottomRightNotification--i1z7X notification--notification--Q5PkV text--_negText--j9g-L _overlayBase--_overlayBase--Rkj8l",r="notification--bottomRightNotificationHelpIconHidden--plZlM notification--bottomRightNotification--i1z7X notification--notification--Q5PkV text--_negText--j9g-L _overlayBase--_overlayBase--Rkj8l",o="notification--icon--ZWNx5",c="notification--iconError--aqnJU notification--icon--ZWNx5",s="notification--message--6GSx7",d="notification--actions--GUX-p",_="notification--action--v-pvn"},694778:(e,t,i)=>{i.d(t,{n:()=>d});var l=i(188507),n=i(966712),a=i(915440),r=i(694687),o=i(594901),c=i(279453),s=i(872429);function d(e){var t,i,d;let _=(0,n.kc)().omnicreate_button_permissions,u=(0,l.d4)(e=>e.currentUserOrgId),m=(0,r.sZ)(),p=!!(null==m?void 0:m.is_slides_disabled),E=(0,o.Xx)(u),f=(0,s.sy)(),g=(0,a.Rs)(c.L8O,{projectId:e},{enabled:!!e&&_}).transform(({project:e})=>e);return _?{isLoading:"loading"===g.status,canCreateDesignFile:!!(null==(t=g.data)?void 0:t.canCreateDesignFile),canCreateFigjamFile:!!(null==(i=g.data)?void 0:i.canCreateFigjamFile),canCreateSlidesFile:!!(null==(d=g.data)?void 0:d.canCreateSlidesFile),canShowCreateSitesFile:f}:{isLoading:!1,canCreateDesignFile:!0,canCreateFigjamFile:!E,canCreateSlidesFile:!!(0,n.kc)().piper&&!p,canShowCreateSitesFile:f}}},831045:(e,t,i)=>{i.d(t,{X8:()=>H,$c:()=>U,lX:()=>B});var l=i(411855),n=i(188507),a=i(115630),r=i(629019),o=i.n(r),c=i(966712),s=i(915440),d=i(860601),_=i(313496),u=i(574176),m=i(762638),p=i(939863),E=i(67294),f=i(134279),g=i(896474),h=i(809840),v=i(738269),b=i(119198),N=i(662275),I=i(349410),T=i(672517),R=i(988022),w=i(102310),k=i(860178),y=i(99506),C=i(279453),S=i(741477),D=i(984968),O=i(945020),A=i(851363),P=i(206074),F=i(720488),L=i(832568),x=i(875531),U=(e=>(e.DESIGN="FILE_CREATION_DROPDOWN_DESIGN",e.WHITEBOARD="FILE_CREATION_DROPDOWN_WHITEBOARD",e.SLIDES="FILE_CREATION_DROPDOWN_SLIDES",e.DESKTOP_NEW_TAB="FILE_CREATION_DROPDOWN_DESKTOP_NEW_TAB",e))(U||{});let M={FILE_CREATION_DROPDOWN_DESIGN:"design",FILE_CREATION_DROPDOWN_WHITEBOARD:"whiteboard",FILE_CREATION_DROPDOWN_SLIDES:"piper"};function B(){let e=(0,s.Rs)(C._Dk,{orgId:null});if("loaded"!==e.status)return null;{let{teamEditRoles:t}=e.data.currentUser;return t.map(e=>e.team).filter(e=>!!(e&&e.projects&&!e.deletedAt&&e.isStarterTeam&&e.projects.length>0&&!e.restrictionsList.includes(y.P4.LOCKED)))}}function H({buttonText:e,dataTestId:t,currentDropdownType:i,teamsWithEditableProjects:r,hideOnDesktop:s,hideOnMobile:u,onSelectOverride:E}){var f;let g=(0,n.wA)(),h=(0,n.d4)((0,S.E)(i)),b=l.useRef(null);if("FILE_CREATION_DROPDOWN_SLIDES"===i&&!(0,c.kc)().piper)return null;let N=[{displayText:(0,p.t)("file_browser.tool_bar.file_creation_dropdown_display_text"),preventDismissOnSelected:!0,render:()=>l.createElement(G,{teamsWithEditableProjects:r,currentDropdownType:i,onSelectOverride:E,dispatch:g})}],I="FILE_CREATION_DROPDOWN_DESKTOP_NEW_TAB"===i,R=l.createElement(l.Fragment,null,l.createElement(_.g,{buttonClassName:o()(m.cx.flex.itemsCenter.justifyCenter.$,I?"file_creation_dropdown--newFileDropdown--VmfcL file_creation_dropdown--newFileToolbarDropdown--GhxSW":"file_creation_dropdown--newFileBrandDropdown--7VA02 file_creation_dropdown--newFileToolbarDropdown--GhxSW",{"file_creation_dropdown--hideOnDesktop--uTcIG":s,"file_creation_dropdown--hideOnMobile--IbVAD":u}),dataTestId:t,isShowingDropdown:!1,isOnBrandColor:!I,onClick:()=>{h||g(v.j7({type:i}))},ref:b},e),b.current&&h&&l.createElement(T.fu,{name:"File Creation Dropdown Display",properties:{fileCreationDefaultsDropdownType:i}},l.createElement(P.j,{showPoint:!0,lean:"center",type:F.it.MATCH_BACKGROUND,rootAndSubmenuMaxWidth:224,minWidth:224,autoHeight:!0,onSelectItem:d.lQ,hidePointWhenContentOffScreen:!0,items:N,parentRect:null==(f=b.current)?void 0:f.getBoundingClientRect(),dispatch:g})));if(!I){let e=M[i];return l.createElement(a.v,{mode:e},R)}return R}function G({teamsWithEditableProjects:e,currentDropdownType:t,modal:i,onSelectOverride:n,dispatch:a}){let r=(0,w.B)(),o=(0,k.TA)(),[c,s]=l.useState(!1),d=(0,D.ol)(),_=(0,L.vt)(null==d?void 0:d.id),T=(0,I.Yz)(),y=(e,l)=>{i?a(N.Lo()):a(v.oB()),a(b.zE({state:r,editorType:W[t],team:e?(0,A.Z_)(e):void 0,folderId:l,from:O.f6.FILE_BROWSER_TOPBAR_RECENTS,openNewFileIn:O.ai.SAME_TAB,callback:e=>{(0,R.Cu)({userId:o,fileKey:e},j[t])},inFileCreationDefaultsExp:!0}))},C=e=>()=>{n?(n(e),a(v.oB())):y(null==e?void 0:e.team,null==e?void 0:e.project.id)},S=l.useMemo(()=>c?e:e.slice(0,3),[c,e]),P=(e,i)=>t===e&&i;return l.createElement(l.Fragment,null,l.createElement("div",{className:i?"file_creation_dropdown--dropdownHeaderModal--I0osc":"file_creation_dropdown--dropdownHeader--G-Jvv text--fontPos11--2LvXf text--_fontBase--QdLsd"},"FILE_CREATION_DROPDOWN_DESIGN"===t?(0,p.tx)("file_browser.tool_bar.create_new_design_file_in"):"FILE_CREATION_DROPDOWN_WHITEBOARD"===t?(0,p.tx)("file_browser.tool_bar.create_new_figjam_board_in"):"FILE_CREATION_DROPDOWN_SLIDES"===t?(0,p.tx)("file_browser.tool_bar.create_new_slide_deck_in"):(0,p.tx)("desktop_new_tab.create_new_file_in")),S.map(e=>{if(e.projects&&e.projects.length>0){let i=e.projects[0];if(!({FILE_CREATION_DROPDOWN_SLIDES:P("FILE_CREATION_DROPDOWN_SLIDES",i.canCreateSlidesFile),FILE_CREATION_DROPDOWN_DESIGN:P("FILE_CREATION_DROPDOWN_DESIGN",i.canCreateDesignFile),FILE_CREATION_DROPDOWN_WHITEBOARD:P("FILE_CREATION_DROPDOWN_WHITEBOARD",i.canCreateFigjamFile),FILE_CREATION_DROPDOWN_DESKTOP_NEW_TAB:!0})[t])return null;let n=(0,A.Z_)(e),a=!({FILE_CREATION_DROPDOWN_SLIDES:(0,D.rR)(n,{type:D.sK.ADD_SLIDES_FILE}),FILE_CREATION_DROPDOWN_DESIGN:(0,D.rR)(n,{type:D.sK.ADD_DESIGN_FILE}),FILE_CREATION_DROPDOWN_WHITEBOARD:(0,D.rR)(n,{type:D.sK.ADD_FIGJAM_FILE}),FILE_CREATION_DROPDOWN_DESKTOP_NEW_TAB:!0})[t];return l.createElement(V,{key:e.id,currentDropdownType:t,folderId:e.projects[0].id,icon:l.createElement("div",{className:m.cx.h16.w16.flex.itemsCenter.justifyCenter.$},l.createElement(E.nl,{size:{imgSize:E.Pf.SMALL,fallbackSize:E.Pf.XSMALL},fallbackDisplay:f.U.HIDDEN,team:{id:e.id}})),text:l.createElement(h.E,{truncate:!0},e.name," / ",e.projects[0].path),onClick:C({team:e,project:i}),atStarterTeamFileLimit:a})}}),!c&&e.length>3&&l.createElement("div",{className:"file_creation_dropdown--seeMoreProjects--EXJpP"},l.createElement(V,{currentDropdownType:t,icon:l.createElement(u.B,{svg:x.A}),text:(0,p.tx)("file_browser.tool_bar.see_all_editable_projects",{numberOfEditableProjects:e.length}),onClick:()=>s(!c)})),!T(_)&&l.createElement(l.Fragment,null,l.createElement("div",{className:i?"file_creation_dropdown--horizontalDividerFull--Xvfdt":"file_creation_dropdown--horizontalDivider--kd-2z"}),l.createElement("div",null,l.createElement(V,{currentDropdownType:t,icon:l.createElement(g.In,{icon:"page-16"}),text:l.createElement(h.E,{truncate:!0},(0,p.tx)("sidebar.drafts")),onClick:C(null)}))))}let W={FILE_CREATION_DROPDOWN_DESIGN:y._Y.DESIGN,FILE_CREATION_DROPDOWN_WHITEBOARD:y._Y.WHITEBOARD,FILE_CREATION_DROPDOWN_SLIDES:y._Y.SLIDES,FILE_CREATION_DROPDOWN_DESKTOP_NEW_TAB:y._Y.DESIGN},j={FILE_CREATION_DROPDOWN_DESIGN:"toolbar_design_created",FILE_CREATION_DROPDOWN_WHITEBOARD:"toolbar_figjam_created",FILE_CREATION_DROPDOWN_SLIDES:"toolbar_slides_created",FILE_CREATION_DROPDOWN_DESKTOP_NEW_TAB:"toolbar_file_created"};function V({icon:e,text:t,onClick:i,atStarterTeamFileLimit:n}){return l.createElement("div",{role:"link",className:"file_creation_dropdown--projectCreationListOption--vKhNM",tabIndex:0,onClick:i},l.createElement("div",{className:m.cx.flex.flexRow.wFull.overflowHidden.$},l.createElement("div",{className:m.cx.flex.itemsCenter.flexRow.gap12.wFull.overflowHidden.$},l.createElement("div",{className:m.cx.flex.w16.h16.itemsCenter.alignCenter.justifyCenter.flexShrink0.$},e),l.createElement("p",{className:m.cx.flex.flexRow.overflowHidden.flexGrow1.itemsCenter.$},t))),n&&l.createElement(g.In,{icon:"info-32"}))}},367935:(e,t,i)=>{function l(e){return e.is_widget}function n(e){return void 0!==e.current_plugin_version_id&&!e.is_widget}function a(e){return void 0!==e.duplicate_count}i.d(t,{AS:()=>l,bT:()=>n,zj:()=>a})},611047:(e,t,i)=>{i.d(t,{LP:()=>d,qQ:()=>l,qv:()=>_});var l,n=i(411855),a=i(776250),r=i(96328),o=i(939863),c=i(809840),s=i(99506);let d="cover";var _=(e=>(e.COMPONENT_PUBLISHING="component_publishing",e.VIDEO="video",e.PASSWORD_PROTECTION="password_protection",e.AUDIO="audio",e.UNLIMITED_PAGES="unlimited_pages",e.PROTOTYPE_ONLY_LINKS="prototype_only_links",e.OPEN_SESSIONS="open_sessions",e.UNLIMITED_PROJECTS="unlimited_projects",e.PRIVATE_PROJECTS="private_projects",e.UNLIMITED_FILES="unlimited_files",e))(_||{});let u={cover:{onboardingKey:d,imgSrc:"https://static.figma.com/uploads/cade95b7d3141da5e4c22a879de339d5b57b05aa",header:n.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.pro.title")),description:n.createElement(c.E,{fontSize:11,color:"secondary"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.pro.description")),hoverTitle:null},password_protection:{onboardingKey:"password_protection",imgSrc:"https://static.figma.com/uploads/b56379c61007d4c119dc3a32fc936ac07f5d13d5",header:n.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.password.title")),description:n.createElement(c.E,{fontSize:11,color:"secondary"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.password.description")),hoverTitle:n.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.password.hover_text"))},component_publishing:{onboardingKey:"component_publishing",imgSrc:"https://static.figma.com/uploads/1138b4f97bb51f61ed9b2bac008de9038dfbcf75",header:n.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.library.title")),description:n.createElement(c.E,{fontSize:11,color:"secondary"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.library.description")),hoverTitle:n.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.library.hover_text"))},audio:{onboardingKey:"audio",imgSrc:"https://static.figma.com/uploads/312167c9a97cd378f0a20d09d03376b27283dae9",header:n.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.audio.title")),description:n.createElement(c.E,{fontSize:11,color:"secondary"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.audio.description")),hoverTitle:n.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.audio.hover_text"))},open_sessions:{onboardingKey:"open_sessions",imgSrc:"https://static.figma.com/uploads/1ee3e88ccb237a207e896dba4a67af081259590d",header:n.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.jam.title")),description:n.createElement(c.E,{fontSize:11,color:"secondary"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.jam.description")),hoverTitle:n.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.jam.hover_text"))},unlimited_pages:{onboardingKey:"unlimited_pages",imgSrc:"https://static.figma.com/uploads/cdb490f97220f8598d6b342c873569c68ac2370e",header:n.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.unlimited_pages.title")),description:n.createElement(c.E,{fontSize:11,color:"secondary"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.unlimited_pages.description")),hoverTitle:n.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.unlimited_pages.hover_text"))},video:{onboardingKey:"video",imgSrc:"https://static.figma.com/uploads/0e9be58e80f8d577fc4b1028f07a903bca68c970",header:n.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.video.title")),description:n.createElement(c.E,{fontSize:11,color:"secondary"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.video.description")),hoverTitle:n.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.video.hover_text"))}},m={component_publishing:"seen_pro_onboarding_component_publishing_overlay",video:"seen_pro_onboarding_video_overlay",password_protection:"seen_pro_onboarding_password_protection_overlay",audio:"seen_pro_onboarding_audio_overlay",unlimited_pages:"seen_pro_onboarding_unlimited_pages_overlay",prototype_only_links:"seen_pro_onboarding_prototype_only_links_overlay",open_sessions:"seen_pro_onboarding_open_sessions_overlay",unlimited_files:"seen_pro_onboarding_unlimited_files_overlay",unlimited_projects:"seen_pro_onboarding_unlimited_projects_overlay",private_projects:"seen_pro_onboarding_private_projects_overlay"};(e=>{e.ACTIVELY_TRIGGERED_ONBOARDING_BLOCKED_EVENT_ID="Pro Trials V3: Actively Triggered Onboarding Blocked",e.getOnboardingStepUserFlag=function(e){return m[e]},e.getOnboardingStepTrackingContext=function(e){return`Pro Trials V3 Onboarding: ${(0,r.vE)(e)}`},e.getOnboardingStepTriggerEventId=function(e){return`triggered_pro_trials_v3_${e}_onboarding`},e.trackActivelyTriggeredOnboardingStepBlocked=function(t,i){(0,a.sx)(e.ACTIVELY_TRIGGERED_ONBOARDING_BLOCKED_EVENT_ID,{blockedOnboardingFeature:i,blockingOverlayId:t})},e.getOnboardingCardsStackContentProps=function({editorType:e,isVoiceEnabled:t,isWorkshopModeEnabled:i}){let l=[d,"password_protection","component_publishing","unlimited_pages","video"];t&&l.push("audio");let n=[d,"password_protection"];return t&&n.push("audio"),i&&n.push("open_sessions"),(({[s._Y.DESIGN]:l,[s._Y.SLIDES]:l,[s._Y.SITES]:l,[s._Y.WHITEBOARD]:n})[e]||[]).map(e=>u[e])}})(l||(l={}))},741477:(e,t,i)=>{i.d(t,{E:()=>a});var l=i(302245);let n=(0,l.Mz)(e=>e.dropdownShown,e=>null==e?void 0:e.type),a=e=>(0,l.Mz)(n,t=>t===e)},749336:(e,t,i)=>{i.d(t,{d:()=>L});var l=i(411855),n=i(188507),a=i(776250),r=i(915440),o=i(860601),c=i(743282),s=i(493323),d=i(827586),_=i(939863),u=i(278733),m=i(553015),p=i(975350),E=i(103907),f=i(696097),g=i(259927),h=i(654034),v=i(920037),b=i(860178),N=i(279453),I=i(531827),T=i(440535),R=i(91425),w=i(238559),k=i(113292),y=i(728268),C=i(636662),S=i(57289),D=i(448879),O=i(757207);let A="quick_reply_thread_view--headerButton--wmkPJ",P=new class{get file(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}get fileFollower(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}get comments(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}},F=null,L=(0,l.forwardRef)((e,t)=>{let i=(0,r.Rs)(N.Uhm,{fileKey:e.quickReplyInfo.fileKey,rootId:e.quickReplyInfo.threadId});return l.createElement("div",{className:"quick_reply_thread_view--container--WPlnN",ref:t},l.createElement("div",{className:"quick_reply_thread_view--column--UrAD4"},l.createElement("div",{className:"quick_reply_thread_view--header--BHlje"},l.createElement("div",{className:A},!e.hideOverflowMenu&&l.createElement(m.$,{icon:e.closeIcon,variant:"text",onClick:e.onClose})),l.createElement("div",{className:"quick_reply_thread_view--fileName--S2twU"},"loaded"===i.status&&i.data.file&&i.data.file.name),l.createElement("div",{className:A},e.hideOverflowMenu?l.createElement(m.$,{icon:e.closeIcon,variant:"text",onClick:e.onClose}):l.createElement("div",{style:{display:"none"}},l.createElement(m.$,{icon:"dots-32",variant:"text"})))),l.createElement(x,{quickReplyInfo:e.quickReplyInfo,result:i,hideOverflowMenu:e.hideOverflowMenu})))});function x(e){let t=(0,b.iZ)();return t?"loading"===e.result.status||"disabled"===e.result.status?l.createElement(s.qc,{size:"medium"}):"errors"===e.result.status?l.createElement("div",{className:"quick_reply_thread_view--errorState--Re4UD"},(0,_.t)("quick_reply.unable_to_load_thread")):null==e.result.data.file?l.createElement("div",null,(0,_.t)("quick_reply.unable_to_load_thread")):l.createElement(U,{quickReplyInfo:e.quickReplyInfo,result:e.result,user:t,hideOverflowMenu:e.hideOverflowMenu}):null}function U(e){var t,i,r,o,c,s;let{quickReplyInfo:d,result:u,user:g}=e,{fileKey:b,threadId:N}=d,R=(0,f.dr)({args:{fileKey:b,rootId:N},subscription:u}),w=(0,n.wA)(),{file:k}=u.data,y=(0,l.useMemo)(()=>{var e,t,i,l;return(0,I.mp)({currentOrgId:null==(e=k.org)?void 0:e.id,teamId:null==(t=k.team)?void 0:t.id,fileKey:b,isOrgGuest:(null==(l=null==(i=k.org)?void 0:i.currentOrgUser)?void 0:l.permission)==="guest",users:[]})},[null==(t=k.org)?void 0:t.id,null==(i=k.team)?void 0:i.id,b,null==(o=null==(r=k.org)?void 0:r.currentOrgUser)?void 0:o.permission]),{mobileCommentThread:C}=k,{currentUserCommentReadStatus:S}=k,D=C.find(e=>e.id===N),O=(0,n.d4)(e=>e.comments.savingCommentUuids),A=(0,n.d4)(e=>e.comments.lgPendingUuidToServerIdMap);if(!D)return l.createElement("div",null,(0,_.t)("quick_reply.unable_to_load_thread"));let L=C.map(e=>(0,h.G9)(g.id,D,e,S??h.gj,O,A,e.attachments)),x={id:D.id,key:b,anchored:!1,canvasPosition:null,selectionAnchorCanvasPosition:null,comments:L,messageMeta:L[0].message_meta,page:(null==(c=D.clientMeta)?void 0:c.pageId)||null,isActive:!0,replyCount:C.length-1,isCanvasMention:!1,pageName:(null==(s=D.clientMeta)?void 0:s.pageId)||null,sidebarItemType:T.kT.COMMENT_THREAD},U={api:R,status:u.status,data:P,threads:{status:u.status,data:[x],errors:u.errors},errors:u.errors,isResolvedLoaded:!0,isUnresolvedLoaded:!0};return l.createElement(E.j9.Provider,{value:U},l.createElement("div",{className:"quick_reply_thread_view--mouseContainer--qyIpH",onMouseEnter:()=>{let e=L.some(e=>e.isUnread);F=setTimeout(()=>{R.commentReceipts&&e&&(w(p.AY({receiptsAPI:R.commentReceipts,thread:x})),(0,a.sx)("Comment Thread Read",{commentThreadId:N,threadType:"file_browser_quick_reply"}))},1e3)},onMouseLeave:()=>{F&&clearTimeout(F)}},l.createElement("div",{className:"quick_reply_thread_view--preview--I47Ds"},l.createElement("img",{src:D.thumbnailUrl||void 0,className:"quick_reply_thread_view--previewImage--gSK-n",style:{backgroundColor:(0,v.C)(k.checkpointClientMeta)},alt:"thumbnail"}),l.createElement("a",{href:d.deeplink??`/file/${b}?fuid=${g.id}&#${N}`,className:"quick_reply_thread_view--openFileButton--RBtVz"},l.createElement(m.$,{variant:"text",icon:"new-window-32"}))),l.createElement(B,{loadedComments:L,user:g,quickReplyInfo:d,commentMentionables:y,hideOverflowMenu:e.hideOverflowMenu})))}function M(){let e=(0,n.wA)(),t=(0,n.d4)(e=>e.dropdownShown||null),i=(0,b.iZ)(),a=(0,R.v)();if(!t||t.type!==g.VJ)return null;let{comment:r,parentRect:o,thread:c,isUnread:s}=t.data;return l.createElement(y.V,{dispatch:e,comment:r,parentRect:o,currentUser:i,isUnread:s,thread:c,copyLink:a})}function B(e){let{loadedComments:t,user:i,quickReplyInfo:a,commentMentionables:r,hideOverflowMenu:s}=e,{fileKey:m,threadId:f}=a,g=(0,n.wA)();(0,l.useEffect)(()=>{g(p.Fm({threadId:f}))},[g,f]);let h=(0,n.d4)(e=>e.comments.typeahead),v=(0,n.d4)(e=>e.comments.editingComment),b=(0,n.d4)(e=>e.dropdownShown||null),N=(0,n.d4)(e=>{var t;return null==(t=e.comments.activeThread)?void 0:t.id}),I=(0,n.d4)(e=>e.comments.threads),R=N&&I[N]||null,A=(null==R?void 0:R.reply.messageMeta)||[],{submitReply:P,updateMessage:F,submitEdit:L}=function(e){var t;let i=(0,n.wA)(),a=(0,E.I_)().writeAPI,r=null==(t=(0,E._9)())?void 0:t.threads;return{submitReply:l.useCallback(e=>{if(!a){console.error("Calling submitReply with no write API");return}r&&"loaded"===r.status&&r.data.find(t=>t.id===e.threadId)&&(e.onCommentValidationFailure=(t,l,n,r)=>p.dB(a,i,t,l,n,r,e.uuid,D.y),i(p.lV({...e,commentsWriteApi:a,commentsConfiguration:D.y,trackingContext:{feature:"web_quick_reply_screen"}})))},[i,r,a]),updateMessage:l.useCallback(t=>{i(p.k7({threadId:e,messageMeta:t}))},[i,e]),submitEdit:l.useCallback((e,t)=>{i(p._v({comment:e,messageMeta:t}))},[i])}}(f),x=(0,k._B)(),U=l.useRef(null),B=l.useRef(null),H=l.useRef(null),[G,W]=l.useState(null),[j,V]=l.useState(l.useRef(null)),Q=l.useRef(null),z=0,Y=0,q=0;Q.current&&Q.current.offsetParent&&(z=Q.current.offsetWidth,Y=Q.current.offsetLeft,q=Q.current.offsetParent.clientHeight-Q.current.offsetTop);let $=e=>e||{x:0,y:0},K=l.useRef(null);(0,l.useEffect)(()=>{K.current&&K.current.scrollToBottom()},[]);let J=[...new Set(t.map(e=>e.user.handle))],X=t.find(e=>e.id===f);return X?l.createElement(l.Fragment,null,l.createElement("div",{style:u.sx.flex1.$}),l.createElement(d.P,{className:"quick_reply_thread_view--bottomAnchoredScrollContainer--5-F87",useBottomPinning:!0,ref:K,enableScrollShadow:!0},l.createElement("div",{className:"quick_reply_thread_view--reverseColumn--ur8Yx"},t.slice().reverse().map((e,n)=>l.createElement(y.I,{editorRef:H,key:`thread-comment-${e.id}`,dispatch:g,user:i,thread:{comments:t,key:m,id:f},setHyperlinkLocation:W,hyperlinkLocation:G,setHyperlinkEditorRef:V,comment:e,typeahead:h,mentionables:r,prevAuthor:0===n?null:t[n-1].user_id,index:n,editingComment:v,submitEdit:L,dropdownShown:b,viewportPositionFromClientPosition:$,editorOnInsert:x.editorOnInsert,editorOnClear:x.editorOnClear,threadPosition:{x:0,y:0},setIsEditorFocused:o.lQ,showEditedIndicator:!!e.edited_at,hideOverflowMenu:s,hideReactions:!1,hideEmojiPicker:!1,allowAttachments:!1,hideResolve:!1,setResolved:o.lQ,mountInputFocused:!0,editorType:"comment-editor-thread",isQuickReplyThreadView:!0})))),l.createElement(C.K,{editorRef:B,dispatch:g,user:i,typeahead:h,mentionables:r,threadPosition:null,messageMeta:A,submitText:(0,_.t)("comments.reply"),placeholderText:(0,_.t)("comments.reply"),setHyperlinkLocation:W,hyperlinkLocation:G,setHyperlinkEditorRef:V,onCancel:o.lQ,onSubmit:()=>{P({threadId:f,threadUuid:X.uuid||void 0,uuid:(0,c.g)()})},onComposeFocus:void 0,editorOnInsert:x.editorOnClear,editorOnClear:x.editorOnInsert,viewportPositionFromClientPosition:$,isDisabled:!1,mountInputFocused:!0,updateMessage:F,setIsEditorFocused:o.lQ,isEmojiPickerDisabled:null!==v,hideEmojiPicker:!1,allowAttachments:!1,recordingKey:T.Dw.quickReply,className:O.MJ,threadId:f,fileKey:m,editingExistingComment:!1,editorType:"comment-editor-reply",authorNames:J,replyContainerRef:Q}),l.createElement(w.rf,{decoratorsRef:U,onClear:x.onClear,onInsert:x.onInsert,width:z,direction:S.ri.UPWARDS,positionFromBottom:{left:Y,bottom:q}}),l.createElement(M,null)):null}},368361:(e,t,i)=>{i.d(t,{R:()=>J});var l=i(411855),n=i(188507),a=i(776250),r=i(540193),o=i(201888),c=i(517333),s=i(799569),d=i(946689),_=i(493323),u=i(827586),m=i(939863),p=i(410424),E=i(74021),f=i(941381),g=i(225266),h=i(446686),v=i(442597),b=i(944682),N=i(662275),I=i(445092),T=i(115826),R=i(756085),w=i(27703),k=i(860178),y=i(820642),C=i(99506),S=i(691205),D=i(596607),O=i(555328),A=i(813408),P=i(754168),F=i(237870),L=i(488578),x=i(548593),U=i(761939),M=i(933464),B=i(133648),H=i(227565);let G=(0,x.rw)();function W(e){let[t,i]=l.useState();return l.useEffect(()=>{(0,o.oU)(location.href).then(e=>i(e))},[]),l.createElement("div",{className:H.bx},l.createElement("div",{className:H.Uz},e.tab===U.gr.PLUGINS?(0,m.t)("community.universal_posting_modal.desktop_callout.plugins"):(0,m.t)("community.universal_posting_modal.desktop_callout.widgets")),l.createElement(d.N_,{onClick:()=>{(0,a.sx)(t?"community_publish_open_desktop_clicked":"community_publish_get_desktop_clicked",{resourceType:e.tab===U.gr.PLUGINS?O.bD.PLUGIN:O.bD.WIDGET}),t&&(0,o.Sr)(location.href,o.B3.UNIVERSAL_POSTING_MODAL)},href:t?void 0:"https://www.figma.com/downloads/",className:H.nf,target:"_blank",trusted:!0},void 0===t?"":t?` ${(0,m.t)("community.universal_posting_modal.desktop_open")}`:` ${(0,m.t)("community.universal_posting_modal.desktop_get")}`))}function j(e){return e.selectedTab===U.gr.FILES?l.createElement(U.fV,{activeFileKey:e.activeFileKey,setActiveFile:e.setActiveFile,deselectActiveFile:e.deselectActiveFile,filterFn:e.filterFn}):e.selectedTab===U.gr.PLUGINS?l.createElement(Q,{activeResource:e.activeResource,setActiveResource:e.setActiveResource,deselectActiveResource:e.deselectActiveResource}):l.createElement(V,{activeResource:e.activeResource,setActiveResource:e.setActiveResource,deselectActiveResource:e.deselectActiveResource})}function V(e){let{invitedWidgets:t,pendingReviewWidgets:i,approvedWidgets:n,developmentWidgets:a}=(0,R.E$)(),r=t=>!!e.activeResource&&("localFileId"in e.activeResource&&"localFileId"in t?e.activeResource.localFileId===t.localFileId:"id"in e.activeResource&&"id"in t?e.activeResource.id===t.id:void 0);return c.eD?t.length+i.length+n.length+a.length===0?l.createElement(U.n6,{tab:U.gr.WIDGETS}):l.createElement("div",{className:H.BA,onClick:e.deselectActiveResource,role:"presentation"},t.map(e=>l.createElement(M.sp.Tile,{key:e.id,plugin:e,containerClassName:r(e)?H.Ij:H.$z})),a.map(t=>l.createElement(M.ke.Tile,{plugin:t,onClick:i=>{i.stopPropagation(),e.setActiveResource(t)},key:t.localFileId,containerClassName:r(t)?H.Ij:H.$z,showEditorTypeIcon:!0})),[...i,...n].map(t=>l.createElement(M.tY.Tile,{key:t.id,plugin:t,onClick:i=>{i.stopPropagation(),e.setActiveResource(t)},containerClassName:r(t)?H.Ij:H.$z}))):l.createElement(W,{tab:U.gr.WIDGETS})}function Q(e){let{invitedPlugins:t,pendingReviewPlugins:i,approvedPlugins:n,developmentPlugins:a}=(0,R.LR)(),r=t=>!!e.activeResource&&("localFileId"in e.activeResource&&"localFileId"in t?e.activeResource.localFileId===t.localFileId:"id"in e.activeResource&&"id"in t?e.activeResource.id===t.id:void 0);return c.eD?a.length+i.length+n.length+t.length===0?l.createElement(U.n6,{tab:U.gr.PLUGINS}):l.createElement("div",{className:H.BA,onClick:e.deselectActiveResource,role:"presentation"},t.map(e=>l.createElement(M.sp.Tile,{key:e.id,plugin:e,containerClassName:r(e)?H.Ij:H.$z})),a.map(t=>l.createElement(M.ke.Tile,{plugin:t,onClick:i=>{i.stopPropagation(),e.setActiveResource(t)},key:t.localFileId,containerClassName:r(t)?H.Ij:H.$z,showEditorTypeIcon:!0})),[...i,...n].map(t=>l.createElement(M.tY.Tile,{key:t.id,plugin:t,onClick:i=>{i.stopPropagation(),e.setActiveResource(t)},containerClassName:r(t)?H.Ij:H.$z}))):l.createElement(W,{tab:U.gr.PLUGINS})}function z(e){return c.eD?l.createElement("div",{className:H.q5},(0,m.t)("community.universal_posting_modal.plugin_info.available",{numPlugins:e.numPlugins})):l.createElement("div",{className:H.q5},(0,m.t)("community.universal_posting_modal.plugin_info.unavailable"))}function Y(e){return c.eD?l.createElement("div",{className:H.q5},(0,m.t)("community.universal_posting_modal.widget_info.available",{numWidgets:e.numWidgets})):l.createElement("div",{className:H.q5},(0,m.t)("community.universal_posting_modal.widget_info.unavailable"))}function q(e){let t;let i=(0,n.d4)(e=>e.user.email),a=(0,n.d4)(e=>e.orgById);if((0,n.d4)(e=>(0,D.Yj)(e))){let n=e.currentOrgId&&a[e.currentOrgId]?a[e.currentOrgId].name:null;t=l.createElement("div",{className:H.Js},n&&l.createElement(l.Fragment,null,n,l.createElement("span",null,"\xa0\xb7\xa0")),i)}else t=l.createElement("div",{className:H.Js},i);return l.createElement("div",{className:H.Yk},e.selectedTab===U.gr.FILES&&(0===e.numFiles?l.createElement("div",{className:H.q5},(0,m.t)("community.universal_posting_modal.file_info.available",{numFiles:e.numFiles})):l.createElement(U.IW,{query:e.searchQuery,setQuery:e.setSearchQuery,setSearchResults:e.setSearchResults})),e.selectedTab===U.gr.PLUGINS&&l.createElement(z,{numPlugins:e.numPlugins}),e.selectedTab===U.gr.WIDGETS&&l.createElement(Y,{numWidgets:e.numWidgets}),t)}function $(e){let t=(0,n.wA)(),i=(0,k.Pc)(),r=[],o={[U.gr.FILES]:(0,m.t)("community.view_bar.files"),[U.gr.PLUGINS]:(0,m.t)("community.view_bar.plugins"),[U.gr.WIDGETS]:(0,m.t)("community.view_bar.widgets")};return Object.keys(o).forEach(n=>{let c=o[n];r.push(l.createElement(G,{tab:n,mobileNavTabTitle:c,selectedTab:e.selectedTab,key:n,onClick:()=>{e.activeSearchQuery&&(t(I._z({})),t(I.ky())),(0,a.sx)("publish_type_changed",{userId:i.id,resourceType:c}),e.setSelectedTab(n)}},c))}),l.createElement("div",{className:H.Lm},l.createElement("div",{className:H.KE},r),l.createElement(s.s_,{className:H.g8,dispatch:()=>{(0,a.sx)("community_publish_modal",{step:T.M.CLOSED}),t(N.Ce())}}))}var K=(e=>(e[e.Fetched=0]="Fetched",e[e.Fetching=1]="Fetching",e[e.NeverFetched=2]="NeverFetched",e))(K||{});let J=(0,F.Ju)(function(e){let t=(0,k.Pc)(),i=(0,n.wA)(),o=(0,n.d4)(e=>!!e.user),c=(0,n.d4)(e=>e.currentUserOrgId),s=(0,r.ql)(c),D="loaded"===s.status,[F,x]=l.useState(2),[M,G]=l.useState({}),W=(0,R.Im)(),V=(0,w.ud)(),Q=(0,R.CI)(),z=(0,R.Dy)(),Y=Object.keys(V).length;(0,S.IT)((0,f.se)()),(0,S.IT)((0,f.fd)()),l.useEffect(()=>{i(I._z({})),o&&(i(E._J()),i(g.aq()));let e=document.body.style.overflowY;return document.body.style.overflowY="hidden",()=>{document.body.style.overflowY=e}},[]),l.useEffect(()=>{if(!D||2!==F)return;let e=s.data.map(e=>e.key);0!==e.length&&(x(1),P.S.getHubFileDuplicates({fileKeys:e}).then(e=>{G(e.data.meta),x(0)}))},[F,D,s.data]);let K=l.useCallback(e=>{let t=M[e.key],i=e.editor_type===C._Y.SLIDES;return!t&&!i},[M]),J=()=>{eo&&i(I.ky()),(0,a.sx)("community_publish_modal",{user:t.id,step:T.M.CLOSED}),i(N.Ce())},X=async e=>{await i(p.rH({fileKey:e}))},Z=async e=>{e&&(et(e),V[e.key]||i(b.yJ({file:e})),await X(e.key))},[ee,et]=l.useState(null),ei=()=>et(null),[el,en]=l.useState(null),[ea,er]=l.useState(U.gr.FILES),[eo,ec]=l.useState(""),[es,ed]=l.useState([]),e_=l.useCallback(e=>{ed(e&&e.filter(e=>K(e.model)))},[K]);if(!o)return l.createElement(l.Fragment,null);let eu=D&&0===F;return l.createElement(L.Nb,{size:"any",className:H.aq,hide:J},l.createElement($,{activeSearchQuery:eo,selectedTab:ea,setSelectedTab:er}),l.createElement(q,{selectedTab:ea,currentOrgId:c,searchQuery:eo,setSearchQuery:ec,setSearchResults:e_,numPlugins:Q,numWidgets:z,numFiles:Y}),l.createElement(u.P,{className:H.jG,hideScrollbar:!0},!eu&&l.createElement("div",{className:H.g4},l.createElement(_.kt,{size:"small"})),eo&&l.createElement(U.fp,{activeSearchQuery:eo,activeFileKey:(null==ee?void 0:ee.key)||null,setActiveFile:Z,deselectActiveFile:ei,searchResults:es}),eu&&!eo&&l.createElement(j,{selectedTab:ea,activeFileKey:(null==ee?void 0:ee.key)||null,setActiveFile:Z,deselectActiveFile:ei,activeResource:el,setActiveResource:en,deselectActiveResource:()=>en(null),filterFn:K})),l.createElement("div",{className:H.qr},l.createElement("div",{className:H.PJ},(0,m.t)("community.universal_posting_modal.footer.choose_resource"),l.createElement(d.CY,{href:"https://help.figma.com/hc/articles/360040035974-Publish-Community-files",target:"_blank",trusted:!0},(0,m.t)("community.universal_posting_modal.footer.learn_more"))),l.createElement("div",{className:H.GC},l.createElement(B.M4,{onClick:J},(0,m.t)("general.cancel")),l.createElement(B.UC,{disabled:ea===U.gr.FILES?!ee:ea===U.gr.PLUGINS||ea===U.gr.WIDGETS?!el:void 0,onClick:()=>{if(ea===U.gr.FILES)ee&&((0,a.sx)("community_publish_modal",{user:t.id,step:T.M.DETAILS,resourceType:O.bD.HUB_FILE,fileKey:ee.key,fileName:ee.name}),i((0,h.t)({fileKey:ee.key,isFullscreenOpen:!1,entryPoint:A.k2.UNIVERSAL_POSTING,canvasThumbnailPromise:(0,y.$2)(ee.key,t),source:e.source})),et(null));else if((ea===U.gr.PLUGINS||ea===U.gr.WIDGETS)&&el){let e="localFileId"in el?el:W[el.id],l=e.localFileId;(0,a.sx)("community_publish_modal",{user:t.id,step:T.M.DETAILS,resourceType:ea===U.gr.PLUGINS?O.bD.PLUGIN:O.bD.WIDGET,pluginId:e.plugin_id,pluginName:e.name,localFileId:l}),i((0,v.r)({localFileId:l,entryPoint:A.k2.UNIVERSAL_POSTING})),en(null)}}},(0,m.t)("general.next")))))},"Universal Posting Modal")},706638:(e,t,i)=>{i.d(t,{P:()=>F,v:()=>D});var l=i(411855),n=i(188507),a=i(539321);if(443==i.j)var r=i(395096);var o=i(776250),c=i(358145),s=i(395900),d=i(268537),_=i(493323),u=i(135876),m=i(827586),p=i(32863),E=i(574176),f=i(939863),g=i(738269),h=i(852800),v=i(15859),b=i(318812),N=i(29680),I=i(463592),T=i(103271),R=i(720488),w=i(406158),k=i(780634);if(443==i.j)var y=i(949207);if(443==i.j)var C=i(156238);if(443==i.j)var S=i(432023);var D=(e=>(e.LOADED="post-to-feed-view-loaded",e.SELECT_NODE="post-to-feed-select-node",e))(D||{});function O(e){return l.createElement("div",{className:null!==e.isSelectedIdx?k.El:k.Vs,onClick:e.onClick,role:"button",tabIndex:0,ref:t=>{t&&e.observe(t)},"data-observer-guid":e.node.guid},l.createElement("div",{className:k.h3,style:{backgroundColor:e.backgroundColor}},l.createElement(u.x,{isLoading:!e.thumbnailUrl},()=>l.createElement("img",{className:k.xn,src:e.thumbnailUrl,alt:"",draggable:!1}))),l.createElement("div",{className:k.JO},l.createElement("div",{className:k.qp},e.node.name)),null!==e.isSelectedIdx&&1!==e.totalNumSelected&&l.createElement("div",{className:k.Jx},e.isSelectedIdx+1))}function A(e){let{toggleSelectNode:t}=e,i=(e.pageNode&&(0,a.colorToHex)(e.pageNode.backgroundColor))??"",[n,r]=l.useState(!1),o=l.useCallback(l=>{t(l,{pageId:e.pageNode.guid,pageBackgroundColor:i})},[t,e.pageNode.guid,i]);return l.createElement("div",{className:k.RW},e.showCollapsibleHeader&&l.createElement("div",{className:k.Vr,onClick:()=>r(e=>!e),role:"button",tabIndex:0},n?l.createElement(E.B,{svg:S.A,className:k.Rq}):l.createElement(E.B,{svg:y.A,className:k.Rq}),e.pageNode.name,"\xa0",l.createElement("span",{className:k.Du},"\xb7 ",e.nodes.length)),!n&&l.createElement("div",{className:k.Mc},e.nodes.map(t=>{var n,a,r;let c=(null==(n=e.selectedNodeGuids)?void 0:n.indexOf(t.guid))??null;return l.createElement(O,{key:`node-${t.guid}`,node:t,thumbnailUrl:(null==(a=e.thumbnailByGuid[t.guid])?void 0:a.url)??"",backgroundColor:i,isSelectedIdx:-1===c?null:c,onClick:()=>o(t.guid),totalNumSelected:(null==(r=e.selectedNodeGuids)?void 0:r.length)??null,observe:e.observe})})))}let P="feed-post-page-selector-menu";function F(){let e=l.useCallback((e,t)=>{let i=window.parent;window.self.origin===i.origin&&i&&i.postMessage({type:e,data:t})},[]),t=l.useRef(new s.jk("feed_post_to_file_load",{}));l.useEffect(()=>{t.current.start()},[]);let i=(0,N.aV)(),a=(0,N.eY)(),u=(0,n.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.key});l.useEffect(()=>{if(!i){t.current.stop();let i=t.current.getElapsedTime();(0,o.sx)("team_feed.post_from_file.file_load",{elapsedMs:i,fileKey:u}),e("post-to-feed-view-loaded",!0)}},[i,e,u]);let y=(0,n.d4)(e=>e.mirror.appModel.pagesList),S=l.useMemo(()=>y.reduce((e,t)=>({...e,[t.nodeId]:a.get(t.nodeId)}),{}),[y,a]),D=(0,n.wA)(),O=l.useMemo(()=>Object.values(S).flatMap(e=>e?e.uiOrderedChildren.map(t=>{let i=a.get(t);return i&&("FRAME"===i.type||"SECTION"===i.type)?{...i,pageId:e.guid,name:null==i?void 0:i.name}:null}).filter(e=>e):[]).filter(e=>null!==e),[S,a]),F=l.useMemo(()=>{let e={};for(let t of O)e[t.pageId]?e[t.pageId].push(t):e[t.pageId]=[t];return e},[O]),L=l.useMemo(()=>new I.Ef(O,{keys:["name"]}),[O]),[x,U]=l.useState(""),[M,B]=l.useState(null),[H]=(0,r.A)(x,200),G=l.useCallback(e=>{B(L.search(e))},[L]),W=l.useMemo(()=>{if(null===M)return null;let e={};for(let t of M)e[t.pageId]?e[t.pageId].push(t):e[t.pageId]=[t];return e},[M]);l.useEffect(()=>{""!==H&&G(H)},[H,G]);let j=(0,b.Um)(),V=l.useRef(null),[Q,z]=l.useState(null);l.useEffect(()=>{if(Q||!a||!F||0===Object.keys(F).length)return;let e=a.get(Object.keys(F)[0]);e&&z(e)},[Q,F,a]);let[Y,q]=l.useState({}),[$,K]=l.useState([]),J=(0,c.ZC)($),X=l.useRef(null),[Z,ee]=l.useState([]),et=l.useCallback(e=>{let t=[];e.forEach(e=>{var i;if(e.isIntersecting&&e.target instanceof HTMLElement){let l=null==(i=e.target.dataset)?void 0:i.observerGuid;l&&t.push(l)}}),ee(t)},[]),ei=l.useMemo(()=>new IntersectionObserver(et,{threshold:[.25]}),[et]),el=l.useCallback(e=>{ei&&ei.observe(e)},[ei]),[en,ea]=l.useState({});l.useEffect(()=>{if(0===Z.length)return;let e=Z.filter(e=>!en[e]);0!==e.length&&(0,v.Jr)().loadAllImagesUnder(e,h.MoD.NON_ANIMATED_ONLY,"feed.postFromFile").then(()=>{e.forEach(e=>{setTimeout(()=>{ea(t=>{if(t[e])return t;let i=(0,w.BO)(e);return{...t,[e]:{url:URL.createObjectURL(new Blob([i])),data:i}}})},0)})})},[Z,en]),l.useEffect(()=>{$!==J&&e("post-to-feed-select-node",$.map(e=>({guid:e,thumbnail:en[e].data,backgroundColor:Y[e]})))},[J,$,e,en,Y]);let er=l.useCallback((e,t)=>{en[e]&&(q(i=>t.pageBackgroundColor?{...i,[e]:t.pageBackgroundColor}:i),K(t=>t.includes(e)?t.filter(t=>e!==t):t.length>=T.e3?t:[...t,e]))},[en]);return F&&0===Object.keys(F).length?l.createElement("div",{className:k.se},(0,f.t)("fig_feed.no_top_level_nodes")):Q?l.createElement("div",{className:k.kL},l.createElement("div",{className:k.Y},l.createElement(p.IW,{query:x,className:k.ON,onChange:U,clearSearch:()=>{U(""),B(null)},focusOnMount:!1,iconClassName:k.qc,placeholder:(0,f.t)("fig_feed.search_frames")}),""===x&&l.createElement(l.Fragment,null,l.createElement("div",{role:"button",ref:V,onClick:()=>{(null==j?void 0:j.type)===P?D(g.oB()):D(g.j7({type:P}))},tabIndex:0,className:k.YZ},l.createElement("div",null,Q.name),l.createElement(E.B,{svg:C.A,width:"8px",autosize:!0})),V.current&&(null==j?void 0:j.type)===P&&l.createElement(R.Cf,{showPoint:!1,targetRect:V.current.getBoundingClientRect(),propagateCloseClick:!0},Object.keys(F).map(e=>l.createElement(d.MM,{key:e,onClick:()=>z(S[e]),checked:Q.guid===e},S[e].name))))),l.createElement(m.P,{hideScrollbar:!0,className:k.jG,innerClassName:k.hu,scrollContainerRef:X},""===x&&l.createElement(A,{pageNode:Q,nodes:F[Q.guid]||[],thumbnailByGuid:en,selectedNodeGuids:$,toggleSelectNode:er,observe:el}),""!==x&&(null===W?l.createElement("div",{className:k.Do},l.createElement(_.kt,{size:"large"})):Object.entries(W).length>0?Object.entries(W).map(([e,t])=>l.createElement(A,{key:e,pageNode:S[e],nodes:t,thumbnailByGuid:en,selectedNodeGuids:$,toggleSelectNode:er,showCollapsibleHeader:!0,observe:el})):l.createElement("div",{className:k.Lp},l.createElement("div",null,(0,f.tx)("fig_feed.no_frames_matching",{searchQuery:l.createElement(l.Fragment,null,l.createElement("span",{className:k.ZF},x))})))))):null}},313496:(e,t,i)=>{i.d(t,{g:()=>s});var l=i(411855),n=i(629019),a=i.n(n),r=i(574176),o=i(762638),c=i(783423);let s=l.forwardRef((e,t)=>{let i=o.cx.h16.w16.ml1.flex.justifyCenter.itemsCenter.with({colorIconOnbrand:e.isOnBrandColor,colorIcon:!e.isOnBrandColor}).$;return l.createElement("button",{className:a()("dropdown_button--button--BR3bZ",e.buttonClassName,{"dropdown_button--active--ZkglI":e.isShowingDropdown}),onClick:e.onClick,ref:t,"data-testid":e.dataTestId,"aria-label":e["aria-label"]},e.children,l.createElement(r.B,{svg:c.A,className:i}))})},457215:(e,t,i)=>{i.d(t,{To:()=>o,hK:()=>r});var l=i(939863);function n(){return[{text:(0,l.t)("help_widget.collective_upsells.fullscreen.unlimited_creation"),id:"unlimited_creation"},{text:(0,l.t)("help_widget.collective_upsells.fullscreen.shared_design_systems"),id:"shared_design_systems"},{text:(0,l.t)("help_widget.collective_upsells.fullscreen.advanced_prototyping"),id:"advanced_prototyping"},{text:(0,l.t)("help_widget.collective_upsells.fullscreen.enhanced_privacy"),id:"enhanced_privacy"},{text:(0,l.t)("help_widget.collective_upsells.fullscreen.decision_making_tools"),id:"decision_making_tools"}]}function a(){return{unlimited_creation:[{headerText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.unlimited_creation.better_organization.title"),descriptionText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.unlimited_creation.better_organization.description"),imgSrc:"https://static.figma.com/uploads/c342f4d4d591928504af7cfabbb30556617d9acb",url:"https://help.figma.com/hc/articles/1500005554982-Guide-to-files-and-projects#Projects",loadingColor:"var(--color-bg-brand-tertiary)"},{headerText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.unlimited_creation.unlimited_files.title"),descriptionText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.unlimited_creation.unlimited_files.description"),imgSrc:"https://static.figma.com/uploads/fd06e0abcc52d324ff782bcfce9c21844ab0a946",url:"https://help.figma.com/hc/articles/1500005554982-Guide-to-files-and-projects#files",loadingColor:"var(--color-bg-brand-tertiary)"},{headerText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.unlimited_creation.unlimited_boards.title"),descriptionText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.unlimited_creation.unlimited_boards.description"),imgSrc:"https://static.figma.com/uploads/f2009c194bd4ada5fcef6c54ea0063d7daa3627f",url:"https://help.figma.com/hc/articles/15300412458647-Explore-FigJam-files",loadingColor:"var(--color-bg-component-tertiary)"},{headerText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.unlimited_creation.version_history.title"),descriptionText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.unlimited_creation.version_history.description"),imgSrc:"https://static.figma.com/uploads/68ef770df03dec9fa3e69f2b40df9eec6d4e6166",url:"https://help.figma.com/hc/articles/360038006754-View-a-file-s-version-history",loadingColor:"var(--color-bg-brand-tertiary)"},{headerText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.unlimited_creation.unlimited_pages.title"),descriptionText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.unlimited_creation.unlimited_pages.description"),imgSrc:"https://static.figma.com/uploads/91999ee4abb04a50873c16d23383f724e24b13ed",url:"https://help.figma.com/hc/articles/360038511293-Create-and-manage-pages",loadingColor:"var(--color-bg-brand-tertiary)"}],shared_design_systems:[{headerText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.shared_design_systems.component_libraries.title"),descriptionText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.shared_design_systems.component_libraries.description"),imgSrc:"https://static.figma.com/uploads/a645a186fea60ff15fd9e1878bd52ceaae425a57",url:"https://help.figma.com/hc/articles/360025508373-Publish-a-library",loadingColor:"var(--color-bg-warning-tertiary)"},{headerText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.shared_design_systems.variable_modes.title"),descriptionText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.shared_design_systems.variable_modes.description"),imgSrc:"https://static.figma.com/uploads/1c2427045d0b2ce56265271afb85de51b7742364",url:"https://help.figma.com/hc/articles/15343816063383-Modes-for-variables",loadingColor:"var(--color-bg-warning-tertiary)"},{headerText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.shared_design_systems.variables_in_prototyping.title"),descriptionText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.shared_design_systems.variables_in_prototyping.description"),imgSrc:"https://static.figma.com/uploads/13ec0b16486b7a7882491385ef8dff27b4046be7",url:"https://help.figma.com/hc/articles/14506587589399-Use-variables-in-prototypes",loadingColor:"var(--color-bg-warning-tertiary)"}],advanced_prototyping:[{headerText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.advanced_prototyping.expressions.title"),descriptionText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.advanced_prototyping.expressions.description"),imgSrc:"https://static.figma.com/uploads/8aaf35d51fab3b28f40abbc1cca114bad73c6104",url:"https://help.figma.com/hc/articles/15253194385943-Use-expressions-in-prototypes",loadingColor:"var(--ramp-pink-100-light)"},{headerText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.advanced_prototyping.conditionals.title"),descriptionText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.advanced_prototyping.conditionals.description"),imgSrc:"https://static.figma.com/uploads/d70fae15738cd8f3e03df3997823c315ef4e9d9b",url:"https://help.figma.com/hc/articles/15253220891799-Multiple-actions-and-conditionals#h_01H91GHXRHGN8K801ZZCPV99FA",loadingColor:"var(--ramp-pink-100-light)"},{headerText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.advanced_prototyping.multiple_actions.title"),descriptionText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.advanced_prototyping.multiple_actions.description"),imgSrc:"https://static.figma.com/uploads/eed92994038b1d31ae0a6b55518a5f93bb8494c6",url:"https://help.figma.com/hc/articles/15253220891799-Multiple-actions-and-conditionals#h_01H91GHXRG38YKPARR7J436DTG",loadingColor:"var(--ramp-pink-100-light)"},{headerText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.advanced_prototyping.video_in_prototypes.title"),descriptionText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.advanced_prototyping.video_in_prototypes.description"),imgSrc:"https://static.figma.com/uploads/72d301c7668fe485cfb7bb82e2a2e6d7cdcbaf82",url:"https://help.figma.com/hc/articles/8878274530455-Use-videos-in-prototypes",loadingColor:"var(--ramp-pink-100-light)"}],enhanced_privacy:[{headerText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.enhanced_privacy.password_protection.title"),descriptionText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.enhanced_privacy.password_protection.description"),imgSrc:"https://static.figma.com/uploads/f0f0b3f8cdca6efd146423bd62bd6d28938bde97",url:"https://help.figma.com/hc/articles/5726720100247-Add-password-protection-to-files",loadingColor:"var(--ramp-pink-100-light)"},{headerText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.enhanced_privacy.private_projects.title"),descriptionText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.enhanced_privacy.private_projects.description"),imgSrc:"https://static.figma.com/uploads/373e72d04adfa59a21741a98e48dcbcbf706cd34",url:"https://help.figma.com/hc/articles/13839214115607-Professional-plan-permissions#projects",loadingColor:"var(--ramp-pink-100-light)"},{headerText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.enhanced_privacy.prototype_only_sharing.title"),descriptionText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.enhanced_privacy.prototype_only_sharing.description"),imgSrc:"https://static.figma.com/uploads/abfb7962b2a669d9bddbc39ef9ce2f11d858fcc7",url:"https://help.figma.com/hc/articles/360040531773",loadingColor:"var(--ramp-pink-100-light)"},{headerText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.enhanced_privacy.project_transfer.title"),descriptionText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.enhanced_privacy.project_transfer.description"),imgSrc:"https://static.figma.com/uploads/a093bcd98a4261ab49ea734a6d6284cfc4ace6b9",url:"https://help.figma.com/hc/articles/10250387712407-Transfer-a-project-or-team-to-a-different-company",loadingColor:"var(--ramp-pink-100-light)"}],decision_making_tools:[{headerText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.decision_making_tools.audio_conversations.title"),descriptionText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.decision_making_tools.audio_conversations.description"),imgSrc:"https://static.figma.com/uploads/42dacd2ef787d922ed8a0ab58dcfe3e57df42eb0",url:"https://help.figma.com/hc/articles/1500004414622-Use-audio-to-chat-with-your-team",loadingColor:"var(--ramp-pale_blue-200-light)"},{headerText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.decision_making_tools.voting.title"),descriptionText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.decision_making_tools.voting.description"),imgSrc:"https://static.figma.com/uploads/9c0d1a0fdad559ef908062c6cbfa4703859b882e",url:"https://help.figma.com/hc/articles/9359912208663-Run-voting-sessions-in-FigJam",loadingColor:"var(--ramp-pale_blue-200-light)"},{headerText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.decision_making_tools.open_figjam_sessions.title"),descriptionText:(0,l.t)("help_widget.collective_upsells.fullscreen.card.decision_making_tools.open_figjam_sessions.description"),imgSrc:"https://static.figma.com/uploads/7b5794979bea63a4b3588a8da1ce3ebc94ee9dfc",url:"https://help.figma.com/hc/articles/4410786053911-Invite-visitors-to-an-open-session",loadingColor:"var(--ramp-pale_blue-200-light)"}]}}function r(){return{panelTabs:n(),contents:a(),panelTitle:(0,l.t)("help_widget.collective_upsells.fullscreen.panel_tab_header"),contentTitle:(0,l.t)("help_widget.collective_upsells.fullscreen.content_title"),ctaPrimaryText:(0,l.t)("help_widget.collective_upsells.fullscreen.upgrade_btn")}}function o(){return{panelTabs:n(),contents:a(),panelTitle:(0,l.t)("pro_onboarding.pro_feature_modal.as_a_professional_team_you_get"),ctaPrimaryText:(0,l.t)("pro_onboarding.pro_feature_modal.got_it")}}},476932:(e,t,i)=>{i.d(t,{n:()=>k,I:()=>I});var l=i(411855),n=i(188507),a=i(629019),r=i.n(a),o=i(711117),c=i(752553),s=i(799569),d=i(762638),_=i(939863),u=i(175290),m=i(553015),p=i(809840),E=i(101505),f=i(672517),g=i(710667),h=i(720647),v=i(574468),b=i(820113),N=i(488578),I=(e=>(e[e.SMALL=0]="SMALL",e[e.LARGE=1]="LARGE",e))(I||{});function T({headerText:e,descriptionText:t,imgSrc:i,loadingColor:n}){return l.createElement(u.Y,{direction:"vertical",verticalAlignItems:"start",strokeColor:"default",strokeWidth:1,cornerRadius:6,spacing:0,height:"fill-parent"},l.createElement(l.Suspense,{fallback:l.createElement("div",{className:"fullscreen_help_upsells_modal_base--cardPlaceholder--j3U6P",style:{backgroundColor:n}})},l.createElement("img",{alt:e,className:"fullscreen_help_upsells_modal_base--cardImage--HNMiP",src:i,width:189,height:146})),l.createElement("div",{className:d.cx.p12.pl10.pr10.flex.flexColumn.gap2.$},l.createElement(p.E,{fontSize:13,fontWeight:"medium",color:"default"},e),l.createElement("div",{className:d.cx.minH32.$},l.createElement(p.E,{fontSize:11,color:"secondary"},t))))}function R({isClickable:e,url:t,...i}){return e&&void 0!==t?l.createElement(f.L0,{href:t,target:"_blank",className:"fullscreen_help_upsells_modal_base--clickableCard--056mH",trackingProperties:{card:i.headerText}},l.createElement(T,{...i})):l.createElement(T,{...i})}function w(){let e=(0,g.N1)(g.Fq.UPSELL_MODALS),[t]=(0,c.mI)(e),i=(0,b.LN)(),n=new b.vr(i),a=(0,v.G7)(t.data,i,h.lM.DESIGN),r=(0,v.G7)(t.data,i,h.lM.FIGJAM);return l.createElement(u.Y,{padding:14,direction:"vertical",verticalAlignItems:"end"},l.createElement("div",{className:"fullscreen_help_upsells_modal_base--priceContainer--XWuz1"},l.createElement("div",{className:d.cx.wHalf.flex.flexColumn.gap8.$,"data-testid":"fullscreen_help_upsells_modal_pricing_text_design"},l.createElement(p.E,{color:"design",fontSize:11,fontWeight:"semi-bold"},(0,_.tx)("help_widget.collective_upsells.fullscreen.price_title.figma_design")),l.createElement(p.E,{fontWeight:"semi-bold",fontSize:18},n.formatMoney(a))),l.createElement("div",{className:"fullscreen_help_upsells_modal_base--priceContainerDivider--zsPMB"}),l.createElement("div",{className:d.cx.wHalf.flex.flexColumn.gap8.$,"data-testid":"fullscreen_help_upsells_modal_pricing_text_figjam"},l.createElement(p.E,{color:"figjam",fontSize:11,fontWeight:"semi-bold"},(0,_.tx)("help_widget.collective_upsells.fullscreen.price_title.figjam")),l.createElement(p.E,{fontWeight:"semi-bold",fontSize:18},n.formatMoney(r)))),l.createElement("div",{className:d.cx.p4.pt0.$},l.createElement(p.E,{color:"secondary",fontSize:11},(0,_.tx)("help_widget.collective_upsells.fullscreen.price.disclaimer.seat_rename"))))}function k({panelTabs:e,panelTitle:t,modalProps:i,contentTitle:a,contents:c,ctaPrimaryText:_,clickPrimaryBtn:g,secondaryBtn:h,dismissModal:v,showPricing:b=!0,panelTitleSize:I=0,cardsClickable:T}){let[k,y]=(0,l.useState)(e[0].id),C=(0,n.wA)(),S=1===I?l.createElement("div",{className:d.cx.p16.pt14.pb36.$},l.createElement(p.E,{fontSize:18,fontWeight:"semi-bold"},t)):l.createElement("div",{className:d.cx.p16.pt14.pb4.$},l.createElement(p.E,{fontSize:13,color:"secondary"},t)),D=e.map(e=>l.createElement(f.jm,{role:"button",tabIndex:0,key:e.id,className:r()("fullscreen_help_upsells_modal_base--panelTabs--WjAUp",k===e.id&&"fullscreen_help_upsells_modal_base--panelTabsActive--cM4NL"),onClick:()=>{y(e.id)},trackingProperties:{tab:e.id,prevTab:k}},l.createElement(p.E,{fontSize:13},e.text))),O=c[k].map((e,t)=>l.createElement(R,{key:k+e.headerText+t,isClickable:T,...e}));return l.createElement(l.Suspense,null,l.createElement(f.fu,{name:"FullscreenHelpUpsellsModalBase"},l.createElement(N.Nb,{size:900,className:"fullscreen_help_upsells_modal_base--largeModal--8j2D0",...i,hide:v},l.createElement(o.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5}},l.createElement(u.Y,{verticalAlignItems:"start",height:604,spacing:0},l.createElement(u.Y,{direction:"vertical",width:230,strokeWidth:{right:1},padding:0,spacing:0,strokeColor:"default",height:"fill-parent",verticalAlignItems:"start"},l.createElement(u.M,{minSize:16}),l.createElement(u.Y,{direction:"vertical",height:"fill-parent",spacing:0},t&&S,D),b&&l.createElement(w,null)),l.createElement(u.Y,{direction:"vertical",height:"fill-parent",spacing:0},l.createElement("div",{className:d.cx.pl32.pt24.pb20.$},a&&l.createElement(p.E,{fontSize:20,fontWeight:"semi-bold"},a),l.createElement(s.s_,{customStyle:{right:"8px",top:"8px"},dispatch:C,onClose:v,trackingProperties:{trackingDescriptor:E.c.CLOSE}})),l.createElement("div",{className:d.cx.wFull.hFull.overflowAuto.$},l.createElement("div",{className:d.cx.pl32.pb24.$},l.createElement(u.Y,{spacing:16,verticalAlignItems:"start",direction:"vertical"},l.createElement("div",{className:"fullscreen_help_upsells_modal_base--cardGrid--Yss71"},O)))),l.createElement(u.Y,{height:64,padding:16,horizontalAlignItems:"end",strokeColor:"default",strokeWidth:{top:1}},h,l.createElement(m.V,{variant:"primary",onClick:g},_))))))))}},112967:(e,t,i)=>{i.d(t,{A:()=>c});var l=i(411855),n=i(629019),a=i.n(n),r=i(30637),o=i(762638);function c(e){let t=l.useRef(null),i=l.useRef(null);l.useEffect(()=>{if(t.current&&!i.current&&!(0,r.Lg)()){let l=document.getElementById(e.loadingElementId);i.current=l.cloneNode(!0)??null,t.current.appendChild(i.current)}},[e.loadingElementId,t]);let n={animationDelay:`${e.delay??0}ms`};return l.createElement(l.Fragment,null,l.createElement("div",{ref:t,className:a()(e.loadingElementClassName,o.cx.eventsNone.absolute.top0.left0.right0.bottom0.overflowHidden.opacity1.$,{"loading_page--fadeOut--Ho-om":e.loaded}),style:n}),e.loaded&&e.children)}},899028:(e,t,i)=>{i.d(t,{H:()=>a});var l=i(411855),n=i(860601);let a=l.createContext({shouldShowChevron:e=>!1,onClick:()=>!1,onMouseEnter:n.lQ,onMouseMove:n.lQ,onRemove:n.lQ})},987900:(e,t,i)=>{i.d(t,{IP:()=>ez,fd:()=>n,he:()=>eQ,ql:()=>eV});var l,n,a=i(411855),r=i(188507),o=i(629019),c=i.n(o),s=i(297666),d=i(517333),_=i(179479),u=i(358145),m=i(27087),p=i(946689),E=i(493323),f=i(827586),g=i(939863),h=i(392592),v=i(738269),b=i(140908),N=i(988022),I=i(860178),T=i(395116),R=i(369351),w=i(516289),k=i(296210),y=i.n(k),C=i(934480),S=i(564577),D=i(574176),O=i(881388),A=i(178466),P=i(67294),F=i(168039),L=i(959232),x=i(558867),U=i(127391),M=i(899028);let B="block_kit_row--rowTop--4zNja",H="block_kit_row--metadataContainer--tcs33",G="block_kit_row--usersContainer--J5oFI",W="block_kit_row--usersContainerStructuredView--PUPYI",j="block_kit_row--quickReplyChevron--0rKX3",V="block_kit_row--chevronIcon--2uviD",Q="block_kit_row--imagePreview--CqQsi";var z=i(163119);function Y(e){return a.createElement("span",{className:"block_kit_row--htmlTextBlock--wINSP",dangerouslySetInnerHTML:{__html:y().sanitize(e.block.html_text)}})}function q(e){let t=(0,C.UF)(e.block.emoji_shortcode)[0];return t.meta?a.createElement("span",{className:"block_kit_row--emojiUnicode--qBoed"},t.unicode):a.createElement(a.Fragment,null)}function $(e){return e?e.map((e,t)=>"HtmlTextBlock"===e._block_type?a.createElement(Y,{key:t,block:e}):a.createElement(q,{key:t,block:e})):[]}function K(e){let{block:t,size:i}=e;return a.createElement(x.Ro,{entity:{...t,id:t.entity_id},size:i,hideFallbackInitial:!1,shape:t.shape.toUpperCase()})}function J(e){let{block:t}=e;return a.createElement("div",{className:`${Q} thumbnail_DEPRECATED--tileThumbnail--4kE7l`,style:{background:`url(${(0,L.A)()})`}},a.createElement("div",{className:"thumbnail_DEPRECATED--thumbnailContainer--xPcsg",style:{backgroundColor:(e=>{if(!e||0===e.alpha)return"transparent";let{red:t,green:i,blue:l,alpha:n}=e;return`rgba(${255*t|0}, ${255*i|0}, ${255*l|0}, ${n})`})(t.background_color)}},a.createElement("div",{className:"thumbnail_DEPRECATED--thumbnail--WuuvA thumbnail_DEPRECATED--baseThumbnail--8p9z4",style:{backgroundImage:`url(${t.img_url})`}})))}function X(e){let{block:t}=e;return a.createElement("div",{className:"block_kit_row--square--vD5SO"},a.createElement("div",{className:Q,style:{backgroundImage:`url(${t.img_url})`}}))}function Z(e){let{avatars:t}=e;return 0===t.length?null:t.length>1?a.createElement("div",{className:G},a.createElement("div",{className:"block_kit_row--secondaryUser--hkjpm"},a.createElement(K,{block:t[1],size:P.Pf.MEDIUM})),a.createElement("div",{className:"block_kit_row--primaryUser--lg4hR"},a.createElement(K,{block:t[0],size:P.Pf.MEDIUM}))):a.createElement("div",{className:G},a.createElement(K,{block:t[0],size:P.Pf.LARGE}))}function ee(e){let{avatars:t,icon:i}=e;return 0===t.length?null:t.length>1?a.createElement("div",{className:W},a.createElement("div",{className:"block_kit_row--secondaryUserRevamp--ZkcO7"},a.createElement(K,{block:t[1],size:P.Pf.MEDIUM})),a.createElement("div",{className:"block_kit_row--primaryUserRevamp--XYq-9"},a.createElement(K,{block:t[0],size:P.Pf.MEDIUM})),i&&a.createElement(et,{icon:i})):a.createElement("div",{className:W},a.createElement(K,{block:t[0],size:P.Pf.LARGE}),i&&a.createElement(et,{icon:i}))}function et(e){let{icon:t}=e,i="dark"===(0,F.DP)(),l=new Set(["https://static.figma.com/uploads/fc8b3d0c889b51bd8800945089e8b473ff4d619d"]);return a.createElement("div",{className:"block_kit_row--icon--YApgQ"},"ImageThumbnailBlock"===t._block_type?a.createElement("img",{className:`block_kit_row--iconImg--SRdFH ${!l.has(t.img_url)&&i?"block_kit_row--iconInvert--7YBRA":""}`,src:t.img_url,alt:""}):a.createElement(q,{block:t}))}function ei(e){let t=(0,r.wA)(),{block:i,callbacks:l,isPrimary:n=!0}=e,o=async()=>{let e=l.buildNotificationActionRequest(i.notification_action);await e.then(({data:e})=>{if(i.hide_after_action)l.hideNotification();else if(l.followLinkIfPossible(),e.meta.updated_notification_blob){let t=e.meta.updated_notification_blob;l.updateNotification(t.notification_id,t)}},()=>{let e="resolve"===i.notification_action?(0,g.t)("user_notification.an_error_occurred_while_clicking_this_notification"):(0,g.t)("user_notification.an_error_occurred_while_removing_this_notification");t(O.s.error(e))})},c=$([i.text]);return n?a.createElement(p.$$,{className:"block_kit_row--acceptButton--1Fa1c",onClick:o},c):a.createElement(p.nR,{className:"block_kit_row--rejectButton--Hu8KY",onClick:o},c)}function el(e){let{block:t,actionBlockCallbacks:i}=e;return a.createElement("div",{className:"block_kit_row--rowBottom--dKrKA"},a.createElement(ei,{block:t.secondary_action,callbacks:i,isPrimary:!1}),a.createElement(ei,{block:t.primary_action,callbacks:i,isPrimary:!0}))}function en(e){let{block:t,plan:i,shouldShowChevron:l}=e;switch(t._block_type){case"BodyAndThumbnailBlock":return a.createElement(ea,{block:t,plan:i,shouldShowChevron:l});case"SplitlineTitleAndBodyBlock":return a.createElement(er,{block:t,shouldShowChevron:l})}}function ea(e){let{block:t,plan:i,shouldShowChevron:l}=e;return a.createElement(a.Fragment,null,a.createElement("div",{className:"block_kit_row--contentContainer--ZbpO2 text--fontPos11--2LvXf text--_fontBase--QdLsd"},a.createElement("div",{className:"block_kit_row--content--52-rY"},a.createElement("div",null,$(t.title)),a.createElement("div",{className:H},a.createElement("div",{className:"block_kit_row--textContainer--168xh"},t.description&&a.createElement("div",{className:"block_kit_row--notificationDescription--lMjfr ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k"},$(t.description)),a.createElement("div",{className:"block_kit_row--fromNow--ryp9b"},i&&a.createElement(a.Fragment,null,a.createElement(U.H,{entityId:i.id.toString(),entityName:i.name,imgUrl:i.img_url||void 0}),(0,w.gN)(i.name,21),a.createElement("div",{className:"block_kit_row--planDivider--XnNq8"},"\xb7")),a.createElement(S.h1,{date:t.created_at,style:"short"}))),l&&a.createElement("div",{className:j},a.createElement(D.B,{svg:z.A,className:V}))))),(()=>{if(!t.thumbnail)return null;let e=t.thumbnail;switch(e._block_type){case"AvatarBlock":return a.createElement(K,{block:e,size:P.Pf.XLARGE});case"ImageThumbnailBlock":return a.createElement(X,{block:e});case"FileThumbnailBlock":return a.createElement(J,{block:e})}})())}function er(e){let{block:t,shouldShowChevron:i}=e;return a.createElement("div",{className:"block_kit_row--contentContainerRevamp--voNSM text--fontPos11--2LvXf text--_fontBase--QdLsd"},a.createElement("div",{className:"block_kit_row--titleAndTimestamp--30RnS"},a.createElement("div",{className:"block_kit_row--title--gqwu-"},$(t.title)),a.createElement(eu,{createdAt:t.created_at})),a.createElement("div",{className:H},a.createElement("div",{className:"block_kit_row--subtitle--jIRsg"},$(t.subtitle)),t.description&&a.createElement("div",{className:"block_kit_row--notificationDescriptionStructuredView--yUeTV ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k"},$(t.description)),i&&a.createElement("div",{className:"block_kit_row--quickReplyChevronContainer--yONp2"},a.createElement("div",{className:j},a.createElement(D.B,{svg:z.A,className:V})))))}function eo(e){let{notification:t}=e;return(0,b.ro)()?a.createElement(ec,{notification:t,children:e.children}):a.createElement("div",{className:B},t.is_unread?a.createElement("div",{className:(0,T.fN)()?"block_kit_row--unreadBlueDot--RNyJ7 block_kit_row--unreadDot--e-8EJ":"block_kit_row--unreadDot--e-8EJ"}):null,a.createElement(Z,{avatars:t.avatars}),e.children)}function ec(e){let{notification:t}=e;return a.createElement("div",{className:B},t.is_unread?a.createElement("div",{className:(0,T.fN)()?"block_kit_row--unreadBlueDotStructuredView--FGqRN block_kit_row--unreadDotStructuredView--WluAp":"block_kit_row--unreadDotStructuredView--WluAp"}):null,a.createElement(ee,{avatars:t.avatars,icon:t.icon}),e.children)}function es(e){let{attachment:t,notification:i,dontShowPlanIcon:l}=e;return a.createElement(eo,{notification:i},a.createElement(en,{block:t.body,plan:!0===l?void 0:i.plan}))}function ed(e){let{attachment:t,notification:i,dontShowPlanIcon:l}=e,{shouldShowChevron:n}=a.useContext(M.H);return a.createElement(eo,{notification:i},a.createElement(en,{block:t.body,plan:!0===l?void 0:i.plan,shouldShowChevron:n(i)}))}function e_(e){let{attachment:t,notification:i,actionBlockCallbacks:l}=e;return a.createElement(a.Fragment,null,a.createElement(eo,{notification:i},a.createElement(en,{block:t.body,plan:i.plan})),a.createElement(el,{block:t.actions,actionBlockCallbacks:l}))}function eu(e){let{createdAt:t}=e,i=em(t),l=(0,S.Ak)(t,"narrow");if("today"!==i){let e=new Date(t),i={};i=!function(e){let t=new Date;return t.setDate(t.getDate()-365),e>=t}(e)?{month:"short",day:"numeric",year:"numeric"}:{month:"short",day:"numeric"},l=new Intl.DateTimeFormat((0,A.Gq)().getPrimaryLocale(!1),i).format(e)}return a.createElement("div",{className:"block_kit_row--timestamp--FiNtf"},l)}function em(e){let t=new Date(e),i=new Date,l=new Date(i);return(l.setDate(i.getDate()-1),ep(t,i))?"today":ep(t,l)?"yesterday":t>=new Date(i.getFullYear(),i.getMonth(),i.getDate()-7)?"last_week":"older"}function ep(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}var eE=(e=>(e.TODAY="today",e.YESTERDAY="yesterday",e.LAST_WEEK="last_week",e.OLDER="older",e))(eE||{});let ef={today:(0,g.tx)("user_notifications.today"),yesterday:(0,g.tx)("user_notifications.yesterday"),last_week:(0,g.tx)("user_notifications.last_7_days"),older:(0,g.tx)("user_notifications.older")};function eg(e){return e.preferred_attachments.length>0&&"ActionableAttachment"===e.preferred_attachments[0]._block_type}var eh=(e=>(e.ACTIONABLE="actionable",e.ACTIONED="actioned",e))(eh||{});let ev={actionable:(0,g.tx)("user_notifications.pending"),actioned:(0,g.tx)("user_notifications.done")};var eb=i(776250),eN=i(992405),eI=i(737947),eT=i(507877),eR=i(694687),ew=i(594901),ek=i(707465),ey=(e=>(e[e.TEXT=0]="TEXT",e[e.FILE_COMMENT=1]="FILE_COMMENT",e[e.FILE_COMMENT_REPLY=2]="FILE_COMMENT_REPLY",e[e.INVITE_FILE=3]="INVITE_FILE",e[e.INVITE_FOLDER=4]="INVITE_FOLDER",e[e.INVITE_TEAM=5]="INVITE_TEAM",e[e.AT_MENTION_INVITE=7]="AT_MENTION_INVITE",e[e.AT_MENTION=8]="AT_MENTION",e[e.TEAM_ROLE_REQUEST_APPROVED=9]="TEAM_ROLE_REQUEST_APPROVED",e[e.TEAM_ROLE_REQUEST_DENIED=10]="TEAM_ROLE_REQUEST_DENIED",e[e.TEAM_ROLE_REQUEST_CREATED=11]="TEAM_ROLE_REQUEST_CREATED",e[e.ORG_ACCOUNT_TYPE_REQUEST_CREATED=12]="ORG_ACCOUNT_TYPE_REQUEST_CREATED",e[e.ORG_ACCOUNT_TYPE_REQUEST_APPROVED=13]="ORG_ACCOUNT_TYPE_REQUEST_APPROVED",e[e.ORG_ACCOUNT_TYPE_REQUEST_DENIED=14]="ORG_ACCOUNT_TYPE_REQUEST_DENIED",e[e.HUB_FILE_DUPLICATED=15]="HUB_FILE_DUPLICATED",e[e.HUB_PLUGIN_INSTALLED=16]="HUB_PLUGIN_INSTALLED",e[e.HUB_FILE_LIKED=17]="HUB_FILE_LIKED",e[e.HUB_PLUGIN_LIKED=18]="HUB_PLUGIN_LIKED",e[e.HUB_FILE_REMIXED=19]="HUB_FILE_REMIXED",e[e.FILE_COMMENT_REACTION=20]="FILE_COMMENT_REACTION",e[e.HUB_PROFILE_FOLLOWED=21]="HUB_PROFILE_FOLLOWED",e[e.HUB_RESOURCE_PUBLISHER_ADDED=22]="HUB_RESOURCE_PUBLISHER_ADDED",e[e.HUB_RESOURCE_PUBLISHER_REMOVED=23]="HUB_RESOURCE_PUBLISHER_REMOVED",e[e.HUB_RESOURCE_COMMENT=24]="HUB_RESOURCE_COMMENT",e[e.HUB_RESOURCE_COMMENT_REPLY=25]="HUB_RESOURCE_COMMENT_REPLY",e[e.INVITE_FILE_REPO=26]="INVITE_FILE_REPO",e[e.FILE_ROLE_REQUEST_CREATED=27]="FILE_ROLE_REQUEST_CREATED",e[e.MERGE_REQUEST_REVIEWER_ADDED=28]="MERGE_REQUEST_REVIEWER_ADDED",e[e.MERGE_REQUEST_APPROVED=29]="MERGE_REQUEST_APPROVED",e[e.MERGE_REQUEST_APPROVAL_REVOKED=30]="MERGE_REQUEST_APPROVAL_REVOKED",e[e.BRANCH_MERGED=31]="BRANCH_MERGED",e[e.BRANCH_ARCHIVED=32]="BRANCH_ARCHIVED",e[e.COMMUNITY_MENTION=33]="COMMUNITY_MENTION",e[e.FILE_ROLE_REQUEST_APPROVED=34]="FILE_ROLE_REQUEST_APPROVED",e[e.MERGE_REQUEST_REVIEWER_INVITED_ADDED=35]="MERGE_REQUEST_REVIEWER_INVITED_ADDED",e[e.ORG_JOIN_REQUEST_CREATED=36]="ORG_JOIN_REQUEST_CREATED",e[e.HUB_WIDGET_LIKED=37]="HUB_WIDGET_LIKED",e[e.HUB_WIDGET_INSTALLED=38]="HUB_WIDGET_INSTALLED",e[e.MERGE_REQUEST_CHANGES_REQUESTED=39]="MERGE_REQUEST_CHANGES_REQUESTED",e[e.ORG_JOIN_REQUEST_APPROVED_TO_SHARER=40]="ORG_JOIN_REQUEST_APPROVED_TO_SHARER",e[e.HUB_PLUGIN_USED=41]="HUB_PLUGIN_USED",e[e.HUB_WIDGET_USED=42]="HUB_WIDGET_USED",e[e.PRO_ACCOUNT_TYPE_REQUEST_CREATED=43]="PRO_ACCOUNT_TYPE_REQUEST_CREATED",e[e.PRO_ACCOUNT_TYPE_REQUEST_APPROVED=44]="PRO_ACCOUNT_TYPE_REQUEST_APPROVED",e[e.PRO_ACCOUNT_TYPE_REQUEST_DENIED=45]="PRO_ACCOUNT_TYPE_REQUEST_DENIED",e[e.INVITE_TEAM_REMINDER=46]="INVITE_TEAM_REMINDER",e[e.PLUGIN_PUBLISHER_ADDED=47]="PLUGIN_PUBLISHER_ADDED",e[e.RESOURCE_SOLD=48]="RESOURCE_SOLD",e[e.INVITE_FILE_REMINDER=49]="INVITE_FILE_REMINDER",e[e.BATCHED_FILE_COMMENT=50]="BATCHED_FILE_COMMENT",e[e.FEED_POST_COMMENT=51]="FEED_POST_COMMENT",e[e.FEED_POST_AT_MENTION=52]="FEED_POST_AT_MENTION",e[e.FEED_POST_REACTION=53]="FEED_POST_REACTION",e[e.RESOURCE_PUBLISH=54]="RESOURCE_PUBLISH",e[e.FEED_COMMENT_REACTION=55]="FEED_COMMENT_REACTION",e[e.FEED_POST_DESCRIPTION_AT_MENTION=56]="FEED_POST_DESCRIPTION_AT_MENTION",e[e.BATCHED_FEED_POST=57]="BATCHED_FEED_POST",e[e.BATCHED_FEED_COMMENT_REACTION=58]="BATCHED_FEED_COMMENT_REACTION",e[e.RESOURCE_SUBSCRIPTION_PRICE_INCREASE=60]="RESOURCE_SUBSCRIPTION_PRICE_INCREASE",e[e.FEED_POLL_CLOSE=61]="FEED_POLL_CLOSE",e[e.FILE_ROLE_REQUEST_PENDING_MOVE_TO_PROJECT=63]="FILE_ROLE_REQUEST_PENDING_MOVE_TO_PROJECT",e[e.VR_USER_SHARED_DRAFT=77]="VR_USER_SHARED_DRAFT",e))(ey||{});function eC(e){let t=e.preferred_attachments.find(e=>l.BlockKit.Block.ATTACHMENT_TYPES.has(e._block_type));if(void 0===t)throw Error(`Unable to render attachment. Hiding notification ${e.notification_id}`);return t}function eS(e){let t;let i=(0,r.wA)(),[l,n]=(0,a.useState)(!1),o=(0,r.Pj)(),c=(0,eR.sZ)(),s=(0,r.d4)(e=>e.selectedView.view),_=(0,ew.FC)(),{onClick:u,onMouseEnter:m,onMouseMove:p,onRemove:E}=a.useContext(M.H),f=(0,b.ro)(),h=e.notification;a.useEffect(()=>()=>{E(h)},[E,h]);try{t=eC(e.notification)}catch(e){return console.error(`Unsupported Notification: ${e}`),null}let I=()=>{var t;if(h.deeplink){let l=new URL(h.deeplink.href),n=l.pathname;if(n.includes("project")){let t=n.split("project/")[1];(0,N.xr)("file_browser_folder_click",t,null,_,{selectedView:"notifications",planFilterId:e.currentPlanFilter===w.aT?null:e.currentPlanFilter})}else if(n.includes("team")){let t=n.split("team/")[1];(0,N._J)("file_browser_team_click",t,_,{selectedView:"notifications",planFilterId:e.currentPlanFilter===w.aT?null:e.currentPlanFilter})}else if((0,eN.ek)(n)){let t=(0,eN.zv)(n);t&&i(eT.UN({fileKey:t,entrypoint:"notifications",currentPlanFilter:{planId:e.currentPlanFilter===w.aT?void 0:e.currentPlanFilter||void 0}}))}if(i(v.oB()),h.deeplink.use_unsafe)eI.Ay.unsafeRedirect(l.href,d.eD?void 0:"_blank");else if(e.inDesktopTray)eI.Ay.redirect(l.href);else try{let e=(0,ek.vU)(o.getState(),n);if("teamFeed"===e.view){c&&(null==(t=h.plan)?void 0:t.id.toString())===c.id?i(v.$T(e)):eI.Ay.redirect(l.href,d.eD?void 0:"_blank");return}eI.Ay.redirect(l.href,d.eD?void 0:"_blank");return}catch{eI.Ay.redirect(l.href,d.eD?void 0:"_blank")}}},T=e=>{e.stopPropagation()},k=()=>{n(!0),e.onHide&&e.onHide()},y=(e,t=s)=>R.sr.updateNotification({notification_id:h.notification_id,notification_action:e,currentView:t});return!l&&a.createElement("div",{className:f?"block_kit_row--rowContainerRevamp--Ak9PI":"block_kit_row--rowContainer--hsQo5",onClick:l=>{(0,eb.sx)("file_browser_notification_clicked",{notification_id:h.notification_id,notification_type:h.notification_type,actionable:"ActionableAttachment"===t._block_type,selectedView:s,plan_filter:e.currentPlanFilter,notification_filter:e.currentNotificationFilter}),T(l);let n=u(h);"ActionableAttachment"!==t._block_type&&y("resolve").then(({data:t})=>{if(n||I(),t.meta.updated_notification_blob){let i=t.meta.updated_notification_blob;e.updateNotificationCallback(i.notification_id,i)}},e=>{i(O.s.error((0,g.t)("user_notification.an_error_occurred_while_clicking_this_notification")))})},onMouseDown:T,onMouseEnter:t=>{m(t,h,()=>{y("resolve",s+"_quickreply").then(({data:t})=>{if(t.meta.updated_notification_blob){let i=t.meta.updated_notification_blob;e.updateNotificationCallback(i.notification_id,i)}})})},onMouseMove:e=>{p(e)},"data-testid":"notification-row"},((t,i)=>{try{switch(t._block_type){case"ActionableAttachment":{let l={updateNotification:e.updateNotificationCallback,hideNotification:k,followLinkIfPossible:I,buildNotificationActionRequest:y};return a.createElement(e_,{attachment:t,notification:i,actionBlockCallbacks:l})}case"ClientActionableAttachment":return a.createElement(ed,{attachment:t,notification:i});case"BodyAndThumbnailAttachment":case"BodyAttachment":return a.createElement(es,{attachment:t,notification:i,dontShowPlanIcon:e.dontShowPlanIcon})}}catch(e){console.error(`Unable to render attachment: ${t}`),k()}})(t,h))||null}(e=>{(e=>{(e.Block||(e.Block={})).ATTACHMENT_TYPES=new Set(["BodyAndThumbnailAttachment","ActionableAttachment","ClientActionableAttachment","BodyAttachment"])})(e.BlockKit||(e.BlockKit={}))})(l||(l={}));var eD=i(299211),eO=i(241809),eA=i(248521),eP=i(966712),eF=i(860601),eL=i(572206),ex=i(749336),eU=i(273709);let eM=class e{constructor(){this.circularBuffer=new eO.C(e.BUFFER_CAPACITY),this.lastTimestamp=0}clear(){this.circularBuffer.clear()}push(t,i){i-this.lastTimestamp>e.THROTTLE_DURATION_MS&&(this.circularBuffer.push(t),this.lastTimestamp=i)}getLocation50msAgo(){let e=this.circularBuffer.toArray();return e.length>0?e[0]:new eL.Mi(window.innerWidth,window.innerHeight)}};function eB(e){var t,i;let[l,n]=(0,a.useState)(null),[r,o]=(0,a.useState)(0),c=a.useRef(eF.lQ),s=a.useRef(eF.lQ),d=a.useRef(null),_=a.useRef(null),u=(0,b.ro)(),m=a.useRef({notificationId:"",mouseLocationHistory:new eM,scheduledShowQuickReply:void 0,scheduledMarkAsRead:void 0});(0,a.useEffect)(()=>{_.current&&_.current.addEventListener("mouseover",e=>{var t;clearTimeout(null==(t=m.current)?void 0:t.scheduledShowQuickReply)})},[l]);let p=()=>{var e;clearTimeout(null==(e=m.current)?void 0:e.scheduledMarkAsRead),m.current.scheduledMarkAsRead=setTimeout(()=>{s.current=c.current},1e3)},E=a.useMemo(()=>{function e(e,t,i){let l=window.innerWidth>900&&window.innerHeight>650;m.current.notificationId=e.notification_id,l&&(0,eU.UC)(e)?(n((0,eU.AS)(e)),o(t),c.current=i):(n(null),c.current=eF.lQ),m.current.mouseLocationHistory.clear()}return{shouldShowChevron:()=>!1,onClick:e=>!1,onMouseEnter:(t,i,l)=>{var n,a,r;let o=!1;if(i.notification_id!==m.current.notificationId&&_.current){let e=_.current.getBoundingClientRect(),i=new eL.Mi(e.left,e.top),l=new eL.Mi(e.left,e.bottom),n=[m.current.mouseLocationHistory.getLocation50msAgo(),i,l];o=(0,eA.y)(new eL.Mi(t.clientX,t.clientY),n)}let c=t.target;o?(a=()=>{e(i,c.getBoundingClientRect().bottom,l)},clearTimeout(null==(r=m.current)?void 0:r.scheduledShowQuickReply),m.current&&(m.current.scheduledShowQuickReply=setTimeout(a,500))):(clearTimeout(null==(n=m.current)?void 0:n.scheduledShowQuickReply),e(i,c.getBoundingClientRect().bottom,l))},onMouseMove:e=>{m.current.mouseLocationHistory.push(new eL.Mi(e.clientX,e.clientY),e.timeStamp)},onRemove:e=>{e.notification_id===m.current.notificationId&&n(null)}}},[_]);if(!((0,eP.kc)().desktop_quickreply_filebrowser&&u))return a.createElement(a.Fragment,null,e.children);let f=Math.max(0,r-((null==(t=d.current)?void 0:t.getBoundingClientRect().y)??0)-((null==(i=_.current)?void 0:i.getBoundingClientRect().height)??640));return a.createElement(a.Fragment,null,a.createElement("div",{className:"quick_reply_switcher--hoverContainer--eL8mU",ref:d},l&&a.createElement("div",{className:"quick_reply_switcher--quickReplyContainer--7Qpx8",style:{top:f,maxHeight:640,minHeight:450},onMouseEnter:()=>{p()},onMouseLeave:()=>{var e;clearTimeout(null==(e=m.current)?void 0:e.scheduledMarkAsRead),s.current(),s.current=eF.lQ,c.current=eF.lQ}},a.createElement(ex.d,{quickReplyInfo:l,onClose:()=>n(null),closeIcon:"x-32",hideOverflowMenu:!0,ref:_}))),a.createElement(M.H.Provider,{value:E},e.children))}eM.BUFFER_CAPACITY=10,eM.DESIRED_DURATION_MS=50,eM.THROTTLE_DURATION_MS=eM.DESIRED_DURATION_MS/eM.BUFFER_CAPACITY;let eH="user_notifications_dropdown--filterToggleButton--ekpSd",eG="user_notifications_dropdown--filterToggleButtonSelected--qrMA-",eW="user_notifications_dropdown--dateHeader---l8oH",ej="user_notifications_dropdown--link--BC2j9 text--fontPos11--2LvXf text--_fontBase--QdLsd";function eV(e,t){let i=(0,r.wA)(),l=(0,r.d4)(e=>e.user.id),n=(0,r.d4)(e=>e.user.community_profile_id),o=(0,r.d4)(e=>{var t;return null==(t=e.authedUsers.byId[l])?void 0:t.plans}),c=a.useMemo(()=>void 0!==o&&(new Map(o.map(e=>[e.plan_id,e.is_org])).get(t)||!1),[o,t]),u=(0,r.d4)(e=>e.userNotifications.userBellStates),p=(0,r.d4)(e=>e.userNotifications.communityProfileBellStates),E=(0,r.d4)(e=>e.selectedView.view),[f,N]=(0,a.useState)(new Map),[I,w]=(0,a.useState)(!0),[k,y]=(0,a.useState)(!1),C=(0,b.Ow)(),S=(0,_.F)(p),D=(0,_.F)(u);a.useEffect(()=>{let a=(0,s.s)(()=>{var a,r;if(e)n&&(S.current[n]&&i((0,T.X2)({isBellStateHigh:!1,userInitiated:!0,profileId:n})),R.sr.getCommunityServerDriven({currentView:E}).then(({data:e})=>{O(e.meta)}).catch(e=>{i(h.F.enqueue({message:(0,g.t)("user_notification.an_error_occurred_while_fetching_your_community_notifications"),type:"user-notification",error:!0})),i(v.oB())}));else{if(null==(r=null==(a=D.current)?void 0:a[l])?void 0:r[eD.t]){let e={isBellStateHigh:!1,userInitiated:!0,notificationSpaceId:eD.t,userId:l};i((0,T.Zo)(e))}R.sr.getServerDrivenPlan({currentPlanId:t,currentView:E,isPlanOrg:c}).then(({data:e})=>{O(e.meta)}).catch(e=>{i(h.F.enqueue({message:(0,g.t)("user_notification.an_error_occurred_while_fetching_your_notifications"),type:"user-notification",error:!0})),i(v.oB())})}},800,!0);w(!0),a()},[t,S,E,i,e,D,c,n,l]);let O=e=>{let t=new Map,i=!1;e.forEach(e=>{t.set(e.notification_id,e),!i&&e.filters.is_priority&&(i=!0)}),y(i),N(t),w(!1)},A=a.useMemo(()=>{if(C){let e=(0,T.Dd)();return I||k||"priority"!==e||((0,T.hI)("all"),e="all"),e}return"all"},[k,C,I]);return{notificationFeedMap:f,isFetchingNotifications:I,initFilter:A,markAllAsReadFn:()=>{(e?m.Ay.post("/api/user_notifications/community/mark_read",{currentView:E,source:d.S8?"desktopbell":"web"}):m.Ay.post("/api/user_notifications/mark_read/plan",{current_plan_id:t,currentView:E,is_plan_org:c,source:d.S8?"desktopbell":"web"})).then(()=>{N(new Map(Array.from(f,([e,t])=>(t.is_unread=!1,[e,t]))))}).catch(()=>{i(h.F.enqueue({message:(0,g.t)("user_notification.an_error_occurred_marking_all_as_read"),type:"user-notification",error:!0}))})},updateNotification:(e,t)=>{N(new Map(f.set(e,t)))}}}function eQ(e,t){return e.filter(e=>!t.includes(e.notification_id))}function ez(e){let t;let[i,l]=(0,a.useState)(eD.t),{notificationFeedMap:r,isFetchingNotifications:o,markAllAsReadFn:s,updateNotification:d,initFilter:_}=eV(!!e.inCommunity,i),[m,p]=(0,a.useState)([]),[E,f]=(0,a.useState)(_),g=(0,u.ZC)(E),h=(0,b.ro)(),v=eQ([...r.values()],m);a.useEffect(()=>{f(_)},[_]),a.useEffect(()=>{let e=(0,T.Dd)();E!==g&&E===e&&(0,N.qD)({name:"user_notifications_filter_viewed",filter_type:E,dropdown_location:"web"})},[g,E]);let I=e=>{e.stopPropagation()},R=e=>{e===w.aT&&(e=eD.t),(0,N.FE)(e,"notifications",void 0),l(e)};switch(E){case"unread":t=v.filter(e=>e.is_unread);break;case"priority":t=v.filter(e=>e.filters.is_priority);break;default:t=v}return a.createElement("div",{className:c()(0!==r.size||o?"user_notifications_dropdown--dropdownContainer--ON3UV text--fontPos11--2LvXf text--_fontBase--QdLsd":"user_notifications_dropdown--dropdownContainerEmptyState--7D3ct user_notifications_dropdown--dropdownContainer--ON3UV text--fontPos11--2LvXf text--_fontBase--QdLsd",e.containerClassName,{"user_notifications_dropdown--arrowRight--g36M8":e.arrowRight}),onMouseDown:I,onClick:I},a.createElement(eB,null,a.createElement(n.Header,{selectedPlan:i,onPlanFilterUpdate:e=>R(e),inCommunity:!!e.inCommunity,showMarkAllAsRead:eY(o,v)&&!h,markAllAsReadFn:s}),!!h&&a.createElement(n.FilterToggle,{notificationFilter:E,toggleNotificationFilter:e=>{(0,N.Cu)({filter_type:e},"user_notifications_filter_clicked"),(0,T.hI)(e),f(e)},isFetchingNotifications:o,notifications:v,markAllAsReadFn:s}),a.createElement(n.Feed,{notifications:t,currentPlanFilter:i===eD.t?w.aT:i,currentNotificationFilter:E,hiddenNotificationIds:m,setHiddenNotificationIds:p,isFetchingNotifications:o,inCommunity:e.inCommunity,fillParent:!1,updateNotificationCallback:d})))}function eY(e,t){return!e&&t.some(e=>e.is_unread)}(e=>{function t(e){return(0,b.ro)()?a.createElement("div",{className:eW},ef[e.notificationDateGroup]):null}function i(e){return(0,b.Ow)()?a.createElement("div",{className:eW},ev[e.notificationPriorityGroup]):null}e.Feed=function(e){var l,n;let o=(0,I.Pc)(),c=(0,r.d4)(e=>{var t;return o?null==(t=e.authedUsers.byId[o.id])?void 0:t.plans:null}),s=t=>{e.setHiddenNotificationIds([...e.hiddenNotificationIds,t])},d=!1;if(o&&!e.inCommunity&&(null==c?void 0:c.length)===1&&(d=!0,e.currentPlanFilter===w.aT)){let t=c[0].plan_id;for(let i of e.notifications)if((null==(l=i.plan)?void 0:l.id.toString())!==t){d=!1;break}}if(e.isFetchingNotifications)return a.createElement("div",{className:"user_notifications_dropdown--loadingContainer--jY9PZ"},a.createElement(E.kt,null));if(0===e.notifications.length)return a.createElement("div",{className:"user_notifications_dropdown--emptyRow--4UwYl"},(0,g.tx)("user_notifications.dropdown.no_notifications"));{let l,r;"priority"===e.currentNotificationFilter&&e.notifications.sort((e,t)=>Number(eg(t))-Number(eg(e)));let o=e.inCommunity?"user_notifications_dropdown--scrollContainer--phbbl":"user_notifications_dropdown--scrollContainerWithPlan---Z4H1",c=em((n=e.notifications)[0].preferred_attachments[0].body.created_at)===em(n[n.length-1].preferred_attachments[0].body.created_at),_=e=>{let i;let n=null;if(!c)try{i=eC(e);let r=em(i.body.created_at);r!==l&&(l=r,n=a.createElement(t,{key:`date-${e.notification_id}`,notificationDateGroup:r}))}catch(e){console.error("Skipping date header, unsupported notification")}return n},u=e=>{let t=null,l=eg(e)?"actionable":"actioned";return l!==r&&(r=l,t=a.createElement(i,{key:`priority-${e.notification_id}`,notificationPriorityGroup:l})),t};return a.createElement(f.P,{className:`${e.fillParent?"":o}`},a.createElement("div",null,e.notifications.map(t=>{let i=null;return i="priority"===e.currentNotificationFilter?u(t):_(t),a.createElement(a.Fragment,{key:`row-container-${t.notification_id}`},i,a.createElement(eS,{key:`row-${t.notification_id}`,notification:t,updateNotificationCallback:e.updateNotificationCallback,dontShowPlanIcon:d,currentPlanFilter:e.currentPlanFilter,currentNotificationFilter:e.currentNotificationFilter,inDesktopTray:e.inDesktopTray,onHide:()=>s(t.notification_id)}))})))}},e.UnreadBar=function(e){return eY(e.isFetchingNotifications,e.notifications)?a.createElement("div",{className:"user_notifications_dropdown--unreadToggleBar---1U5q"},function(e){let t=e.reduce((e,t)=>e+Number(t.is_unread),0);return a.createElement("div",{className:"user_notifications_dropdown--unread--e14XU"},(0,g.t)("user_notifications.unread_count",{unreadCount:t}))}(e.notifications),eY(e.isFetchingNotifications,e.notifications)&&a.createElement(p.N_,{onClick:e.markAllAsReadFn,className:ej,trusted:!0},(0,g.tx)("user_notifications.dropdown.mark_all_as_read"))):null},e.DateHeader=t,e.PriorityHeader=i,e.Header=function(e){return a.createElement("div",{className:"user_notifications_dropdown--header--aOhWS"},e.inCommunity?a.createElement("div",{className:"user_notifications_dropdown--orgName--vbTxV ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,g.t)("user_notification.community_notifications")):a.createElement(a.Fragment,null,a.createElement(w.jy,{currentPlanFilter:e.selectedPlan===eD.t?w.aT:e.selectedPlan,onPlanFilterUpdate:e.onPlanFilterUpdate})),e.children,e.showMarkAllAsRead&&a.createElement(p.N_,{onClick:e.markAllAsReadFn,className:ej,trusted:!0},(0,g.tx)("user_notifications.dropdown.mark_all_as_read")))},e.FilterToggle=function(e){let t=(0,b.Ow)(),i=e.notifications.some(e=>e.filters.is_priority);return e.isFetchingNotifications?null:a.createElement("div",{className:"user_notifications_dropdown--filterToggleBar--VhBmn user_notifications_dropdown--unreadToggleBar---1U5q"},a.createElement("div",{className:"user_notifications_dropdown--filterToggleButtons--Erg5A"},a.createElement("button",{className:c()({[eH]:!0,[eG]:"all"===e.notificationFilter}),onClick:()=>{e.toggleNotificationFilter("all")}},(0,g.t)("user_notification.all")),!!t&&i&&a.createElement("button",{className:c()({[eH]:!0,[eG]:"priority"===e.notificationFilter}),onClick:()=>{e.toggleNotificationFilter("priority")}},function(e){let t=e.reduce((e,t)=>e+Number(eg(t)),0);return 0===t?(0,g.t)("user_notifications.requests_empty"):(0,g.t)("user_notifications.requests_toggle_count",{actionableCount:t})}(e.notifications)),a.createElement("button",{className:c()({[eH]:!0,[eG]:"unread"===e.notificationFilter}),onClick:()=>{e.toggleNotificationFilter("unread")}},function(e){let t=e.reduce((e,t)=>e+Number(t.is_unread),0);return 0===t?(0,g.t)("user_notifications.unread_empty"):(0,g.t)("user_notifications.unread_toggle_count",{unreadCount:t})}(e.notifications))),eY(e.isFetchingNotifications,e.notifications)&&a.createElement(p.N_,{onClick:e.markAllAsReadFn,className:ej,trusted:!0},(0,g.tx)("user_notifications.dropdown.mark_all_as_read")))}})(n||(n={}))},299211:(e,t,i)=>{i.d(t,{t:()=>c,w:()=>s});var l=i(411855),n=i(915440),a=i(711525),r=i(279453),o=i(395116);let c="-1";function s(e){let t=(0,n.Rs)(r.JgS,{});l.useEffect(()=>{if("loaded"===t.status&&t.data.persistentUserNotificationBells.status===a.tT.Loaded&&t.data.persistentUserNotificationBells.data)for(let i of(0,a.oA)(t.data.persistentUserNotificationBells)||[]){let t={isBellStateHigh:!!i.bell,userInitiated:!1,notificationSpaceId:i.notificationSpaceId||c,userId:i.userId};e((0,o.Zo)(t))}},[t,e])}},516289:(e,t,i)=>{i.d(t,{aT:()=>E,jy:()=>g,gN:()=>f});var l=i(411855),n=i(109388),a=i(188507),r=i(268537),o=i(574176),c=i(939863),s=i(860178),d=i(720488);let _="notifs_plan_filter--boldTitle--ZUcpT",u="notifs_plan_filter--autoTruncate--gl9us ellipsis--ellipsis--Tjyfa";var m=i(783423),p=i(533600);let E="ALL_PLANS_FILTER";function f(e,t){return e.length>t?e.slice(0,t-3)+"...":e}function g({currentPlanFilter:e,onPlanFilterUpdate:t}){var i;let[g,h]=l.useState(!1),v=(0,l.useRef)(null),b=(0,l.useRef)(null),N=(0,s.iZ)(),I=(0,a.d4)(e=>{var t;return N?null==(t=e.authedUsers.byId[N.id])?void 0:t.plans:null});if(!N||!I||I.length<=1)return l.createElement("span",{className:_},(0,c.t)("user_notification.all_notifications"));let T=I.map(e=>e.plan_id);T.unshift(E);let R=(e,t)=>e===E?(0,c.t)("user_notification.all_notifications"):t[e],w=I.reduce((e,t)=>(e[t.plan_id]=t.name,e),{}),k=(e,i)=>{e.stopPropagation(),t(i),h(!1)},y=T.map(t=>l.createElement(r.c$,{key:t,onClick:e=>{k(e,t)}},t===e&&l.createElement(o.B,{svg:p.A}),l.createElement("span",{className:`${t===e?"notifs_plan_filter--planNameChecked--dbvr9":"notifs_plan_filter--planNameUnchecked--J40CF"} ${u}`},R(t,w))));return l.createElement("div",{className:"notifs_plan_filter--planFilterContainer--E2TSh",ref:v},l.createElement("div",null,l.createElement("button",{ref:b,onClick:()=>{h(!g)},className:"notifs_plan_filter--dropdownButton--hQgHc"},l.createElement("span",{className:[_,u].join(" ")},f(R(e,w),35)),l.createElement(o.B,{svg:m.A,className:"notifs_plan_filter--chevronIcon--0Rqnp"})),b.current&&g&&l.createElement(d.Cf,{targetRect:null==(i=n.findDOMNode(b.current))?void 0:i.getBoundingClientRect(),type:d.it.DEFAULT,lean:"right",minWidth:120,disableDropdownScrollContainer:!0,closeDropdown:()=>h(!1)},y)))}},954244:(e,t,i)=>{i.d(t,{R:()=>n});var l=i(411855);function n(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M8 6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V9.5a.5.5 0 0 0-1 0V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h3a.5.5 0 0 0 0-1H8Zm9 0a5.5 5.5 0 0 0-5.5 5.5v1.793l-1.646-1.647a.5.5 0 0 0-.708.708l2.5 2.5a.5.5 0 0 0 .708 0l2.5-2.5a.5.5 0 0 0-.708-.708L12.5 13.293V11.5A4.5 4.5 0 0 1 17 7h.5a.5.5 0 0 0 0-1H17Z",clipRule:"evenodd"}))}},305821:(e,t,i)=>{i.d(t,{l:()=>n});var l=i(411855);function n(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7 7h10a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1Zm1.68 9H7a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-1.68l.662 2.365a.5.5 0 0 1-.963.27L14.28 16H9.719l-.738 2.635a.5.5 0 0 1-.962-.27L8.68 16ZM8.5 8.5a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm0 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z",clipRule:"evenodd"}))}}}]);

//# debugId=03b727be-fc8f-5506-b3a7-5d2edca8061e

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/8fe9491a36a0a912b4fe96a88ff7bb11953063c3/9004-0a752472126f5c7c.min.js.map