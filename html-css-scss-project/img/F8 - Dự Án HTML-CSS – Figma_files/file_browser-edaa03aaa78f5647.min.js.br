
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="d3652dda-4d20-547f-bfe9-33afe829bba4")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[7748],{474263:(e,t,a)=>{"use strict";a.d(t,{B8:()=>p,IW:()=>_,J:()=>E,Ou:()=>h,R6:()=>g,Uu:()=>s,X5:()=>u,XX:()=>o,YK:()=>l,ay:()=>v,eK:()=>i,fI:()=>n,jD:()=>f,me:()=>m,nM:()=>c,wD:()=>d,yU:()=>r});let r="step_pay--addAnnualPlan--3YUVe",n="step_pay--paymentForm--gqjt-",l="step_pay--totalLabelText--FsxE-",i="step_pay--smallGrayText--C8Sfn",o="step_pay--bigButton--Gtz0E",s="step_pay--flex--ZZh0K",c="step_pay--row--DcuMl",d="step_pay--rowFlex--Mf5y8 step_pay--row--DcuMl",m="step_pay--separator--gTqAJ",u="step_pay--total--FgOpU",_="step_pay--totalText--VTLEG step_pay--jumboText--JE1wb",p="step_pay--plusTaxText--gSICq",f="step_pay--numEditorsInput--mTc8p",g="step_pay--subtotal--188gf",E="step_pay--changeLink--dSfAg blue_link--blueLink--9rlnd",v="step_pay--bigTerms--nC3J9",h="step_pay--flowActionsSingle--X0Hy-"},620268:(e,t,a)=>{"use strict";a.d(t,{DD:()=>i,ME:()=>m,Nr:()=>n,Sl:()=>s,Ui:()=>r,h_:()=>o,pq:()=>l,qr:()=>d,t3:()=>c,uK:()=>_,vR:()=>u});let r="resource_cards--cardContainer--dagKQ",n="resource_cards--card--j2AeO",l="resource_cards--info--7v-s9",i="resource_cards--title--9uxRY text--fontPos16--oMC-G text--_fontBase--QdLsd ellipsis--ellipsisAfter2Lines--Qo-Xh ellipsis--_ellipsisAfterNLines--LzI7k",o="resource_cards--description--NQQ-r text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsisAfter2Lines--Qo-Xh ellipsis--_ellipsisAfterNLines--LzI7k",s="resource_cards--image--V7Y8-",c="resource_cards--pluginImage--NgYbh resource_cards--image--V7Y8-",d="resource_cards--footer--cRSOS text--fontPos13--xW8hS text--_fontBase--QdLsd",m="resource_cards--profile--YLut5",u="resource_cards--profileName--Uvden",_="resource_cards--attributes--9cUYC"},596049:(e,t,a)=>{"use strict";a.d(t,{RZ:()=>r,_q:()=>l,zC:()=>n});let r="comment_confirm_modals--reportContentWrapper--Nseo6",n="comment_confirm_modals--reportContentText--QZrcs",l="comment_confirm_modals--blockContentText--6aU5U"},727475:(e,t,a)=>{"use strict";a.d(t,{_M:()=>s,bv:()=>l,cI:()=>r,nf:()=>n,q3:()=>i,zc:()=>o});let r="community_hub_banner--bannerContainer--I7euo text--fontPos11--2LvXf text--_fontBase--QdLsd",n="community_hub_banner--link--tqByg",l="community_hub_banner--boldText--jhtS9",i="community_hub_banner--bannerIcon--GVQKO",o="community_hub_banner--iconContainer--Szb1y",s="community_hub_banner--bannerText--Mlrz- ellipsis--ellipsis--Tjyfa"},152462:(e,t,a)=>{"use strict";a.d(t,{Vi:()=>r,hh:()=>n,jx:()=>c,nu:()=>s,tt:()=>l,uD:()=>o,uw:()=>i});let r="cta_button--duplicateButtonContainer--GU-rX cta_button--buttonBase--xMT0c text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",n="cta_button--figjam--ZRMcS",l="cta_button--duplicateButtonContainerNoIcon--t9Vxs cta_button--duplicateButtonContainer--GU-rX cta_button--buttonBase--xMT0c text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",i="cta_button--duplicateButtonContainerNoIconWide--KYJ2x",o="cta_button--textIconContainer--wV-ch",s="cta_button--duplicateButtonContainerNoIconDisabled--IPh2F cta_button--duplicateButtonContainerDisabled--IzZn7 cta_button--duplicateButtonContainer--GU-rX cta_button--buttonBase--xMT0c text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",c="cta_button--ctaButtonLink--5C3KX"},183846:(e,t,a)=>{"use strict";a.d(t,{BE:()=>n,LL:()=>i,Xk:()=>l,_1:()=>o,iZ:()=>s,uu:()=>r});let r="detail_view--installButton--IloIX",n="detail_view--installButtonSubtext--iqsQz text--fontPos11--2LvXf text--_fontBase--QdLsd",l="detail_view--pendingInviteBanner--Jfy7s text--fontPos13--xW8hS text--_fontBase--QdLsd",i="detail_view--pendingInviteButton--XYgKx",o="detail_view--paidResourceSection--crSbo detail_view--metadataSectionText--jEK-6 metadata_section--metadataSectionText--7ruPx text--fontPos13--xW8hS text--_fontBase--QdLsd",s="detail_view--reportSection--qDu-P detail_view--metadataSectionText--jEK-6 metadata_section--metadataSectionText--7ruPx text--fontPos13--xW8hS text--_fontBase--QdLsd"},821150:(e,t,a)=>{"use strict";a.d(t,{$9:()=>s,BZ:()=>r,Gv:()=>u,Lq:()=>g,PE:()=>l,Pj:()=>_,SI:()=>p,Xm:()=>v,_Z:()=>i,hj:()=>f,ig:()=>c,mj:()=>d,ow:()=>n,s1:()=>E,uO:()=>o,vL:()=>m});let r="styles_properties_form--styleNameAndDescriptionContainer--L2pn-",n="styles_properties_form--styleDescriptionLabel--ErQ6b",l="styles_properties_form--styleDescriptionContainer--NtXrJ",i="styles_properties_form--textInput--rWj8- raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u",o="styles_properties_form--expandingTextInput--E7usn",s="styles_properties_form--textPreviewContainer---jjb4 styles_properties_form--previewContainer--SH1Yk",c="styles_properties_form--gridAndEffectPreviewContainer--9q2FM styles_properties_form--previewContainer--SH1Yk",d="styles_properties_form--loadedFillPreviewContainer--36WiC styles_properties_form--fillPreviewSize--GiUdz",m="styles_properties_form--loadingFillPreviewContainer--WPdS6 styles_properties_form--fillPreviewSize--GiUdz",u="styles_properties_form--stylePreview--tJF78",_="styles_properties_form--textStylePreview--Jp6WQ",p="styles_properties_form--textStylePreviewInverted--GeC3b",f="styles_properties_form--fillStylePreview--xOVAg styles_properties_form--fillPreviewSize--GiUdz",g="styles_properties_form--loading--0A0hy",E="styles_properties_form--isLoaded--2czdf",v="styles_properties_form--themeDropdown--RvF-0"},426887:(e,t,a)=>{"use strict";let r;a.d(t,{y:()=>i});var n=a(193647),l=a(237870);function i(){return r??(r=(0,l.Ju)(n.A.createLazyComponent(()=>Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(5343),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(5299),a.e(3562),a.e(3464),a.e(8286),a.e(9012)]).then(a.bind(a,408422)).then(e=>e.FolderRenameModal),(0,l.Ij)("FolderRenameModal")))),r}},190093:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ConfirmDowngradeEditorsModal:()=>s});var r=a(411855),n=a(96328),l=a(939863),i=a(672517),o=a(585878);function s(e){let{team:t,editors:a}=e,{id:s}=t,c=a.length,d=a.filter(e=>e.id).map(e=>e.id).join(),m=(0,l.t)("team_view.downgrade_editor_modal.downgrade_user_team_permissions",{username:(0,n.EJ)(e.editors[0].name||e.editors[0].email,20)}),u=(0,l.t)("team_view.downgrade_editor_modal.downgrade_multiple_users_team_permissions",{numSelectedUsers:c});return r.createElement(i.fu,{name:"Team Admin Downgrade Editors Modal",properties:{editorCount:c,editorIds:d,teamId:s}},r.createElement(o.Eo,{title:c>1?u:m,confirmText:(0,l.t)("team_view.downgrade_editor_modal.downgrade"),onConfirm:e.onConfirm},r.createElement("p",null,c>1&&(0,l.t)("team_view.downgrade_editor_modal.are_you_sure_you_want_to_downgrade",{numSelectedUsers:c}),(0,l.tx)("team_view.downgrade_editor_modal.downgrading_their_team_permission_will_change_all_permissions_to_can_view"))))}},989024:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ConfirmTeamUserPaidStatusUpdateModal:()=>c});var r=a(411855),n=a(946689),l=a(939863),i=a(672517),o=a(36816),s=a(585878);function c(e){let{team:t,members:a,paidStatus:c}=e,{id:d}=t;if(![o.Zf.FULL,o.Zf.RESTRICTED].includes(c))return r.createElement(r.Fragment,null);let m=a.length,u=a.filter(e=>e.id).map(e=>e.id).join(),_=c===o.Zf.RESTRICTED,p=e.paidStatusType===o.j4.WHITEBOARD,f=p?a.every(e=>!e.whiteboard_editor_upgrade):a.every(e=>!e.design_editor_upgrade),g=c===o.Zf.RESTRICTED&&f,E=a[0].name||a[0].email;return r.createElement(i.fu,{name:"Team Admin Restrict TeamUser Modal",properties:{memberCount:m,memberIds:u,teamId:d}},r.createElement(s.Eo,{title:_?g?p?(0,l.tx)("team_view.downgrade_figjam_access_from_viewer_to_viewer_restricted"):(0,l.tx)("team_view.downgrade_design_access_from_viewer_to_viewer_restricted"):p?(0,l.tx)("team_view.remove_figjam_edit_status.seat_rename"):(0,l.tx)("team_view.remove_design_edit_status.seat_rename"):p?(0,l.tx)("team_view.grant_figjam_edit_status.seat_rename"):(0,l.tx)("team_view.grant_design_edit_status.seat_rename"),confirmText:_?g?(0,l.t)("team_view.change"):(0,l.t)("team_view.remove.seat_rename"):(0,l.t)("team_view.grant.seat_rename"),onConfirm:e.onConfirm},c===o.Zf.RESTRICTED&&(g?p?(0,l.tx)("team_view.downgrade_figjam_from_viewer_to_viewer_restricted_description.seat_rename",{memberNameOrEmail:E,numMembers:m}):(0,l.tx)("team_view.downgrade_design_from_viewer_to_viewer_restricted_description.seat_rename",{memberNameOrEmail:E,numMembers:m}):p?(0,l.tx)("team_view.downgrade_figjam_description.seat_rename",{memberNameOrEmail:E,numMembers:m}):(0,l.tx)("team_view.downgrade_design_description.seat_rename",{memberNameOrEmail:E,numMembers:m})),c===o.Zf.FULL&&r.createElement(r.Fragment,null,p?(0,l.tx)("team_view.change_to_editor_figjam_description.seat_rename",{numMembers:m,memberNameOrEmail:E}):(0,l.tx)("team_view.change_to_editor_design_description.seat_rename",{numMembers:m,memberNameOrEmail:E}),r.createElement("p",{className:"confirm_team_user_paid_status_update_modal--spacing--D5LgW"},r.createElement(n.N_,{target:"_blank",className:"confirm_team_user_paid_status_update_modal--link--cb35L",href:"https://help.figma.com/hc/articles/360039960434#Account_Types",trusted:!0},(0,l.tx)("team_view.learn_more.seat_rename"))))))}},309267:(e,t,a)=>{"use strict";a.r(t),a.d(t,{MemberEditAccessModal:()=>x});var r=a(411855),n=a(188507),l=a(717068),i=a(391388),o=a(886653),s=a(827586),c=a(939863),d=a(662275),m=a(672517),u=a(99506),_=a(147206),p=a(668860),f=a(36816),g=a(585878);let E="edit_access_modal--column--MYvAz",v="edit_access_modal--resource--qhm-x",h="edit_access_modal--resourceTitle--79DdK edit_access_modal--resource--qhm-x",y="edit_access_modal--greyResource--pdVfB edit_access_modal--resource--qhm-x",b=(e,t)=>{if("file"===e.resource_type){let a=t[e.resource_id_or_key];if(a)return{name:a.name,id_or_key:a.key}}else{let a=t[e.resource_id_or_key];if(a)return{name:a.name,id_or_key:a.id}}},w=(0,o.xx)((e,t)=>{let a={privateResourceCount:0,editableResources:[]};return e&&0!==e.length&&(e.forEach(e=>{let r=b(e,t);r?a.editableResources.push(r):a.privateResourceCount++}),(0,l.v7)(a.editableResources,e=>e.name)),a}),T=e=>{let t=e.team_user,a=e.edit_roles,r=(null==a?void 0:a.whiteboard_files)||[],n=(null==a?void 0:a.design_files)||[],l=(0,_.qR)(t,u._Y.DESIGN);return{whiteboardRoles:(0,_.qR)(t,u._Y.WHITEBOARD)?[]:r,designRoles:l?[]:n}},I=(e,t)=>{let{whiteboardRoles:a,designRoles:r}=T(e);return w(a.concat(r),t)};function x(e){var t,a,l,o,u;let _=(0,n.wA)(),v=function(e,t){let a=(0,n.d4)(a=>a.teamMembersByTeamId[e][t]);return i.Qw.loaded(a)}(e.teamId,e.memberEmail),y=(0,n.d4)(e=>e.folders),b=r.useMemo(()=>v.transform(e=>{var t;return w(null==(t=null==e?void 0:e.edit_roles)?void 0:t.folders,y)}),[y,v]),T=(0,n.d4)(e=>e.folders),x=r.useMemo(()=>v.transform(e=>I(e,T)),[T,v]),N=(0,n.d4)(t=>t.teams[e.teamId]),S=i.Qw.all([v,b,x]);if("loaded"!==S.status)return null;let[k,A,L]=S.data,R=!!k.team_role&&(null==(t=k.team_role)?void 0:t.level)>=p.e6.EDITOR,D=A.editableResources.length+A.privateResourceCount,F=L.editableResources.length+L.privateResourceCount;return r.createElement(m.fu,{name:"Member Edit Access Modal",properties:{teamId:N.id,userId:k.id,folderCount:D,fileCount:F}},r.createElement(g.XV,{title:(0,c.t)("team_view.member_edit_access_modal.title",{memberName:k.name??""}),maxWidth:432,minWidth:432,containerClassName:"edit_access_modal--modalStyle--20dSp",onClose:()=>{_(d.Ce())}},r.createElement("div",{className:"edit_access_modal--headerContainer--ZoKpu edit_access_modal--resourceContainer--vZA5E"},r.createElement("div",{className:E},r.createElement("div",{className:h},(0,c.tx)("team_view.member_edit_access_modal.projects_title"))),r.createElement("div",{className:E},r.createElement("div",{className:h},(0,c.tx)("team_view.member_edit_access_modal.files_title")))),r.createElement(s.P,{className:"edit_access_modal--scrollContainer--WzCWr",hideScrollbar:!0},r.createElement("div",{className:"edit_access_modal--resourceContainer--vZA5E"},r.createElement("div",{className:E},r.createElement(C,{hasTeamEditPermissions:R,isWhiteboardEditor:(null==(a=k.team_user)?void 0:a.whiteboard_paid_status)===f.Zf.FULL,isDesignEditor:(null==(l=k.team_user)?void 0:l.design_paid_status)===f.Zf.FULL,resources:A,resourceType:"project"})),r.createElement("div",{className:E},r.createElement(C,{hasTeamEditPermissions:R,isWhiteboardEditor:(null==(o=k.team_user)?void 0:o.whiteboard_paid_status)===f.Zf.FULL,isDesignEditor:(null==(u=k.team_user)?void 0:u.design_paid_status)===f.Zf.FULL,resources:L,resourceType:"file"}))))))}let N=e=>"file"===e?(0,c.tx)("team_view.member_edit_access_modal.none_files"):(0,c.tx)("team_view.member_edit_access_modal.none_projects");function C(e){let t;let{hasTeamEditPermissions:a,isDesignEditor:n,isWhiteboardEditor:l,resourceType:i}=e;if(a)return"project"===i?r.createElement("div",{className:y},(0,c.tx)("team_view.member_edit_access_modal.all_projects")):n&&l?r.createElement("div",{className:y},(0,c.tx)("team_view.member_edit_access_modal.all_files")):n&&!l?r.createElement("div",{className:y},(0,c.tx)("team_view.member_edit_access_modal.all_design_files")):!n&&l?r.createElement("div",{className:y},(0,c.tx)("team_view.member_edit_access_modal.all_figjam_files")):r.createElement("div",{className:y},N(i));let o=e.resources;if(0===o.privateResourceCount&&0===o.editableResources.length)return r.createElement("div",{className:y},N(i));if(o.privateResourceCount>0){let e=r.createElement("span",null);0===o.editableResources.length&&"project"===i?e=(0,c.tx)("team_view.member_edit_access_modal.invite_only_projects",{numProjects:o.privateResourceCount}):0===o.editableResources.length&&"file"===i?e=(0,c.tx)("team_view.member_edit_access_modal.invite_only_files",{numFiles:o.privateResourceCount}):o.editableResources.length>0&&"project"===i?e=(0,c.tx)("team_view.member_edit_access_modal.invite_only_projects_list_end",{numProjects:o.privateResourceCount}):o.editableResources.length>0&&"file"===i&&(e=(0,c.tx)("team_view.member_edit_access_modal.invite_only_files_list_end",{numFiles:o.privateResourceCount})),t=r.createElement("div",{className:v},e)}return r.createElement(r.Fragment,null,o.editableResources.map(e=>r.createElement("div",{key:e.id_or_key,className:v},e.name)),t)}},243058:(e,t,a)=>{"use strict";a.d(t,{JC:()=>d,Oe:()=>c,VY:()=>i,vW:()=>o,wu:()=>l,y$:()=>s});var r=a(503457),n=a(193647);let l=n.A.createLazyComponent(()=>Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(5343),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(5299),a.e(3562),a.e(3464),a.e(8286),a.e(9012)]).then(a.bind(a,978758)).then(e=>e.BillingGroupDashboardSettingsPageView),{loading:()=>null,error:r.H4.NONE,componentName:"BillingGroupDashboardSettingsPageView"}),i=n.A.createLazyComponent(()=>Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(5343),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(5299),a.e(3562),a.e(3464),a.e(8286),a.e(9012)]).then(a.bind(a,92114)).then(e=>e.LicenseGroupAdminSettingsPageView),{loading:()=>null,error:r.H4.NONE,componentName:"LicenseGroupAdminSettingsPageView"}),o=n.A.createLazyComponent(()=>Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(5343),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(5299),a.e(3562),a.e(3464),a.e(8286),a.e(9012)]).then(a.bind(a,971555)).then(e=>e.OrgAdminSettingsPageView),{loading:()=>null,error:r.H4.NONE,componentName:"OrgAdminSettingsPageView"}),s=n.A.createLazyComponent(()=>Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(5343),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(5299),a.e(3562),a.e(3464),a.e(8286),a.e(9012)]).then(a.bind(a,822796)).then(e=>e.WorkspaceAdminSettingsPageView),{loading:()=>null,error:r.H4.NONE,componentName:"WorkspaceAdminSettingsPageView"}),c=n.A.createLazyComponent(()=>Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(5343),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(5299),a.e(3562),a.e(3464),a.e(8286),a.e(9012)]).then(a.bind(a,722299)).then(e=>e.OrgDomainManagementPageView),{loading:()=>null,error:r.H4.NONE,componentName:"OrgDomainManagementPageView"}),d=n.A.createLazyComponent(()=>Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(5343),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(5299),a.e(3562),a.e(3464),a.e(8286),a.e(9012)]).then(a.bind(a,734823)).then(e=>e.TeamAdminConsoleView),{loading:()=>null,error:r.H4.NONE,componentName:"TeamAdminConsoleView"})},486109:(e,t,a)=>{"use strict";a.r(t),a.d(t,{FileMoveDropdown:()=>tn,FileMoveHiddenDiv:()=>tl,FileMoveModal:()=>e6,FileMoveModalComponent:()=>e5,FileMoveSearch:()=>e7,TeamSection:()=>te,TeamsDisplay:()=>ta,getCurrentFolderId:()=>e3,getTargetAttribute:()=>e4,isSubscribedLG:()=>e8});var r=a(411855),n=a(109388),l=a(188507),i=a(889012),o=a.n(i),s=a(776250),c=a(935283),d=a(91408),m=a(966712),u=a(498750),_=a(915440),p=a(711525),f=a(752553),g=a(742808),E=a(268537),v=a(946689),h=a(413695),y=a(659838),b=a(493323),w=a(827586),T=a(574176),I=a(762638),x=a(939863),N=a(365879),C=a(738269),S=a(694764),k=a(198123),A=a(662275),L=a(672517),R=a(688083),D=a(99506),F=a(623746),P=a(66037),M=a(668860),O=a(392830),B=a(875847),U=a(660950),V=a(279453),H=a(707465),W=a(984968),j=a(454351),$=a(451e3),G=a(945020),z=a(489291),Y=a(608902),K=a(498606),Q=a(143678),q=a(547807);let X=new class{constructor(){this.TeamRestrictionsListsSchemaValidator=(0,q.vh)()}getTeamRestrictionsLists(e){return this.TeamRestrictionsListsSchemaValidator.validate(async({xr:t})=>await t.get("/api/team_restrictions_lists",{team_ids:e.teamIds}))}};var J=a(233890),Z=a(585878),ee=a(776621),et=a(27087),ea=a(67833);function er(e){return r.createElement("div",{className:"page_move--fileCreateNameContainer--JBcti"},r.createElement("div",{className:"page_move--fileCreateNameSvgContainer--nm5eH"},r.createElement(ea.oS,{type:ea.y1.DESIGN})),r.createElement(v.ks,{value:e.newFileName,onChange:e.onChange,maxLength:255,autoFocus:!0,placeholder:(0,x.t)("page_move.add_new_file_name"),className:"page_move--fileCreateNameInput--0yBR8"}))}var en=a(730935),el=a(249963),ei=a(511243),eo=a(138020),es=a(297666),ec=a(130097),ed=a(980820),em=a(243987),eu=a(147206),e_=a(463592),ep=a(472503),ef=a(173454);let eg="32px",eE=(0,d.hG)(eg),ev=e=>(null==e?void 0:e.id)||S.iK,eh=new e_.KH({keys:["folder.path","team.name"],threshold:.3,tokenize:!0}),ey=(e,t,a,r,n,l)=>{if(e.orgId!==n&&(null==t?void 0:t.orgId)!==n)return!1;if(!(0,m.kc)().ps_benchmark){if((0,B.VA)(e))return e.id===l;if((0,B.B_)(e))return!1}return!(!e.canEdit||t&&(0,em.S$)(e,t,a)&&!(0,B.VA)(e))&&(!r||!!(0,em.XX)(t))},eb=(e,t,a)=>!(!(0,m.kc)().ps_benchmark&&(0,em.dX)(e,t))&&(!a||!!(0,em.XX)(e)),ew=(e,t=!1)=>{let a=[],r=(0,B.gj)(e.user&&e.user.id,e.folders,e.roles.byFolderId,e.user&&e.orgId?e.orgUsers[e.orgId][e.user.id]:null);Object.keys(e.folders).forEach(n=>{let l=e.folders[n],i=l.teamId?e.teams[l.teamId]:null;ey(l,i,e.user,t,e.orgId,null==r?void 0:r.id)&&((0,B.VA)(l)&&(l={...l,path:(0,ef.Tb)()}),a.push(l))}),eh.set(a.map(t=>{let a=t.teamId&&e.teams[t.teamId]&&{name:e.teams[t.teamId].name},r={path:t.path,teamId:t.teamId,id:t.id,subscription:!!t.subscription};return a?{folder:r,team:a}:{folder:r}}))},eT=({folders:e,roles:t,user:a,orgUsers:r,teams:n,orgId:l,implicitTeamRolesTeamIds:i},o,s,c)=>{let d=Object.create(null),u=0,_=0,p=(0,B.gj)(a&&a.id,e,t.byFolderId,a&&l?r[l][a.id]:null);for(let e in d[S.HK]=[],d[S.iK]=[],t.byTeamId)eb(n[e],a,o)&&(_++,d[e]=[]);(0,O.D)(null,l)&&i&&i.forEach(e=>{eb(n[e],a,o)&&(_++,d[e]=[])}),Object.keys(e).forEach(t=>{let r={...e[t]},i=ey(r,r.teamId?n[r.teamId]:null,a,o,l,null==p?void 0:p.id);if((0,m.kc)().file_move_show_all_resources){if(i&&(!s||r.subscription||(0,B.VA)(r))){let e=r.teamId?n[r.teamId]:null;d[p&&r.id===p.id?S.HK:ev(e)].push(r),u++}}else if(i&&(r.subscription||(0,B.VA)(r))){let e=r.teamId?n[r.teamId]:null;d[p&&r.id===p.id?S.HK:ev(e)].push(r),u++}});let f=u+_;return c(S.CU({indexCount:f})),c(S.xH()),d},eI=(e,t,a,r,n)=>{let l=Object.create(null),i=Object.create(null),o=[],s=0,c=0;if(n){let t=e.indexOf(n);t>-1&&(e.splice(t,1),e.splice(1,0,n))}return e.forEach(e=>{if(i[e]=s,c+=8,e!==S.iK&&e!==S.HK){let t={type:j.b.NEW_FOLDER_TEAM,id:e,positionTop:c};o.push(t),c+=eE,s+=1}let a=t[e];s+=a.length,a.sort((e,t)=>""===e.path?-1:""===t.path?1:e.path.toLowerCase()<t.path.toLowerCase()?-1:1);let d=Array.from(a);r&&n&&e===n&&d.forEach((e,t)=>{e.id===r&&(a.splice(t,1),a.unshift(e))}),a.forEach(e=>{let t={type:j.b.FOLDER_ROW,id:e.id,positionTop:c};c+=eE,o.push(t)}),l[e]=a,c+=9}),[l,i,o]},ex=(e,t,a)=>{let r=Object.create(null),n=Object.create(null),l=0,i=0,o=t.orgId&&t.user?t.orgUsers[t.orgId][t.user.id]:null,s=(0,B.gj)(t.user?t.user.id:null,t.folders,t.roles.byFolderId,o);for(let a of e){let e=a.item.folder,o=s&&e.id===s.id?0:a.score,c=e.teamId?t.teams[e.teamId]:null,d=s&&e.id===s.id?S.HK:ev(c);!(d in r)&&(r[d]=[],d!==S.iK&&d!==S.HK&&i++),r[d].push(e),null==n[d]?n[d]=o:n[d]=Math.min(n[d],o),l++}let c=l+i;return a(S.CU({indexCount:c})),[n,r]},eN=e=>(t,a)=>{if(t===S.iK)return 1;let r=e[t],n=e[a];return r?n&&r.name.toLowerCase()<n.name.toLowerCase()?-1:1:-1},eC=e=>(t,a)=>e[t]-e[a],eS=async(e,t,a,r,n=!1,l=!1,i,o,s,d)=>{var u,_,p;let f;let g=e.getState(),E=null,v=null;t.type===j.A.FILE?(E=t.file.parent_org_id||null,v=t.file.team_id):t.type===j.A.REPO?(E=t.repo.parent_org_id||null,v=t.repo.team_id):t.type===j.A.FILE_IMPORT&&(E=t.orgId);let h=[];if(a){let e=ex(await eh.search(a),r,i);p=e[0],(h=Object.keys(_=e[1])).length&&h.sort(eC(p))}else _=eT(r,n,!!d,e.dispatch),r.user?(h.push(S.HK),h=h.concat((0,W.n$)(Object.values(r.teams),(null==(u=r.fileBrowserPreferences)?void 0:u.orderedTeamIds)||[])),_[S.iK].length>0&&h.push(S.iK)):(h=Object.keys(_)).sort(eN(r.teams));switch(t.type){case j.A.FILE:f=t.file.editor_type;break;case j.A.REPO:f=D._Y.DESIGN;break;case j.A.FILE_IMPORT:f=t.files.every(e=>".jam"===(0,ep.dv)(e.name).toLowerCase())?D._Y.WHITEBOARD:D._Y.DESIGN;break;default:(0,c.xb)(t)}let y=new Set,b=Object.values(_).flatMap(e=>e.map(e=>({id:e.id}))),w=f===D._Y.WHITEBOARD?V.JkW:V.RmP;(await (0,ec.S8)(w,b)).forEach(e=>{var t,a;let r=e.result;"loaded"===r.status&&(null==(a=(0,eo.oA)(null==(t=r.data)?void 0:t.project))?void 0:a.hasPermission)&&y.add(e.args.id)});let T=h.filter(e=>{var t,a,n,l;if(e===S.iK)return null===_||_[e].length>0;let i=r.teams;if(e!==S.HK){let a=(null==(t=i[e])?void 0:t.orgId)||null;if(E||a){if(a!==E)return!1}else if(v&&e===S.iK)return!1}return!((null==(a=i[e])?void 0:a.deletedAt)||!(0,m.kc)().ps_benchmark&&(0,eu.XG)(null==(n=i[e])?void 0:n.currentTeamUser,f))&&!!(null==(l=_[e])?void 0:l.some(e=>y.has(e.id)))}),[I,x,N]=eI(T,_,l,o,s);e.dispatch(S.OT({rows:N})),e.dispatch(S.t3({indexOffsets:x})),e.dispatch(S.Pb({foldersByTeamId:I})),e.dispatch(S.Mi({teamIds:T})),a||e.dispatch(S.w3({userTeamCount:T.length})),g.fileMove.isSearchResult!==l&&e.dispatch(S.EN({isSearchResult:l}));let C=S.HK in x&&N[0].type===j.b.FOLDER_ROW;a&&C?e.dispatch(S.Dp({indexAt:0})):a&&!C&&e.dispatch(S.Dp({indexAt:1}))},ek=(e,t,a,r=!1,n,l,i)=>{eS(e,t,"",a,r,!1,e.dispatch,l,i,n)},eA=(0,es.s)((e,t,a,r,n=!1)=>{eS(e,t,a,r,n,!!a,e.dispatch)},200),eL=(0,ed.nF)((e,t)=>{ew(t.userResources,t.modalData.isPublishing),ek(e,t.modalData,t.userResources,t.modalData.isPublishing,!1,t.currentFolderId,t.currentFolderTeamId)}),eR=(0,ed.nF)((e,t)=>{eA(e,t.modalData,t.query,t.userResources),e.dispatch(S.hq(t))});var eD=a(517333),eF=a(218881),eP=a(881388),eM=a(507877),eO=a(349410),eB=a(964258),eU=a(558867),eV=a(858212);let eH="file_move--main--RCzls",eW="file_move--iconContainer--SWek6",ej="file_move--folderRowWrapper--Qw-C4",e$="file_move--folderRow--DapA5",eG="file_move--horizontalDivider--wRv3N";var ez=a(444173);function eY(e){let t=(0,eV.S)(),a=(0,l.d4)(e=>e.user),[n,i]=(0,r.useState)(""),o=e.dispatch,[c,d]=(0,r.useState)(!0),m=(0,eF.I7)("starter_team_loophole_experiment_m0"),u=(0,eF.I7)("starter_team_loophole_experiment_m1");return r.createElement("form",{onSubmit:t=>{t.preventDefault(),(0,s.sx)("Create Team Inline",{trackingContext:e.trackingContextName}),n?(o((0,eB.KQ)({teamName:n,orgAccess:D.bU.PUBLIC,dontRedirect:!0})),d(!0),i("")):o(eP.s.error((0,x.t)("flash.team_name_cannot_be_empty")))}},r.createElement("div",{className:"file_move--teamCreateRow--o7dzW file_move--folderRow--DapA5"},c?r.createElement("button",{type:"button",className:"file_move--rowButton--6ASbR",onClick:()=>{null!=a&&!e.orgId&&(0,eO.e5)({userId:a.id,teams:Object.values(e.teams),rolesByTeamId:e.rolesByTeamId,getM0Config:m.getConfig,getM1Config:u.getConfig})?(o(A.Ce()),o(eM.Dw({openInNewTab:!eD.eD}))):(d(!1),o(S.xH()))}},r.createElement(T.B,{className:"file_move--newProjectIconFileMove--Pp8qn sidebar--icon--wMzUY",svg:ez.A}),r.createElement("span",{className:t?"file_move--newFolderNameCustomSections--4BQqs sidebar--sectionNameCustomSections--9e7LZ sidebar--sectionTextCustomSections---1KFn sidebar--sectionContentCustomSections--wI9mZ ellipsis--ellipsis--Tjyfa":"file_move--newFolderName--HNEBp sidebar--sectionName--4N7hT sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa"},(0,x.tx)("file_browser.inline_team_creation.button_text"))):r.createElement(r.Fragment,null,r.createElement("div",{className:eW},r.createElement(eU.pw,{size:16,shape:"SQUARE",color:"#E5E5E5"})),r.createElement("div",{className:"file_move--newTeamTitleText--VUp4S file_move--teamTitleText--NhNEM ellipsis--ellipsis--Tjyfa"},r.createElement(v.ks,{value:n||"",onChange:e=>{i(e.target.value)},onBlur:()=>{d(!0)},className:"file_move--newTeamInput--rHUdq",maxLength:e.teamNameMaxWidth,placeholder:(0,x.t)("file_browser.inline_team_creation.placeholder"),autoFocus:!0})))))}var eK=a(450147),eQ=a(702595),eq=a(853705),eX=a(130715),eJ=a(720955),eZ=a(797804),e0=a(258485);let e1=(0,d.hG)(eg),e2="FileMoveModalContent";function e4(e){return"folder"===e.view||(0,H.K)(e)?"_self":"_blank"}function e8(e){return!!e.subscription||(0,B.VA)(e)}function e3(e){switch(e.type){case j.A.FILE:let t=e.file;return(null==t?void 0:t.folder_id)||null;case j.A.REPO:let a=e.repo;return(null==a?void 0:a.folder_id)||null;case j.A.FILE_IMPORT:return null;default:(0,c.xb)(e)}}function e5(e){let t=null;e.type===j.A.FILE?t=e.file.parent_org_id||null:e.type===j.A.REPO?t=e.repo.parent_org_id||null:e.type===j.A.FILE_IMPORT&&(t=e.orgId);let a=(0,l.d4)(e=>e.orgById),n=t?a[t]:null,i=(0,l.d4)(e=>e.fileMove),o=(0,l.d4)(e=>!!e.creatingNewFolder),c=(0,l.d4)(e=>e.dropdownShown),d=(0,l.d4)(e=>e.selectedView),u=e3(e),f=(0,_.Rs)(V.Y9I,{projectId:u},{enabled:!!u}),E=(0,_.Rs)(V.G0Y,{orgId:t});"errors"===E.status&&(console.error("Loading AccessibleFolders from LiveGraph: "),console.error(E.errors));let v="loaded"===E.status&&("loaded"===f.status||e.type===j.A.FILE_IMPORT)?{fetched:E,transformed:function(e,t,a){var r;let n={id:e.currentUser.id,student_validated_at:e.currentUser.studentValidatedAt&&e.currentUser.studentValidatedAt.toString()},l={},i={},o={},s={byFolderId:{},byTeamId:{}},c=(0,F.Um)(e.currentUser),d=[],u=e=>{i[e.id]={...e,canEdit:!0,canRename:!!e.path}};e.currentUser.allOrgUsers&&e.currentUser.allOrgUsers.forEach(e=>{var t;o[e.orgId]={[e.userId]:{...e,type:P.Wd.ORG_USER,account_type:e.accountType,design_paid_status:e.accountType,id:e.id,org_id:e.orgId,user_id:e.userId,user:{id:e.user.id,email:e.user.email||void 0,img_url:e.user.imgUrl,name:e.user.name||void 0,handle:e.user.handle},permission:e.permission,drafts_folder_id:e.draftsFolderId,created_at:e.createdAt.toString(),updated_at:(null==(t=e.updatedAt)?void 0:t.toString())||"",disabled_at:e.disabledAt&&e.disabledAt.toString(),whiteboard_paid_status:e.whiteboardPaidStatus||D.El.STARTER,show_figjam_user_onboarding:null,has_shown_figjam_admin_launch_onboarding:null,has_shown_figjam_admin_onboarding:null,ecc_upgrading_locked:null,dev_mode_paid_status:e.devModePaidStatus||D.El.RESTRICTED}},e.draftsProject&&(u(e.draftsProject),e.draftsProject.ownerRole&&(s.byFolderId[e.draftsProject.id]={[n.id]:(0,F.aU)(e.draftsProject.ownerRole,c,null,null)}))}),e.currentUser.teamEditRoles&&e.currentUser.teamEditRoles.forEach(e=>{if(!e.team)return;let{id:t,projects:a}=e.team;l[t]={...e.team,canEdit:e.level>=M.e6.EDITOR,canAdmin:e.level>=M.e6.ADMIN,currentTeamUser:e.team.currentTeamUser,licenseGroup:null},s.byTeamId[t]={[n.id]:(0,F.aU)(e,c,null,null)},a&&a.forEach(e=>u(e))});let _=e&&e.org?e.org:null;if((0,O.D)(null,a)&&_){if(t){let e=(0,p.oA)(t.project);e&&e.canEdit&&u(e)}_.teams&&_.teams.forEach(e=>{let{id:t,orgEditProjects:a}=e;if(!l[t]){let a=e.canEdit,r=e.canAdmin,n=e.licenseGroup;l[t]={...e,canEdit:a??!1,canAdmin:r??!1,licenseGroup:n||null},d.push(t)}let r=(0,p.oA)(a);r&&r.forEach(e=>{u(e)})})}return(0,m.kc)().ps_benchmark&&(null==(r=e.currentUser.teamRoles)||r.forEach(e=>{if(!e.team)return;let{id:t}=e.team;l[t]||(l[t]={...e.team,canEdit:!1,canAdmin:!1,currentTeamUser:e.team.currentTeamUser,licenseGroup:null},s.byTeamId[t]={[n.id]:(0,F.aU)(e,c,null,null)})})),e.currentUser.projectEditRoles&&e.currentUser.projectEditRoles.forEach(e=>{e.project&&(u(e.project),s.byFolderId[e.project.id]={[n.id]:(0,F.aU)(e,c,null,null)})}),e.currentUser.draftsProject&&(u(e.currentUser.draftsProject),e.currentUser.draftsProject.ownerRole&&(s.byFolderId[e.currentUser.draftsProject.id]={[n.id]:(0,F.aU)(e.currentUser.draftsProject.ownerRole,c,null,null)})),{org:_,user:n,teams:l,folders:i,roles:s,orgUsers:o,orgId:a,fileBrowserPreferences:e.currentUser.fileBrowserPreferences,implicitTeamRolesTeamIds:d}}(E.data,e.type!==j.A.FILE_IMPORT?f.data:null,t)}:null,h=null===v?{loaded:!1}:{loaded:!0,userResources:v.transformed},y=null==u||null===v?null:v.transformed.folders[u],b=y?y.teamId:null,w=(0,l.wA)();r.useEffect(()=>{h.loaded&&w(eL({modalData:e,userResources:h.userResources,currentFolderId:u,currentFolderTeamId:b}))},[v&&v.fetched]);let T=[];if(h.loaded&&!t)for(let e in h.userResources.teams){let t=h.userResources.teams[e];"ok"!==t.subscription&&T.push(t.id)}let I=function(e){let[t,a]=r.useState((0,p.Xm)()),n=e.join(",");return r.useEffect(()=>{if(0===n.length){a((0,p.gB)({}));return}a((0,p.Xm)());let e=!1;return(async()=>{let t=await X.getTeamRestrictionsLists({teamIds:n});e||a((0,p.gB)(t.data.meta))})(),()=>{e=!0}},[n]),t}(T);if("loaded"===I.status&&h.loaded)for(let e in h.userResources.teams){let t=h.userResources.teams[e];I.data[e]&&(t.restrictionsList=I.data[e])}return(0,g.I)("loaded"===E.status,e=>{(0,s.sx)("file_move_modal_latency",{latency_ms:e},{forwardToDatadog:!0})}),r.createElement(e6,{modalId:e._modalId,fileMove:i,fileMoveData:e,creatingNewFolder:o,dropdownShown:c,selectedView:d,dispatch:w,userResources:h,currentOrg:n})}function e9(e){var t;let a=null!=e.orgId,r=e.subscription===D.Qh.INCOMPLETE||e.subscription===D.Qh.OK;return{id:e.id,subscription:e.subscription,starter_team:!a&&!r,pro_team:r,org_team:a,student_team:!!e.studentTeamAt,deleted_at:(null==(t=e.deletedAt)?void 0:t.toString())||null}}class e6 extends r.PureComponent{constructor(){super(...arguments),this.state={newFileName:""},this.FILE_MOVE_DROPDOWN="file-move-dropdown",this.scrollContainerRef=e=>{this.scrollContainer=e,this.scrollContainerElm=n.findDOMNode(e)},this.isMovePageToNewFile=(0,m.kc)().move_page_to_new_file&&this.props.fileMoveData.isMovePageToNewFile,this.onScroll=()=>{clearTimeout(this.previousTimeOutKey),this.props.fileMove.upDownKeyPressed&&this.props.dispatch(S.Ww({canFocus:!1})),this.previousTimeOutKey=setTimeout(()=>{this.props.fileMove.canMouseFocus||this.props.dispatch(S.Ww({canFocus:!0}))},200)},this.onkeydown=e=>{if(!this.props.userResources.loaded||this.props.creatingNewFolder||this.props.fileMove.folderRenaming||this.props.fileMove.isSearchFocused)return;let t=document.getElementById(e2);if((0,J.NB)(t))return;let{userResources:a}=this.props.userResources;switch(e.keyCode){case u.Uz.ESCAPE:this.onClose();break;case u.Uz.UP_ARROW:this.props.dispatch(S.zv());break;case u.Uz.DOWN_ARROW:this.props.fileMove.indexCount&&this.props.dispatch(S.TL({upperBound:this.props.fileMove.indexCount}));break;case u.Uz.ENTER:{if(-1===this.props.fileMove.focusedIndex)return;let e=this.props.fileMove.folderRows[this.props.fileMove.focusedIndex];if(e.type===j.b.NEW_FOLDER_TEAM){let t=e.id,r=a.teams[t];this.props.dispatch((0,R.SX)({where:this.props.modalId.type,team:{...(0,G.Ws)(r),canEdit:!0,canEditTeamContents:!0,canAdmin:r.canAdmin}}))}else if(e.type===j.b.FOLDER_ROW){let t=a.folders[e.id];if(!t)break;this.move(t)}}}},this.onClose=()=>{this.props.fileMoveData.displayBanner?this.props.dispatch(A.Lo()):this.props.dispatch(A.Ce())},this.openOrgView=e=>{this.props.dispatch(C.$T({view:"org",orgId:e,orgViewTab:z.X.HOME}))},this.onOrgViewLinkClick=()=>{this.props.dispatch(A.Ce()),this.props.currentOrg&&this.openOrgView(this.props.currentOrg.id)},this.moveToSelectedFolder=()=>{let e=this.getFocusedFolder();if(!e)return;let t=()=>{this.move(e)};if(this.isMovePageToNewFile&&this.props.fileMoveData.type!==j.A.FILE_IMPORT){var a,r,n;this.onClose();let t=this.props.fileMoveData.type===j.A.FILE?this.props.fileMoveData.fileKey:this.props.fileMoveData.repoId;a=this.props.fileMoveData.page_id,r=e.id,n=this.state.newFileName,(0,ee.ED)("startMovePagesJob","Send request to start move pages job."),et.Ay.post(`/api/files/${t}/move_pages`,{folder_id:r,page_ids:a,file_name:n}).catch(e=>{(0,ee.x1)("startMovePagesJob","Error with starting move pages job.",{err:e})}).then(()=>{(0,ee.ED)("startMovePagesJob","Move pages job successfully started.")});return}let l=this.props.fileMoveData;if(l.type===j.A.FILE&&l.file.is_team_template&&(0,B.VA)(e)){this.props.dispatch(A.to({type:ei.X0,data:{title:(0,x.tx)("templates.confirmation.move_to_drafts.title",{count:1}),content:(0,x.tx)("templates.confirmation.move_to_drafts.description"),confirmText:(0,x.tx)("templates.confirmation.move_to_drafts.button_v2"),destructive:!1,onConfirm:t}}));return}t()},this.move=o()(e=>{let t=this.props.fileMoveData;switch(t.type){case j.A.FILE:this.moveFile(e,t.file);break;case j.A.REPO:this.moveRepo(e,t.repo);break;case j.A.FILE_IMPORT:for(let a of t.files)this.props.dispatch((0,U.zh)({name:a.name,blob:new Blob([a.contents]),folderId:e.id}));break;default:(0,c.xb)(t)}},2e3,{leading:!0,trailing:!1}),this.closeModal=()=>{this.props.dispatch(A.ES(this.props.modalId))},this.moveFile=(e,t)=>{var a;if(e&&e.id!==t.folder_id){if(this.props.userResources.loaded){let r=this.props.userResources.userResources.teams[e.teamId||""]||null;this.closeModal(),this.props.dispatch(k.z({files:[t],folder:e,team:r,fromFileModal:!0,onFinishCallback:null==(a=this.props.fileMoveData.afterFileMove)?void 0:a.callback}))}}else this.onClose()},this.moveRepo=(e,t)=>{if(e&&e.id!==t.folder_id){if(this.props.userResources.loaded){let a=this.props.userResources.userResources.teams[e.teamId||""]||null;this.closeModal(),this.props.dispatch(k.z({files:[],repos:[t],folder:e,team:a,fromFileModal:!0}))}}else this.onClose()},this.getModalTitle=()=>{let e=this.props.fileMoveData;if(this.isMovePageToNewFile)return(0,x.t)("file_browser.file_move.move_pages_to_new_file");if(e.type===j.A.FILE_IMPORT)return 1===e.files.length?(0,x.t)("file_browser.file_move.modal_header_import_file",{fileName:e.files[0].name}):(0,x.t)("file_browser.file_move.modal_header_import_files");{let t=e.type===j.A.FILE?e.file.name:e.repo.name;return(0,x.t)("file_browser.file_move.modal_header_move_file",{fileName:t})}},this.getFocusedFolder=()=>{if(!this.props.userResources.loaded)return null;let{userResources:e}=this.props.userResources,t=this.props.fileMove.folderRows[this.props.fileMove.focusedIndex];return t&&t.type===j.b.FOLDER_ROW?e.folders[t.id]:null},this.onFileMoveContextMenu=(e,t)=>{e.stopPropagation(),e.preventDefault(),this.props.fileMove.folderRenaming||this.props.dispatch(C.j7({type:this.FILE_MOVE_DROPDOWN,data:{folderId:t.id,position:{top:e.clientY,left:e.clientX,right:"auto",bottom:"auto"}}}))},this.handleInputChange=e=>{this.setState({newFileName:e.currentTarget.value})},this.renderViewerUpgradeAwarenessBanner=(e,t,a)=>{var n,l,i,o;if(!this.props.userResources.loaded)return null;let{userResources:s}=this.props.userResources;if(!(0,B.VA)(t)||(0,B.VA)(a))return null;let c=this.props.fileMoveData.type===j.A.FILE?this.props.fileMoveData.fileKey:"";if(s.orgId){if(null==(n=s.org)?void 0:n.k12GoogleOrg)return null;let t=s.orgUsers[s.orgId],a=t&&s.user?t[s.user.id]:null,i=!1;if(e===D._Y.DESIGN?i=(null==a?void 0:a.design_paid_status)===D.El.STARTER:e===D._Y.WHITEBOARD&&(i=(null==a?void 0:a.whiteboard_paid_status)===D.El.STARTER),i)return r.createElement(en.n,{planName:null==(l=this.props.currentOrg)?void 0:l.name,planType:Y.O.ORG,planId:s.orgId,fileKey:c,upgradeReason:el.X.MOVE_DRAFT})}else{let t=null==a?void 0:a.teamId,n=t?s.teams[t]:null;if(n&&e9(n).pro_team){let t=!1;if(e===D._Y.DESIGN?t=(null==(i=n.currentTeamUser)?void 0:i.designPaidStatus)===D.Zf.STARTER:e===D._Y.WHITEBOARD&&(t=(null==(o=n.currentTeamUser)?void 0:o.whiteboardPaidStatus)===D.Zf.STARTER),t)return r.createElement(en.n,{planName:n.name,planType:Y.O.TEAM,planId:n.id,fileKey:c,upgradeReason:el.X.MOVE_DRAFT})}}return null}}componentDidMount(){document.addEventListener("keydown",this.onkeydown),this.componentMountedAt=new Date}componentWillUnmount(){document.removeEventListener("keydown",this.onkeydown)}componentDidUpdate(e,t){!e.userResources.loaded&&this.props.userResources.loaded&&(this.props.fileMoveData.autoSelect&&this.props.dispatch(S.qb({fileMove:this.props.fileMove})),this.props.dispatch(S.YG({isSearchFocused:!0})));let a=this.props.fileMove.focusedIndex;if(this.props.fileMove.upDownKeyPressed&&e.fileMove.focusedIndex!==a){if(!this.scrollContainerElm||-1===a)return;let e=this.props.fileMove.folderRows[a].positionTop,t=this.scrollContainer.getScrollTop(),r=this.scrollContainerElm.clientHeight;e<t?0===a?this.scrollContainer.scrollToTop():this.scrollContainer.scrollTo(e):e+e1>t+r&&(null!=this.props.fileMove.indexCount&&a===this.props.fileMove.indexCount-1?this.scrollContainer.scrollToBottom():this.scrollContainer.scrollTo(e-r+e1))}this.props.fileMove.upDownKeyPressed&&this.props.dispatch(S.qM())}renderDropdown(){if(!this.props.userResources.loaded)return;let{userResources:e}=this.props.userResources,t=this.props.dropdownShown;if(!(t&&t.type===this.FILE_MOVE_DROPDOWN&&t.data&&t.data.folderId))return null;let a=e.folders[t.data.folderId];return a?r.createElement(tn,{folder:a,dropdownShown:this.props.dropdownShown,selectedView:this.props.selectedView,dispatch:this.props.dispatch}):null}render(){var e,t,a;let n,l,i;let o=this.props.fileMoveData.modalWidth||288,s=this.getModalTitle();if(!this.props.userResources.loaded)return r.createElement(Z.XV,{title:s,fixedTop:!0,minWidth:o,maxWidth:o,onClose:this.onClose,truncateTitleText:!0},r.createElement("div",{className:eH},r.createElement(b.a_,{className:"file_move--spinner--fdTRn"})));let{userResources:d}=this.props.userResources,u=e3(this.props.fileMoveData),_=null==u?null:d.folders[u],p=this.getFocusedFolder();n=this.isMovePageToNewFile?null!=p&&0!==this.state.newFileName.length:this.props.fileMoveData.type===j.A.FILE_IMPORT?null!=p:null!=p&&null!=_&&p.id!==_.id;let f=0===this.props.fileMove.teamOrder.length,g=!this.props.fileMove.folderSearchQuery&&this.props.fileMove.userTeamCount&&!(0,m.kc)().ps_benchmark&&this.props.fileMove.userTeamCount<=1&&this.props.fileMoveData.type!==j.A.FILE_IMPORT,E=!this.props.fileMove.folderSearchQuery&&this.props.fileMove.userTeamCount&&(0,m.kc)().ps_benchmark&&this.props.fileMove.userTeamCount<=1&&this.props.fileMoveData.type!==j.A.FILE_IMPORT,h=this.props.fileMoveData;switch(h.type){case j.A.FILE:l={fileKey:h.fileKey,fileTeamId:h.file&&(null==(e=h.file)?void 0:e.team_id),fileMoveModalEmptyState:g||E,orgId:this.props.currentOrg&&(null==(t=this.props.currentOrg)?void 0:t.id)},i=h.file.editor_type??D._Y.DESIGN;break;case j.A.REPO:l={repoId:h.repoId,fileMoveModalEmptyState:g||E,orgId:this.props.currentOrg&&(null==(a=this.props.currentOrg)?void 0:a.id)},i=D._Y.DESIGN;break;case j.A.FILE_IMPORT:l={},i=null;break;default:(0,c.xb)(h)}return r.createElement(L.fu,{name:Q.e0.FILE_MOVE_MODAL,properties:l},r.createElement(Z.XV,{title:s,fixedTop:!0,minWidth:o,maxWidth:o,onClose:this.onClose,truncateTitleText:!0},g?r.createElement("div",{className:"file_move--mainZeroState--LuJk0 file_move--main--RCzls",id:e2},r.createElement("div",{className:"file_move--zeroStateModal--0wxWh"},r.createElement("div",{style:{paddingTop:"100px"}},(0,x.tx)("file_browser.file_move.zero_state")),this.props.currentOrg&&r.createElement("div",{className:I.cx.pt20.$},r.createElement(v.$$,{onClick:this.onOrgViewLinkClick},this.props.currentOrg.bigma_enabled?(0,x.t)("file_browser.file_move.view_workspaces"):(0,x.t)("file_browser.file_move.view_teams"))))):r.createElement("div",{className:eH,id:e2},this.isMovePageToNewFile?r.createElement(er,{newFileName:this.state.newFileName,onChange:this.handleInputChange}):r.createElement(r.Fragment,null,i&&_&&p&&this.renderViewerUpgradeAwarenessBanner(i,_,p),r.createElement("div",{className:"file_move--searchWrapperNew--PXm8m"},r.createElement(e7,{fileMoveData:this.props.fileMoveData,folderCount:this.props.fileMove.indexCount,focusedIndex:this.props.fileMove.focusedIndex,getFocusedFolder:this.getFocusedFolder,searchQuery:this.props.fileMove.folderSearchQuery,moveFolder:this.move,dispatch:this.props.dispatch,userResources:d}))),r.createElement("div",{className:eG}),this.props.fileMoveData.displayBanner&&!this.isMovePageToNewFile&&r.createElement(r.Fragment,null,this.props.fileMoveData.displayBanner,r.createElement("div",{className:eG})),this.props.fileMove.folderSearchQuery&&!this.isMovePageToNewFile&&f?r.createElement("div",{className:"file_move--emptyModal--MPz-z"},(0,x.tx)("search.file_move.no_results_found",{folderSearchQuery:this.props.fileMove.folderSearchQuery})):r.createElement(w.P,{width:o,className:"file_move--teamSectionBody--YR9Lj",ref:this.scrollContainerRef,onScroll:this.onScroll},r.createElement(ta,{currentFolderId:u,fileMove:this.props.fileMove,fileEditorType:i,creatingNewFolder:this.props.creatingNewFolder,onFileMoveContextMenu:this.onFileMoveContextMenu,indexOffsets:this.props.fileMove.indexOffsets,teams:d.teams,folders:d.folders,teamNameMaxWidth:o-88,componentMountedAt:this.componentMountedAt,orgId:d.orgId,onDoubleClick:this.moveToSelectedFolder,selectedView:this.props.selectedView,rolesByTeamId:d.roles.byTeamId,dispatch:this.props.dispatch})),r.createElement("div",{className:"file_move--footer--Pt8L1"},r.createElement(v.nR,{onClick:this.onClose},(0,x.tx)("modal.cancel")),r.createElement(v.vd,{disabled:!n,onClick:this.moveToSelectedFolder},this.props.fileMoveData.moveText||(0,x.t)("file_browser.file_move.move")))),this.renderDropdown(),r.createElement(tl,{fileMove:this.props.fileMove,creatingNewFolder:this.props.creatingNewFolder})))}}e6.displayName="FileMoveModal";class e7 extends r.PureComponent{constructor(e){super(e),this.onFocus=()=>{this.props.dispatch(S.xH()),this.props.dispatch(S.YG({isSearchFocused:!0}))},this.onBlur=()=>{this.props.dispatch(S.YG({isSearchFocused:!1}))},this.onChange=e=>{e.stopPropagation(),this.props.dispatch(eR({modalData:this.props.fileMoveData,query:e.currentTarget.value,userResources:this.props.userResources}))},this.onSearchKeyDown=e=>{e.stopPropagation();let t=this.searchInputRef.current;switch(e.keyCode){case u.Uz.DOWN_ARROW:t&&t.blur(),null!=this.props.folderCount&&this.props.dispatch(S.TL({upperBound:this.props.folderCount}));break;case u.Uz.UP_ARROW:t&&t.blur(),this.props.dispatch(S.zv());break;case u.Uz.ESCAPE:if(!t)break;t.value?(t.value="",this.props.dispatch(eR({modalData:this.props.fileMoveData,query:"",userResources:this.props.userResources}))):this.props.dispatch(A.Ce()),this.props.dispatch(S.xH());break;case u.Uz.TAB:t&&t.blur(),this.props.dispatch(S.xH());break;case u.Uz.ENTER:{t&&t.blur();let e=this.props.getFocusedFolder();e&&this.props.moveFolder(e)}}},this.searchInputRef=r.createRef()}componentDidMount(){let e=this.searchInputRef.current;e&&e.focus()}render(){return r.createElement("div",{className:"file_move--searchContainer--0qezA"},r.createElement("div",{className:eW},r.createElement(T.B,{svg:eX.A})),r.createElement(y.L,{ref:this.searchInputRef,placeholder:(0,x.t)("file_browser.file_move.search_placeholder"),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onSearchKeyDown,className:this.props.searchQuery?"file_move--searchInputNew--k79Z1":"file_move--searchInputEmptyNew--Qc-2U file_move--searchInputNew--k79Z1",value:this.props.searchQuery,onChange:this.onChange}))}}function te(e){var t,a,n,l,i,o;let{team:s,teamId:c}=e,[d,{onMouseOver:m,onMouseOut:u}]=(()=>{let[e,t]=(0,r.useState)(!1),a=(0,r.useCallback)(()=>t(!0),[t]),n=(0,r.useCallback)(()=>t(!1),[t]);return(0,r.useMemo)(()=>[e,{onMouseOver:a,onMouseOut:n}],[e,a,n])})(),p=(0,_.Rs)(V.bel,{teamId:(null==s?void 0:s.id)??""},{enabled:!!(null==s?void 0:s.id)}),f=(null==(n=null==(a=null==(t=p.data)?void 0:t.team)?void 0:a.teamFileCounts)?void 0:n.designFileCount)??0,g=(null==(o=null==(i=null==(l=p.data)?void 0:l.team)?void 0:i.teamFileCounts)?void 0:o.whiteboardFileCount)??0,E=null==e.fileEditorType?null:"whiteboard"===e.fileEditorType?{type:W.sK.ADD_FIGJAM_FILE,nCurrentWhiteboardFiles:g}:"slides"===e.fileEditorType?{type:W.sK.ADD_SLIDES_FILE}:{type:W.sK.ADD_DESIGN_FILE,nCurrentDesignFiles:f},v=e.fileNotInTeam&&s&&E&&!(0,W.rR)((0,G.Ws)(s),E);return r.createElement(r.Fragment,null,e.showTitle&&r.createElement("div",{className:"file_move--teamTitleNew--2ojZ4 text--fontPos12--YsUAh text--_fontBase--QdLsd",onMouseOver:m,onMouseLeave:u},(c===S.iK||c===S.HK)&&r.createElement("div",{className:eW},r.createElement(T.B,{svg:eZ.A})),r.createElement("div",{className:"file_move--teamTitleRow--0tzGB"},r.createElement("div",{className:"file_move--teamName--9fqeI"},r.createElement("div",{className:"file_move--teamTitleText--NhNEM ellipsis--ellipsis--Tjyfa",style:{maxWidth:e.teamNameMaxWidth}},c===S.iK||c===S.HK?(0,x.t)("file_browser.shared_projects"):s.name),v&&r.createElement("div",{className:"file_move--warningIcon--Dsp3N"},r.createElement(T.B,{svg:eQ.A,"data-tooltip-type":K.Ib.TEXT,"data-tooltip":(0,x.t)("file_browser.file_move.paywall_team_tooltip")}))),d&&s&&!v&&r.createElement("div",{className:"file_move--newProjButton--L5YiY"},r.createElement(N.I,{team:s,isBackgroundTransparent:!0,trackingContextName:Q.e0.FILE_MOVE_MODAL})))))}function tt(e){let t=(0,r.useRef)(null),[a,n]=(0,r.useState)(!1),i=(0,l.wA)();return(0,r.useEffect)(()=>{!a&&e.isTeamNew&&t.current&&e.hasFolderSection&&(i(S.Dp({indexAt:e.firstFolderFocusedIndex})),t.current.scrollIntoView(),n(!0))},[e.isTeamNew,e.hasFolderSection,e.firstFolderFocusedIndex,a,t,i]),r.createElement("div",{className:e.className,ref:t},e.children)}function ta(e){let{fileMove:t,teams:a,selectedView:n}=e,l=Object.values(a).map(e=>e9(e));return r.createElement("div",null,null!=t.teamOrder&&t.teamOrder.map(n=>{var l,i;let o=n!==S.HK,s=n!==S.iK&&n!==S.HK,c=((null==(l=t.foldersByTeamId)?void 0:l[n])||[]).length>0;if(!(o||s||c))return null;let d=a[n];if(!d&&!(n===S.iK||n===S.HK)||(0,m.kc)().ps_benchmark&&n===S.HK&&!e.orgId)return null;let u=d?new Date(a[n].createdAt):void 0,_=u&&u>e.componentMountedAt,p=t.indexOffsets[n]+1,f=!!e.currentFolderId&&n!==(null==(i=e.folders[e.currentFolderId])?void 0:i.teamId);return r.createElement(tt,{className:"file_move--teamSection--JHso7",isTeamNew:_,firstFolderFocusedIndex:p,hasFolderSection:c,key:`Team Section ${n}`},r.createElement(te,{team:d,teamId:n,showTitle:o,isACustomTeam:s,fileNotInTeam:f,teamNameMaxWidth:e.teamNameMaxWidth,indexOffsets:e.indexOffsets,fileEditorType:e.fileEditorType}),c&&(t.foldersByTeamId[n]||[]).map((a,l)=>{let i=l+e.indexOffsets[n];return s&&(i+=1),r.createElement(tr,{key:`${a.teamId} ${a.id}`,folderBeingRenamed:t.folderRenaming,folders:e.folders,index:i,focusedFolderIndex:t.focusedIndex,folder:a,isSearchingFolders:!!t.isSearchResult,currentFolderId:e.currentFolderId,onFileMoveContextMenu:e.onFileMoveContextMenu,trackingContextName:Q.e0.FILE_MOVE_MODAL,onDoubleClick:e.onDoubleClick})}))}),!e.orgId&&r.createElement(eY,{teamNameMaxWidth:e.teamNameMaxWidth,trackingContextName:Q.e0.FILE_MOVE_MODAL,orgId:e.orgId,selectedView:n,teams:l,rolesByTeamId:e.rolesByTeamId,dispatch:e.dispatch}))}function tr(e){let t=(0,l.wA)(),a=(0,f.n_)(R.mq),n=(r,n)=>{(0,s.sx)("Rename Folder",{trackingContext:e.trackingContextName}),a({folderId:r.id,folderName:n}),t(S.Mn())},i=(t,a)=>{e.onFileMoveContextMenu(a,t)},o=e.folderBeingRenamed===e.folder.id,c=e.focusedFolderIndex===e.index,d=e.folderBeingRenamed?ej:c?"file_move--folderRowWrapperFocusedNew--egTh6 file_move--folderRowWrapper--Qw-C4":ej,{folder:u}=e;return r.createElement("div",{className:d,onMouseDown:()=>{t(S.Dp({indexAt:e.index}))},key:`${u.teamId} ${u.id}`,onContextMenu:e=>i(u,e),onDoubleClick:()=>{o||e.onDoubleClick()}},o?r.createElement("div",{className:e$},r.createElement(h.p,{key:`input ${u.id}`,className:"file_move--renameInput--RBlJ-",placeholderValue:(0,B.CI)(u),submit:e=>n(u,e),cancel:()=>{t(S.Mn())}})):((t,a)=>{let n=e8(t)&&e.isSearchingFolders,l=e.focusedFolderIndex&&e.focusedFolderIndex>-1?a:e.currentFolderId===t.id,i=(0,m.kc)().ps_benchmark&&(0,B.jd)(t)?e0.A:eq.A;return r.createElement("div",{className:e$},r.createElement("div",{className:eW},r.createElement(T.B,{svg:l?eK.A:i})),r.createElement("span",{className:"file_move--folderName--ouEY3 ellipsis--ellipsis--Tjyfa"},(0,B.CI)(t)),r.createElement("div",{className:eW},n&&r.createElement(T.B,{svg:eJ.A})))})(u,c))}e7.displayName="FileMoveSearch";class tn extends r.PureComponent{constructor(){super(...arguments),this.renameFolder=()=>{this.props.dispatch(S.JG({folderId:this.props.folder.id}))}}render(){let e=this.props.folder,t=e.canRename,a=e4(this.props.selectedView);return r.createElement(E.ms,{className:"file_move--fileMoveContextMenu--xs-xb",style:this.props.dropdownShown.data.position},r.createElement(E.c$,{disabled:!t,onClick:this.renameFolder},(0,x.tx)("file_browser.file_move.context_menu_rename")),r.createElement(E.wv,null),r.createElement(E.c$,{href:(0,$.EE)(e.id,e.orgId),target:a},(0,x.tx)("file_browser.file_move.context_menu_show_in_files")))}}tn.displayName="FileMoveDropdown";class tl extends r.PureComponent{constructor(){super(...arguments),this.hiddenDivRef=e=>{this.hiddenDiv=e}}componentDidUpdate(){!this.props.fileMove||this.props.fileMove.folderRenaming||this.props.fileMove.isSearchFocused||this.props.creatingNewFolder||null==this.hiddenDiv||this.hiddenDiv.focus()}render(){return r.createElement("div",{ref:this.hiddenDivRef,tabIndex:0})}}tl.displayName="FileMoveHiddenDiv"},404558:(e,t,a)=>{"use strict";a.r(t),a.d(t,{MoveDraftToProjectInterstitialModal:()=>v});var r=a(411855),n=a(188507),l=a(629019),i=a.n(l),o=a(966712),s=a(799569),c=a(946689),d=a(939863),m=a(822998),u=a(662275),_=a(931828),p=a(672517),f=a(488578),g=a(209590),E=a(954797);function v(e){let t=(0,n.wA)(),a=(0,o.kc)().ps_benchmark,l=()=>{t(_.b({dismissed_move_draft_to_project_interstitial_modal:!0})),t(u.Lo())};return r.createElement(p.fu,{name:"MoveDraftToProjectInterstitialModal"},r.createElement(f.aF,{title:a?(0,d.t)("file_browser.draft_to_project.title.plan_spaces"):(0,d.t)("file_browser.draft_to_project.title.seat_rename"),titleClassName:g.wN,className:g.KP,size:320,popStack:!0,disableClickOutsideToHide:!0},r.createElement(s.Jn,{className:i()(E.J_,E.BQ),onClick:l}),r.createElement("span",null,a?(0,d.tx)("file_browser.draft_to_project.body.plan_spaces"):(0,d.tx)("file_browser.draft_to_project.body.seat_rename"),r.createElement("br",null)),r.createElement("div",{className:i()(g.v0,g.hF)},r.createElement("a",{target:"_blank",href:"https://help.figma.com/hc/articles/13838684089751-Starter-plan-permissions#drafts"},r.createElement(c.tM,null,(0,d.tx)("general.learn_more"))),r.createElement(c.vd,{className:g.pL,onClick:()=>{l(),(0,m.hd)(e.file,e.repo,t,e.afterFileMove,e.moveFileModalData)}},(0,d.tx)("file_browser.draft_to_project.move")))))}},43325:(e,t,a)=>{"use strict";a.d(t,{cx:()=>l});var r=a(503457),n=a(898719);a(616705);let l=n.A.createLazyComponent(()=>Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(5343),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(7481),a.e(5299),a.e(7423),a.e(3630),a.e(3464),a.e(9004),a.e(8286),a.e(9082),a.e(1841),a.e(7748)]).then(a.bind(a,616705)).then(e=>e.default),{loading:()=>null,error:r.H4.NONE,componentName:"FileBrowserOverlays"})},179861:(e,t,a)=>{"use strict";a.r(t),a.d(t,{EduUpgradeModal:()=>f});var r=a(411855),n=a(188507),l=a(946689),i=a(939863),o=a(702954),s=a(507877),c=a(662275),d=a(995852),m=a(672517),u=a(594901),_=a(243987),p=a(585878);function f(){let e=(0,u.FC)(),t=(0,n.wA)(),a=r.useCallback(()=>{t(c.Ce())},[t]),f=r.useCallback(e=>{a(),t(d.Vm({teamId:e.id}))},[t,a]),g=r.useCallback(()=>{a(),t(s.Dw({isEduTeam:!0}))},[t,a]),E=r.useMemo(()=>(0,_.Kg)(e),[e]);return r.useLayoutEffect(()=>{0===E.length&&g()},[t,E.length,g]),r.createElement(m.fu,{name:"Edu Team Upgrade Modal"},r.createElement(p.XV,{title:(0,i.t)("edu.upgrade_teams.headline"),onClose:a},r.createElement("div",{className:"edu_upgrade_modal--container--i-0VV"},r.createElement("p",{className:"edu_upgrade_modal--bodyText--BXu7I"},(0,i.tx)("edu.upgrade_teams.body",{link:r.createElement(l.Ph,{className:"edu_upgrade_modal--link--Toy9f",href:"/pricing",target:"_blank",trusted:!0},(0,i.tx)("edu.upgrade_teams.body_link_text"))}),E.length>1&&r.createElement(r.Fragment,null," ",(0,i.tx)("edu.upgrade_teams.body_multiple_teams"))),r.createElement(o.I,{eligibleTeams:E,selectTeam:f,showEditorCount:!1,customUpgradeText:(0,i.t)("general.next")}),r.createElement(l.Ph,{className:"edu_upgrade_modal--createTeamLink--CbJUX edu_upgrade_modal--link--Toy9f",onClick:g,trusted:!0},(0,i.tx)("edu.or_create_a_new_team")))))}},913369:(e,t,a)=>{"use strict";a.r(t),a.d(t,{DowngradeSurveyModal:()=>P,DowngradeSurveyModalAdmin:()=>M,DowngradeSurveyModalLeaveTeam:()=>O});var r=a(411855),n=a(939863),l=a(898719),i=a(237870);let o="team-admin-confirm-downgrade",s=l.A.createLazyComponent(()=>Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(5343),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(7481),a.e(5299),a.e(7423),a.e(3630),a.e(3464),a.e(9004),a.e(8286),a.e(9082),a.e(1841),a.e(7748)]).then(a.bind(a,815622)).then(e=>e.ConfirmDowngradeModal),(0,i.Ij)("ConfirmDowngradeModal"));(0,i.qK)(o,s);var c=a(662275),d=a(902957),m=a(188507),u=a(946689),_=a(611978),p=a(585878);function f({id:e,label:t,children:a,onChange:n}){let[l,i]=r.useState(!1);return r.createElement("fieldset",{name:e},r.createElement("div",{className:"survey_option--inputContainer---R-Fh"},r.createElement(u.tB,{id:e,checked:l,onChange:e=>{i(!l),n&&n(e)}}),r.createElement("label",{className:"survey_option--label--NqXEk",htmlFor:e},t)),l&&a&&r.createElement("div",{className:"survey_option--subContainer--Omjmy"},a))}var g=a(717068),E=a(629019),v=a.n(E),h=a(268537),y=a(773058),b=a(908968);function w(e){let[t,a]=r.useState(""),n=e=>{a(e.target.value)};return e.textarea?r.createElement(b.v,{value:t,onChange:n,...e}):r.createElement(u.ks,{id:e.id,className:"survey_text_input--input--Q1W-9",placeholder:e.placeholder,maxLength:100,value:t,onChange:n})}let T="downgrade_survey_modal_component_v2--surveyQuestions--E5X6t",I="downgrade_survey_modal_component_v2--researchContact--qGc3V",x="downgrade_survey_modal_component_v2--hiddenInput--04h5p",N="downgrade_survey_modal_component_v2--radio--xvUsz",C=[{id:"brl",shorthand:"BRL"},{id:"cad",shorthand:"CAD"},{id:"eur",shorthand:"EUR"},{id:"gbp",shorthand:"GBP"},{id:"jpy",shorthand:"JPY"}];function S({id:e,shorthand:t}){return r.createElement("div",{className:"downgrade_survey_modal_component_v2--currencyContainer--CoFln"},r.createElement("p",null,(0,n.tx)(`downgrade_survey.survey_option.too_expensive.${e}`)),r.createElement("p",{className:"downgrade_survey_modal_component_v2--currencyShorthand--xhQpy"},t))}let k=[{id:"too_expensive",value:"Too expensive",children:r.createElement(function(){let e="other_currency",[t,a]=r.useState(""),l=e=>{a(e.currentTarget.id)},i=[...C.map(({id:e,shorthand:t})=>r.createElement(h.c$,{id:e,key:e,onClick:l},r.createElement(S,{id:e,shorthand:t}))),r.createElement(h.wv,{key:"separator"}),r.createElement(h.c$,{id:e,onClick:l,key:e},(0,n.tx)("downgrade_survey.survey_option.too_expensive.other_currency"))];return r.createElement("fieldset",null,r.createElement(f,{id:"currency_conversion",label:(0,n.t)("downgrade_survey.survey_option.too_expensive.currency_conversion")},r.createElement("fieldset",{className:v()({"downgrade_survey_modal_component_v2--currencySelector__other--khpqx":t===e})},r.createElement(h.Ve,{label:t.length?(0,n.t)(`downgrade_survey.survey_option.too_expensive.${t}`):(0,n.t)("downgrade_survey.survey_option.too_expensive.currency_selector"),options:i}),r.createElement("input",{id:"currency",className:x,readOnly:!0,value:t}),t===e&&r.createElement(w,{id:"currency_input",placeholder:(0,n.t)("downgrade_survey.survey_option.too_expensive.specify_currency")}))))},null),getSubOptions:e=>{let t=Array.from(e.getElementsByTagName("input")),a=t.find(e=>"currency_conversion"===e.id),r=t.find(e=>"currency"===e.id),n=null==r?void 0:r.value,l=t.find(e=>"currency_input"===e.id),i=(null==l?void 0:l.value)||n||void 0;return{currencyConversion:null==a?void 0:a.checked,currency:i}}},{id:"billing_structure_unclear",value:"Billing structure is unclear"},{id:"no_longer_using_figma_products",value:"No longer using Figma's products",children:r.createElement(function(){return r.createElement("fieldset",null,r.createElement("legend",{className:"downgrade_survey_modal_component_v2--additionalQuestion--HfKNO"},(0,n.tx)("downgrade_survey.survey_option.no_longer_using_figma_products.other_products")),r.createElement(w,{id:"other_products",placeholder:(0,n.t)("downgrade_survey.survey_option.no_longer_using_figma_products.text_area")}))},null),getSubOptions:e=>{let t=Array.from(e.getElementsByTagName("input")).find(e=>"other_products"===e.id);return{products:(null==t?void 0:t.value)||void 0}}},{id:"project_inactive",value:"Project is over or no longer active"},{id:"accidental_upgrade",value:"Did not mean to upgrade"},{id:"switching_plans",value:"Switching to a different plan",children:r.createElement(function(){let[e,t]=r.useState("");return r.createElement(r.Fragment,null,r.createElement(y.z,{value:e,onChange:e=>t(e)},r.createElement(y.Z,{className:N,value:"Starter plan"},(0,n.tx)("downgrade_survey.survey_option.switching_plans.starter_plan")),r.createElement(y.Z,{className:N,value:"Organization plan"},(0,n.tx)("downgrade_survey.survey_option.switching_plans.organization_plan")),r.createElement(y.Z,{className:N,value:"Enterprise plan"},(0,n.tx)("downgrade_survey.survey_option.switching_plans.enterprise_plan")),r.createElement(y.Z,{className:N,value:"Education plan"},(0,n.tx)("downgrade_survey.survey_option.switching_plans.education_plan"))),r.createElement("input",{id:"new_plan",className:x,readOnly:!0,value:e}))},null),getSubOptions:e=>{let t=Array.from(e.getElementsByTagName("input")).find(e=>"new_plan"===e.id);return{newPlan:(null==t?void 0:t.value)||void 0}}}],A={id:"other",value:"Other",children:r.createElement(function(){return r.createElement(w,{className:"downgrade_survey_modal_component_v2--otherTextArea--pS5MZ",placeholder:(0,n.t)("downgrade_survey.survey_option.other.text_area"),textarea:!0})},null),getSubOptions:e=>({explanation:e.getElementsByTagName("textarea")[0].value||void 0})},L=(0,g.k4)(k).concat(A);var R=a(321112),D=a(538411);function F({cancelText:e,onSubmit:t}){let[a,l]=r.useState([]),i=e=>{let{id:t}=e.currentTarget;a.includes(t)?l(a.filter(e=>e!==t)):l([...a,t])},o=(0,m.wA)(),s=(0,_._6)().teamId,d=()=>{o(c.Ce())};return r.createElement(p.XV,{title:(0,n.t)("downgrade_survey.header"),fixedTop:!0,minWidth:370,maxWidth:370,onClose:d,dataTestId:"downgrade-survey-modal"},r.createElement("form",{className:"downgrade_survey_modal_component_v2--modalBody--tYceI",onSubmit:e=>{e.preventDefault();let r=Array.from(e.currentTarget.getElementsByClassName(T)[0].getElementsByTagName("fieldset")),n=a.map(e=>{let t=r.find(t=>t.name===e),{value:a,getSubOptions:n}=L.find(t=>t.id===e);return{reason:a,...n&&n(t)}});t({teamId:s,canContact:e.currentTarget.getElementsByClassName(I)[0].getElementsByTagName("input")[0].checked,selectedOptions:n})}},r.createElement("div",{className:"downgrade_survey_modal_component_v2--exitSurvey--9HRcF"},r.createElement("fieldset",{className:T},r.createElement("legend",null,(0,n.tx)("downgrade_survey.what_made_you_cancel_your_plan")),!a.length&&r.createElement("p",{className:D.Q},(0,n.tx)("downgrade_survey.select_one")),L.map(({id:e,children:t})=>r.createElement(f,{id:e,label:(0,n.t)(`downgrade_survey.survey_option.${e}`),key:e,onChange:i},t))),r.createElement("fieldset",{className:I},r.createElement("legend",null,(0,n.tx)("downgrade_survey.research_contact")),r.createElement(f,{id:"research",label:(0,n.t)("downgrade_survey.allow_research_contact")}))),r.createElement("div",{className:"downgrade_survey_modal_component_v2--buttonRow--Y15LH"},r.createElement(u.tM,{className:R.Lu,type:"button",onClick:d},e),r.createElement(u.vd,{type:"submit",disabled:!a.length,className:R.pL,autoFocus:!1},(0,n.tx)("downgrade_survey.continue")))))}function P(e){let t="admin"===e.context?(0,n.t)("downgrade_survey.go_back"):(0,n.t)("downgrade_survey.do_not_leave_team");return r.createElement(F,{onSubmit:t=>{var a,r;let n=null==(a=e.modalShown)?void 0:a.data.teamId,l=null==(r=e.modalShown)?void 0:r.data.billingEndDate;if("admin"===e.context)e.dispatch(c.to({type:o,data:{teamId:n,billingEndDate:l,exitSurveyData:t}}));else if("leave-team"===e.context){let t=e.teams[n];e.dispatch(d.yH({team:t,userInitiated:!0})),e.dispatch(c.Ce())}},cancelText:t})}function M(e){return r.createElement(P,{...e,context:"admin"})}function O(e){return r.createElement(P,{...e,context:"leave-team"})}},464920:(e,t,a)=>{"use strict";a.r(t),a.d(t,{FOLDER_DELETE_CONFIRM_MODAL:()=>m,FolderBatchDeleteConfirmModal:()=>u});var r=a(411855),n=a(188507),l=a(776250),i=a(752553),o=a(881388),s=a(939863),c=a(688083),d=a(488578);let m="folder-delete-confirm-modal";function u({folders:e}){let t=(0,n.wA)(),a=(0,i.n_)(c.U),m=e=>{e.forEach(e=>{(0,l.sx)("Folder Delete Confirmation Click",{folderId:e.id,teamId:e.teamId,orgId:e.orgId})}),a({folderIds:e.map(e=>e.id)}).catch(()=>{t(o.s.error((0,s.t)("file_browser.api_folder.error_when_deleting")))})};return r.createElement(d.Rw,{confirmationTitle:(0,s.t)("file_browser.delete_project.title"),destructive:!0,confirmText:(0,s.t)("file_browser.delete_project.generic_confirm_label"),onConfirm:()=>{m(e)}},(0,s.tx)("file_browser.batch_delete_projects.confirm_text",{numProjects:e.length}))}},295543:(e,t,a)=>{"use strict";a.r(t),a.d(t,{FOLDER_DELETE_CONFIRM_MODAL:()=>f,FolderDeleteConfirmModal:()=>g});var r=a(411855),n=a(188507),l=a(776250),i=a(752553),o=a(762638),s=a(881388),c=a(939863),d=a(485911),m=a(688083),u=a(875847),_=a(850134),p=a(488578);let f="folder-delete-confirm-modal";function g({folder:e}){let t=(0,n.wA)(),a=(0,i.n_)(m.tO),f=e=>{(0,l.sx)("Folder Delete Confirmation Click",{folderId:e.id,teamId:e.teamId,orgId:e.orgId}),a({folderId:e.id}).catch(()=>{t(s.s.error((0,c.t)("file_browser.api_folder.error_when_deleting")))})},g=(0,_.x)(e.id),E=r.createElement("span",{className:o.cx.fontBold.$},(0,u.CI)(e));return r.createElement(p.Rw,{confirmationTitle:(0,c.t)("file_browser.delete_project.title"),destructive:!0,confirmText:"loaded"!==g.status?(0,c.t)("file_browser.delete_project.generic_confirm_label"):1===g.data?(0,c.t)("file_browser.delete_project.one_file_confirm_label"):(0,c.t)("file_browser.delete_project.plural_files_confirm_label",{numFiles:(0,d.t)(g.data)}),onConfirm:()=>{f(e)}},"loaded"!==g.status?(0,c.tx)("file_browser.delete_project.generic_confirm_text",{folderName:E}):1===g.data?(0,c.tx)("file_browser.delete_project.one_file_confirm_text",{folderName:E}):(0,c.tx)("file_browser.delete_project.plural_files_confirm_text",{folderName:E,numFiles:(0,d.t)(g.data)}))}},580294:(e,t,a)=>{"use strict";a.r(t),a.d(t,{FolderMoveModal:()=>R});var r=a(411855),n=a(188507),l=a(629019),i=a.n(l),o=a(737947),s=a(946689),c=a(827586),d=a(574176),m=a(939863),u=a(732813),_=a(662275),p=a(672517),f=a(385111),g=a(688083),E=a(594901),v=a(623746),h=a(428467),y=a(206193),b=a(851363),w=a(231959),T=a(143678),I=a(392340),x=a(585878),N=a(566067);let C="folder_move--iconContainer--nXjIY file_move--iconContainer--SWek6";var S=a(613557),k=a(450147),A=a(126815),L=a(575675);function R(e){var t,a;let l,i;let u=(0,n.wA)(),h=(0,n.d4)(e=>e.currentUserOrgId),C=(0,n.d4)(e=>null!=h?e.orgById[h]:null),k=(0,I.Q)({currentOrgId:h,currentTeamId:null}),L=(0,n.d4)(t=>t.folders[e.folderId]),[R,P]=(0,r.useState)(void 0),[M,O]=(0,r.useState)(void 0),B="loaded"===k.status?{...k.data.currentUser}:null,U=f.h.useTrackingContext({trigger:y.b.FOLDER_MOVE_MODAL}),V={},H=[],W=(0,E.FC)();if(B){let e=[];(B.teamRoles??[]).forEach(t=>{var a,r,n,l,o,s,c,d;if((null==(a=t.team)?void 0:a.orgId)===h&&!(null==(r=t.team)?void 0:r.deletedAt)&&!t.pending){if((null==(n=t.team)?void 0:n.id)===(null==L?void 0:L.team_id)){i=t;return}e.push(t),(null==(o=null==(l=t.team)?void 0:l.workspace)?void 0:o.id)?(V[null==(s=t.team.workspace)?void 0:s.id]=V[null==(c=t.team.workspace)?void 0:c.id]??[],V[null==(d=t.team.workspace)?void 0:d.id].push(t)):t.team&&H.push(t)}});let r=null==(t=B.baseOrgUser)?void 0:t.workspaceUsers;l=null==(a=null==r?void 0:r.find(e=>null==e?void 0:e.isMainWorkspace))?void 0:a.workspaceId}let j=()=>{u(_.Ce())},$=(e,t)=>{P(e),O(t)},G=(0,r.useCallback)(()=>{if(R&&!M){let e=(0,b.bL)(null==R?void 0:R.id,R.orgId);o.Ay.redirect(e,"_blank")}},[R,M]),z=(0,r.useCallback)(e=>{if(!C)return;let t={workspaceId:e??w.O,onSubmitReturnToPrevView:!1};u(_.to({type:N.Uc,data:t}))},[C,u]),Y=e=>r.createElement(r.Fragment,null,e.map(e=>r.createElement(F,{team:e.team,key:e.id,selectedTeamId:null==R?void 0:R.id,onSelectTeam:$,permissionsState:W}))),K=e=>r.createElement(F,{team:e.team,key:e.id,selectedTeamId:null==R?void 0:R.id,isCurrentTeam:!0,permissionsState:W,onSelectTeam:$});if(!L)return null;let Q=Object.keys(V).length>0,q=R&&i&&i.team.id===R.id;return r.createElement(p.fu,{name:T.e0.FILE_MOVE_MODAL,properties:U},r.createElement(x.XV,{title:(0,m.t)("file_browser.folder_move.modal_header",{folderName:L.name}),fixedTop:!0,minWidth:288,maxWidth:288,onClose:j,truncateTitleText:!0},r.createElement("div",{className:"folder_move--main--TkW9w file_move--main--RCzls"},r.createElement(c.P,{className:"folder_move--teamSectionBody--LACBL file_move--teamSectionBody--YR9Lj"},r.createElement("div",{className:"folder_move--teamSection---S02k file_move--teamSection--JHso7"},Q?(function(e,t,a){var r,n;let l=(null==(n=null==(r=null==t?void 0:t.team)?void 0:r.workspace)?void 0:n.id)??null,i=[l];return a&&a!==l&&e[a]&&i.push(a),Object.keys(e).filter(e=>e!==l&&e!==a).sort((t,a)=>{var r,n,l,i,o,s,c,d;let m=(null==(i=null==(l=null==(n=null==(r=e[t][0])?void 0:r.team)?void 0:n.workspace)?void 0:l.name)?void 0:i.toLocaleUpperCase())??"",u=(null==(d=null==(c=null==(s=null==(o=e[a][0])?void 0:o.team)?void 0:s.workspace)?void 0:c.name)?void 0:d.toLocaleUpperCase())??"";return m<u?-1:m>u?1:0}).forEach(e=>{i.push(e)}),null!==l&&i.push(null),i})(V,i,l).map(e=>{var t,a,n,l,o;if(null===e){if(H.length>0)return r.createElement(r.Fragment,{key:"other_teams_key"},r.createElement(D,{headerName:(0,m.t)("sidebar.workspaces.other_teams"),onCreateNewTeamClick:z,workspaceId:null}),null!=i&&(null==(a=null==(t=i.team)?void 0:t.workspace)?void 0:a.id)==null&&K(i),Y(H))}else if(V[e]){let t=V[e],a=t?(null==(n=t[0].team)?void 0:n.workspace)??null:null;return r.createElement(r.Fragment,{key:e},r.createElement(D,{headerName:(null==a?void 0:a.name)??"",onCreateNewTeamClick:z,workspaceId:(null==a?void 0:a.id)??null}),null!=i&&(null==(o=null==(l=i.team)?void 0:l.workspace)?void 0:o.id)===e&&K(i),Y(t))}}):r.createElement(r.Fragment,null,C&&r.createElement(D,{key:"org_teams_header",headerName:C.name,onCreateNewTeamClick:z,workspaceId:null}),null!=i&&K(i),Y(H))),R&&!M&&r.createElement("div",{className:"folder_move--warningContainer--MXpOB"},r.createElement("div",{className:"folder_move--warningSectionIcon--gOcDL"},r.createElement(d.B,{svg:A.A})),r.createElement("div",null,(0,m.tx)("file_browser.folder_move.move_project_no_edit_access_warning"),r.createElement("div",{className:"folder_move--warningCTALink--f74xo",onClick:G,role:"link",tabIndex:0},(0,m.tx)("file_browser.folder_move.view_team"),r.createElement("div",{className:"folder_move--arrowRightIcon--xIk7X"},r.createElement(d.B,{svg:S.A})))))),r.createElement("div",{className:"folder_move--footer--jcEsZ file_move--footer--Pt8L1"},r.createElement(s.nR,{onClick:j},(0,m.tx)("modal.cancel")),r.createElement(s.vd,{onClick:()=>{null!=R&&L&&u((0,g.Nr)({folder:(0,v.Bp)(L),team:R})),j()},disabled:void 0===R||!M||!!q},(0,m.tx)("file_browser.folder_move.move_project"))))))}function D(e){let[t,a]=(0,r.useState)(!1);return r.createElement("div",{className:"folder_move--teamsHeaderRow--qZfbl text--fontPos12--YsUAh text--_fontBase--QdLsd",onMouseMove:()=>a(!0),onMouseLeave:()=>a(!1)},r.createElement("div",null,e.headerName),t&&r.createElement(u.f,{data_tooltip:(0,m.t)("file_browser.inline_team_creation.button_text"),data_onboarding_key:"new-team-button",innerText:(0,m.t)("file_browser.inline_team_creation.button_text"),onClick:()=>{e.onCreateNewTeamClick(e.workspaceId)}}))}function F(e){var t;let{team:a}=e;if(null==a)return r.createElement(r.Fragment,null);let n=i()(["folder_move--teamTitle--PwZow file_move--teamTitle--ZKSP9 text--fontPos12--YsUAh text--_fontBase--QdLsd",e.isCurrentTeam&&!e.selectedTeamId||e.selectedTeamId===(null==(t=e.team)?void 0:t.id)?"folder_move--selectedTeamTitle---C1u4":""]),l=(0,h.canEditTeam)(a.id,e.permissionsState);return r.createElement("div",{className:n,onClick:()=>{e.onSelectTeam&&e.onSelectTeam(a,l)},role:"button",tabIndex:0},r.createElement("div",{className:C},r.createElement(d.B,{svg:e.isCurrentTeam?k.A:L.A})),r.createElement("div",{className:"folder_move--teamTitleRow--6MpKM file_move--teamTitleRow--0tzGB"},r.createElement("div",{className:"folder_move--teamName--fvmi0 file_move--teamName--9fqeI"},a.name)),e.selectedTeamId===a.id&&!l&&r.createElement("div",{className:C},r.createElement(d.B,{svg:A.A})))}},120521:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ChangeAnnualPlanModal:()=>N,ChangeAnnualPlanRow:()=>x,ConfirmCancelAnnualPlanModal:()=>C});var r=a(411855),n=a(188507),l=a(966712),i=a(752553),o=a(946689),s=a(881388),c=a(939863),d=a(49891),m=a(662275),u=a(995852),_=a(672517),p=a(710667),f=a(720647),g=a(574468),E=a(860178),v=a(99506),h=a(820113),y=a(243987),b=a(984968),w=a(265361),T=a(488578),I=a(135079);function x(e){return r.createElement(r.Fragment,null,(0,c.tx)("change_annual_plan_modal.number_of_editors.seat_rename",{productType:(0,w.E)((0,f.vc)(e.editorType))}),r.createElement(o.ks,{"data-testid":"change-annual-plan-row-input",type:"number",name:e.editorType,step:1,min:1,max:y.m,value:e.tempNumEditors,onChange:t=>{let a=t.target.value;e.setTempEditorsValue(parseInt(a))}}))}function N(){let e=(0,b.cD)(),t=(0,E.TA)(),a=(0,n.d4)(e=>e.teamBilling.summary),o=(0,n.d4)(e=>e.payment.submitPutAnnualQuantityPending),N=(0,n.wA)(),C=(0,p.N1)(p.Fq.TEAM_ADMIN_CONSOLE),[S]=(0,i.mI)(C),k=()=>{try{if(null==a?void 0:a.annual_subscription)return(null==a?void 0:a.annual_subscription)||void 0;return}catch(e){return}},A=k(),L=(null==A?void 0:A.whiteboard_quantity)||0,[R,D]=r.useState(L),[F,P]=r.useState((null==A?void 0:A.design_quantity)||(null==A?void 0:A.quantity)||0),M=(t,a)=>{N(u.MV({teamId:e,annualQuantity:t,annualWhiteboardQuantity:a}))},O=!!(null==A?void 0:A.trial_end)&&!!(0,y.mt)(A.trial_end),B=A?(0,c.t)("change_annual_plan_modal.plan_start_date",{startDate:new Date(A.current_period_end)}):(0,c.t)("change_annual_plan_modal.unknown_start_date"),U=O?(0,c.t)("change_annual_plan_modal.confirmation_header_plan_starting",{startDate:B}):(0,c.t)("change_annual_plan_modal.confirmation_header_plan_started",{startDate:B});return r.createElement(_.fu,{name:"Change Annual Plan Modal",properties:{teamId:e,userId:t??void 0}},r.createElement(T.Rw,{confirmationTitle:U,confirmText:(0,c.t)("change_annual_plan_modal.confirm_text"),onConfirm:()=>{var t,a,n;isNaN(F)||isNaN(R)||F<0||R<0||0===F&&0===R?N(s.s.error((0,c.t)("change_annual_plan_modal.invalid_seats_error"))):F+R>y.m?(N(s.s.error(r.createElement("div",null,(0,c.tx)("change_annual_plan_modal.contact_support_to_purchase_more_seats_error",{maxAnnualSubscriptions:y.m,contactSupportLink:r.createElement("a",{href:`mailto:${(0,l.W4)()}`},(0,c.t)("change_annual_plan_modal.contact_support_link"))})))),P((null==(t=k())?void 0:t.design_quantity)||(null==(a=k())?void 0:a.quantity)||0),D((null==(n=k())?void 0:n.whiteboard_quantity)||0)):R+F>100?N(m.to({type:d.Mv,data:{numAnnualEditors:F+R,onConfirm:()=>{M(F,R)}}})):N(u.MV({teamId:e,annualQuantity:F,annualWhiteboardQuantity:R}))},onCancel:()=>{N(m.Ce())},dontClose:!0,disableConfirm:o,trackedConfirmationProperties:{teamId:e,userId:t??void 0,monthly_quantity_design:F,monthly_quantity_figjam:R}},r.createElement("br",null),(0,c.tx)("change_annual_plan_modal.change_annual_plan_grace_period.seat_rename"),r.createElement("br",null),r.createElement("br",null),(()=>{let e=a.currency,t=new h.vr(e),n=(0,g.He)(S.data,t.currency,f.lM.DESIGN),l=(0,g.He)(S.data,t.currency,f.lM.FIGJAM);return r.createElement(r.Fragment,null,(0,c.tx)("change_annual_plan_modal.instructions.seat_rename",{monthlyEditorCost:t.formatMoney(n,{showCents:!1}),editorProduct:(0,w.E)(f.oM.DESIGN),monthlyFigjamCost:t.formatMoney(l,{showCents:!1}),figJamProduct:(0,w.E)(f.oM.WHITEBOARD)}))})(),r.createElement("br",null),r.createElement("br",null),r.createElement(x,{editorType:v._Y.DESIGN,tempNumEditors:F,setTempEditorsValue:e=>P(e),dispatch:N}),r.createElement(r.Fragment,null,r.createElement("br",null),r.createElement("br",null),r.createElement(x,{editorType:v._Y.WHITEBOARD,tempNumEditors:R,setTempEditorsValue:e=>D(e),dispatch:N})),r.createElement("br",null),r.createElement("br",null),r.createElement("a",{className:"change_annual_plan_modal--link--n0jw2 blue_link--blueLink--9rlnd",onClick:()=>{N(m.to({type:I.V}))}},O?(0,c.t)("change_annual_plan_modal.remove_annual_plan"):(0,c.t)("change_annual_plan_modal.dont_renew_annual_plan"))))}function C(){let e=(0,b.ol)(),t=(0,n.d4)(e=>e.teamBilling.summary.currency),a=(0,n.d4)(e=>e.payment.submitPutAnnualQuantityPending),l=(0,n.wA)(),o=(0,p.N1)(p.Fq.TEAM_ADMIN_CONSOLE),[s]=(0,i.mI)(o),d=new h.vr(t),_=(0,g.He)(s.data,d.currency,f.lM.DESIGN),E=(0,g.He)(s.data,d.currency,f.lM.FIGJAM);return r.createElement(T.Rw,{title:(0,c.t)("change_annual_plan_modal.cancel_annual_plan_header"),confirmText:(0,c.t)("change_annual_plan_modal.confirm_cancel_annual_plan"),cancelText:(0,c.t)("change_annual_plan_modal.nevermind"),onConfirm:()=>{let t=e.id;l(u.MV({teamId:t,annualQuantity:0,annualWhiteboardQuantity:0}))},onCancel:()=>{l(m.to({type:I.X,data:{}}))},dontClose:!0,disableConfirm:a},r.createElement("br",null),r.createElement(r.Fragment,null,(0,c.tx)("change_annual_plan_modal.cancel_annual_plan_text.seat_rename",{monthlyEditorCost:d.formatMoney(_),monthlyFigJamEditorCost:d.formatMoney(E)})),r.createElement("br",null),r.createElement("br",null),(0,c.tx)("change_annual_plan_modal.cancel_annual_plan_subtext"))}},685399:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TeamChangePaymentModal:()=>h});var r=a(411855),n=a(188507),l=a(629019),i=a.n(l),o=a(981952),s=a(946689),c=a(493323),d=a(762638),m=a(939863),u=a(662275),_=a(843309),p=a(707465),f=a(668526),g=a(585878),E=a(512077),v=a(401331);function h({currency:e,customerInfo:t,defaultCountry:a,estimatedChargeCents:l,isReactivating:h,canSeeBillingAddressExp:y}){let b=h?(0,m.t)("change_payment.success.successfully_reactivated_subscription"):(0,m.t)("change_payment.success.successfully_updated_your_payment_method"),w=(0,n.d4)(e=>(0,p.Np)(e,{view:"teamAdminConsole",teamId:t.teamId,teamAdminConsoleViewTab:f.I.SETTINGS})),{createPaymentElement:T,unmountPaymentElement:I,savePayment:x,billingAddress:N,updateBillingAddress:C,nameOnPaymentMethod:S,setNameOnPaymentMethod:k,paymentMethodType:A,error:L}=(0,_.Op)({setupIntentParams:{redirect_url:w,subtotal_estimate:l,success_message:b,currency:e},paymentFlowSource:_.wn.PRO_CHANGE_PAYMENT,customerInfo:t,defaultCountry:a,currency:e,canSeeBillingAddressExp:y,isCheckout:!1}),[R,D]=r.useState(!1),[F,P]=r.useState(!1),[M,O]=r.useState(window.innerHeight),B=(0,n.wA)(),U=(null==L?void 0:L.code)===_.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,V=()=>B(u.Ce());(0,o.P)(({height:e})=>{O(e)});let H=async e=>{e&&e.preventDefault(),P(!0),await x(),P(!1)};return r.createElement(g.XV,{title:y?(0,m.t)("change_payment.update_payment_details"):(0,m.t)("change_payment.enter_payment_method"),onClose:V,maxWidth:465,headerSize:"large"},r.createElement("div",{className:i()({[v.$J]:!R,[v.Un]:U})},r.createElement("form",{onSubmit:H},r.createElement("div",{className:v.KJ,style:{maxHeight:Math.min(M-49-65,652)}},R&&y&&r.createElement("div",{className:d.cx.mb16.$},r.createElement("label",{htmlFor:"updatePaymentDetails",className:d.cx.colorTextSecondary.$},(0,m.tx)("change_payment.update_payment_details_description"))),r.createElement(E.F,{createPaymentElement:T,unmountPaymentElement:I,billingAddress:N,updateBillingAddress:C,nameOnPaymentMethod:S,updateNameOnPaymentMethod:k,paymentMethodType:A,error:L,isCommunityCheckout:!1,paymentElementEventHandlers:{ready:()=>D(!0)},canSeeBillingAddressExp:y,isCheckout:!1})),R&&!U&&r.createElement("div",{className:v.UD},F&&r.createElement(c.kt,{className:v.u1}),r.createElement(s.tM,{onClick:V},(0,m.tx)("change_payment.cancel")),r.createElement(s.vd,{tabIndex:0,type:"submit",disabled:F},(0,m.tx)("change_payment.save")))),U&&r.createElement(s.tM,{onClick:V},(0,m.tx)("change_payment.close_window"))))}},165915:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ChangeVatGstIdModal:()=>h});var r=a(411855),n=a(188507),l=a(629019),i=a.n(l),o=a(915440),s=a(711525),c=a(946689),d=a(455057),m=a(939863),u=a(662275),_=a(99506),p=a(279453),f=a(585878),g=a(173067),E=a(209590);function v(e,t){return e&&"loaded"===t.status?t.data.org:e||"loaded"!==t.status?null:t.data.team}let h=r.memo(function(e){var t,a,l;let h=(0,n.wA)(),{updateVatGstId:y}=e,b=!!(null==(t=e.org)?void 0:t.id),w=(0,o.Rs)(p.Wt6,{orgId:(null==(a=e.org)?void 0:a.id)||""},{enabled:b}),T=(0,o.Rs)(p.xS7,{teamId:(null==(l=e.team)?void 0:l.id)||""},{enabled:!b}),I=b?w:T,x=v(b,I),N=null==x?void 0:x.taxIdVerificationStatus,[C,S]=r.useState(),[k,A]=r.useState(""),[L,R]=r.useState(""),[D,F]=r.useState(!1),[P,M]=r.useState({country:"",state:""}),[O,B]=r.useState(!1);r.useEffect(()=>{if(!O&&"loaded"===I.status){let e=v(b,I),t=e?(0,s.oA)(e.taxInfo):null;A((null==e?void 0:e.vatGstId)||""),R((null==t?void 0:t.regionalVatGstId)||""),F((null==t?void 0:t.canUpdateRegionalVatGst)||!1),M({country:(null==t?void 0:t.country)||"",state:(null==t?void 0:t.state)||""}),B(!0)}},[b,I,O]);let U=()=>{h(u.Ce())};return r.createElement(f.XV,{onClose:U,title:(0,m.t)("change_vat_gst_id.input_id"),minWidth:344,maxWidth:344,fixedTop:!0},C&&r.createElement("div",{className:"change_vat_gst_id_modal--errorBanner--sqxNt","data-testid":"change-vat-gst-id-error"},r.createElement(d._,{color:d.S.ERROR,rounded:!1,text:C})),N===_.kI.VERIFIED&&r.createElement("div",{"data-testid":"change-vat-gst-id-information"},r.createElement(d._,{color:d.S.INFORMATION,rounded:!1,text:(0,m.t)("change_vat_gst_id.tax_id_verification_succeeded")})),N===_.kI.UNVERIFIED&&r.createElement("div",{"data-testid":"change-vat-gst-id-warning"},r.createElement(d._,{color:d.S.WARNING,rounded:!1,text:(0,m.t)("change_vat_gst_id.tax_id_verification_failed")})),r.createElement("div",{className:E.Dy},r.createElement("p",{className:"change_vat_gst_id_modal--description--6gdSL"},(0,m.tx)("change_vat_gst_id.description")),r.createElement("form",{onSubmit:e=>{e.preventDefault(),y(k,e=>S(e),D?L:"").then(e=>{e&&U()})},"data-testid":"change-vat-form"},O&&r.createElement(g.A,{onChange:A,country:P.country,vatId:k,isCommunityCheckout:!1}),D&&r.createElement(g.A,{onChange:R,country:P.country,region:P.state,vatId:L,isCommunityCheckout:!1,variant:"regional"}),r.createElement("div",{className:i()(E.v0,E.hF)},r.createElement(c.vd,{className:E.pL,type:"submit",disabled:!O},(0,m.tx)("change_vat_gst_id.save_id"))))))})},815622:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ConfirmDowngradeModal:()=>f});var r=a(411855),n=a(188507),l=a(629019),i=a.n(l),o=a(776250),s=a(946689),c=a(939863),d=a(662275),m=a(995852),u=a(585878),_=a(209590);let p=r.memo(function(e){let t=(0,n.wA)(),{teamId:a,billingEndDate:l,exitSurveyData:p}=e.modalShown.data,f=e.teams[a],g=()=>{t(d.Ce())},E=l?(0,c.tx)("confirm_downgrade.at_the_end_of_your_current_billing_period_team_name_will_be_downgraded_to_our_free_starter_plan",{teamName:f.name,billingEndDate:l}):(0,c.tx)("confirm_downgrade.on_your_next_billing_date_team_name_will_be_downgraded_to_our_free_starter_plan",{teamName:f.name});return r.createElement(u.XV,{onClose:g,title:(0,c.t)("confirm_downgrade.cancel_professional_plan"),minWidth:344,maxWidth:344,dataTestId:"downgrade-confirmation-modal",fixedTop:!0},r.createElement("div",{className:_.Dy},r.createElement("p",null,E),r.createElement("div",{className:i()(_.v0,_.hF)},r.createElement(s.tM,{onClick:g},(0,c.tx)("confirm_downgrade.go_back")),r.createElement(s.qM,{className:_.pL,onClick:()=>{p&&(0,o.sx)("Team Downgrade Survey",{...p,selectedOptions:p.selectedOptions.map(e=>JSON.stringify(e))}),t(d.Ce()),t(m.Wc({teamId:a}))}},(0,c.tx)("confirm_downgrade.finish_cancellation")))))});function f(e){return r.createElement(p,{...e})}},888881:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ProCostBreakdown:()=>v,ProCostBreakdownModal:()=>h});var r=a(411855),n=a(188507),l=a(752553),i=a(939863),o=a(662275),s=a(710667),c=a(720647),d=a(574468),m=a(820113),u=a(585878);let _="cost_breakdown--row--6-9Kd",p="cost_breakdown--primary--miID8",f="cost_breakdown--secondary---4QGG",g="cost_breakdown--currency--gqS1S";function E(e){let t=new m.vr(e.currency),a=t.formatMoney(e.whiteboardCostAnnual),n=t.formatMoney(e.whiteboardCostMonthly),l=(0,i.t)("org_admin_settings.cost_breakdown.seats",{seats:e.whiteboardSeatsMonthly}),o=(0,i.t)("org_admin_settings.cost_breakdown.seats",{seats:e.whiteboardSeatsAnnual}),s=(0,i.t)("org_admin_settings.cost_breakdown.12_months");return r.createElement(r.Fragment,null,e.whiteboardSeatsAnnual>0&&r.createElement("div",{className:_,"data-testid":"cost-breakdown-row-figjam-annual"},r.createElement("div",{className:p},r.createElement("span",null,(0,i.tx)("org_admin_settings.cost_breakdown.whiteboard_seats_annual_annual_fig_jam_editor_seats.seat_rename",{whiteboardSeatsAnnual:e.whiteboardSeatsAnnual})),r.createElement("span",{className:g},a)),r.createElement("div",{className:f},(0,i.tx)("org_admin_settings.cost_breakdown.cost_breakdown_string_triple",{cost:t.formatMoney(e.annualMonthlyAmount),seats:o,numMonths:s}))),e.whiteboardSeatsMonthly>0&&r.createElement("div",{className:_,"data-testid":"cost-breakdown-row-figjam-monthly"},r.createElement("div",{className:p},r.createElement("span",null,(0,i.tx)("org_admin_settings.cost_breakdown.whiteboard_seats_monthly_monthly_fig_jam_editor_seats.seat_rename",{whiteboardSeatsMonthly:e.whiteboardSeatsMonthly})),r.createElement("span",{className:g},n)),r.createElement("div",{className:f},(0,i.tx)("org_admin_settings.cost_breakdown.cost_breakdown_string_double",{cost:t.formatMoney(e.monthlyAmount),seats:l}))))}function v(e){let t=e.currency,a=new m.vr(t),n=e.nDesignEditorsMonthly,l=e.nDesignEditorsAnnual,o=e.nWhiteboardEditorsMonthly,s=e.nWhiteboardEditorsAnnual,c=e.nFigjamEditors,d=e.whiteboardCotermUpgrades,u=(null==d?void 0:d.amount)||0,v=a.formatMoney(u),h=e.designCotermUpgrades,y=12*e.annualMonthlyDesignAmount*e.nDesignEditorsAnnual,b=e.monthlyDesignAmount*e.nDesignEditorsMonthly,w=y+b,T=a.formatMoney(y),I=a.formatMoney(b),x=(null==h?void 0:h.amount)||0,N=a.formatMoney(x),C=12*e.annualMonthlyFigjamAmount*s,S=e.monthlyFigjamAmount*o,k=C+S,A=a.formatMoney(w+k+x+u),L=(0,i.t)("org_admin_settings.cost_breakdown.seats",{seats:n}),R=(0,i.t)("org_admin_settings.cost_breakdown.seats",{seats:l}),D=(0,i.t)("org_admin_settings.cost_breakdown.12_months");return r.createElement("div",{className:"cost_breakdown--container--wwGb0"},l>0&&r.createElement("div",{className:_,"data-testid":"cost-breakdown-row-design-annual"},r.createElement("div",{className:p},r.createElement("span",null,(0,i.tx)("org_admin_settings.cost_breakdown.design_seats_annual_annual_design_editor_seats.seat_rename",{designSeatsAnnual:l})),r.createElement("span",{className:g},T)),r.createElement("div",{className:f},(0,i.tx)("org_admin_settings.cost_breakdown.cost_breakdown_string_triple",{cost:a.formatMoney(e.annualMonthlyDesignAmount),seats:R,numMonths:D}))),n>0&&r.createElement("div",{className:_,"data-testid":"cost-breakdown-row-design-monthly"},r.createElement("div",{className:p},r.createElement("span",null,(0,i.tx)("org_admin_settings.cost_breakdown.design_seats_monthly_monthly_design_editor_seats.seat_rename",{designSeatsMonthly:n})),r.createElement("span",{className:g},I)),r.createElement("div",{className:f},(0,i.tx)("org_admin_settings.cost_breakdown.cost_breakdown_string_double",{cost:a.formatMoney(e.monthlyDesignAmount),seats:L}))),r.createElement(E,{whiteboardSeatsMonthly:o,whiteboardSeatsAnnual:s,whiteboardCostMonthly:S,whiteboardCostAnnual:C,figjamSeats:c,currency:t,annualMonthlyAmount:e.annualMonthlyFigjamAmount,monthlyAmount:e.monthlyFigjamAmount}),h&&h.quantity>0&&h.amount>0&&r.createElement("div",{className:_},r.createElement("div",{className:p},r.createElement("span",null,(0,i.tx)("org_admin_settings.cost_breakdown.design_seats_monthly_cotermed_design_editor_seats.seat_rename",{seatsCotermed:h.quantity})),r.createElement("span",{className:g},N))),d&&d.quantity>0&&d.amount>0&&r.createElement("div",{className:_},r.createElement("div",{className:p},r.createElement("span",null,(0,i.tx)("org_admin_settings.cost_breakdown.whiteboard_seats_monthly_cotermed_whiteboard_editor_seats.seat_rename",{seatsCotermed:d.quantity})),r.createElement("span",{className:g},v))),r.createElement("div",{className:"cost_breakdown--divider--GRAn-"}),r.createElement("div",{className:"cost_breakdown--total--a6sZV"},r.createElement("div",null,(0,i.tx)("org_admin_settings.cost_breakdown.total")),r.createElement("div",{className:g},A)))}function h(e){let t=(0,n.wA)(),a=(0,s.N1)(s.Fq.TEAM_ADMIN_CONSOLE),[i]=(0,l.mI)(a),_=new m.vr(e.currency),p=(0,d.He)(i.data,_.currency,c.lM.DESIGN),f=(0,d.He)(i.data,_.currency,c.lM.FIGJAM),g=(0,d.G7)(i.data,_.currency,c.lM.DESIGN),E=(0,d.G7)(i.data,_.currency,c.lM.FIGJAM);return r.createElement(u.XV,{onClose:()=>t(o.Ce()),title:e.title,minWidth:341,maxWidth:341},r.createElement(v,{currency:e.currency,nDesignEditorsAnnual:e.nDesignEditorsAnnual,nDesignEditorsMonthly:e.nDesignEditorsMonthly,nFigjamEditors:e.nFigjamEditors,nWhiteboardEditorsAnnual:e.nWhiteboardEditorsAnnual,nWhiteboardEditorsMonthly:e.nWhiteboardEditorsMonthly,designCotermUpgrades:e.designCotermUpgrades,whiteboardCotermUpgrades:e.whiteboardCotermUpgrades,monthlyDesignAmount:p,monthlyFigjamAmount:f,annualMonthlyDesignAmount:g,annualMonthlyFigjamAmount:E}))}},143793:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TeamPermissionsModal:()=>eS});var r=a(411855),n=a(188507),l=a(729064),i=a(776250),o=a(935283),s=a(367253),c=a(966712),d=a(498750),m=a(915440),u=a(742808),_=a(218881),p=a(493323),f=a(939863),g=a(392592),E=a(824520),v=a(761273),h=a(662275),y=a(672517),b=a(594901),w=a(860178),T=a(99506),I=a(279453),x=a(691205),N=a(643067),C=a(243987),S=a(147206),k=a(297536),A=a(428467),L=a(426197),R=a(389643),D=a(392830),F=a(206193),P=a(668860),M=a(501256),O=a(613077),B=a(585878),U=a(542059),V=a(268787),H=a(800535),W=a(479842),j=a(860038),$=a(647501),G=a(880618),z=a(794094),Y=a(574176),K=a(558867),Q=a(881816),q=a(299410),X=a(515471),J=a(553551),Z=a(761382),ee=a(68188);function et(e){let t=e.canAdmin,a=r.createElement(Y.B,{className:X.wk,svg:Z.A});e.sharingAudienceControl===T.PQ.ORG_EDIT||e.sharingAudienceControl===T.PQ.ORG_VIEW?a=r.createElement("div",{className:X.AA},r.createElement(Y.B,{svg:ee.A})):(e.sharingAudienceControl===T.PQ.WORKSPACE_EDIT||e.sharingAudienceControl===T.PQ.WORKSPACE_VIEW)&&(a=r.createElement("div",{className:X.AA},e.workspace&&r.createElement(K.z6,{entity:e.workspace,size:24})));let n=e.sharingAudienceControl===T.PQ.INVITE_ONLY&&e.isTeamOrgBrowsable,l=n?X.Fl:X.Jt;return r.createElement("div",{className:t?l:X.zn,onClick:t?()=>e.changeModalView(1):void 0,role:"button","data-onboarding-key":Q.F,tabIndex:0},a,r.createElement("div",{className:X.$S},r.createElement("div",null,e.sharingAudienceControl&&(0,q.ET)(e.sharingAudienceControl,e.org,e.workspace),n&&r.createElement("div",{className:X.JZ},(0,f.t)("team_creation.anyone_can_find_this_team"))),e.org&&r.createElement("div",{className:X.j7,"data-onboarding-key":Q.F},e.sharingAudienceControl&&(0,q.mi)(e.sharingAudienceControl),t&&r.createElement(Y.B,{svg:J.A,className:X.$w}),t&&r.createElement(Q.j,null))))}var ea=a(297666),er=a(799569),en=a(268537),el=a(946689),ei=a(738269),eo=a(331363),es=a(336599),ec=a(937890),ed=a(498606),em=a(237870),eu=a(720488),e_=a(227795),ep=a(488578);let ef="team_join_link_permissions--loadedViewWrapperWithPaddingTop--VRkqb team_join_link_permissions--loadedViewWrapper--LjAIr";var eg=a(965358),eE=a(289298);let ev=(0,ea.s)((e,t,a)=>e(eo.do({teamId:t,level:a}))),eh=(0,n.Ng)((e,t)=>({teamJoinLinks:e.teamJoinLinks,loadingState:e.loadingState,canAdmin:(0,A.hasAdminRoleAccessOnTeam)(t.teamId,e),canEdit:(0,A.hasEditorRoleAccessOnTeam)(t.teamId,e)}),null,(e,t,a)=>({isInLoadingState:function(e,t,a){let r=!(0,es.VP)(t,(0,ec.OL)(e))&&!(0,es.aF)(t,(0,ec.OL)(e))&&!a;return(0,es.VP)(t,(0,ec.OL)(e))||(0,es.VP)(t,eo.ui.loadingKeyForPayload({teamId:e}))||(0,es.VP)(t,(0,ec._M)(e))||r}(a.teamId,e.loadingState,e.teamJoinLinks),...e,...a,...t}))(function(e){var t,a,n,l;let{dispatch:i,teamId:o,initialInviteLevel:s,canAdmin:c,canEdit:d}=e,[m,u]=(0,r.useState)(s);if((0,r.useEffect)(()=>(ev(i,o,s),()=>{i(eo.F1(null))}),[i,o,s]),!e.isInLoadingState&&!e.teamJoinLinks||!c&&(null==(t=e.teamJoinLinks)?void 0:t.disabled))return null;let _=d&&!!(null==(a=e.teamJoinLinks)?void 0:a.url);return r.createElement(r.Fragment,null,r.createElement("div",{style:_?{justifyContent:"space-between"}:{justifyContent:"flex-start",marginTop:"8px"},className:"team_join_link_permissions--inviteLinkTitleWrapper--LSkbL"},r.createElement("span",{className:"team_join_link_permissions--inviteHeader--80xpy"},(0,f.tx)("team_join_links.invite_link")),_&&r.createElement(ey,{dropdownShown:e.dropdownShown,resetInviteLinks:()=>{i(h.$O({type:eT,data:{resetLink:()=>{i(eo.Nw({teamId:o,level:m,shouldShowVisualBell:!0}))}}}))},disableInviteLinks:()=>i(eo.ui({teamId:o})),loading:e.isInLoadingState,canAdmin:c})),e.isInLoadingState||(null==(n=e.teamJoinLinks)?void 0:n.url)?r.createElement(eb,{dropdownShown:e.dropdownShown,setLevel:e=>{m!==e&&(u(e),i(eo.do({teamId:o,level:e,shouldShowFailureMessage:!0,callbackOnFailure:()=>u(m)})))},currentLevel:m,url:e.isInLoadingState?void 0:null==(l=e.teamJoinLinks)?void 0:l.url,addPaddingTop:!_,inviteLevels:d?[P.e6.VIEWER,P.e6.EDITOR]:[P.e6.VIEWER],teamId:e.teamId}):r.createElement(ew,{turnOnInviteLinks:()=>i(eo.Nw({teamId:o,level:m}))}))});function ey(e){let t=(0,n.wA)(),a="team-link-settings-dropdown",l=r.createRef(),i=()=>{var t;return(null==(t=e.dropdownShown)?void 0:t.type)===a};return r.createElement("div",null,r.createElement("div",{ref:l},r.createElement(e_.YW,{svg:eg.A,"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,f.t)("team_join_links.team_invite_link_settings"),onClick:()=>{var e;let r=null==(e=l.current)?void 0:e.getBoundingClientRect();i()?t(ei.oB()):r&&t(ei.j7({type:a,data:{targetRect:r}}))},onMouseDown:e=>e.stopPropagation(),selected:i(),disabled:e.loading})),i()&&r.createElement(eu.Cf,{targetRect:e.dropdownShown.data.targetRect,maxWidth:140,minWidth:140,lean:"left",propagateCloseClick:!0},r.createElement(en.c$,{onClick:e.resetInviteLinks},(0,f.tx)("team_join_links.reset_invite_links")),e.canAdmin&&r.createElement(en.c$,{onClick:e.disableInviteLinks},(0,f.tx)("team_join_links.turn_off_invite_links"))))}function eb(e){let t=(0,n.wA)(),a="join-link-permission-level-dropdown",l=e.currentLevel===P.e6.VIEWER?"28px":"-20px";return r.createElement("div",{className:e.addPaddingTop?ef:"team_join_link_permissions--loadedViewWrapper--LjAIr"},r.createElement("div",{className:"team_join_link_permissions--linkAndDropdown--dOdkB"},r.createElement("span",{className:"team_join_link_permissions--urlSection--fh6VF"},!e.url&&r.createElement(p.kt,null),e.url&&r.createElement("span",{className:"team_join_link_permissions--urlText--jcjRH ellipsis--ellipsis--Tjyfa"},e.url)),r.createElement("div",{onClick:r=>{r.stopPropagation(),e.url&&(e.dropdownShown?t(ei.oB()):t(ei.j7({type:a})))},className:"team_join_link_permissions--permissionLevelDropdown--xuQLz role_row--select--6VpSS"},r.createElement("span",null,(0,S.C1)(e.currentLevel)),r.createElement("div",{className:"team_join_link_permissions--caretWrapper--OXpki role_row--caretWrapper--P1Mak"},r.createElement(Y.B,{svg:eE.A})),e.dropdownShown&&e.dropdownShown.type===a&&r.createElement(en.ms,{className:"team_join_link_permissions--permissionLevelDropdownOptions--cgu-T",style:{marginTop:l}},e.inviteLevels.map((t,a)=>r.createElement(en.MM,{key:a,checked:t===e.currentLevel,onClick:()=>e.setLevel(t)},(0,S.C1)(t)))))),r.createElement(el.$$,{className:"team_join_link_permissions--copyLinkButton--X-8QT",onClick:()=>{e.url&&t(eo.LN({teamId:e.teamId,url:e.url,source:eo.Kq.TEAM_PERMISSIONS_MODAL}))},disabled:!e.url},(0,f.tx)("team_join_links.copy_link")))}function ew(e){return r.createElement("div",{className:ef},(0,f.tx)("team_join_links.share_a_secret_link_people_can_use_to_join_your_team")," ",r.createElement(el.Us,{onClick:e.turnOnInviteLinks,trusted:!0},(0,f.tx)("team_join_links.turn_on_invite_links")))}let eT="RESET_LINKS_CONFIRMATION_MODAL";(0,em.Ju)(function(e){let t=(0,n.wA)();return r.createElement(ep.aF,{className:"team_join_link_permissions--confirmationModal--iwmpk",size:288},r.createElement("div",{className:"team_join_link_permissions--titleAndCloseButton--5XqxG"},r.createElement(er.s_,{dispatch:t}),r.createElement("div",{className:"team_join_link_permissions--confirmationModalTitle--Htxwx"},r.createElement("span",null,(0,f.tx)("team_join_links.reset_invite_links")))),r.createElement("p",{className:"team_join_link_permissions--confirmationModalBody--qUqac"},(0,f.tx)("team_join_links.modal_description")),r.createElement("div",{className:"team_join_link_permissions--confirmationModalButtonContainer--rsNVu"},r.createElement(el.tM,{onClick:()=>t(h.Lo())},(0,f.tx)("team_join_links.cancel")),r.createElement(el.qM,{onClick:()=>{e.resetLink(),t(h.Lo())}},(0,f.tx)("team_join_links.reset_links"))))},eT);var eI=a(839957),ex=a(1700),eN=a(225530);let eC={domains:[],isFetching:!1,fetchedAt:null};function eS({teamId:e,notifyOnSuccess:t,initialInviteLevel:a,prepopulateEmail:Y,initialView:K}){let Q=(0,n.wA)(),q=(0,w.Pc)(),X=(0,n.d4)(e=>e.autocomplete),J=(0,n.d4)(e=>e.contacts),Z=(0,n.d4)(e=>e.dropdownShown),ee=(0,b.FC)(),ea=x.M4.Team.useValue(e).data,er=(0,m.Rs)(I.GyZ,{teamId:e});(0,u.I)("loaded"===er.status,e=>{(0,i.sx)("share_modal_latency",{latency_ms:e,modal_type:"team"},{forwardToDatadog:!0})});let en=(0,r.useMemo)(()=>(0,k.X)(er),[er]),el=en&&en.org,ei=en&&en.teamSharingSettings,eo=en&&en.orgUser,es=el?el.id:null,ec=en&&en.workspace,ed=(0,D.D)(e||null,es),em=el&&el.org_domains?el.org_domains:eC,[eu,e_]=(0,r.useState)([]),ep=r.useMemo(()=>{let t=ee.roles.byTeamId[e]||{};return Object.keys(t).map(e=>t[e]).sort((e,t)=>e.pending===t.pending?(0,ex.E4)(e,J).toLocaleLowerCase()<(0,ex.E4)(t,J).toLocaleLowerCase()?-1:1:e.pending?1:-1)},[ee.roles.byTeamId,e,J]),ef=en&&en.pendingTeamRoleRequests?en.pendingTeamRoleRequests:[];(0,r.useEffect)(()=>{Q(v.um())},[Q]),(0,r.useEffect)(()=>{e_((0,R.Uj)(X,J.usersByEmail,q,ep))},[X,J.usersByEmail,q,ep]);let eg=e=>a||(!(0,C.w5)(ea)&&e?P.e6.EDITOR:P.e6.VIEWER),[eE,ev]=(0,r.useState)(()=>eg((0,A.canEditTeam)(e,ee))),ey=(0,r.useCallback)(e=>(0,k.yI)(e,J.usersByEmail[e]||e,el,em,q.email),[J.usersByEmail,em,q.email,el]);(0,r.useEffect)(()=>{if(Y){let e=ey(Y);Q(E.hZ({tokens:[e],inputValue:"",errorMessage:""}))}},[Y,ey,Q]);let eb=e=>{ev(e)},ew=e=>(0,k.t9)(e,el,em),eT=a=>{let r=(0,M.Z)(a);Q((0,L.rq)({emails:r,resourceType:T.vt.TEAM,resourceIdOrKey:e,level:eE,emailsToExclude:(0,R.bp)(J.usersByEmail,q,ep),onSuccess:({invites:e,over_editor_limit:a},r)=>{if(eE>=P.e6.EDITOR&&a){let t=(0,A.getResourceTeamId)(e[0],ee),a=t&&{...ee.teams[t],canEdit:(0,A.canEditTeam)(t,ee),canAdmin:(0,A.canAdminTeam)(t,ee)};Q(h.to({type:U.oE,data:{team:a,invitesSent:e.length,editorType:null,upsellSource:F.b.ADD_EDITOR}}));return}r||ed||ek(),t&&e.length>0&&!ed&&Q(g.F.enqueue({message:(0,f.t)("team_view.team_permissions_modal.invite_sent",{numInvites:e.length})}))},source:"team_share_modal",orgName:el?el.name:void 0}))},eS=e=>{if(el&&el.domain_capture&&em&&em.domains.length>0){let t=(0,M.Z)(e).filter(e=>(0,s.xf)(e)&&!(0,N.H_)(em.domains,e));if((null==el?void 0:el.invite_whitelist_guest_invite_setting)==null&&t.length>0){Q(h.to({type:W.F,data:{emails:t,onConfirm:()=>{eT(e)},popStack:!0,orgName:el.name}}));return}}eT(e)},ek=()=>{Q(h.Ce()),Q(E.cL())},eA=e=>{e.keyCode!==d.Uz.ESCAPE&&e.stopPropagation()},eL=(0,A.canEditTeam)(e,ee),eR=(0,A.canViewTeam)(e,ee),eD=(0,A.canAdminTeam)(e,ee),[eF,eP]=r.useState(K||0),eM=()=>0===eF?r.createElement("div",{className:eN.DA},r.createElement("p",null,ed?(0,f.tx)("team_view.team_permissions_modal.share_this_team"):(0,f.tx)("team_view.team_permissions_modal.invite_team_members"))):r.createElement($.w,{title:(0,f.t)("team_view.team_permissions_modal.share_settings"),onClick:()=>eP(0)}),eO=!!ea&&!ea.org_id,eB=t=>r.createElement(y.fu,{name:"Share Modal",properties:{resourceType:T.vt.TEAM,resourceId:e}},r.createElement(B.XV,{title:r.createElement(r.Fragment,null,eM()),maxWidth:eO?484:k.k4,fixedTop:!0,onClose:ek},t)),eU=!1,eV=(0,_.I7)("exp_org_team_sharing_suggestions");es&&(eU=!!eV.getConfig().getValue("enabled",!1));let{sharingSuggestions:eH,sharingSuggestionIdsToExclude:eW,sharingSuggestionEmailsToExclude:ej}=(0,G.$)({orgId:es,teamId:e,enabled:eU,contacts:J.usersByEmail,roles:ep,user:q,autocompleteTokens:X.tokens}),e$=r.useCallback(()=>36,[]),eG=r.useRef(null),ez=(0,l.z)({size:ep.length,parentRef:eG,estimateSize:e$,overscan:10,paddingStart:0});if(!ea)return eB(r.createElement(p.qc,null));let eY=()=>(0,c.kc)().team_share_modal_virtualize?r.createElement("div",{style:{height:`${ez.totalSize}px`,position:"relative"}},ez.virtualItems.map(t=>{let a=t.index,n=ep[a];return r.createElement(eI.O,{key:`role-row-${a}`,role:n,user:q,currentUserOrgId:es,isOwnerOfResource:(0,A.isResourceOwner)(q.id,e,T.vt.TEAM,ee.roles),isOrgUser:!!n.org_user,currentOrg:el,resourceName:ea.name,resource:{team:ea,type:T.vt.TEAM},canEditRole:(0,A.canEditTeamRole)(n,ee),canMakeAdmin:!!(null==en?void 0:en.canAdmin),readOnlyOverrideWarningMessage:null,orgDomains:em,inSharingClarity:!0,virtualRowItem:t})})):r.createElement(r.Fragment,null,ep.map((t,a)=>r.createElement(eI.O,{key:`role-row-${a}`,role:t,user:q,currentUserOrgId:es,isOwnerOfResource:(0,A.isResourceOwner)(q.id,e,T.vt.TEAM,ee.roles),isOrgUser:!!t.org_user,currentOrg:el,resourceName:ea.name,resource:{team:ea,type:T.vt.TEAM},canEditRole:(0,A.canEditTeamRole)(t,ee),canMakeAdmin:!!(null==en?void 0:en.canAdmin),readOnlyOverrideWarningMessage:null,orgDomains:em,inSharingClarity:!0})));return eB(0===eF?(()=>{if(!en)return r.createElement("div",{className:eN.Lq},r.createElement(p.qc,null));let t=[];return eD&&t.push(P.e6.ADMIN),eL&&t.push(P.e6.EDITOR),eR&&t.push(P.e6.VIEWER),(0,o.KF)(t.length>0,"there should be at least one role (the user's own)"),r.createElement(r.Fragment,null,r.createElement("div",{key:"container",className:eN.SS,onKeyDown:eA},eO&&r.createElement(r.Fragment,null,r.createElement(eh,{teamId:e,dropdownShown:Z,initialInviteLevel:eg(eL)}),r.createElement("div",{className:eN.Vq},(0,f.tx)("team_view.team_permissions_modal.invite_by_email"))),!!(null==en?void 0:en.canAdmin)&&r.createElement(j.$i,{teamId:e,teamRoleRequests:ef,teamRoles:ep}),(0,H.r)(q)?r.createElement(H.X,{resourceType:"team"}):r.createElement(r.Fragment,null,r.createElement("div",{className:eN.Zk},r.createElement(O.e,{autocomplete:X,buttonText:ed?(0,f.t)("team_view.team_permissions_modal.invite"):(0,f.t)("team_view.team_permissions_modal.send_invite"),dispatch:Q,dropdownKey:"permissions-invite-dropdown",dropdownShown:Z,hideDropdownOnEmpty:ed,inviteLevel:eE,getSelectText:S.C1,onInviteLevelChange:eb,options:t,onSubmit:eS,searchResultToken:ew,fetchAsyncSearchResults:t=>(0,R.Wj)(t,J.usersByEmail,q,ep,es,e,null,(null==eo?void 0:eo.permission)===T._D.GUEST),searchResults:()=>eu,validateToken:ey,TokenComponent:V.g,SearchResultComponent:V.o,joinLinkShown:eO,shouldAutoFocus:!eO,onHideModal:ek,placeholderText:ed?(0,f.t)("team_creation.add_a_name_or_email"):void 0})),eU&&r.createElement(G.t,{suggestions:eH??void 0,autocomplete:X,searchResultToken:ew,resourceType:"team",resourceId:e,idsToExclude:eW??void 0,emailsToExclude:ej??void 0})),ed&&el&&r.createElement("div",{className:eN.st,ref:eG},r.createElement("div",{className:eN.d3},r.createElement("div",{className:eN.eF},(0,f.t)("file_permissions_modal.who_has_access")),r.createElement(et,{team:ea,workspace:ec,org:el,changeModalView:eP,sharingAudienceControl:null==ei?void 0:ei.sharingAudienceControl,isTeamOrgBrowsable:null==ei?void 0:ei.orgBrowsable,canAdmin:!!(null==en?void 0:en.canAdmin)}),eY()))))})():el?ei&&r.createElement(z.nH,{team:ea,workspace:ec||void 0,org:el,teamSharingSettings:ei,hideModal:ek,goBack:()=>eP(0)}):r.createElement(r.Fragment,null))}},937106:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TeamRenameModal:()=>c});var r=a(411855),n=a(188507),l=a(939863),i=a(964258),o=a(851363),s=a(782174);function c({team:e}){let t=(0,n.wA)();return r.createElement(s.c,{initialName:e.name,maxLength:o.qg,placeholder:(0,l.t)("resource_rename_modal.team.placeholder"),submitText:(0,l.t)("resource_rename_modal.team.submit"),onRename:a=>t((0,i.IA)({team:e,name:a}))})}},562037:(e,t,a)=>{"use strict";let r;a.r(t),a.d(t,{FileBrowserView:()=>Cv});var n,l,i,o=a(411855),s=a(188507),c=a(627776),d=a(517333),m=a(737947),u=a(320063),_=a(966712),p=a(752553),f=a(860601),g=a(563706),E=a(218881),v=a(37153),h=a(367253),y=a(988261),b=a(650322),w=a(304783),T=a(192437),I=a(946689),x=a(455057),N=a(135876),C=a(881388),S=a(939863),k=a(295296),A=a(738269),L=a(507877),R=a(662275),D=a(995852),F=a(758259),P=a(931828),M=a(349410),O=a(672517),B=a(843309),U=a(176824),V=a(195971),H=a(964258),W=a(488983),j=a(594901),$=a(860178),G=a(801387),z=a(99506),Y=a(820113),K=a(243987),Q=a(257512),q=a(428467),X=a(707465),J=a(206193),Z=a(622139),ee=a(637590),et=a(392340),ea=a(278733),er=a(231522);function en({disableInvites:e,collaborators:t,setCollaborators:a,willSendInvites:r,skipInviteStep:n}){let l=(e,r)=>{if(r>=t.length)return;let n=[...t];n[r]=e,a(n)};return o.createElement(o.Fragment,null,o.createElement("div",{className:er.Fb},(0,S.tx)("pro_cart.add_collaborators.add_collaborators_to_your_team")),o.createElement(I.Kz,{multiple:.5}),o.createElement("div",{className:er.b0},(0,S.tx)("pro_cart.add_collaborators.well_add_them_to_your_team")),o.createElement(I.Kz,{multiple:4}),o.createElement("div",{style:ea.sx.flex.flexColumn.add({maxWidth:"400px"}).mlAuto.mrAuto.gap12.$},t.map((e,t)=>o.createElement(I.il,{key:`collaborator-email-input-${t}`,value:e,onChange:e=>l(e.target.value,t),placeholder:(0,S.t)("pro_cart.add_collaborators.email")})),o.createElement(I.Us,{onClick:()=>{let e=[...t];e.push(""),a(e)},trusted:!0,style:ea.sx.alignLeft.font14.fontMedium.$},(0,S.tx)("pro_cart.add_collaborators.add_another"))),o.createElement("div",{style:ea.sx.flex.flexColumn.itemsCenter.mlAuto.mrAuto.mt24.gap24.fontMedium.font14.$},o.createElement(I.vd,{disabled:!!e,style:ea.sx.font14.add({height:"44px",width:"110px"}).$,onClick:r},(0,S.tx)("pro_cart.add_collaborators.sent_invites")),o.createElement(I.Ph,{trusted:!0,onClick:n,style:ea.sx.colorTextSecondary.alignCenter.$},(0,S.tx)("pro_cart.add_collaborators.skip_for_now"))))}var el=a(935283),ei=a(297666),eo=a(485727),es=a(574176),ec=a(392592),ed=a(67294),em=a(658850),eu=a(768137),e_=a(799569),ep=a(827586),ef=a(762638),eg=a(175290),eE=a(865618),ev=a(809840),eh=a(629019),ey=a.n(eh),eb=a(498480),ew=a(101505);function eT({currentBillingPeriod:e,numEditors:t,noCents:a,shouldStrikethroughMonthlyUnitCostIfAnnual:r,currency:n}){return e===Z.tY.STUDENT?null:o.createElement(eI,{isAnnual:e===Z.tY.ANNUAL,numEditors:t,noCents:a,unitCost:(0,U.ok)(e,n),currency:n,monthlyUnitCostForStrikethrough:r?(0,U.ok)(Z.tY.MONTHLY,n):void 0})}function eI({isAnnual:e,numEditors:t,noCents:a,unitCost:r,monthlyUnitCostForStrikethrough:n,currency:l}){let i=new Y.vr(l),s=i.formatMoney(r,{showCents:!a}),c=(0,S.t)("all_carts.num_editors.seat_rename",{numEditors:t}),d=(0,S.t)("all_carts.plural_months",{months:e?12:1});return"number"==typeof n&&e?(0,S.tx)("all_carts.cost_equation_strikethrough_unit_price",{strikethroughUnitPrice:o.createElement("span",{className:er.of},i.formatMoney(n,{showCents:!a})),money:s,editors:c,billingTime:d}):(0,S.tx)("all_carts.cost_equation",{money:s,editors:c,billingTime:d})}function ex({currentBillingPeriod:e,numEditors:t,noCents:a,shouldStrikethroughMonthlyUnitCostIfAnnual:r,currency:n}){return o.createElement(eI,{isAnnual:e===Z.tY.ANNUAL,numEditors:t,unitCost:(0,U.hH)(e,n),noCents:a,currency:n,monthlyUnitCostForStrikethrough:r?(0,U.hH)(Z.tY.MONTHLY,n):void 0})}function eN(e,t){return Math.ceil((1-12*e/(12*t))*100)}function eC({noCents:e=!0,shouldStrikethroughMonthlyUnitCostIfAnnual:t,currency:a,numEditors:r}){let n=(0,s.d4)(e=>e.payment.billingPeriod),l=(0,s.d4)(e=>e.payment.numWhiteboardEditors);return n===Z.tY.STUDENT?null:o.createElement(ex,{currentBillingPeriod:n,numEditors:r||l,noCents:e,currency:a,shouldStrikethroughMonthlyUnitCostIfAnnual:t})}function eS({editorType:e,numEditors:t,currency:a}){let r;r="design"===e?(0,U.Qo)(t,Z.tY.MONTHLY,a):(0,U.PK)(t,Z.tY.MONTHLY,a);let n=new Y.vr(a);return(0,S.tx)("edu.cost_per_month",{cost:n.formatMoney(r)})}function ek({"data-testid":e,discountPercentage:t,mainText:a,priceText:r,strikethroughPriceText:n,strikethroughPriceClassName:l,subText:i,showDevModeIncludedText:s}){let c=t=>void 0===e?void 0:`${e}-${t}`;return o.createElement("div",{"data-testid":e},o.createElement("div",{className:er.vg,"data-testid":c("cost-row")},o.createElement("span",{"data-testid":c("main-text")},a),o.createElement("span",{"data-testid":c("price-section")},n&&o.createElement(o.Fragment,null,o.createElement("span",{className:ey()(l,er.hy,er.sH),"data-testid":c("strikethrough-price-text")},n),"\xa0"),o.createElement("span",{className:er.sH,"data-testid":c("price-text")},r))),s&&o.createElement(o.Fragment,null,o.createElement(I.Kz,{multiple:.2}),o.createElement(eo.G,null),o.createElement(I.Kz,{multiple:.1})),o.createElement("div",{className:er.q9,"data-testid":c("sub-row")},o.createElement("span",{"data-testid":c("sub-text")},i),t&&o.createElement("span",{"data-testid":c("discount-percentage")},o.createElement(eb.Ex,{className:er.qS,color:eb.zE.SUCCESS,size:eb.vj.LARGE,subtle:!0,text:(0,S.tx)("pro_cart.sidebar.annual_savings_percentage",{percentage:t})}))))}function eA({payment:e,currency:t,isPromo:a,isEducationTeam:r,...n}){var l,i,s;let c,d,m,u,_;let p=new Y.vr(t),{editorType:f}=n;return"design"===f?(d=e.numDesignEditors,m=eL(Z.Ye,null==(l=e.taxes)?void 0:l.lines)??(0,U.Qo)(d,e.billingPeriod,t),c=(0,S.tx)("pro_cart.info.figma_design_editors.seat_rename",{numEditors:d}),_=r?o.createElement(eS,{editorType:f,currency:t,numEditors:e.numDesignEditors}):null,r||n.hasCartStickerShock||(u=o.createElement(eT,{currentBillingPeriod:e.billingPeriod,numEditors:e.numDesignEditors,noCents:!1,currency:t}))):(d=n.numPaidFigjamEditors,m=eL(Z.MC,null==(i=e.taxes)?void 0:i.lines)??(0,U.PK)(d,e.billingPeriod,t),u=!r&&!n.hasCartStickerShock&&o.createElement(eC,{noCents:!1,currency:t,numEditors:d}),c=(0,S.tx)("pro_cart.info.figjam_editors.seat_rename",{numEditors:d}),_=r?o.createElement(eS,{editorType:f,currency:t,numEditors:e.numWhiteboardEditors}):null),a&&(u=(0,S.tx)("pro_cart.review.free_for_days",{days:null==(s=e.promo)?void 0:s.promo_value}),_=p.formatMoney(m,{showCents:!0})),o.createElement(ek,{"data-testid":`confirm-${f}-summary`,mainText:c,strikethroughPriceText:_,priceText:p.formatMoney(a||r?0:m,{showCents:!0}),subText:u,showDevModeIncludedText:"design"===f})}function eL(e,t){return null==t?void 0:t.filter(t=>e.includes(t.product)).reduce((e,t)=>e+t.sub_total,0)}function eR(e){return o.createElement(o.Fragment,null,o.createElement(eA,{...e,editorType:z._Y.DESIGN}),o.createElement(I.Kz,{multiple:2}),o.createElement(eA,{...e,editorType:z._Y.WHITEBOARD,numPaidFigjamEditors:e.payment.numWhiteboardEditors}),o.createElement(I.Kz,{multiple:2}))}function eD(){return o.createElement(I.Us,{href:"/tos",target:"_blank",trusted:!0},(0,S.tx)("pro_cart.review.tos"))}var eF=a(801161),eP=a(988022),eM=a(582410),eO=a(720647),eB=a(498606),eU=a(237870),eV=a(558867),eH=a(80332),eW=a(585878),ej=a(488578);let e$=(0,a(422237).ex)("org_upgrade_user_info_extended",function({teamIds:e,teamNames:t}){return o.createElement("div",null,e.map((e,a)=>{let r=(0,eH.$L)(e,eH.us);return o.createElement("div",{key:e,className:"org_self_serve_modal_tooltip_content--tooltipRow--l59-b"},o.createElement("div",{style:ea.sx.add({backgroundColor:r,minWidth:"10px",height:"10px",margin:"8px",borderRadius:"2px"}).$}),o.createElement("div",null,t[a]))}))},e=>{let t=e.getAttribute("data-tooltip-team-names"),a=e.getAttribute("data-tooltip-team-ids");return{teamNames:t.split(","),teamIds:a.split(",")}}),eG="org_self_serve_modals--modalContainer--T0ehh",ez="org_self_serve_modals--modalWrapperSmall--MoMir org_self_serve_modals--modalWrapper--wPVCU",eY="org_self_serve_modals--modalHeader--xK0Vj",eK="org_self_serve_modals--modalText---cdj9";var eQ=a(265871),eq=a(950142);function eX(e){return o.createElement("div",{style:{height:e.height||12}})}function eJ(e){return o.createElement(eW.XV,{containerClassName:eG,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349},o.createElement("div",{className:ez},o.createElement("div",{className:eY},(0,S.tx)("org_self_serve.modals.invalid_email.figma_organization_only_allows_work_emails")),o.createElement("div",{className:eK},(0,S.tx)("org_self_serve.modals.invalid_email.change_email_address_to_proceed")),o.createElement(eX,{height:12}),o.createElement("a",{onClick:e.onFileBrowserClick},(0,S.tx)("org_self_serve.modals.invalid_email.go_to_the_file_browser"))))}function eZ(e){return o.createElement(eW.XV,{containerClassName:eG,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349},o.createElement("div",{className:ez},o.createElement("div",{className:eY},(0,S.tx)("org_self_serve.modals.existing_org_admin.figma_organization_already_purchased")),o.createElement("div",{className:eK},(0,S.tx)("org_self_serve.modals.existing_org_admin.if_you_need_another_organization",{contactSales:o.createElement("a",{onClick:e.onContactSales},(0,S.tx)("org_self_serve.modals.existing_org_admin.contact_sales"))})),o.createElement(eX,{height:4}),o.createElement(eX,{height:12}),o.createElement("a",{onClick:e.onFileBrowserClick},(0,S.tx)("org_self_serve.modals.existing_org_admin.go_to_the_file_browser"))))}function e0(e){return o.createElement(eW.XV,{containerClassName:eG,headerSize:"hidden",onClose:e.onClose,title:"",minWidth:580,maxWidth:580},o.createElement("div",{className:"org_self_serve_modals--modalWrapper--wPVCU"},o.createElement(es.B,{className:"org_self_serve_modals--modalClose--vFM62",svg:eq.A,onClick:e.onClose}),o.createElement("div",{className:eY},(0,S.tx)("org_self_serve.modals.true_up_edu.figma_grows_with_your_team")),o.createElement("div",{className:eK},(0,S.tx)("org_self_serve.modals.true_up_edu.members_can_add_new_editors.seat_rename")),o.createElement(eX,{height:8}),o.createElement("div",{className:"org_self_serve_modals--modalSubHeader--e93TH"},(0,S.tx)("org_self_serve.modals.true_up_edu.what_to_expect_at_true_up")),o.createElement("div",{className:eK},(0,S.tx)("org_self_serve.modals.true_up_edu.true_up_explanation.seat_rename",{seeFullDetails:o.createElement("a",{href:"https://help.figma.com/hc/articles/360040328293",target:"_blank"},(0,S.tx)("org_self_serve.modals.true_up_edu.see_full_details"))}))))}let e1=(0,eU.Ju)(function(e){var t;let a=e.isProTeam?eM.kH.exclude([eO.PE]):eM.kH,[r,n]=(0,o.useState)(a.dict(t=>{var a;return(null==(a=e.seatDataByLicenseType[t])?void 0:a.currentSeats)||0})),[l,i]=(0,o.useState)(null),s=e=>{let t=r[e];void 0!==t&&t<99&&n({...r,[e]:t+1})},c=t=>{let a=e.seatDataByLicenseType[t],l=r[t];null!=a&&null!=l&&l>a.minSeats&&n({...r,[t]:l-1})},d=(e,t)=>{if(""===e.target.value){t(0);return}let a=parseInt(e.target.value);isNaN(a)||t(a)},m=new Y.vr(e.currency),u=r[eO.tL],p={[eO.vu]:{headerString:(0,S.t)("all_carts.figma_design_editors.seat_rename"),totalSeatCount:r[eO.vu],shouldShowDevModeIncludedText:!0},[eO.tL]:{headerString:(0,S.t)("all_carts.figjam_editors.seat_rename"),totalSeatCount:u,shouldShowDevModeIncludedText:!1},[eO.PE]:{headerString:(0,S.t)("all_carts.dev_mode_only_seats"),totalSeatCount:r[eO.PE]??0,shouldShowDevModeIncludedText:!1}};return o.createElement(eW.Eo,{onSubmit:()=>{let t=!1;if(a.forEach(a=>{var n;let l=r[a],o=(null==(n=e.seatDataByLicenseType[a])?void 0:n.minSeats)||0;void 0!==l&&!1===t&&(l<o||l>99)&&(i(a),t=!0)}),t)return;let n=a.reduce((e,t)=>e+(r[t]||0),0);e.minTotalSeats&&n<e.minTotalSeats?i("total"):(e.dispatch(R.Ce()),e.updateAdditionalSeats(r))},confirmText:(0,S.t)("all_carts.save"),cancelText:(0,S.t)("all_carts.cancel"),title:(0,S.t)("all_carts.add_additional_editors.seat_rename")},o.createElement("div",{className:"org_self_serve_modals--bannerContainer--pW9ZX"},l&&o.createElement("div",{className:"org_self_serve_modals--errorBanner--QbvRM"},o.createElement(es.B,{className:"org_self_serve_modals--errorSvg--Lf9lD",svg:eQ.A}),o.createElement("div",{className:"org_self_serve_modals--errorBannerText--EV-xZ org_self_serve_modals--headerModalText--u9znR"},l===eO.vu&&(0,S.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[eO.vu].minSeats}),l===eO.tL&&(0,S.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[eO.tL].minSeats}),l===eO.PE&&(0,S.tx)("all_carts.you_need_a_minimum_n_dev_mode_seats",{minSeatsCount:(null==(t=e.seatDataByLicenseType[eO.PE])?void 0:t.minSeats)||0}),"total"===l&&!!e.minTotalSeats&&((0,_.kc)().org_checkout_min_seat_info_copy?(0,S.tx)("all_carts.minimum_seats",{minTotalSeats:e.minTotalSeats,minDesignSeats:e.seatDataByLicenseType[eO.vu].minSeats,seatsText:(0,S.tx)("checkout.seats_text",{numOfSeats:e.minTotalSeats}),designSeatsText:(0,S.tx)("checkout.seats_text",{numOfSeats:e.seatDataByLicenseType[eO.vu].minSeats})}):(0,S.tx)("all_carts.you_need_a_minimum_n_editors.seat_rename",{minSeatsCount:e.minTotalSeats}))))),a.sort(eM.AG).map(t=>{let a=p[t],l=e.seatDataByLicenseType[t],i=r[t];return void 0===a||void 0===l||void 0===i?o.createElement(o.Fragment,null):o.createElement("div",{key:t},o.createElement(eX,{height:16}),o.createElement("div",{className:"org_self_serve_modals--headerModalBoldText--Fk6Q7 org_self_serve_modals--headerModalText--u9znR"},a.headerString),a.shouldShowDevModeIncludedText&&o.createElement(o.Fragment,null,o.createElement(eX,{height:4}),o.createElement(eo.G,null)),o.createElement(eX,{height:12}),o.createElement(em.o,{"data-testid":t+"-editor_counter",editorType:t,incrementSeats:()=>s(t),decrementSeats:()=>c(t),numEditors:i,minSeatsCount:l.minSeats,headerText:m.formatMoney(a.totalSeatCount*l.seatUnitCostInCents*(e.showAnnualPrice?12:1)),headerSubText:function(e,t,a,r,n){let l=new Y.vr(n).formatMoney(r,{showCents:!a}),i=(0,S.t)("all_carts.num_editors.seat_rename",{numEditors:t}),o=(0,S.t)("all_carts.plural_months",{months:e?12:1});return(0,S.t)("all_carts.cost_equation",{money:l,editors:i,billingTime:o})}(e.showAnnualPrice,a.totalSeatCount,!0,l.seatUnitCostInCents,e.currency),updateAdditionalSeatsText:e=>d(e,e=>{n({...r,[t]:e})})}))}),o.createElement(eX,{height:18}),o.createElement("div",{className:"org_self_serve_modals--divider--FjEW2"}))},"AdditionalEditorsModal");var e2=(e=>(e[e.NONE=0]="NONE",e[e.DESIGN=1]="DESIGN",e[e.WHITEBOARD=2]="WHITEBOARD",e[e.TOTAL=3]="TOTAL",e))(e2||{});function e4({userData:e,checkboxHandler:t}){let[a,r]=(0,o.useState)(0),n=(0,s.wA)(),l=({rect:e,designChecked:l,...i})=>{if(t(i),i.newVal&&a<3){r(e=>e+1);let t=l?(0,S.t)("checkout.switch_seat_from_design_to_devmode"):(0,S.t)("checkout.enabled_devmode");n(eF.eB({target:{kind:eB.Ui.TEXT,text:t},targetRect:{top:e.top,right:e.right+8,bottom:e.bottom,left:e.left+8,width:e.width,height:e.height},textAlign:"left",position:eB.Zj.RIGHT,hideAfterDelay:1e3}))}};return o.createElement(o.Fragment,null,e.map((a,r)=>o.createElement("div",{"data-testid":"user-data-row",key:a.user.id},o.createElement(e8,{rowType:"data"},o.createElement(eV.az,{entity:a.user,includeUserEmailAddress:!0,size:24}),o.createElement(e9,{userInfo:a}),o.createElement(eE.S,{checked:a.designEditor,onChange:e=>{t({userId:a.user.id,type:"designEditor",newVal:e.currentTarget.checked})}}),o.createElement(I.tB,{checked:a.devMode,className:"org_self_serve_modals--devModeCheckbox--nDoay",onChange:e=>{l({designChecked:a.designEditor,userId:a.user.id,type:"devMode",newVal:e.currentTarget.checked,rect:e.currentTarget.getBoundingClientRect()})}}),o.createElement(I.tB,{checked:a.figjamEditor,className:"org_self_serve_modals--figjamCheckbox--Cv6Bs",onChange:e=>{t({userId:a.user.id,type:"figjamEditor",newVal:e.currentTarget.checked})}})),r!==e.length-1&&o.createElement(e3,null))))}function e8({rowType:e,children:t}){let a="footer"===e?["55%","15%","15%","15%"]:["35%","20%","15%","15%","15%"];return o.createElement(eg.Y,{dataTestId:"seat-table-row",verticalAlignItems:"center",horizontalAlignItems:"start",padding:{top:"data"===e?14:16,right:16,bottom:"data"===e?14:16,left:16},backgroundColor:"header"===e?"hover":"default",spacing:0},t.map((e,t)=>o.createElement(eg.Y,{key:t,width:a[t],horizontalAlignItems:"start",verticalAlignItems:"center",padding:{right:16}},e)))}function e3(){return o.createElement("div",{className:ef.cx.wFull.colorBgTertiary.h1.$})}function e5({teamId:e}){return o.createElement("div",{className:ef.cx.w8.h8.bRadius2.minW8.$,style:ea.sx.add({backgroundColor:(0,eH.$L)(e,eH.us)}).$})}function e9({userInfo:e}){var t;return e.teams.length>1?o.createElement("div",{"data-tooltip-show-immediately":!0,"data-tooltip-type":eB.Ib.SPECIAL,"data-tooltip":e$,"data-tooltip-team-names":e.teams.map(e=>e.name).join(","),"data-tooltip-team-ids":e.teams.map(e=>e.id).join(","),"data-tooltip-show-right":!0,"data-tooltip-light-mode":!0},o.createElement(ev.E,{color:"default"},(0,S.tx)("all_carts.editor_table.multiple_teams"))):o.createElement(eg.Y,{spacing:8,verticalAlignItems:"center",horizontalAlignItems:"start"},o.createElement(e5,{teamId:e.teamIds[0]}),o.createElement("div",{className:ef.cx.noWrap.ellipsis.overflowHidden.$},o.createElement(ev.E,{color:"default"},null==(t=e.teams[0])?void 0:t.name)))}let e6=(0,eU.Ju)(function({users:e,updateSelectedEditors:t,updateAdditionalEmptySeats:a,currency:r,minTotalSeats:n,dispatch:l,seatInfo:i,monthlyPriceByLicenseType:s}){let[c,d]=(0,o.useState)(e),[m,u]=(0,o.useState)({design:i.design.additionalSeatCount,figjam:i.figjam.additionalSeatCount,dev_mode:i.dev_mode.additionalSeatCount}),_=(0,o.useMemo)(()=>{let e=0,t=0,a=0;for(let r of Object.values(c))r.designEditor&&e++,r.devMode&&a++,r.figjamEditor&&t++;return(e+=m.design,a+=m.dev_mode,t+=m.figjam,n&&e+t+a<n)?3:e<i.design.minCount||e>99?1:t<i.figjam.minCount||t>99?2:0},[m,c,n,i]),p=e=>{m[e]>=99||u(t=>({...t,[e]:t[e]+1}))},f=e=>{m[e]<=0||u(t=>({...t,[e]:t[e]-1}))},g=(e,t)=>{let a=""===e.target.value?0:parseInt(e.target.value);isNaN(a)||u(e=>({...e,[t]:a}))},E=new Y.vr(r),v=()=>{l(R.Ce())};return o.createElement(O.fu,{name:"Select Editors Modal"},o.createElement(ej.Nb,{size:864,maxHeight:672,hide:()=>l(R.Ce()),className:"org_self_serve_modals--selectEditorsModal--Hxi5q"},o.createElement("div",{className:"org_self_serve_modals--selectEditorModalHeader--wsqXY org_self_serve_modals--headerModalText--u9znR"},(0,S.tx)("checkout.add_or_remove_editors"),o.createElement(e_.s_,{customStyle:{position:"initial"},dispatch:l,onClose:v})),o.createElement(e3,null),o.createElement(e8,{rowType:"header"},o.createElement(ev.E,{color:"default",fontWeight:"medium"},(0,S.tx)("all_carts.editor_table.Name")),o.createElement(ev.E,{color:"default",fontWeight:"medium"},(0,S.tx)("all_carts.editor_table.Teams")),o.createElement(eg.Y,{direction:"vertical",spacing:0,horizontalAlignItems:"start",verticalAlignItems:"center"},o.createElement(ev.E,{color:"default",fontWeight:"medium"},(0,S.tx)("general.figma_design")),o.createElement("div",null,o.createElement(ev.E,{color:"handoff",fontWeight:"medium"},(0,S.tx)("general.dev_mode")),"\xa0",o.createElement(ev.E,{color:"default",fontWeight:"medium"},(0,S.tx)("checkout.dev_mode_included_text_formatted.included")))),o.createElement(ev.E,{color:"default",fontWeight:"medium"},(0,S.tx)("general.dev_mode")),o.createElement(ev.E,{color:"default",fontWeight:"medium"},(0,S.tx)("general.figjam"))),o.createElement(e3,null),o.createElement(ep.P,{maxHeight:426},o.createElement(e4,{userData:Object.values(c),checkboxHandler:({userId:e,type:t,newVal:a})=>{let r={...c[e],[t]:a};"devMode"===t&&a&&(r.designEditor=!1),"designEditor"===t&&a&&(r.devMode=!1),d(t=>({...t,[e]:r})),(0,eP.Cu)({name:"org_checkout_select_editors_checkbox",licenseType:t,checked:a})}})),o.createElement(e3,null),o.createElement(e8,{rowType:"footer"},o.createElement(eg.Y,{spacing:0,direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"center"},o.createElement(ev.E,{color:"default",fontWeight:"medium"},(0,S.tx)("all_carts.add_additional_editors.seat_rename")),o.createElement(ev.E,{fontWeight:"regular",color:"secondary"},(0,S.tx)("all_carts.add_additional_editors_description.seat_rename"))),o.createElement(em.o,{editorType:eO.vu,incrementSeats:()=>p(eO.lM.DESIGN),decrementSeats:()=>f(eO.lM.DESIGN),numEditors:m.design,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>g(e,eO.lM.DESIGN)}),o.createElement(em.o,{editorType:eO.PE,incrementSeats:()=>p(eO.lM.DEV_MODE),decrementSeats:()=>f(eO.lM.DEV_MODE),numEditors:m.dev_mode,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>g(e,eO.lM.DEV_MODE)}),o.createElement(em.o,{editorType:eO.tL,incrementSeats:()=>p(eO.lM.FIGJAM),decrementSeats:()=>f(eO.lM.FIGJAM),numEditors:m.figjam,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>g(e,eO.lM.FIGJAM)})),o.createElement("div",{className:"org_self_serve_modals--selectEditorModalActions--SUzT9 org_self_serve_modals--selectEditorModalFooter--1hQ0p"},0!==_?(()=>{switch(_){case 0:default:return;case 1:return o.createElement(ev.E,{color:"danger"},(0,S.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:i.design.minCount}));case 2:return o.createElement(ev.E,{color:"danger"},(0,S.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:i.figjam.minCount}));case 3:return o.createElement(ev.E,{color:"danger"},(0,S.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_at_least_count_editor_seats.seat_rename",{minCount:n}))}})():o.createElement(ev.E,{fontWeight:"regular",color:"secondary"},(0,S.tx)("all_carts.new_total",{total:E.formatMoney(function(e,t,a){let r=t.design,n=t.figjam,l=t.dev_mode;for(let t in e)e[t].designEditor?r++:e[t].devMode&&l++,e[t].figjamEditor&&n++;return r*a[eO.lM.DESIGN]*12+n*a[eO.lM.FIGJAM]*12+l*a[eO.lM.DEV_MODE]*12}(c,m,s),{showCents:!0})})),o.createElement("div",{className:"org_self_serve_modals--buttonGroup--sI5ub"},o.createElement(eu.nR,{onClick:v},(0,S.t)("general.cancel")),o.createElement(I.$$,{onClick:()=>{0===_&&(a(m),t(c),l(R.Ce()))},disabled:0!==_},(0,S.t)("checkout.update_seats"))))))},"SelectEditorsModal");var e7=a(910741),te=a(36816),tt=a(501191);let ta="564px",tr=(0,ei.s)((e,t)=>t(ec.F.enqueue({message:e})));function tn(e){let t=(0,s.d4)(t=>{let a=e.selectedView.teamId?t.teamUserByTeamId[e.selectedView.teamId]||{}:null;return(0,K.BR)(a,t.user)}),a=(0,s.d4)(e=>e.payment),r=(0,s.d4)(t=>e.selectedView.teamId?t.teams[e.selectedView.teamId]:null),n=a.editorStatusChanges,l=(0,s.wA)(),i=a.billingPeriod===Z.tY.STUDENT,{increment:c,decrement:d}=(0,Q.$7)(),[m,u]=(0,o.useState)(!0),_=(0,o.useCallback)((e,t,a)=>{let r=[...n[t][e]];r.splice(a,1),l(D.Je({editorStatusChanges:{...n,[t]:{...n[t],[e]:r}}}))},[l,n]),p=(e,t,a)=>{switch(e){case z._Y.WHITEBOARD:switch(t){case"upgrade":return(0,S.t)("pro_cart.adjust_editors.will_become_figjam_editor.seat_rename",{email:a});case"downgrade":return(0,S.t)("pro_cart.adjust_editors.will_become_figjam_viewer",{email:a});default:(0,el.xb)(t)}case z._Y.DESIGN:case z._Y.SLIDES:case z._Y.SITES:switch(t){case"upgrade":return(0,S.t)("pro_cart.adjust_editors.will_become_design_editor.seat_rename",{email:a});case"downgrade":return(0,S.t)("pro_cart.adjust_editors.will_become_design_viewer",{email:a});default:(0,el.xb)(t)}default:(0,el.xb)(e)}},f=(0,o.useCallback)((e,t)=>()=>{let a;if(u(!1),-1!==(a=n.upgrade[e].indexOf(t.id)))_(e,"upgrade",a),tr(p(e,"downgrade",t.email),l),d(e,t.email);else if(-1!==(a=n.downgrade[e].indexOf(t.id)))_(e,"downgrade",a),tr(p(e,"upgrade",t.email),l),c(e,t.email);else{let a=t["whiteboard"===e?"whiteboard_paid_status":"design_paid_status"]===te.Zf.FULL?"downgrade":"upgrade",r=[...n[a][e]];r.push(t.id),l(D.Je({editorStatusChanges:{...n,[a]:{...n[a],[e]:r}}})),tr(p(e,a,t.email),l),("upgrade"===a?c:d)(e,t.email)}},[l,n,d,c,_,u]),g=(0,K.Ky)(t,n,z._Y.DESIGN),E=(0,K.Ky)(t,n,z._Y.WHITEBOARD),v=a.numDesignEditors,h=Math.max(v,g),y=Math.max(E,a.numWhiteboardEditors);h!==v&&l(D.js({numDesignEditors:h})),y!==a.numWhiteboardEditors&&l(D.Az({numWhiteboardEditors:y}));let b=(0,K.O1)(v,g),w=(0,K.O1)(a.numWhiteboardEditors,E),T=()=>{l(R.to({type:e1,data:{seatDataByLicenseType:{[eO.vu]:{minSeats:g,currentSeats:h,seatUnitCostInCents:(0,U.ok)(a.billingPeriod,e.currency)},[eO.tL]:{minSeats:E,currentSeats:y,seatUnitCostInCents:(0,U.hH)(a.billingPeriod,e.currency)}},showAnnualPrice:a.billingPeriod===Z.tY.ANNUAL,updateAdditionalSeats:e=>{l(D.js({numDesignEditors:e[eO.vu]})),l(D.Az({numWhiteboardEditors:e[eO.tL]}))},dispatch:l,currency:e.currency,isProTeam:!0}}))},C=o.useCallback((e,t)=>e["whiteboard"===t?"whiteboard_paid_status":"design_paid_status"]===te.Zf.FULL&&!n.downgrade[t].includes(e.id)||n.upgrade[t].includes(e.id),[n.downgrade,n.upgrade]),k=t.reduce((e,t)=>(e[t.id]={design:C(t,z._Y.DESIGN),whiteboard:C(t,z._Y.WHITEBOARD),slides:C(t,z._Y.SLIDES),sites:C(t,z._Y.SITES)},e),{}),A=!1,L=0;for(let e of t)if(k[e.id].whiteboard&&L++,k[e.id].design&&L++,A=1===L,L>1)break;let F=t[0];(0,o.useEffect)(()=>{var t,a,r,i;0===L&&!e.isLoading&&(null==F?void 0:F.id)&&(l(D.Je({editorStatusChanges:{...n,upgrade:{design:[F.id,...(null==(t=null==n?void 0:n.upgrade)?void 0:t.design)??[]],whiteboard:[F.id,...(null==(a=null==n?void 0:n.upgrade)?void 0:a.whiteboard)??[]],slides:[F.id,...(null==(r=null==n?void 0:n.upgrade)?void 0:r.slides)??[]],sites:[F.id,...(null==(i=null==n?void 0:n.upgrade)?void 0:i.sites)??[]]}}})),c(z._Y.DESIGN,F.email),c(z._Y.WHITEBOARD,F.email))},[l,n,L,e.isLoading,F.id,F.email,c,y,C,F,m,d]);let P=(0,e7.lb)();return o.createElement(o.Fragment,null,o.createElement("div",{className:er.Fb},P?(0,S.tx)("pro_cart.adjust_editors.choose_your_figma_design_and_figjam_editors.seat_rename_dev_mode"):(0,S.tx)("pro_cart.adjust_editors.choose_your_figma_design_and_figjam_editors.seat_rename")),o.createElement(I.Kz,{multiple:.5}),o.createElement("div",{className:er.b0,style:ea.sx.add({width:ta,margin:"auto"}).$},(0,S.tx)("pro_cart.adjust_editors.subtitle")),o.createElement(I.Kz,{multiple:3}),e.error&&o.createElement("div",{style:ea.sx.add({width:ta,margin:"auto"}).$},o.createElement(x._,{color:x.S.ERROR,text:e.error})),e.error&&o.createElement(I.Kz,{multiple:2}),o.createElement("div",{className:er.sD},o.createElement("div",{className:er.re},o.createElement(I.Kz,{multiple:2.5}),o.createElement("div",{className:er.Ks},o.createElement("div",{className:`${er.HY} ${er.ab} ${er.p7}`},o.createElement("div",{className:er.Ps},r?o.createElement(eV.rE,{key:r.id,entity:r,size:24}):o.createElement(eV.rE,{key:e.teamName,entity:{name:e.teamName},size:24}))),o.createElement("div",{className:`${er.HY} ${er.E0}`,"data-testid":"design-column-header"},o.createElement("div",null,(0,S.tx)("pro_cart.adjust_editors.figma_design_column_title")),o.createElement(I.Kz,{multiple:.75}),o.createElement("div",{className:er.EU},function(e,t){let a=new Y.vr(t);return(0,S.tx)("pro_cart.design_billing_cost_per_month.seat_rename",{monthlyCostInDollars:a.formatMoney((0,U.ok)(e,t))})}(a.billingPeriod,e.currency)),o.createElement(o.Fragment,null,o.createElement(I.Kz,{multiple:.75}),o.createElement(eo.G,null))),o.createElement("div",{className:`${er.HY} ${er.E0}`,"data-testid":"figjam-column-header"},o.createElement("div",null,(0,S.tx)("general.figjam")," "),o.createElement(I.Kz,{multiple:.75}),o.createElement("div",{className:er.EU},function(e,t){let a=new Y.vr(t);return(0,S.tx)("pro_cart.whiteboard_billing_cost_per_month.seat_rename",{monthlyCostInDollars:a.formatMoney((0,U.hH)(e,t))})}(a.billingPeriod,e.currency)))),o.createElement(I.Kz,{multiple:2.5})),o.createElement("div",{className:er.re},e.isLoading&&o.createElement(I.Kz,{multiple:1.5}),o.createElement(N.x,{isLoading:e.isLoading},()=>o.createElement(o.Fragment,null,t.map((e,a)=>{let r=a===t.length-1;return o.createElement("div",{key:e.id},o.createElement(I.Kz,{multiple:1.5}),o.createElement("div",{className:er.Ks},o.createElement("div",{className:er.ab},o.createElement(ed.H8,{user:e}),o.createElement("div",{className:er.QB},o.createElement("div",{className:er.ni},e.handle),o.createElement("div",{className:er.W},e.email))),o.createElement("div",{className:er.E0},o.createElement("span",{"data-tooltip-type":eB.Ib.TEXT,"data-tooltip":k[e.id].design&&A?(0,S.t)("pro_cart.adjust_editors.at_least_one_editor.seat_rename"):(0,S.t)("pro_cart.adjust_editors.checkbox_toggle_explanation.seat_rename")},o.createElement(I.tB,{id:`toggle-design-editor-${e.id}`,checked:k[e.id].design,disabled:i||A&&k[e.id].design,onChange:f(z._Y.DESIGN,e),className:er.kv}))),o.createElement("div",{className:er.E0},o.createElement("span",{"data-tooltip-type":eB.Ib.TEXT,"data-tooltip":k[e.id].whiteboard&&A?(0,S.t)("pro_cart.adjust_editors.to_uncheck_first_check_another"):(0,S.t)("pro_cart.adjust_editors.checkbox_toggle_explanation.seat_rename")},o.createElement(I.tB,{id:`toggle-whiteboard-editor-${e.id}`,checked:k[e.id].whiteboard,disabled:i||A&&k[e.id].whiteboard,onChange:f(z._Y.WHITEBOARD,e),className:er.kv})))),o.createElement(I.Kz,{multiple:1.5}),!(i&&r)&&o.createElement("div",{className:er.pV}))}),!i&&o.createElement(o.Fragment,null,o.createElement(I.Kz,{multiple:2.5}),o.createElement("div",{className:er.Su},o.createElement("div",{className:er.ab},o.createElement("div",{className:er.uD,onClick:T},o.createElement(es.B,{className:er.Hl,svg:tt.A}),o.createElement("span",null,(0,S.tx)("pro_cart.adjust_editors.add_additional_editors.seat_rename")))),o.createElement("div",{className:`${er.HY} ${er.E0}`},o.createElement("div",null,(0,S.tx)("all_carts.num_editors.seat_rename",{numEditors:h})),o.createElement("div",{className:er.EU},b>0&&(0,S.tx)("pro_cart.adjust_editors.empty_seats",{numEmptySeats:b}))),o.createElement("div",{className:`${er.HY} ${er.E0}`},(0,S.tx)("all_carts.num_editors.seat_rename",{numEditors:y}),o.createElement("div",{className:er.EU},w>0&&(0,S.tx)("pro_cart.adjust_editors.empty_seats",{numEmptySeats:w})))),o.createElement(I.Kz,{multiple:2.5})))),e.isLoading&&o.createElement(I.Kz,{multiple:1.5}))))}var tl=a(444795),ti=a(352876),to=a(724838);function ts({chooseStarterPlan:e,chooseProPlan:t,chooseOrgPlan:a,currency:r,updateCurrency:n,upgradeExistingTeam:l,parentRef:i}){let c=(0,s.d4)(e=>e.user),d=(0,M.WQ)({isInDevMode:!1,isProCurrent:!1,hasFeatureListOverride:!1})&&(0,to.Hw)(c);return o.createElement("div",{ref:i},o.createElement("div",{className:er.Fb},(0,S.tx)("pro_cart.choose_plan.choose_a_plan_for_your_new_team")),o.createElement("div",{className:er.dX},o.createElement(tl.O,{currency:r,chooseStarterPlan:e,chooseProPlan:t,chooseOrgPlan:a,updateCurrency:n,upsellSource:J.b.CREATE_NEW_PAID_TEAM,withUpgradeExistingTeamOption:l,parentRef:i})),d&&o.createElement(ti.V,null))}var tc=a(493323),td=a(789586);function tm(e){return"org"===e.variant?o.createElement(tu,{...e}):o.createElement(t_,{...e})}function tu(e){let t=e.canSeeBillingAddressExp&&e.billingAddress,a=e.canSeeBillingAddressExp&&e.shippingAddress&&!(0,Z.$V)(e.shippingAddress);return o.createElement("div",null,o.createElement(tp,{subtitle:(0,S.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.details":"org_self_serve.review_step.organization_details")}),o.createElement(tf,{header:(0,S.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.company_legal_name":"org_self_serve.review_step.company_name"),value:e.legalName}),o.createElement(tf,{header:(0,S.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.display_name":"org_self_serve.review_step.company_display_name"),value:e.displayName}),!e.canSeeBillingAddressExp&&o.createElement(tf,{header:(0,S.tx)("org_self_serve.review_step.domain"),value:e.domain}),!e.canSeeBillingAddressExp&&e.totalTeams>0&&o.createElement(tf,{header:(0,S.tx)("org_self_serve.review_step.teams"),value:e.totalTeams.toString()}),e.canSeeBillingAddressExp&&o.createElement(tf,{header:(0,S.tx)("org_self_serve.review_step.billing_email"),value:e.userEmail}),e.canSeeBillingAddressExp&&o.createElement(I.Ph,{onClick:e.navigateToEditOrganizationDetails,trackingEventName:"Edit organization details - checkout flow",trusted:!0},(0,S.tx)("org_self_serve.review_step.edit_organization")),t&&o.createElement(tf,{header:(0,S.tx)("org_self_serve.review_step.billing_address"),value:tg(e.billingAddress)}),a&&o.createElement(tf,{header:(0,S.tx)("org_self_serve.review_step.shipping_address"),value:tg(e.shippingAddress)}),e.canSeeBillingAddressExp&&o.createElement(I.Ph,{onClick:e.navigateToEditPaymentDetails,trackingEventName:"Edit payment details - checkout flow",trusted:!0},(0,S.tx)("org_self_serve.review_step.edit_payment")))}function t_(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.selectedView),r=e.canSeeBillingAddressExp&&e.billingAddress,n=e.canSeeBillingAddressExp&&e.shippingAddress&&!(0,Z.$V)(e.shippingAddress);return o.createElement("div",null,o.createElement(tp,{subtitle:(0,S.tx)("pro_cart.review.details")}),o.createElement(tf,{header:(0,S.tx)("pro_cart.review.team_name"),value:e.displayName}),o.createElement(tf,{header:(0,S.tx)("pro_cart.review.company_name"),value:e.legalName}),r&&o.createElement(tf,{header:(0,S.tx)("pro_cart.review.billing_address"),value:tg(e.billingAddress)}),n&&o.createElement(tf,{header:(0,S.tx)("pro_cart.review.shipping_address"),value:tg(e.shippingAddress)}),o.createElement(I.Ph,{onClick:e.canSeeBillingAddressExp?()=>{t(A.$T({...a,paymentStep:Z.tn.PAYMENT_AND_ADDRESS}))}:()=>{t((0,R.to)({type:td.L,data:{modalTitle:(0,S.t)("pro_cart.review.edit_details_modal_header"),displayName:e.displayName,legalName:e.legalName,updateNameImmediately:!1,canSeeBillingAddressExp:e.canSeeBillingAddressExp}}))},trackingEventName:"Edit team details - checkout flow",trusted:!0},(0,S.tx)(e.canSeeBillingAddressExp?"pro_cart.review.edit_details":"pro_cart.review.edit_all_details")))}function tp({subtitle:e}){return o.createElement("div",{className:ef.cx.font15.fontMedium.lh24.colorText.$},e)}function tf({header:e,value:t}){return o.createElement("div",{className:ef.cx.flex.flexColumn.mt16.$},o.createElement("p",{className:ef.cx.font11.lh16.spacingWide.colorText.$},e),o.createElement("p",{className:ef.cx.font13.lh24.fontMedium.colorText.breakWord.mb16.$},t))}function tg(e){return[null==e?void 0:e.line1,null==e?void 0:e.line2,null==e?void 0:e.city,null==e?void 0:e.region,null==e?void 0:e.country,null==e?void 0:e.postal_code].filter(function(e){return e}).join(", ")}function tE(e){var t,a,r,n;let[l,i]=o.useState(!1),c=new Y.vr(e.currency),[d,u]=o.useState(!1),p=(0,s.d4)(e=>e.payment),f=(0,s.d4)(e=>e.payment,(e,t)=>d||e===t),g=(0,s.d4)(t=>e.selectedView.teamId?t.teams[e.selectedView.teamId].name:e.teamName)??"",E=(0,M.Ik)(),v=p.displayName||g,h=p.legalName||g,y=p.billingPeriod===Z.tY.STUDENT,b=!!(0,U.p1)(e.selectedView,p),w=b||y,T=p.submitPending||!b&&!l,x=p.numWhiteboardEditors,N=(0,U.Qo)(p.numDesignEditors,p.billingPeriod,e.currency),C=(0,U.PK)(x,p.billingPeriod,e.currency),k=w?0:(null==(t=p.taxes)?void 0:t.total)||N+C,A=new URLSearchParams(m.Ay.location.search),L=A.get("onCompleteRedirectFileKey"),R=A.get("onCompleteRedirectNodeId"),{trackingDescriptor:D,buttonText:F,finePrint:P}=function({isPromo:e,isEducationTeam:t,claimsEndAtDate:a}){var r;return e?{trackingDescriptor:ew.c.START_PRO_PLAN_FOR_FREE,buttonText:(0,S.tx)("pro_cart.review.start_professional_plan_for_free"),finePrint:o.createElement(o.Fragment,null,(0,S.tx)("pro_cart.review.offer_redeem_agree",{termsOfServiceLink:o.createElement(eD,null)}),a&&o.createElement(o.Fragment,null," ",(0,S.tx)("pro_cart.review.redeem_offer_by",{date:(r=new Date(a),new Intl.DateTimeFormat("en-US",{month:"long",day:"numeric",year:"numeric"}).format(r))})))}:t?{trackingDescriptor:ew.c.COMPLETE_UPGRADE,buttonText:(0,S.tx)("pro_cart.review.complete_upgrade"),finePrint:(0,S.tx)("pro_cart.review.all_editors_on_an_education_team_must_be_verified.seat_rename")}:{trackingDescriptor:ew.c.COMPLETE_PURCHASE,buttonText:(0,S.tx)("pro_cart.review.complete_purchase"),finePrint:(0,S.tx)("pro_cart.review.your_subscription_will_automatically_renew_without_link.seat_rename")}}({isPromo:b,isEducationTeam:y,claimsEndAtDate:null==(a=p.promo)?void 0:a.claims_end_at}),O=async t=>{t.preventDefault(),await u(!0),e.onClickConfirm()},B=(0,_.kc)().pro_team_business_names;return o.createElement("div",{className:B?er.HX:er.db},B&&o.createElement("div",{className:er.PT},o.createElement(tm,{displayName:v??"",legalName:h??"",canSeeBillingAddressExp:e.canSeeBillingAddressExp,billingAddress:e.billingAddress,shippingAddress:e.shippingAddress,variant:"team"})),o.createElement("div",{className:B?er.Bo:void 0},o.createElement("div",{className:er.TV,"data-testid":"review-step-upgrade-title"},(0,S.tx)(y?"edu.checkout_team_name":E?p.billingPeriod===Z.tY.ANNUAL?"pro_cart.review.exp_sticker_shock.upgrade_team_name_to_a_professional_team_yearly":"pro_cart.review.exp_sticker_shock.upgrade_team_name_to_a_professional_team_monthly":"pro_cart.review.upgrade_team_name_to_a_professional_team",{teamName:g})),o.createElement(eR,{payment:f,currency:e.currency,isPromo:b,isEducationTeam:y,hasCartStickerShock:E}),o.createElement("div",{className:er.pV}),o.createElement(I.Kz,{multiple:2}),f.taxes&&!!e.billingAddress&&o.createElement(o.Fragment,null,o.createElement(ek,{mainText:(0,S.tx)("pro_cart.info.subtotal"),priceText:c.formatMoney(b?0:f.taxes.sub_total||0,{showCents:!0}),"data-testid":"subtotal-summary"}),o.createElement(I.Kz,{multiple:1.5}),o.createElement(ek,{mainText:(0,S.tx)("pro_cart.review.tax"),priceText:c.formatMoney((null==(r=f.taxes)?void 0:r.tax_total)||0,{showCents:!0}),subText:(0,S.tx)("pro_cart.review.tax_percent",{taxPercent:(null==(n=f.taxes.lines[0])?void 0:n.tax_percent)||0}),"data-testid":"tax-summary"}),o.createElement(I.Kz,{multiple:1.5})),o.createElement(ek,{"data-testid":"confirm-total-summary",mainText:y?(0,S.tx)("pro_cart.review.total"):(0,S.tx)("pro_cart.review.total_due_today"),priceText:c.formatMoney(k,{showCents:!0,showFullFormat:(0,Y._Z)()}),subText:b?(0,S.tx)("pro_cart.review.you_will_not_be_charged_during_the_free_period",{days:f.promo.promo_value}):void 0}),o.createElement(I.Kz,{multiple:2}),o.createElement("div",null,P,!b&&o.createElement("div",{className:er.Gn},o.createElement(eE.S,{checked:l,onChange:e=>{i(e.currentTarget.checked)}}),o.createElement("p",null," ",(0,S.tx)("pro_cart.review.agree_with_privacy_and_cancellation",{termsOfServiceLink:o.createElement(eD,null),privacyLink:o.createElement(tv,null),cancellationLink:o.createElement(th,null)})))),o.createElement(I.Kz,{multiple:2.5}),o.createElement(I.Kz,{multiple:2.5}),o.createElement(I.vd,{className:er.fK,onClick:O,trackingProperties:{teamId:e.selectedView.teamId,inPublishDraftExp:!!(R&&L),trackingDescriptor:D},disabled:T,dataTestId:"confirm-purchase-button"},p.submitPending?o.createElement(tc.kt,{className:er.S}):F)))}function tv(){return o.createElement(I.Us,{href:"/privacy",target:"_blank",trusted:!0},(0,S.tx)("pro_cart.review.privacy_policy"))}function th(){return o.createElement(I.Us,{href:"/pricing-faq/#how-do-i-cancel-my-paid-plan",target:"_blank",trusted:!0},(0,S.tx)("pro_cart.review.cancellation_policy"))}var ty=a(659838),tb=a(489262),tw=(e=>(e.STARTER="starter",e.PRO="pro",e.ORG="org",e))(tw||{});function tT({type:e,teamName:t,setTeamName:a,onNext:r,upgradeExistingTeam:n,promo:l}){let i={starter:{title:(0,S.tx)("all_carts.create_team.create_a_new_team"),subtitle:(0,S.tx)("all_carts.create_team.after_creating_a_team"),placeholder:(0,S.t)("pro_cart.create_team.enter_a_name_for_your_working_group"),next:(0,S.tx)("all_carts.create_team.create_team"),trackingDescriptor:ew.c.SEND_INVITES},pro:{title:(0,S.tx)("pro_cart.create_team.create_a_professional_team"),subtitle:(0,S.tx)("pro_cart.create_team.itll_have_unlimited_files_and_collaborative_features"),placeholder:(0,S.t)("pro_cart.create_team.enter_a_name_for_your_working_group"),next:l?(0,S.tx)("pro_cart.sidebar.next_review"):(0,S.tx)("pro_cart.create_team.next_set_editors.seat_rename"),trackingDescriptor:l?ew.c.REVIEW:ew.c.SET_EDITORS},org:{title:(0,S.tx)("org_self_serve.create_team_step.create_an_org_team"),subtitle:(0,S.tx)("org_self_serve.create_team_step.itll_have_unlimited_files_and_advanced_security"),placeholder:(0,S.t)("org_self_serve.create_team_step.enter_a_name_for_your_team"),next:(0,S.tx)("org_self_serve.create_team_step.next_select_team"),trackingDescriptor:ew.c.SELECT_TEAM}}[e];return o.createElement(o.Fragment,null,o.createElement("div",{className:er.Fb},i.title),o.createElement(I.Kz,{multiple:.5}),o.createElement("div",{className:er.b0},i.subtitle),o.createElement("div",{className:er.F0},o.createElement(es.B,{svg:tb.A,className:er.Pr}),o.createElement(ty.L,{className:er.Zy,onChange:e=>a(e.target.value),value:t,placeholder:i.placeholder})),o.createElement(I.vd,{className:er.eA,onClick:r,trackingProperties:{trackingDescriptor:i.trackingDescriptor},disabled:!t.trim()},i.next),!!n&&o.createElement(I.Us,{className:er.x,onClick:n,trusted:!0,trackingProperties:{trackingDescriptor:ew.c.UPGRADE_EXISTING_TEAM}},(0,S.tx)("pro_cart.create_team.upgrade_an_existing_team_instead")))}var tI=a(848044),tx=a(512077);function tN(e){var t;let{error:a,errorCode:r}=(0,s.d4)(e=>e.payment),n=!!a&&null===r,l=!!e.error;return o.createElement(o.Fragment,null,o.createElement("div",{className:er.Fb},(0,S.tx)("pro_cart.payment.enter_payment_details_title")),o.createElement(I.Kz,{multiple:3}),o.createElement("div",{style:ea.sx.add({width:"416px",margin:"auto"}).$},n&&o.createElement("div",null,o.createElement(tI.I,{marginTop:0,message:a}),l&&o.createElement(I.Kz,{multiple:1.5})),n&&!l&&o.createElement(I.Kz,{multiple:2}),o.createElement("div",{className:er.P_},o.createElement("div",{style:ea.sx.if((null==(t=e.error)?void 0:t.code)===B.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,ea.sx.font14.add({marginTop:"92px"})).$},o.createElement(tx.F,{createPaymentElement:e.createPaymentElement,unmountPaymentElement:e.unmountPaymentElement,billingAddress:e.billingAddress,updateBillingAddress:e.updateBillingAddress,legalCompanyName:e.legalCompanyName,updateLegalCompanyName:e.updateLegalCompanyName,nameOnPaymentMethod:e.nameOnPaymentMethod,updateNameOnPaymentMethod:e.updateNameOnPaymentMethod,shippingAddress:e.shippingAddress,updateShippingAddress:e.updateShippingAddress,error:e.error,vatGstId:e.vatGstId,onVatGstIdChange:e.onVatGstIdChange,regionalVatGstId:e.regionalVatGstId,onRegionalVatGstIdChange:e.onRegionalVatGstIdChange,paymentMethodType:e.paymentMethodType,isCommunityCheckout:!1,canSeeBillingAddressExp:e.canSeeBillingAddressExp,isCheckout:!0})))))}var tC=a(55992),tS=a(776621),tk=a(773058);function tA(e){return o.createElement(o.Fragment,null,o.createElement(eg.Y,{direction:"horizontal",horizontalAlignItems:"space-between","data-testid":"sidebar-subtotal-cost-row",height:"hug-contents"},o.createElement(ev.E,{"data-testid":"sidebar-subtotal-summary-main-text",fontWeight:"regular",fontSize:13},(0,S.tx)("pro_cart.info.subtotal")),o.createElement("span",{"data-testid":"sidebar-subtotal-summary-price-section"},o.createElement(ev.E,{"data-testid":"sidebar-subtotal-summary-price-section-price-text",fontWeight:"regular",fontSize:13,children:e.formattedSubtotal}))),o.createElement(ev.E,{fontWeight:"regular",color:"tertiary",fontSize:11},(0,S.tx)("checkout.tax_disclaimer"))," ",o.createElement(ev.E,{fontWeight:"medium",color:"tertiary",fontSize:11},(0,S.tx)("checkout.review_in_tax_disclaimer")))}function tL({numberOfDesignEditors:e,designSubtotal:t,numberOfFigjamEditors:a,figjamSubtotal:r,formattedSubtotal:n,billingPeriod:l}){return o.createElement(o.Fragment,null,o.createElement(eg.Y,{direction:"horizontal",horizontalAlignItems:"space-between","data-testid":"sidebar-design-subtotal-cost-row",height:"hug-contents"},o.createElement(ev.E,{"data-testid":"sidebar-design-subtotal-summary-main-text",fontWeight:"regular",fontSize:13},(0,S.tx)("pro_cart.sidebar.exp_sticker_shock.design_editors",{numEditors:e})),o.createElement("span",{"data-testid":"sidebar-design-subtotal-summary-price-section"},o.createElement(ev.E,{"data-testid":"sidebar-design-subtotal-summary-price-section-price-text",fontWeight:"regular",fontSize:13,children:t}))),o.createElement(I.Kz,{multiple:2}),o.createElement(eg.Y,{direction:"horizontal",horizontalAlignItems:"space-between","data-testid":"sidebar-whiteboard-subtotal-cost-row",height:"hug-contents"},o.createElement(ev.E,{"data-testid":"sidebar-whiteboard-subtotal-summary-main-text",fontWeight:"regular",fontSize:13},(0,S.tx)("pro_cart.sidebar.exp_sticker_shock.figjam_editors",{numEditors:a})),o.createElement("span",{"data-testid":"sidebar-whiteboard-subtotal-summary-price-section"},o.createElement(ev.E,{"data-testid":"sidebar-whiteboard-subtotal-summary-price-section-price-text",fontWeight:"regular",fontSize:13,children:r}))),o.createElement(I.Kz,{multiple:2}),o.createElement(eg.Y,{direction:"horizontal",horizontalAlignItems:"space-between","data-testid":"sidebar-subtotal-cost-row",height:"hug-contents"},o.createElement(ev.E,{"data-testid":"sidebar-subtotal-summary-main-text",fontWeight:"medium",fontSize:13},(0,S.tx)(l===Z.tY.ANNUAL?"pro_cart.sidebar.exp_sticker_shock.subtotal_per_year":"pro_cart.sidebar.exp_sticker_shock.subtotal_per_month")),o.createElement("span",{"data-testid":"sidebar-subtotal-summary-price-section"},o.createElement(ev.E,{"data-testid":"sidebar-subtotal-summary-price-section-price-text",fontWeight:"medium",fontSize:13,children:n}))),o.createElement(ev.E,{fontWeight:"regular",color:"tertiary",fontSize:11},(0,S.tx)("checkout.tax_disclaimer"))," ",o.createElement(ev.E,{fontWeight:"medium",color:"tertiary",fontSize:11},(0,S.tx)("checkout.review_in_tax_disclaimer")))}var tR=a(213100),tD=a(457215),tF=a(476932),tP=a(553015),tM=a(212957);let tO=(0,eU.Ju)(function({teamId:e,trackingProperties:t,hasSecondaryBtn:a=!0}){let r=(0,o.useMemo)(()=>(0,tD.To)(),[]),n=(0,s.wA)(),l=()=>{n(R.Ce())},i=a?o.createElement(tP.V,{onClick:()=>{m.Ay.redirect("/pricing","_blank")}},(0,S.t)("pro_onboarding.pro_feature_modal.compare_plans")):null;return o.createElement(O.fu,{name:"Pro Features Modal",properties:t??tM.S.getTrackingProperties(e)},o.createElement(tF.n,{...r,dismissModal:l,clickPrimaryBtn:l,secondaryBtn:i,showPricing:!1,panelTitleSize:tF.I.LARGE,cardsClickable:!0}))},"ProFeaturesModal");var tB=a(41029);let tU=(0,s.Ng)(e=>({payment:e.payment,user:e.user}))(function(e){let t,a;let r=(0,s.wA)(),n=(0,M.Ik)(),l=e.payment.numDesignEditors,i=e.payment.billingPeriod===Z.tY.STUDENT,c=new Y.vr(e.currency);if(e.selectedView.paymentStep!==Z.tn.CHOOSE_PLAN&&e.selectedView.paymentStep!==Z.tn.PAYMENT_AND_ADDRESS)return null;let d=e=>{e===Z.tY[Z.tY.ANNUAL]?r(D.Lo({billingPeriod:Z.tY.ANNUAL})):e===Z.tY[Z.tY.MONTHLY]&&r(D.Lo({billingPeriod:Z.tY.MONTHLY})),r(D.js({numDesignEditors:l}))},m=(0,b.cn)(e.user),u=(0,S.t)("pro_cart.sidebar.next_payment_information"),_=ew.c.PAYMENT_INFORMATION;(i||e.selectedView.paymentStep===Z.tn.PAYMENT_AND_ADDRESS)&&(u=(0,S.t)("pro_cart.sidebar.next_review"),_=ew.c.REVIEW);let p=(0,Y._Z)(),f=(0,U.Qo)(l,e.payment.billingPeriod,e.currency),g=12*(0,U.Qo)(l,Z.tY.MONTHLY,e.currency),E=(0,U.ok)(e.payment.billingPeriod,e.currency),v=(0,U.ok)(Z.tY.MONTHLY,e.currency),h=(0,U.PK)(e.payment.numWhiteboardEditors,e.payment.billingPeriod,e.currency),y=12*(0,U.PK)(e.payment.numWhiteboardEditors,Z.tY.MONTHLY,e.currency),T=(0,U.hH)(e.payment.billingPeriod,e.currency),x=(0,U.hH)(Z.tY.MONTHLY,e.currency),C=n?o.createElement(tW,{price:E,localizeCurrency:c}):c.formatMoney(f),k=n?o.createElement(tW,{price:T,localizeCurrency:c}):c.formatMoney(h),A=g+y-(0,U.Qo)(l,Z.tY.ANNUAL,e.currency)-(0,U.PK)(e.payment.numWhiteboardEditors,Z.tY.ANNUAL,e.currency);e.payment.billingPeriod===Z.tY.ANNUAL?(f>0&&(t=c.formatMoney(g)),h>0&&(a=c.formatMoney(y)),n&&(t=c.formatMoney(v),a=c.formatMoney(x))):e.payment.billingPeriod===Z.tY.STUDENT&&(t=n?c.formatMoney(v):o.createElement(eS,{editorType:z._Y.DESIGN,numEditors:e.payment.numDesignEditors,currency:e.currency}),a=n?c.formatMoney(x):o.createElement(eS,{editorType:z._Y.WHITEBOARD,numEditors:e.payment.numWhiteboardEditors,currency:e.currency}));let L=f+h,R=c.getPrices(),F=eN(R.annualFigjam,R.monthlyFigjam),P=eN(R.annualFigma,R.monthlyFigma);return L<0&&(0,tS.$D)(w.e.BILLING,Error("[Billing] Estimated total is a negative amount."),{extra:{numDesignEditors:l,numWhiteboardEditors:e.payment.numWhiteboardEditors,upgrades:JSON.stringify(e.payment.editorStatusChanges),userId:e.user.id,subtotal:L,currency:e.currency}}),o.createElement("div",{className:er.Ie},n?o.createElement(o.Fragment,null,o.createElement(tV,{teamId:e.selectedView.teamId}),p&&o.createElement(o.Fragment,null,o.createElement(I.Kz,{multiple:3}),o.createElement(tH,{currency:e.currency,supportedCurrencies:(0,Y.B9)(),dropdownShown:e.dropdownShown,changeCurrency:e.updateCurrency,hasCartStickerShock:n})),o.createElement(I.Kz,{multiple:2}),o.createElement("div",{className:er.pV}),o.createElement(I.Kz,{multiple:2})):o.createElement(o.Fragment,null,o.createElement("div",{className:er.LC},(0,S.tx)("pro_cart.sidebar.professional_plan")),p&&o.createElement(o.Fragment,null,o.createElement(I.Kz,{multiple:3}),o.createElement(tH,{currency:e.currency,supportedCurrencies:(0,Y.B9)(),dropdownShown:e.dropdownShown,changeCurrency:e.updateCurrency}),o.createElement(I.Kz,{multiple:2}),o.createElement("div",{className:er.pV}),o.createElement(I.Kz,{multiple:2}))),m&&e.selectedView.paymentStep===Z.tn.CHOOSE_PLAN&&o.createElement(o.Fragment,null,o.createElement("div",{className:er.ZD},(0,S.tx)("pro_cart.sidebar.is_this_an_education_team")),o.createElement(I.Kz,{multiple:1.5}),o.createElement(tk.z,{className:er.aq,onChange:e=>{"true"===e?r(D.Lo({billingPeriod:Z.tY.STUDENT})):i&&(r(D.Lo({billingPeriod:Z.tY.ANNUAL})),r(D.js({numDesignEditors:l})))},value:i.toString()},o.createElement(tk.Z,{value:"false",className:er.Ac},(0,S.tx)("pro_cart.sidebar.no")),o.createElement(tk.Z,{value:"true",className:er.Ac},(0,S.tx)("pro_cart.sidebar.yes"))),o.createElement(I.Kz,{multiple:1.5}),o.createElement("div",{className:er.pV}),o.createElement(I.Kz,{multiple:2})),!n&&o.createElement(o.Fragment,null,o.createElement(t$,{billingPeriod:e.payment.billingPeriod,onBillingCycleChange:d,currency:e.currency}),o.createElement(I.Kz,{multiple:2})),o.createElement(N.x,{isLoading:e.isLoading,className:er.F},()=>o.createElement(o.Fragment,null,o.createElement(ek,{"data-testid":"sidebar-design-summary",mainText:n?o.createElement("span",{className:ef.cx.fontMedium.$},(0,S.tx)("pro_cart.sidebar.exp_sticker_shock.design")):(0,S.tx)("pro_cart.info.figma_design_editors.seat_rename",{numEditors:l}),strikethroughPriceText:t,strikethroughPriceClassName:n?ef.cx.font18.fpl__textHeadingLargeLetterSpacing.$:void 0,priceText:C,subText:n?void 0:o.createElement(eT,{currentBillingPeriod:e.payment.billingPeriod,numEditors:l,currency:e.currency,noCents:!0,shouldStrikethroughMonthlyUnitCostIfAnnual:!0}),discountPercentage:n?void 0:f>0&&e.payment.billingPeriod===Z.tY.ANNUAL?P:void 0,showDevModeIncludedText:!0}),o.createElement(I.Kz,{multiple:2}),o.createElement(ek,{"data-testid":"sidebar-whiteboard-summary",mainText:n?o.createElement("div",{className:ef.cx.fontMedium.$},(0,S.tx)("pro_cart.sidebar.exp_sticker_shock.figjam")):(0,S.tx)("pro_cart.info.figjam_editors.seat_rename",{numEditors:e.payment.numWhiteboardEditors}),strikethroughPriceText:a,strikethroughPriceClassName:n?ef.cx.font18.fpl__textHeadingLargeLetterSpacing.$:void 0,priceText:k,subText:n?void 0:o.createElement(eC,{shouldStrikethroughMonthlyUnitCostIfAnnual:!0,currency:e.currency}),discountPercentage:n?void 0:h>0&&e.payment.billingPeriod===Z.tY.ANNUAL?F:void 0}),o.createElement(I.Kz,{multiple:2}),n&&!i&&o.createElement(o.Fragment,null,o.createElement(tj,{billingPeriod:e.payment.billingPeriod,onBillingCycleChange:d,localizeCurrency:c,savingsWithAnnualPlan:A}),o.createElement(I.Kz,{multiple:2})))),o.createElement("div",{className:er.pV}),o.createElement(I.Kz,{multiple:3}),n?o.createElement(tL,{numberOfDesignEditors:l,designSubtotal:c.formatMoney(f),numberOfFigjamEditors:e.payment.numWhiteboardEditors,figjamSubtotal:c.formatMoney(h),formattedSubtotal:c.formatMoney(L,{showFullFormat:(0,Y._Z)()}),billingPeriod:e.payment.billingPeriod}):o.createElement(tA,{formattedSubtotal:c.formatMoney(L,{showFullFormat:(0,Y._Z)()})}),o.createElement(I.Kz,{multiple:3}),i&&o.createElement(o.Fragment,null,o.createElement("div",{className:er.iY},(0,S.tx)("edu.education_teams_get_all_the_professional_plan_features_for_free")),o.createElement(I.Kz,{multiple:2})),o.createElement(I.vd,{className:er.fK,disabled:e.isLoading||e.isButtonDisabled||e.payment.submitPending,onClick:e.onNext,trackingProperties:{trackingDescriptor:_},dataTestId:"upgrade-next-button"},e.payment.submitPending?o.createElement(tc.kt,{className:er.S}):u))});function tV({teamId:e}){let t=(0,s.wA)();return o.createElement(o.Fragment,null,o.createElement("div",{className:ef.cx.font20.fontMedium.$},(0,S.tx)("pro_cart.sidebar.professional_plan")),o.createElement(I.Kz,{multiple:1}),o.createElement("p",{className:ef.cx.font13.fontNormal.lh24.maxW250.$},(0,S.tx)("pro_cart.sidebar.exp_sticker_shock.unlimited_files_and_projects",{learnMoreLink:o.createElement(I.Us,{className:ef.cx.colorTextBrand.cursorPointer.$,onClick:()=>{t(R.to({type:tO,data:{teamId:e??void 0,trackingProperties:{productArea:"upgrade_sidebar"},hasSecondaryBtn:!1}}))},trusted:!0},(0,S.tx)("pro_cart.sidebar.exp_sticker_shock.so_much_more"))})))}function tH({currency:e,dropdownShown:t,supportedCurrencies:a,changeCurrency:r,hasCartStickerShock:n}){let l=ef.cx.flex.justifyBetween.itemsCenter.font13.$,i=n?ef.cx.fontMedium.$:ef.cx.fontSemiBold.$;return o.createElement("div",{className:n?l:er.h7},o.createElement("span",{className:i},(0,S.tx)("pro_cart.sidebar.currency")),o.createElement(tB.D,{currency:e,dropdownShown:t,supportedCurrencies:a,changeCurrency:r,shortFormDisplay:!0}))}function tW({price:e,localizeCurrency:t}){let a=ef.cx.font18.fpl__textHeadingLargeLetterSpacing.fontMedium.$;return o.createElement("span",null,(0,S.tx)("pro_cart.sidebar.exp_sticker_shock.cost_per_editor_per_month",{cost:o.createElement("span",{className:a},t.formatMoney(e))}))}function tj({billingPeriod:e,onBillingCycleChange:t,localizeCurrency:a,savingsWithAnnualPlan:r}){let n=ef.cx.flex.alignCenter.$,l=ef.cx.colorTextSuccess.font13.$,i=ef.cx.colorText.font13.pl8.$;return o.createElement("div",{className:n},o.createElement(tR.l,{dataTestId:"billing-period-toggle",on:e===Z.tY.ANNUAL,onChange:()=>{t(e===Z.tY.ANNUAL?Z.tY[Z.tY.MONTHLY]:Z.tY[Z.tY.ANNUAL]),(0,eP.Cu)({name:"Upgrade sidebar billing period toggle"})}}),o.createElement("span",{className:i},(0,S.tx)("pro_cart.sidebar.exp_sticker_shock.by_paying_annually",{saveAmountText:o.createElement("span",{className:l},(0,S.tx)("pro_cart.sidebar.exp_sticker_shock.save_amount_per_year",{saveAmount:a.formatMoney(r)}))})))}function t$({billingPeriod:e,onBillingCycleChange:t,currency:a}){if(e===Z.tY.STUDENT)return null;{let r=new Y.vr(a).getPrices(),n=eN(r.annualFigjam,r.monthlyFigjam);return o.createElement(o.Fragment,null,o.createElement("div",{className:er.ZD},(0,S.tx)("pro_cart.sidebar.billing_cycle")),o.createElement(I.Kz,{multiple:2}),o.createElement(tk.z,{className:er.aq,onChange:t,value:Z.tY[e]},o.createElement(tk.Z,{value:Z.tY[Z.tY.ANNUAL],className:er.Ac},o.createElement("div",{className:ey()(er.Wu,er.Yw)},o.createElement("span",null,(0,S.tx)("pro_cart.sidebar.annual")),o.createElement(eb.Ex,{className:er.qS,color:eb.zE.SUCCESS,size:eb.vj.LARGE,subtle:!0,text:(0,S.tx)("pro_cart.sidebar.save_up_to_discount",{discountAmount:n})}))),o.createElement(tk.Z,{value:Z.tY[Z.tY.MONTHLY],className:er.Ac},o.createElement("div",{className:ef.cx.flex.justifyEnd.$},(0,S.tx)("pro_cart.sidebar.monthly")))),o.createElement(I.Kz,{multiple:2}),o.createElement("div",{className:er.pV}))}}function tG(e){var t,a,r,n;let l;let i=(0,$.iZ)(),c=null==i?void 0:i.id,d=(0,_.DC)(),u=(0,s.d4)(e=>e.payment),p=(0,s.d4)(e=>e.dropdownShown),f=(0,s.d4)(e=>e.teams),g=e.selectedView.paymentStep,E=o.useRef(null),[v,w]=(0,o.useState)((null==d?void 0:d.team_name)??""),[T,W]=(0,o.useState)(V.kt),ea=(0,K.PS)((0,j.FC)()),[el,ei]=(0,o.useState)((null==d?void 0:d.currency)||u.currency||(0,Y.LN)()),eo=e=>{ei(e),eM(D.MN({currency:e}))},{billingPeriod:es,numDesignEditors:ec,numWhiteboardEditors:ed,editorStatusChanges:em}=u,{ignoreCurrentPlan:eu}=e.selectedView,e_=e.selectedView.teamId,ep=(0,s.d4)(t=>(0,X.Np)(t,{...e.selectedView,paymentStep:Z.tn.CONFIRM_PAY})),ef=(0,s.d4)(t=>(0,X.Np)(t,{...e.selectedView,paymentStep:Z.tn.PAYMENT_AND_ADDRESS})),eg=(0,M.Mh)(),eE=(0,U.Qo)(ec,es,el)+(0,U.PK)(ed,es,el),{createPaymentElement:ev,unmountPaymentElement:eh,savePayment:ey,billingAddress:eb,updateBillingAddress:ew,shippingAddress:eT,updateShippingAddress:eI,customerLegalName:ex,setCustomerLegalName:eN,nameOnPaymentMethod:eC,setNameOnPaymentMethod:eS,vatGstId:ek,setVatGstId:eA,regionalVatGstId:eL,setRegionalVatGstId:eR,paymentMethodType:eD,error:eF}=(0,B.Op)({setupIntentParams:{redirect_url:ep,error_redirect_url:ef,subtotal_estimate:eE,currency:el},customerInfo:{teamId:e_},paymentFlowSource:B.wn.PRO_UPGRADE,currency:el,billingPeriod:es,defaultCountry:(0,Y.ub)(),initialBillingAddress:null==d?void 0:d.billing_address,initialNameOnPaymentMethod:null==d?void 0:d.name_on_payment_method,initialShippingAddress:null==d?void 0:d.shipping_address,initialCustomerLegalName:null==d?void 0:d.customer_legal_name,initialVatGstId:null==d?void 0:d.vat_gst_id,initialRegionalVatGstId:null==d?void 0:d.regional_vat_gst_id,teamName:(null==d?void 0:d.team_name)||v,canSeeBillingAddressExp:eg,isCheckout:!0}),eP=(null==eF?void 0:eF.code)===B.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,eM=(0,s.wA)(),eO=(0,Q.Ud)({teamId:e_,canSeeBillingAddressExp:eg}),eB=()=>{eM(A.$T({...e.selectedView,paymentStep:Z.tn.CHOOSE_PLAN,previousView:e.selectedView.previousView,ignoreCurrentPlan:eu}))};(0,V.pI)({loadingPaidEditors:eO,teamId:e_,teamName:e_?void 0:v,setTeamName:e_?void 0:w,collaborators:e_||e.selectedView.teamFlowType!==ee.SC.CREATE?void 0:T,setCollaborators:e_||e.selectedView.teamFlowType!==ee.SC.CREATE?void 0:W});let eU=(0,s.d4)(e=>e.currentUserOrgId),eV=eu?null:eU,eH=(0,s.d4)(e=>eV?e.orgById[eV]:null),eW=null==(t=(0,et.Q)({currentOrgId:eV,currentTeamId:null}).data)?void 0:t.currentUser,ej=null==(a=null==eW?void 0:eW.baseOrgUser)?void 0:a.workspaceUsers,e$=null==(r=null==ej?void 0:ej.find(e=>null==e?void 0:e.isMainWorkspace))?void 0:r.workspaceId,{cannotCreateTeamReason:eG}=(0,G.l6)(eH,e$),ez=(0,s.d4)(e=>(0,q.isOrgUserExternallyRestrictedFromState)(e));(0,o.useEffect)(()=>{g===Z.tn.PAYMENT_AND_ADDRESS&&eP&&eB()});let eY=(0,s.d4)(e=>!!e.user&&(0,b.cn)(e.user));(0,o.useEffect)(()=>{eY&&e.selectedView.isEduTeam?eM(D.Lo({billingPeriod:Z.tY.STUDENT})):e.selectedView.isEduTeam&&eM(D.Lo({billingPeriod:Z.tY.UNSPECIFIED}))},[eM,e.selectedView.isEduTeam,eY]),(0,o.useEffect)(()=>{e.selectedView.teamFlowType===ee.SC.CREATE_AND_UPGRADE&&(ez||eG===G.z4.TEAM_CREATION_CONTROL)&&(m.Ay.redirect("/"),eM(C.s.error((0,S.t)("team_creation.missing_team_creation_controls"))))},[e.selectedView.teamFlowType,ez,eG,eM]);let eK=u.currencyToSwitch;(0,o.useEffect)(()=>{eK&&ei(eK)},[ei,eK]);let eQ=es===Z.tY.STUDENT,eq=T.filter(e=>e&&e.trim()).map(e=>e.trim()),eX=eq.filter(e=>!(0,h.xf)(e)),eJ=!!i&&eq.filter(e=>e===i.email).length>0,eZ=async t=>{t.preventDefault();let a=new URL(window.location.href).searchParams,r=a.get("onCompleteRedirectFileKey"),n=a.get("onCompleteRedirectNodeId");t.currentTarget&&t.currentTarget.blur();let l=(0,tC.kR)(e.selectedView.paymentStep,e.selectedView.teamFlowType,es,u.promo,e.selectedView.planType||ee.Sc.UNDETERMINED);g===Z.tn.CREATE_TEAM&&(w(v.trim()),eM(A.$T({...e.selectedView,teamId:null,paymentStep:l,ignoreCurrentPlan:eu}))),g===Z.tn.ADD_COLLABORATORS&&(eX.length?eM(C.s.error((0,S.t)("pro_cart.add_collaborators.error.email_is_invalid",{string:eX[0]}))):eJ?eM(C.s.error((0,S.t)("team_view.team_permissions_modal.youre_not_able_to_send_an_invite_to_yourself"))):eM(A.$T({...e.selectedView,paymentStep:l,ignoreCurrentPlan:eu}))),g===Z.tn.CHOOSE_PLAN?eQ?eM(A.$T({...e.selectedView,paymentStep:l,billingPeriod:Z.tY.STUDENT,ignoreCurrentPlan:eu})):(eM(D.Je({editorStatusChanges:em})),eM(A.$T({...e.selectedView,paymentStep:l,billingPeriod:u.billingPeriod,...r?{searchParams:{onCompleteRedirectFileKey:r,onCompleteRedirectNodeId:n}}:{},ignoreCurrentPlan:eu}))):g===Z.tn.PAYMENT_AND_ADDRESS&&(eM(D.I2({submitPending:!0})),await ey(),eM(D.I2({submitPending:!1})))},e0=e.selectedView.teamFlowType===ee.SC.CREATE?()=>{eM((0,H.KQ)({teamName:v,orgAccess:z.bU.PUBLIC,inviteEmails:eq,teamFlowType:e.selectedView.teamFlowType,onSuccess:()=>{(0,V.Al)(null==i?void 0:i.id)},ignoreCurrentPlan:eu}))}:void 0;(e.selectedView.teamFlowType===ee.SC.CREATE_AND_UPGRADE||e.selectedView.teamFlowType===ee.SC.UPGRADE_EXISTING_TEAM)&&(1===ea.length?l=t=>{t=t||e.selectedView.billingPeriod;let a=ee.SC.UPGRADE_EXISTING_TEAM;eM(A.$T({...e.selectedView,teamFlowType:a,teamId:ea[0].id,paymentStep:(0,tC.kR)(e.selectedView.paymentStep,a,t||null,u.promo,ee.Sc.TEAM,Z.tn.CHOOSE_PLAN),planType:ee.Sc.UNDETERMINED,billingPeriod:t,ignoreCurrentPlan:eu}))}:ea.length>1&&(l=e=>{e&&eM(D.Lo({billingPeriod:e})),eM((0,R.to)({type:k.dR,data:{plan:k.In.PRO,upsellSource:J.b.UPGRADE_EXISTING_FROM_TEAM_CREATION}}))}));let e1=()=>{var t;let a=()=>{(0,_.sj)(),(0,Q.Mt)(eM),(0,ee.h5)(e.selectedView.teamFlowType)&&null===e_&&(0,V.Al)(c)};if(e.selectedView.teamId&&eQ)eM(D.Nj({teamId:e.selectedView.teamId}));else if(e.selectedView.teamId&&u.promo){let r=e.selectedView.teamId,n=(0,_.kc)().ps_benchmark;eM(F.S_({teamId:r,teamName:f[r].name,promoCode:(null==(t=u.promo)?void 0:t.code)||"",onSuccess:()=>{a(),(0,y._H)(),eM(D.Ay({promo:null})),n&&c?e.selectedView.previousView?A.$T(e.selectedView.previousView):L._l({workspace:{userId:c,orgId:null,teamId:r},view:{view:"allProjects"}}):eM(A.$T(e.selectedView.previousView||{view:"team",teamId:r}))},onError:()=>{(0,y._H)(),eM(D.Ay({promo:null})),eM(A.$T({...e.selectedView,paymentStep:Z.tn.PLAN_COMPARISON,ignoreCurrentPlan:eu}))}}))}else eM(P.b({completed_pro_cart_flow:!0})),eM(D.I2({submitPending:!0})),eM((0,F.gk)({teamId:e.selectedView.teamId,selectedCurrency:el,teamName:v,teamFlowType:e.selectedView.teamFlowType,invites:eq,hasSelectedStudentTeam:eQ,onSuccess:a,promotionCodeId:null}))},e2=new URLSearchParams(m.Ay.location.search),e4=e2.get("onCompleteRedirectFileKey"),e8=e2.get("onCompleteRedirectNodeId"),e3=i&&(null==(n=(0,V.lX)({teamId:e_,userId:i.id}))?void 0:n.is3DS);return e.selectedView.teamFlowType===ee.SC.CREATE_AND_UPGRADE&&(ez||eG===G.z4.TEAM_CREATION_CONTROL)?o.createElement(o.Fragment,null):o.createElement(O.fu,{name:"Upgrade Team",properties:{teamId:e.selectedView.teamId,teamFlowType:e.selectedView.teamFlowType,planType:e.selectedView.planType,step:g,currency:el,inPublishDraftExp:!!(e4&&e8)}},o.createElement("div",{className:er.im,"data-testid":"team-upgrade-v2"},o.createElement(tC.vU,{selectedView:e.selectedView}),o.createElement("div",{className:er.Jr},o.createElement("div",{className:er.uz,ref:E},o.createElement(I.Kz,{multiple:4}),g===Z.tn.PLAN_COMPARISON&&o.createElement(ts,{chooseStarterPlan:e0,chooseProPlan:t=>{eM(D.Lo({billingPeriod:t}));let a=(0,ee.h5)(e.selectedView.teamFlowType)?e.selectedView.teamFlowType:ee.SC.CREATE_AND_UPGRADE;eM(A.$T({...e.selectedView,teamFlowType:a,paymentStep:(0,tC.kR)(e.selectedView.paymentStep,a,t,u.promo,ee.Sc.TEAM),billingPeriod:t,planType:ee.Sc.TEAM,openInNewTab:!1,ignoreCurrentPlan:eu}))},chooseOrgPlan:()=>{eM(D.Bq({currency:el,newTeamProps:{teamFlowType:e.selectedView.teamFlowType,newTeamName:v,inviteEmails:eq,previousView:e.selectedView},upsellSource:J.b.UPGRADE_NEW_TEAM_V2}))},currency:el,updateCurrency:e=>eo(e),upgradeExistingTeam:l,parentRef:E}),g===Z.tn.CREATE_TEAM&&o.createElement(tT,{type:e.selectedView.teamFlowType===ee.SC.CREATE?tw.STARTER:tw.PRO,teamName:v,setTeamName:w,onNext:eZ,upgradeExistingTeam:l?()=>null==l?void 0:l(es):void 0,promo:u.promo}),g===Z.tn.ADD_COLLABORATORS&&o.createElement(en,{disableInvites:!eq.length,collaborators:T,setCollaborators:W,willSendInvites:eZ,skipInviteStep:()=>{if(W(V.kt),c){let e=(0,V.lX)({teamId:null,userId:c});e&&(0,V.dT)(c,{...e,newCollaborators:V.kt})}eM(A.$T({...e.selectedView,paymentStep:Z.tn.PLAN_COMPARISON,ignoreCurrentPlan:eu}))}}),g===Z.tn.CHOOSE_PLAN&&o.createElement(tn,{selectedView:e.selectedView,isLoading:eO,currency:el,error:eP?null==eF?void 0:eF.message:null,teamName:v}),g===Z.tn.PAYMENT_AND_ADDRESS&&o.createElement(o.Fragment,null,o.createElement(tN,{billingAddress:eb,updateBillingAddress:ew,shippingAddress:eT,updateShippingAddress:eI,legalCompanyName:ex,updateLegalCompanyName:eN,nameOnPaymentMethod:eC,updateNameOnPaymentMethod:eS,createPaymentElement:ev,unmountPaymentElement:eh,error:eF,vatGstId:ek,onVatGstIdChange:eA,regionalVatGstId:eL,onRegionalVatGstIdChange:eR,paymentMethodType:eD,isCommunityCheckout:!1,canSeeBillingAddressExp:eg,isCheckout:!0})),g===Z.tn.CONFIRM_PAY&&o.createElement(o.Fragment,null,o.createElement("div",{className:er.Fb},(0,S.tx)("pro_cart.review.lets_make_sure_everything_looks_right")),o.createElement(I.Kz,{multiple:3}),e3&&o.createElement("div",{className:er.vK},o.createElement(x._,{color:x.S.INFORMATION,text:(0,S.t)("pro_cart.review.extra_validation")})),e3&&o.createElement(I.Kz,{multiple:2}),o.createElement(N.x,{isLoading:eO},()=>o.createElement(tE,{selectedView:e.selectedView,teamName:v,onClickConfirm:e1,billingAddress:eb,shippingAddress:eT,canSeeBillingAddressExp:eg,currency:el}))),o.createElement(I.Kz,{multiple:9})),o.createElement(tU,{selectedView:e.selectedView,onNext:eZ,isLoading:eO,isButtonDisabled:eP,currency:el,updateCurrency:e=>eo(e),dropdownShown:p}))))}function tz(e){return(0,_.kc)().cart_error_boundaries?o.createElement(tY,{...e}):o.createElement(tG,{...e})}function tY(e){return o.createElement(T.tH,{sentryTags:{area:w.e.MONETIZATION_UPGRADES},boundaryKey:"TeamUpgradeV2",fallback:T.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:W.y4},o.createElement(tG,{...e}))}var tK=a(776250),tQ=a(27087),tq=a(710667),tX=a(584503),tJ=a(574468),tZ=a(227544),t0=a(596607),t1=a(426197),t2=a(452353),t4=a(802026),t8=a(668860),t3=a(143678),t5=a(679892),t9=a(831429),t6=a(962800);function t7(e,t){let a={};for(let r of e.filter(e=>t.has(e.team.id))){let e=[{users:r.designEditors,propKey:"designEditor"},{users:r.figjamEditors,propKey:"figjamEditor"},{users:[],propKey:"devMode"}],t={};e.forEach(({users:e,propKey:n})=>{for(let l of e){if((0,h.nD)(l.email))return;a[l.id]||(a[l.id]={user:l,teamIds:[],designEditor:!1,figjamEditor:!1,devMode:!1,teams:[]}),l.id in t||(t[l.id]=new Set),a[l.id][n]=!0,t[l.id].has(r.team.id)||(a[l.id].teamIds.push(r.team.id),a[l.id].teams.push(r.team),t[l.id].add(r.team.id))}})}return a}function ae(e,t){let a=eM.kH.dict(a=>(t[a]??0)+(e[a]??0)),r=Object.values(a).reduce((e,t)=>e+t,0);return a[eO.vu]+=Math.max(tZ.u3-r,0),a}let at="org_self_serve_figjam--stepContent--sL7gc",aa="org_self_serve_figjam--stepContentTeamCreation--aaY9V",ar="org_self_serve_figjam--pageTitle--Y69Xv",an="org_self_serve_figjam--subText--Pqpby",al="org_self_serve_figjam--summaryDivider--Ijd9-",ai="org_self_serve_figjam--headerText--2IfHu",ao="org_self_serve_figjam--svgText--d7FBP org_self_serve_figjam--flex--0m89h",as="org_self_serve_figjam--lineItem--TU69Z org_self_serve_figjam--flex--0m89h",ac="org_self_serve_figjam--nextStep--PqDbR",ad="org_self_serve_figjam--helpIcon--VL26R",am="org_self_serve_figjam--reviewItem--nP8xV",au="org_self_serve_figjam--billingSubText--tlSbP",a_="org_self_serve_figjam--billingItem--ny6ji",ap="org_self_serve_figjam--textLink--eCcAk org_self_serve_figjam--billingSubText--tlSbP",af="org_self_serve_figjam--reviewSubTitle--GOFpF",ag="org_self_serve_figjam--plusSvg--ZHB1e",aE="org_self_serve_figjam--purchaseMinimumBanner--mM4gI";var av=a(339290);function ah(e){return o.createElement("div",{style:{height:e.height||12}})}function ay(e){var t;let[a,r]=(0,o.useState)(!1),n=o.createRef(),l=()=>{(null==n?void 0:n.current)&&r(n.current.getBoundingClientRect().bottom>window.innerHeight+25)};o.useEffect(()=>(l(),window.addEventListener("scroll",l),function(){window.removeEventListener("scroll",l)}));let i=[...e.teamsToEditors.keys()],s=!!e.newTeamName,c=s?i.length+1:i.length,d=null==(t=i[i.length-1])?void 0:t.id,m=c<=5?"org_self_serve_figjam--teamTileLarge--YhJVn text--fontPos14--OL9Hp text--_fontBase--QdLsd":"org_self_serve_figjam--teamTileSmall--umUI5 org_self_serve_figjam--teamTileLarge--YhJVn text--fontPos14--OL9Hp text--_fontBase--QdLsd",u=e.newTeamName?(0,S.tx)("org_self_serve.team_step.team_creation_header"):(0,S.tx)("org_self_serve.team_step.header"),_=e.newTeamName?(0,S.tx)("org_self_serve.team_step.team_creation_teams_shown_description"):(0,S.tx)("org_self_serve.team_step.teams_shown_description");return o.createElement("div",{className:ey()(at,aa)},o.createElement("div",{className:ar},u),o.createElement(ah,{height:4}),o.createElement("div",{className:"org_self_serve_figjam--pageSubTitle--jRWG-"},_),a&&o.createElement("div",{className:"org_self_serve_figjam--showMoreContainer--s6FDi visual_bell--messageContainer--fkhJH _overlayBase--_overlayBase--Rkj8l text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L"},o.createElement("div",{className:"org_self_serve_figjam--showMoreMessage--bU3eH visual_bell--message--lQw67 visual_bell--messageBase--Dg3ya ellipsis--ellipsis--Tjyfa"},(0,S.tx)("org_self_serve.team_step.more_teams")," \u2193")),o.createElement("div",{className:c<=5?"org_self_serve_figjam--teamLargeTileContainer--QmdT1":"org_self_serve_figjam--teamSmallTileContainer--NjKIe org_self_serve_figjam--teamLargeTileContainer--QmdT1"},s&&o.createElement(ab,{name:e.newTeamName||"",editors:0,team:null,checked:null!=e.newTeamName,tileClassName:m,tabIndex:0,disabled:!0}),i.map((t,a)=>o.createElement(ab,{name:t.name,key:t.id,editors:e.teamsToEditors.get(t)||0,team:t,checked:e.selectedTeamIds.has(t.id),onClick:()=>e.onToggle(t.id),tileClassName:m,tabIndex:s?a+1:a,lastTeamRef:t.id===d?n:null}))))}function ab(e){var t;return null===e.team&&(0,el.vA)(0===e.editors),o.createElement("div",{onClick:e.onClick,key:(null==(t=e.team)?void 0:t.id)||e.name,className:e.tileClassName,role:"checkbox","aria-checked":e.checked,tabIndex:e.tabIndex,"aria-disabled":e.disabled},o.createElement("div",{className:ao,ref:e.lastTeamRef},o.createElement(eV.CH,{entity:e.team||{name:e.name},size:ed.Pf.LARGE}),o.createElement("div",{className:"org_self_serve_figjam--teamText--9mEG6"},o.createElement("div",{className:"org_self_serve_figjam--teamName--xKICF text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},e.name),o.createElement("div",{className:"org_self_serve_figjam--teamEditors--BIoT8 text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},(0,S.tx)("org_self_serve.team_step.editor.seat_rename",{editorCount:e.editors})))),o.createElement("label",null,o.createElement(eE.S,{checked:e.checked,disabled:e.disabled})))}function aw(e){return o.createElement("div",{className:ey()(at,aa)},o.createElement("div",{className:ar},(0,S.tx)("org_self_serve.details_step.tell_us_about_your_organization")),o.createElement("div",{className:"org_self_serve_figjam--detailsForm--ML86I stripe--stripeCardAndAddress--b42eG org_self_serve_figjam--paymentForm--ymx94"},!e.canSeeBillingAddressExp&&o.createElement(I.Lf,{htmlName:"actor_name",label:(0,S.t)("org_self_serve.details_step.your_full_name"),value:e.orgDetails.actorName,onChange:e.onChangeFormInput}),!e.canSeeBillingAddressExp&&o.createElement(I.Lf,{htmlName:"actor_email",label:(0,S.t)("org_self_serve.details_step.email_address"),value:e.orgDetails.actorEmail||"",disabled:!0,onChange:f.lQ}),o.createElement(I.Lf,{htmlName:"legal_org_name",label:(0,S.t)("org_self_serve.details_step.legal_company_name"),value:e.orgDetails.legalOrgName,onChange:e.onChangeFormInput}),o.createElement(I.Lf,{htmlName:"org_name",label:(0,S.t)("org_self_serve.details_step.company_display_name"),placeholder:e.canSeeBillingAddressExp?(0,S.t)("org_self_serve.details_step.company_display_name__different_from_company_name_sub_text"):(0,S.t)("org_self_serve.details_step.company_display_name_sub_text"),value:e.orgDetails.orgName,onChange:e.onChangeFormInput}),e.canSeeBillingAddressExp&&o.createElement(I.Lf,{htmlName:"actor_email",label:(0,S.t)("org_self_serve.details_step.email_address"),value:e.orgDetails.actorEmail||"",disabled:!0,onChange:f.lQ})))}function aT(e){let[t,a]=(0,o.useState)(!1),[r,n]=(0,o.useState)(!1),l=new Y.vr(e.currency);return o.createElement(ep.P,{className:ey()(at,aa),hideScrollbar:!0},o.createElement("div",{className:ar},(0,S.tx)("org_self_serve.review_step.lets_make_sure_everythings_right")),o.createElement("div",{className:"org_self_serve_figjam--stepRect--bhosM org_self_serve_figjam--boxBorder--IYrfM"},o.createElement("div",{className:"org_self_serve_figjam--reviewSummary--a9zmQ","data-testid":"reviewSummary"},(()=>{let t=(0,h.zN)(e.user.email);return(0,_.kc)().pro_team_business_names?tm({displayName:e.orgName||e.legalOrgName,legalName:e.legalOrgName,variant:"org",domain:t,totalTeams:e.totalTeams,canSeeBillingAddressExp:e.canSeeBillingAddressExp,billingAddress:e.billingAddress,shippingAddress:e.shippingAddress,userEmail:e.user.email,navigateToEditPaymentDetails:e.navigateToEditPaymentDetails,navigateToEditOrganizationDetails:e.navigateToEditOrganizationDetails}):o.createElement(o.Fragment,null,o.createElement("div",{className:af},(0,S.tx)("org_self_serve.review_step.organization_details")),o.createElement("div",{className:am},o.createElement("div",null,(0,S.tx)("org_self_serve.review_step.company_name")),o.createElement("div",null,e.legalOrgName)),o.createElement("div",{className:am},o.createElement("div",null,(0,S.tx)("org_self_serve.review_step.company_display_name")),o.createElement("div",null,e.orgName||e.legalOrgName)),o.createElement("div",{className:am},o.createElement("div",null,(0,S.tx)("org_self_serve.review_step.domain")),o.createElement("div",null,t)),e.totalTeams>0&&o.createElement("div",{className:am},o.createElement("div",null,(0,S.tx)("org_self_serve.review_step.teams")),o.createElement("div",null,e.totalTeams)))})()),o.createElement("div",{className:"org_self_serve_figjam--verticalDivider--55STw"}),o.createElement("div",null,r&&o.createElement(e0,{onClose:()=>n(!1)}),o.createElement("div",{className:"org_self_serve_figjam--billingDetails--n7k3F"},o.createElement("div",{className:af},(0,S.tx)("org_self_serve.review_step.next_quarterly_true_up_on_date",{trueUpDate:new Date(e.trueUpDate)})),o.createElement(ah,{height:16}),o.createElement("div",{className:ai},(0,S.tx)("org_self_serve.review_step.what_is_a_true_up")),o.createElement("ul",null,o.createElement("li",null,(0,S.tx)("org_self_serve.review_step.true_up_description.seat_rename")),o.createElement("li",null,(0,S.tx)("org_self_serve.review_step.true_up_description_2.seat_rename")),o.createElement("li",null,(0,S.tx)("org_self_serve.review_step.true_up_description_3.seat_rename")),o.createElement("li",null,(0,S.tx)("org_self_serve.review_step.true_up_description_4.seat_rename"))),o.createElement(I.Ph,{onClick:()=>n(!0),className:ap,trusted:!0},(0,S.tx)("org_self_serve.review_step.learn_more_about_true_ups")),o.createElement(ah,{height:20}),o.createElement("div",{className:al}),o.createElement(ah,{height:24}),o.createElement("div",{className:af},(0,S.tx)("org_self_serve.review_step.annual_renewal_on_date",{renewalDate:new Date(e.renewalDate)})),o.createElement(ah,{height:16}),o.createElement("div",null,(0,S.tx)("org_self_serve.review_step.annual_renewal_description.seat_rename")),o.createElement(ah,{height:20}),e.renderBillingItems(),o.createElement("button",{className:`${ap} ${ao}`,onClick:e.showAdditionalEditorsModal},o.createElement(es.B,{className:ag,svg:tt.A}),(0,S.tx)("org_self_serve.review_step.add_additional_editors.seat_rename")),o.createElement(ah,{height:20}),o.createElement("div",{className:al}),o.createElement(ah,{height:16}),o.createElement("div",{className:a_},o.createElement("div",null,o.createElement("div",{className:ai},(0,S.tx)("org_self_serve.review_step.subtotal"))),o.createElement("div",{className:ai},o.createElement("div",{className:ai,"data-testid":"subtotal-summary-price-section"},l.formatMoney(e.subTotalCents,{showCents:!1})))),o.createElement("div",{className:a_},o.createElement("div",null,o.createElement("div",{className:ai},(0,S.tx)("org_self_serve.review_step.tax")),o.createElement("div",{className:au},(0,S.tx)("org_self_serve.review_step.tax_rate",{taxRate:e.taxRate}))),o.createElement("div",{className:ai,"data-testid":"tax-summary-price-text"},l.formatMoney(e.taxDueCents,{showCents:!1}))),o.createElement("div",{className:a_},o.createElement("div",null,o.createElement("div",{className:"org_self_serve_figjam--boldText--M7Bo1 org_self_serve_figjam--headerText--2IfHu"},(0,S.tx)("org_self_serve.review_step.total_due_today")),e.orgPayment.last4&&o.createElement("div",{className:au},(0,S.tx)("org_self_serve.review_step.card_ending_in_last4",{last4:e.orgPayment.last4}))),o.createElement("div",{className:af,"data-testid":"confirm-total-summary-price-text"},l.formatMoney(e.totalCents,{showCents:!1}))),o.createElement(ah,{height:8}),o.createElement("div",{className:al})),o.createElement(ah,{height:24}),o.createElement("div",{className:"org_self_serve_figjam--confirmPaymentBox--2UmhL"},o.createElement("div",{className:"org_self_serve_figjam--msaCheck--S57fu"},o.createElement("input",{type:"checkbox",checked:t,className:"org_self_serve_figjam--teamCheck--tAaSc",onChange:()=>{a(!t)},"data-testid":"msa-checkbox"}),o.createElement("span",null,(0,S.tx)("org_self_serve.review_step.i_agree_to_msa_and_renewal_links",{msaLink:o.createElement("a",{rel:"noopener noreferrer",className:ap,href:(0,S.dS)("/ssa"),target:"_blank"},(0,S.tx)("org_self_serve.review_step.software_services_agreement")),renewalLink:o.createElement("a",{rel:"noopener noreferrer",className:ap,href:(0,S.dS)("/renewal-and-cancellation"),target:"_blank"},(0,S.tx)("org_self_serve.review_step.renewal_and_cancellation_terms"))}))),o.createElement(I.vd,{className:ac,onClick:e.onSubmit,disabled:!t||e.loading,trackingProperties:e.ctaProperties,dataTestId:"confirm-purchase-button"},(0,S.tx)("org_self_serve.review_step.complete_purchase"))))))}function aI(e){let t=new Y.vr(e.currency);return o.createElement("div",{className:"org_self_serve_figjam--confirmationPage--KGVNA"},o.createElement("div",{className:ey()(at,aa)},o.createElement("div",{className:"org_self_serve_figjam--confirmationHeading--SQiqP"},o.createElement(es.B,{svg:av.A,className:"org_self_serve_figjam--greenCheck--NXjmx",useOriginalSrcFills_DEPRECATED:!0,autosize:!0,width:"32px",height:"32px"}),o.createElement("div",{className:ar},(0,S.tx)("org_self_serve.confirmation_step.you_re_all_set"))),o.createElement("div",{className:"org_self_serve_figjam--confirmationBox--Z-OCC org_self_serve_figjam--stepRect--bhosM org_self_serve_figjam--boxBorder--IYrfM"},o.createElement("div",{className:"org_self_serve_figjam--confirmationPageText--WnNVw text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,S.tx)("org_self_serve.confirmation_step.order_confirmation_message")),o.createElement(ah,{height:24}),o.createElement("div",{className:al}),o.createElement(ah,{height:24}),o.createElement("div",{className:"org_self_serve_figjam--flexBox--3nRDc"},o.createElement("div",{className:"org_self_serve_figjam--confirmationCharge--6L8US org_self_serve_figjam--confirmationPageText--WnNVw text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,S.tx)("org_self_serve.confirmation_step.total_amount_to_be_charged_to_card_ending_in_last4",{last4:e.orgPayment.last4}),o.createElement("span",{className:"org_self_serve_figjam--confirmationAmountDue--p0xPk"},t.formatMoney(e.totalCents,{showCents:!1}))),o.createElement(ah,{height:24}),o.createElement("div",{className:al}),o.createElement(ah,{height:32}),o.createElement("div",{className:"org_self_serve_figjam--confirmationRow--qQLOY"},!e.orgMigrated&&o.createElement(o.Fragment,null,o.createElement(tc.kt,null),o.createElement("div",{className:"org_self_serve_figjam--confirmationLoadingText--CTID2 org_self_serve_figjam--msaLabelText--r7LKd"},(0,S.tx)("org_self_serve.confirmation_step.we_re_setting_up_your_organization"))),o.createElement(I.$$,{disabled:!e.orgMigrated,className:"org_self_serve_figjam--confirmationHomeButton--NMBxx text--fontNeg13--7Ebf5 text--_fontBase--QdLsd text--_negText--j9g-L",onClick:e.onFileBrowserClick,dataTestId:"go-to-file-browser-button"},(0,S.tx)("org_self_serve.confirmation_step.go_to_the_file_browser")))))))}var ax=a(67833),aN=a(619031);function aC({users:e,size:t=ed.Pf.MEDIUM,maxShow:a=2}){let r=e.slice(0,a),n=Math.max(e.length-a,0);return o.createElement(eg.Y,{verticalAlignItems:"center",spacing:"-8px",horizontalAlignItems:"start",width:"hug-contents"},r.map((e,a)=>o.createElement(eV.Ro,{className:ef.cx.borderBox.relative.b1.colorBorderBg.$,key:`${e.id}${a}`,entity:e,size:t})),n>0&&o.createElement(aN.f,{className:ef.cx.fontSemiBold.colorText.borderBox.relative.b1.colorBorderBg.$,text:`+${n}`,size:t}))}var aS=a(401761);let ak={[eO.lM.DESIGN]:o.createElement(ev.E,{fontSize:13},(0,S.tx)("checkout.design_with_dev_mode_included")),[eO.lM.DEV_MODE]:o.createElement(ev.E,{fontSize:13},(0,S.tx)("general.dev_mode")),[eO.lM.FIGJAM]:o.createElement(ev.E,{fontSize:13},(0,S.tx)("general.figjam"))},aA={[eO.lM.DESIGN]:ax.y1.DESIGN_AND_DEV_MODE,[eO.lM.DEV_MODE]:ax.y1.DEV_MODE,[eO.lM.FIGJAM]:ax.y1.WHITEBOARD};function aL({type:e,users:t,additionalSeats:a,onClick:r}){let[n,l]=(0,o.useState)(!1);return o.createElement("div",{className:`${ef.cx.b1.colorBorder.bRadius6.wFull.borderBox.$} ${n?ef.cx.colorBgHover.$:""}`,role:"button",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onClick:r,tabIndex:0,"data-testid":`seat-summary-card-${e}`},o.createElement(eg.Y,{padding:{top:10,right:16,bottom:10,left:16},direction:"horizontal",verticalAlignItems:"center",horizontalAlignItems:"space-between"},o.createElement(eg.Y,{horizontalAlignItems:"start",verticalAlignItems:"center"},o.createElement(ax.oS,{type:aA[e],size:ax.LE.LARGE}),o.createElement(eg.Y,{direction:"vertical",horizontalAlignItems:"start",padding:{left:4},spacing:0},ak[e],o.createElement("div",null,o.createElement(ev.E,{color:"secondary",fontSize:11,fontWeight:"medium"},(0,S.tx)("checkout.seats",{numOfSeats:t.length+a})),a>0&&o.createElement("span",null,"\xa0",o.createElement(ev.E,null,(0,S.tx)("checkout.paranthesis",{content:o.createElement(ev.E,{color:"secondary",fontSize:11,fontWeight:"medium"},(0,S.tx)("checkout.empty_seats",{numOfEmptySeats:a}))}))),n&&o.createElement("span",null,o.createElement(ev.E,{color:"secondary"},"\xa0\u2022\xa0"),o.createElement(ev.E,{fontSize:11,color:"brand",fontWeight:"medium"},(0,S.tx)("general.edit")))))),o.createElement(aC,{users:t}),a>0&&0===t.length&&o.createElement(es.B,{svg:aS.A,useOriginalSrcFills_DEPRECATED:!0})))}function aR({additionalDesignSeats:e,additionalDevModeSeats:t,additionalWhiteboardSeats:a,selectedEditors:r,onClick:n}){let l={[eO.lM.DESIGN]:{users:[],additionalSeats:e},[eO.lM.DEV_MODE]:{users:[],additionalSeats:t},[eO.lM.FIGJAM]:{users:[],additionalSeats:a}};for(let e of Object.values(r))e.designEditor?l[eO.lM.DESIGN].users.push(e.user):e.devMode&&l[eO.lM.DEV_MODE].users.push(e.user),e.figjamEditor&&l[eO.lM.FIGJAM].users.push(e.user);return o.createElement(o.Fragment,null,o.createElement(eg.Y,{direction:"vertical",spacing:"12px",height:"hug-contents"},Object.entries(l).map(([e,{users:t,additionalSeats:a}])=>o.createElement(aL,{key:e,type:e,users:t,additionalSeats:a,onClick:()=>{n(),(0,eP.Cu)({name:"org_checkout_seat_summary_card"})}}))),o.createElement("div",{className:ef.cx.mt24.$},o.createElement("button",{"data-testid":"seat-summary-add-seats-cta",className:`${ap} ${ao}`,onClick:()=>{n(),(0,eP.Cu)({name:"org_checkout_add_more_seats"})}},o.createElement(es.B,{className:ag,svg:tt.A}),o.createElement(ev.E,null,(0,S.tx)("checkout.add_additional_seats")))))}var aD=a(48793);function aF(e){return o.createElement("div",{className:"org_self_serve_figjam--cancelMenuItem--ZABKH",onClick:e.onClick},(0,S.tx)("org_self_serve.headers.cancel"))}function aP(e){var t;if(e.currentStep===t4.X1.Confirmation)return null;let a=[],r=null;if(e.newTeamProps){let n={step:t4.X1.ChoosePlan,name:(0,S.t)("org_self_serve.headers.choose_plan")},l={step:t4.X1.CreateTeam,name:(0,S.t)("org_self_serve.headers.create_team")};switch(null==(t=e.newTeamProps)?void 0:t.teamFlowType){case ee.SC.CREATE:a.push({step:t4.X1.PseudoCreateTeam,name:(0,S.t)("org_self_serve.headers.create_team")}),a.push({step:t4.X1.AddCollaborators,name:(0,S.t)("org_self_serve.headers.add_team_members")}),a.push(n);break;case ee.SC.CREATE_AND_UPGRADE:a.push(n),a.push(l),r=t4.X1.CreateTeam;break;case ee.SC.UPGRADE_EXISTING_TEAM:a.push(n)}}(e.hasEligibleUpgrades||e.newTeamProps)&&(a.push({step:t4.X1.TeamSelect,name:(0,S.t)("org_self_serve.headers.teams_to_upgrade")}),r=r??t4.X1.TeamSelect),a.push({step:t4.X1.Details,name:(0,S.t)("org_self_serve.headers.organization_details")}),a.push({step:t4.X1.Payment,name:(0,S.t)("org_self_serve.headers.payment")}),a.push({step:t4.X1.Review,name:(0,S.t)("org_self_serve.headers.review")}),r=r??t4.X1.Details,a[a.findIndex(e=>e.step===r)].step=t4.X1.Initial;let n=0;for(let t=0;t<a.length;t++)if(a[t].step===e.currentStep){n=t;break}let l=(0,O.tf)(aF);return o.createElement("div",{className:"org_self_serve_figjam--menuContainer--hPrPq"},o.createElement(l,{onClick:e.onFileBrowserClick}),o.createElement("div",{className:"org_self_serve_figjam--flex--0m89h","data-testid":"stepBreadcrumbs"},a.map((t,a)=>o.createElement(aD.On,{key:a+1,selected:e.currentStep===t.step,number:a+1,text:t.name,onClick:()=>{let r=function(e){switch(e){case t4.X1.ChoosePlan:return Z.tn.PLAN_COMPARISON;case t4.X1.AddCollaborators:return Z.tn.ADD_COLLABORATORS;case t4.X1.PseudoCreateTeam:return Z.tn.CREATE_TEAM;default:return null}}(t.step);r&&e.onSelectTeamUpgradeStep?e.onSelectTeamUpgradeStep(r):window.history.go(a-n)},canClick:a<n,lightText:!0}))))}var aM=a(733982),aO=a(54375);class aB extends o.Component{constructor(e){var t,a;super(e),this.effectiveStep=()=>{var e;return this.props.step===t4.X1.Initial||this.props.step===t4.X1.ChoosePlan?(null==(e=this.props.newTeamProps)?void 0:e.teamFlowType)===ee.SC.CREATE_AND_UPGRADE?t4.X1.CreateTeam:this.state.eligibleUpgrades.length>0||this.props.newTeamProps?t4.X1.TeamSelect:t4.X1.Details:this.props.step},this.setStep=e=>{this.props.dispatch(A.$T({view:"orgSelfServe",step:e,orgMigrated:!1,newTeamProps:this.props.newTeamProps,upsellSource:this.props.upsellSource})),this.setState(e=>({payment:{...e.payment,card:null}}))},this.onSubmit=()=>{var e;let t=this.effectiveStep();switch(t){case t4.X1.CreateTeam:(null==(e=this.state.newTeamName)?void 0:e.trim())&&this.setStep(t4.X1.TeamSelect);break;case t4.X1.AddCollaborators:this.setStep(t4.X1.Details);break;case t4.X1.PseudoCreateTeam:this.setStep(t4.X1.TeamSelect);break;case t4.X1.TeamSelect:this.setStep(t4.X1.Details);break;case t4.X1.Details:this.setStep(t4.X1.Payment);break;case t4.X1.Payment:this.onSubmitPaymentAndAddress();break;case t4.X1.Review:this.onSubmitPurchaseOrder();break;case t4.X1.Confirmation:break;default:(0,el.xb)(t)}},this.ctaProperties=()=>{let e=this.getUpgradesByLicenseType(),t=ae(e,this.state.emptySeatsByLicenseType);return{numEditors:e[eO.vu],numFigJamEditors:e[eO.tL],numMigratedTeams:this.state.selectedTeamIds.size+(this.state.newTeamName?1:0),numTotalDesignSeats:t[eO.lM.DESIGN],totalFigJamSeats:t[eO.lM.FIGJAM],totalDevModeSeats:t[eO.lM.DEV_MODE],proposedSubtotal:eM.kH.reduce((e,a)=>e+=(t[a]??0)*(tZ.UB[a]??0),0)/100,domain:(0,h.zN)(this.props.user.email),currency:this.state.currency,upsellSource:this.props.upsellSource}},this.renderNextButton=()=>{var e,t;let a;let r=!1,n=this.effectiveStep();switch(n){case t4.X1.CreateTeam:case t4.X1.PseudoCreateTeam:a=(0,S.t)("org_self_serve.create_team_step.next_select_team"),r=!this.state.newTeamName;return;case t4.X1.AddCollaborators:a=(0,S.t)("org_self_serve.create_team_step.next_select_team");return;case t4.X1.TeamSelect:a=(0,S.t)("org_self_serve.details_step.next_organization_details");break;case t4.X1.Details:a=(0,S.t)("org_self_serve.payment_step.next_payment");let l=null==(e=this.state.orgDetails.legalOrgName)?void 0:e.length,i=null==(t=this.state.orgDetails.actorName)?void 0:t.length;r=this.props.canSeeBillingAddressExp?r||!l||l<1:r||!l||!i||l<1||i<1;break;case t4.X1.Payment:r=r||this.state.apiPending,a=(0,S.t)("org_self_serve.review_step.next_review");break;case t4.X1.Review:case t4.X1.Confirmation:return null;default:(0,el.xb)(n)}return o.createElement("div",{className:"org_self_serve_figjam--nextStepContainer--66sFN"},o.createElement(I.vd,{className:ac,disabled:r,onClick:()=>this.onSubmit(),trackingProperties:this.ctaProperties(),dataTestId:"next-step-button"},a))},this.onTeamToggle=e=>{this.state.selectedTeamIds.has(e)?this.setState(t=>(t.selectedTeamIds.delete(e),{selectedTeamIds:t.selectedTeamIds,selectedEditors:t7(this.state.eligibleUpgrades,t.selectedTeamIds)}),()=>this.computeAdditionalDesignSeats()):this.setState(t=>({selectedTeamIds:t.selectedTeamIds.add(e),selectedEditors:t7(this.state.eligibleUpgrades,t.selectedTeamIds.add(e))}),()=>this.computeAdditionalDesignSeats())},this.onCardReady=e=>{let t={...this.state.payment,card:e};this.setState({payment:t})},this.onAddressChange=e=>{let t={...this.state.payment,address:e};this.setState({payment:t})},this.onShippingAddressChange=e=>{this.setState({shippingAddress:e})},this.onNameOnPaymentMethodChange=e=>{this.setState({nameOnPaymentMethod:e.trim()})},this.onClearToken=()=>{let e={...this.state.payment,token:null};this.setState({payment:e})},this.onVatIdChange=e=>{this.setState({vatId:e})},this.onRegionalVatIdChange=e=>{this.setState({regionalVatId:e})},this.onVatValidationFail=e=>{this.setState({apiPending:!1,paymentError:e})},this.onChangeNewTeamName=e=>{this.setState({newTeamName:e.trim()})},this.onChangeOrgDetails=e=>{let t=e.target.name,a=e.target.value;if(!t){e.preventDefault(),console.error("HTMLInputElement is missing name attribute:",e.target);return}let r=this.state.orgDetails;switch(t){case"actor_name":r.actorName=a.trim();break;case"legal_org_name":r.legalOrgName=a.trim();break;case"org_name":r.orgName=a.trim()}this.setState({orgDetails:r})},this.contactSales=()=>{this.props.dispatch((0,R.to)({type:k.lk,data:{source:k.B7.ORG_SELF_SERVE_UPGRADE_MODAL}}))},this.onFileBrowserClick=()=>{(0,_.kc)().ps_benchmark?(this.props.newTeamProps&&(0,V.Al)(this.props.user.id),m.Ay.redirect("/files/recent")):(this.props.dispatch(A.$T({view:"recentFiles"})),this.props.newTeamProps&&(0,V.Al)(this.props.user.id))},this.updateAdditionalSeats=e=>{let t=this.getUpgradesByLicenseType();this.setState({emptySeatsByLicenseType:eM.kH.dict(a=>(e[a]??0)-(t[a]??0))})},this.addEditors=()=>{let e=new Y.vr(this.state.currency),t=eM.kH.dict(t=>(0,tJ._)(this.props.billingPricesResult.data,e.currency,t)),a=this.getUpgradesByLicenseType(),r=ae(a,this.state.emptySeatsByLicenseType);this.props.dispatch((0,R.to)({type:e1,data:{seatDataByLicenseType:{[eO.vu]:{minSeats:Math.max(a[eO.vu],tZ._h),currentSeats:r[eO.vu],seatUnitCostInCents:t.design},[eO.tL]:{minSeats:a[eO.tL],currentSeats:r[eO.tL],seatUnitCostInCents:t.figjam},[eO.PE]:{minSeats:a[eO.PE]??0,currentSeats:r[eO.PE]??0,seatUnitCostInCents:t.dev_mode}},minTotalSeats:tZ.u3,updateAdditionalSeats:this.updateAdditionalSeats,showAnnualPrice:!0,dispatch:this.props.dispatch,currency:this.state.currency}}))},this.updateAdditionalEmptySeats=e=>{this.setState({emptySeatsByLicenseType:eM.kH.dict(t=>e[t])})},this.selectEditors=()=>{let e=this.state.selectedEditors;for(let t in e)e[t]={...e[t]};let t=new Y.vr(this.state.currency),a=eM.kH.dict(e=>(0,tJ._)(this.props.billingPricesResult.data,t.currency,e));this.props.dispatch((0,R.to)({type:e6,data:{users:e,updateSelectedEditors:this.updateSelectedEditors,updateAdditionalEmptySeats:this.updateAdditionalEmptySeats,dispatch:this.props.dispatch,currency:this.state.currency,minTotalSeats:tZ.u3,seatInfo:{design:{minCount:tZ._h,additionalSeatCount:this.state.emptySeatsByLicenseType[eO.vu]},figjam:{minCount:0,additionalSeatCount:this.state.emptySeatsByLicenseType[eO.tL]},dev_mode:{minCount:0,additionalSeatCount:this.state.emptySeatsByLicenseType[eO.PE]??0}},monthlyPriceByLicenseType:a}}))},this.updateSelectedEditors=e=>{this.setState(t=>({...t,selectedEditors:e}))},this.renderBillingItems=()=>{let e=new Y.vr(this.state.currency),t=eM.kH.dict(t=>(0,tJ._)(this.props.billingPricesResult.data,e.currency,t)),a=ae(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),r={[eO.vu]:{totalSeats:a[eO.vu],price:t.design,headerString:(0,S.tx)("org_self_serve.billing_items.total_figma_design_editor_with_dev_mode_included.seat_rename",{totalDesignSeatsCount:a[eO.vu]})},[eO.tL]:{totalSeats:a[eO.tL],price:t.figjam,headerString:(0,S.tx)("org_self_serve.headers.total_fig_jam_editor_seats_count.seat_rename",{totalFigJamEditorSeatsCount:a[eO.tL]})},[eO.PE]:{totalSeats:a[eO.PE]??0,price:t.dev_mode,headerString:(0,S.tx)("org_self_serve.billing_items.total_seat_count.dev_mode",{totalSeatCount:a[eO.PE]??0})}};return o.createElement("div",null,eM.kH.sort(eM.AG).map(t=>{let a=r[t];return null==a?o.createElement(o.Fragment,null):o.createElement("div",{key:t},o.createElement("div",{className:as},o.createElement("div",{className:ai},a.headerString),o.createElement("div",{className:ai},e.formatMoney(a.price*a.totalSeats*12,{showCents:!1}))),o.createElement("div",{className:an},(0,S.tx)("org_self_serve.billing_items.total_seat_cost_for_product",{annualMemberCost:e.formatMoney(a.price,{showCents:!1}),seatCount:a.totalSeats})),o.createElement(I.Kz,{direction:"y",value:16}))}))},this.renderPurchaseSummary=()=>{let e=this.getUpgradesByLicenseType(),t=e[eO.vu],a=e[eO.tL],r=e[eO.PE]??0,n=(0,Y._Z)(),l=t+a+r,i=l<tZ.u3,s=!i&&t<tZ._h&&(0,_.kc)().org_checkout_min_seat_info_copy,c=this.getSubtotal(this.state.currency),d=(0,to.Hw)(this.props.user)?(0,_.kc)().org_checkout_min_seat_info_copy?o.createElement(o.Fragment,null,(0,S.tx)("org_self_serve.purchase_summary.added_empty_seats",{minCount:tZ.u3}),"\xa0",(0,S.tx)("org_self_serve.purchase_summary.empty_seats_included",{numOfSeats:l,numOfEmptySeats:tZ.u3-l,seatsText:(0,S.tx)("checkout.seats_text",{numOfSeats:l})})):(0,S.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_seats_added_empty_seats.seat_rename",{minCount:tZ.u3}):(0,S.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_at_least_count_editor_seats.seat_rename",{minCount:tZ.u3}),m=o.createElement(o.Fragment,null,(0,S.tx)("org_self_serve.purchase_summary.added_empty_design_seats",{minCount:tZ._h}),"\xa0",(0,S.tx)("org_self_serve.purchase_summary.empty_design_seats_included",{numOfEmptySeats:tZ._h-t})),u=new Y.vr(this.state.currency);return o.createElement("div",{className:"org_self_serve_figjam--purchaseSummary--1jvAh"},o.createElement("div",null,i&&o.createElement("div",{className:`${aE} ${ao}`},o.createElement(es.B,{className:ad,svg:aO.A}),d),s&&o.createElement("div",{className:`${aE} ${ao}`},o.createElement(es.B,{className:ad,svg:aO.A}),m),o.createElement(ep.P,{className:"org_self_serve_figjam--sidebarScrollContainer--UycW4",scrollingDisabled:!1},o.createElement("div",null,o.createElement("div",{className:"org_self_serve_figjam--summaryHeader--X9DJV"},(0,S.tx)("org_self_serve.purchase_summary.organization_plan")),o.createElement("div",{className:an},(0,S.tx)("org_self_serve.purchase_summary.domain",{domain:(0,h.zN)(this.props.user.email)})),o.createElement(I.Kz,{direction:"y",value:16})),o.createElement(I.Kz,{direction:"y",value:8}),o.createElement(aR,{selectedEditors:this.state.selectedEditors,additionalDesignSeats:this.state.emptySeatsByLicenseType[eO.vu],additionalWhiteboardSeats:this.state.emptySeatsByLicenseType[eO.tL],additionalDevModeSeats:this.state.emptySeatsByLicenseType[eO.PE]??0,onClick:this.selectEditors}),o.createElement(I.Kz,{direction:"y",value:20})),o.createElement("div",null,o.createElement("div",{className:al}),n&&o.createElement(o.Fragment,null,o.createElement(I.Kz,{direction:"y",value:16}),o.createElement("div",{className:as},o.createElement("div",{className:"org_self_serve_figjam--currencyText--CW0E- org_self_serve_figjam--boldText--M7Bo1 org_self_serve_figjam--headerText--2IfHu"},(0,S.tx)("org_self_serve.purchase_summary.currency_text")),o.createElement(tB.D,{currency:this.state.currency,dropdownShown:this.props.dropdownShown,supportedCurrencies:(0,Y.B9)(),changeCurrency:e=>{this.props.dispatch(D.MN({currency:e})),this.setState({currency:e})},shortFormDisplay:!0,paddingOverride:0})),o.createElement(I.Kz,{direction:"y",value:20}),o.createElement("div",{className:al})),this.state.paymentError&&this.effectiveStep()===t4.X1.Payment&&o.createElement(o.Fragment,null,o.createElement(x._,{color:x.S.INFORMATION,text:this.state.paymentError})),o.createElement(I.Kz,{direction:"y",value:16}),this.renderBillingItems(),o.createElement("div",{className:al}),o.createElement(I.Kz,{direction:"y",value:24}),o.createElement(tA,{formattedSubtotal:u.formatMoney(c,{showCents:!1})}),o.createElement(I.Kz,{direction:"y",value:24}),this.renderNextButton(),o.createElement(I.Kz,{direction:"y",value:24}))),o.createElement("div",null,o.createElement("div",{className:"org_self_serve_figjam--summaryDividerFull--kuRTz org_self_serve_figjam--summaryDivider--Ijd9-"}),o.createElement(I.Kz,{direction:"y",value:16}),o.createElement("div",{className:ao},o.createElement(es.B,{svg:aM.A,className:ad}),o.createElement("span",null,(0,S.tx)("org_self_serve.purchase_summary.have_questions",{contactSales:o.createElement("span",{className:ap,onClick:this.contactSales},(0,S.tx)("org_self_serve.purchase_summary.contact_our_sales_team"))}))),o.createElement(I.Kz,{direction:"y",value:16})))},this.state={loading:!0,eligibleUpgrades:[],selectedEditors:{},initialEditors:{},selectedTeamIds:new Set,payment:{card:null,last4:null,address:(0,Z.EB)((0,Y.aE)())},apiPending:!1,stripeCustomerId:null,taxRate:0,orgDetails:{actorName:"",actorEmail:this.props.user.email,legalOrgName:"",orgName:""},paymentError:null,emptySeatsByLicenseType:eM.kH.dict(e=>0),currency:this.props.currency,shippingAddress:(0,Z.EB)((0,Y.aE)()),nameOnPaymentMethod:"",vatId:null,regionalVatId:null,newTeamName:(null==(t=this.props.newTeamProps)?void 0:t.newTeamName)||null,inviteEmails:(null==(a=this.props.newTeamProps)?void 0:a.inviteEmails)||[]}}componentDidMount(){this.fetchTeamEligibleUpgradesFigjam()}fetchTeamEligibleUpgradesFigjam(){return t5.Eh.getEligibleUpgradesFigjam().catch(e=>{let t=e.data.message;return this.props.dispatch(A.$T({view:"recentFiles"})),this.props.dispatch(C.s.error(t||(0,S.t)("org_self_serve.confirmation_step.sorry_there_was_an_error_processing_your_request_refresh_and_try_again"))),this.setState({loading:!1}),Promise.reject()}).then(({data:e})=>{let t=e.meta.eligible_upgrades,a=new Set(t.map(e=>e.team.id)),r=t7(t,a);this.setState({loading:!1,eligibleUpgrades:t,selectedTeamIds:a,selectedEditors:r,initialEditors:r},()=>this.computeAdditionalDesignSeats())})}componentDidUpdate(e,t){(0,h.zN)(e.user.email)!==(0,h.zN)(this.props.user.email)&&m.Ay.redirect("/purchase-organization")}computeAdditionalDesignSeats(){this.setState(e=>({emptySeatsByLicenseType:function(e,t,a){let r=ae(e,t);return{...t,[eO.vu]:Math.max(t[eO.vu],tZ._h-e[eO.vu],tZ.u3-a-e[eO.vu]-r[eO.tL]-(r[eO.PE]??0))}}(this.getUpgradesByLicenseType(),e.emptySeatsByLicenseType,this.props.initialDesignSeats)}))}getSubtotal(e){let t=eM.kH.dict(t=>(0,tJ._)(this.props.billingPricesResult.data,e,t)),a=ae(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),r=eM.kH.dict(e=>(a[e]??0)*t[e]*12),n=0;return eM.kH.forEach(e=>{n+=r[e]??0}),n}async onSubmitPaymentAndAddress(){let e=this.state.payment.address,t=this.state.payment.card,a=this.state.vatId,r=this.state.regionalVatId;if(null===t){this.setState({paymentError:(0,S.t)("org_self_serve.payment_step.sorry_please_wait")});return}if(this.setState({apiPending:!0}),a&&!await (0,t9.V)(a,e.country,()=>{},this.onVatValidationFail))return;if(this.props.canSeeBillingAddressExp&&!this.state.nameOnPaymentMethod){let e=(0,S.t)("org_self_serve.payment_step.name_on_payment_method_is_required");this.setState({apiPending:!1,paymentError:e});return}if(r&&!await (0,t9.V)(r,e.country,()=>{},this.onVatValidationFail,e.region))return;let n=this.props.canSeeBillingAddressExp?{name:this.state.nameOnPaymentMethod,address_line1:e.line1,address_line2:e.line2,address_country:e.country,address_city:e.city,address_state:e.region,address_zip:e.postal_code}:void 0;(0,t2.Ey)(t,n).then(t=>{var a;if(!t.error&&t.token)return(0,t2.To)(t.token.id,this.getSubtotal(this.state.currency),this.state.currency).then(t=>this.props.canSeeBillingAddressExp?tQ.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,billing_address:e,shipping_address:(0,Z.$V)(this.state.shippingAddress)?null:this.state.shippingAddress,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null}):tQ.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,address:e,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null})).catch(e=>{var t;return this.setState({apiPending:!1,paymentError:(null==(t=e.data)?void 0:t.message)||e.message}),Promise.reject()}).then(({data:e})=>{this.setState(a=>{var r,n;return{payment:{...a.payment,last4:(null==(n=null==(r=t.token)?void 0:r.card)?void 0:n.last4)||null},stripeCustomerId:e.meta.stripe_customer_id,taxRate:e.meta.tax_percent,apiPending:!1}},()=>this.setStep(t4.X1.Review))});{let e=(null==(a=t.error)?void 0:a.message)||(0,S.t)("org_self_serve.payment_step.there_was_an_error_processing_your_payment_please_try_again");this.setState({apiPending:!1,paymentError:e})}})}getEditorStatusChanges(){let e={upgrade:{[z.G_.DESIGN]:[],[z.G_.WHITEBOARD]:[],[z.G_.DEV_MODE]:[]},downgrade:{[z.G_.DESIGN]:[],[z.G_.WHITEBOARD]:[],[z.G_.DEV_MODE]:[]}},{selectedEditors:t,initialEditors:a}=this.state;for(let r in t){let n=t[r];if(r in a){let t=a[r];n.designEditor?t.designEditor||e.upgrade[z.G_.DESIGN].push(r):(t.designEditor&&e.downgrade[z.G_.DESIGN].push(r),n.devMode&&e.upgrade[z.G_.DEV_MODE].push(r)),n.figjamEditor!==t.figjamEditor&&(n.figjamEditor?e.upgrade[z.G_.WHITEBOARD].push(r):e.downgrade[z.G_.WHITEBOARD].push(r))}else n.designEditor?e.upgrade[z.G_.DESIGN].push(r):n.devMode&&e.upgrade[z.G_.DEV_MODE].push(r),n.figjamEditor&&e.upgrade[z.G_.WHITEBOARD].push(r)}for(let r in a)if(!(r in t)){let t=a[r];t.designEditor&&e.downgrade[z.G_.DESIGN].push(r),t.figjamEditor&&e.downgrade[z.G_.WHITEBOARD].push(r)}return e}onSubmitPurchaseOrder(){this.props.dispatch(P.b({completed_org_cart_flow:!0}));let e=this.getEditorStatusChanges(),t=ae(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),a=eM.kH.dict(e=>t[e]??0),r={legal_org_name:this.state.orgDetails.legalOrgName,org_name:this.state.orgDetails.orgName||this.state.orgDetails.legalOrgName,team_ids:Array.from(this.state.selectedTeamIds),requested_seats:a,editor_status_changes:e,stripe_customer_id:this.state.stripeCustomerId,selected_currency:this.state.currency,vat_gst_id:this.state.vatId||null,regional_vat_gst_id:this.state.regionalVatId||null};this.state.newTeamName&&(r={...r,new_team_options:{team_name:this.state.newTeamName,add_to_org:!0}}),r.design_editors=t[eO.vu],r.whiteboard_editors=t[eO.tL],this.setState({apiPending:!0}),tQ.Ay.post("/api/orgs",r).catch(e=>{var a,r;return this.props.dispatch(C.s.error((0,S.Jv)(e,(null==(a=e.data)?void 0:a.message)||(0,S.t)("org_self_serve.review_step.sorry_there_was_an_error_please_try_again")))),(0,tS.$D)(w.e.BILLING,Error(`[Billing] Org checkout API failed: ${null==(r=e.data)?void 0:r.message}`),{extra:{numDesignEditors:t[eO.vu],numWhiteboardEditors:t[eO.tL],numDevModeSeats:t[eO.PE]??0,eligibleUpgrades:JSON.stringify(this.state.eligibleUpgrades.map(e=>({team:e.team.id,figjamEditors:e.figjamEditors.map(e=>e.id),designEditors:e.designEditors.map(e=>e.id)}))),selectedEditors:JSON.stringify(Object.keys(this.state.selectedEditors).map(e=>({userId:e,teamIds:this.state.selectedEditors[e].teamIds}))),selectedTeamIds:JSON.stringify([...this.state.selectedTeamIds]),userId:this.props.user.id}}),this.setState({apiPending:!1}),Promise.reject()}).then(e=>{this.setState({apiPending:!1},()=>this.setStep(t4.X1.Confirmation)),this.state.inviteEmails.length&&e.data.meta.new_team&&this.props.dispatch((0,t1.rq)({emails:this.state.inviteEmails,resourceType:z.vt.TEAM,resourceIdOrKey:e.data.meta.new_team.id,level:t8.e6.EDITOR})),this.state.newTeamName&&e.data.meta.new_team&&(0,V.Al)(this.props.user.id),(0,tK.sx)("Self Serve Org Purchased (GTM)"),(0,eP.uE)("Self Serve Org Purchased",{user:this.props.user},{org_name:r.org_name,upsellSource:this.props.upsellSource})})}getUpgradesByLicenseType(){let{eligibleUpgrades:e,selectedTeamIds:t,selectedEditors:a}=this.state,r={},n={},l={};for(let[e,i]of Object.entries(a)){if(!i.teamIds.some(e=>t.has(e))){delete this.state.selectedEditors[e];continue}i.designEditor&&(r[e]=i),i.figjamEditor&&(n[e]=i),i.devMode&&(l[e]=i)}return e.filter(e=>t.has(e.team.id)).forEach(e=>{e.designEditors.forEach(t=>{var n;!(0,h.nD)(t.email)&&(null==(n=a[t.id])?void 0:n.designEditor)&&(r[t.id]||(r[t.id]={user:t,teamIds:[]}),r[t.id].teamIds.includes(e.team.id)||r[t.id].teamIds.push(e.team.id))}),e.figjamEditors.forEach(t=>{var r;!(0,h.nD)(t.email)&&(null==(r=a[t.id])?void 0:r.figjamEditor)&&(n[t.id]||(n[t.id]={user:t,teamIds:[]}),n[t.id].teamIds.includes(e.team.id)||n[t.id].teamIds.push(e.team.id))})}),{[eO.vu]:Object.keys(r).length,[eO.tL]:Object.keys(n).length,[eO.PE]:Object.keys(l).length}}render(){let e;let t=this.effectiveStep();if("loading"===this.props.billingPricesResult.status||this.state.loading&&!this.props.newTeamProps)return o.createElement(tc.kt,{testId:"loadingSpinner"});if("errors"===this.props.billingPricesResult.status)return(0,tJ.Ix)(this.props.billingPricesResult),o.createElement(tX.t,null);let a=ae(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),r=new Date().getMonth(),n=new Date().setMonth(r+3),l=new Date().setMonth(r+12),i=this.getSubtotal(this.state.currency),s=i*this.state.taxRate/100,c=i+s,d=this.state.eligibleUpgrades.length>0,m=new Map;this.state.eligibleUpgrades.forEach(e=>m.set(e.team,e.designEditors.length+e.figjamEditors.length));let u=e=>{var t,a;this.props.dispatch(A.$T({teamId:null,...null==(t=this.props.newTeamProps)?void 0:t.previousView,view:"teamUpgrade",paymentStep:e,teamFlowType:(null==(a=this.props.newTeamProps)?void 0:a.teamFlowType)||ee.SC.CREATE_AND_UPGRADE}))};return e=t===t4.X1.Review?o.createElement(o.Fragment,null,o.createElement(aP,{currentStep:this.props.step,setStep:this.setStep,hasEligibleUpgrades:this.state.eligibleUpgrades.length>0,onFileBrowserClick:this.onFileBrowserClick,newTeamProps:this.props.newTeamProps,onSelectTeamUpgradeStep:u}),o.createElement(aT,{onSubmit:this.onSubmit,orgPayment:this.state.payment,renewalDate:l,subTotalCents:i,taxDueCents:s,taxRate:this.state.taxRate,totalCents:c,totalSeats:a,showAdditionalEditorsModal:this.addEditors,trueUpDate:n,totalTeams:this.state.selectedTeamIds.size+(this.state.newTeamName?1:0),legalOrgName:this.state.orgDetails.legalOrgName,orgName:this.state.orgDetails.orgName,user:this.props.user,loading:this.state.apiPending,renderBillingItems:this.renderBillingItems,ctaProperties:this.ctaProperties(),currency:this.state.currency,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp,billingAddress:this.state.payment.address,shippingAddress:this.state.shippingAddress,navigateToEditPaymentDetails:()=>this.setStep(t4.X1.Payment),navigateToEditOrganizationDetails:()=>this.setStep(t4.X1.Details)})):t===t4.X1.Confirmation?o.createElement(aI,{totalCents:c,trueUpDate:n,orgMigrated:this.props.orgMigrated,onFileBrowserClick:this.onFileBrowserClick,orgPayment:this.state.payment,currency:this.state.currency}):o.createElement(o.Fragment,null,this.props.isOrgAdmin&&o.createElement(eZ,{onContactSales:this.contactSales,onFileBrowserClick:this.onFileBrowserClick}),(0,h.qe)(this.props.user.email)&&o.createElement(eJ,{onFileBrowserClick:this.onFileBrowserClick}),o.createElement(aP,{currentStep:this.props.step,setStep:this.setStep,hasEligibleUpgrades:d,onFileBrowserClick:this.onFileBrowserClick,newTeamProps:this.props.newTeamProps,onSelectTeamUpgradeStep:u}),o.createElement("div",{className:"org_self_serve_figjam--stepContainer--zohgH"},t===t4.X1.CreateTeam&&o.createElement("div",{className:"org_self_serve_figjam--createTeamContainer--D3kS-"},o.createElement(tT,{type:tw.ORG,teamName:this.state.newTeamName||"",setTeamName:this.onChangeNewTeamName,onNext:this.onSubmit})),t===t4.X1.TeamSelect&&(this.state.loading?o.createElement(tc.kt,null):o.createElement(ay,{teamsToEditors:m,selectedTeamIds:this.state.selectedTeamIds,onToggle:this.onTeamToggle,newTeamName:this.state.newTeamName})),t===t4.X1.Details&&(this.state.loading?o.createElement(tc.kt,null):o.createElement(aw,{orgDetails:this.state.orgDetails,onChangeFormInput:this.onChangeOrgDetails,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp})),t===t4.X1.Payment&&o.createElement(ep.P,{className:ey()(at,aa),hideScrollbar:!0},o.createElement("div",{className:ar},(0,S.tx)("org_self_serve.payment_step.enter_your_payment_details")),o.createElement("form",{className:"org_self_serve_figjam--paymentForm--ymx94"},o.createElement(t6.n,{id:"team-upgrade-page-form",cardId:"team-upgrade-page-card",billingAddress:this.state.payment.address,shippingAddress:this.state.shippingAddress,onCardReady:this.onCardReady,onBillingAddressChange:this.onAddressChange,onShippingAddressChange:this.onShippingAddressChange,nameOnPaymentMethod:this.state.nameOnPaymentMethod,setNameOnPaymentMethod:this.onNameOnPaymentMethodChange,onClearToken:this.onClearToken,onVatIdChange:this.onVatIdChange,vatId:this.state.vatId,onRegionalVatIdChange:this.onRegionalVatIdChange,regionalVatId:this.state.regionalVatId,isCommunityCheckout:!1,isCheckoutFlow:!0,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp}))),t!==t4.X1.CreateTeam&&this.renderPurchaseSummary())),o.createElement(O.fu,{name:t3.e0.ORG_CART,properties:{step:t,currency:this.state.currency,upsellSource:this.props.upsellSource}},o.createElement("div",{className:"org_self_serve_figjam--selfServePage--xMlvz"},e))}}aB.displayName="OrgSelfServePage";let aU=(0,s.Ng)(function(e){return{user:e.user,isOrgAdmin:(0,t0.x9)(e.orgUsersByOrgId,e.user.id).some(e=>e.permission===z._D.ADMIN),currency:e.payment.currency||(0,Y.LN)()}})(aB);function aV(e){let t=(0,M.Mh)(),a=(0,tq.N1)(tq.Fq.ORG_SELF_SERVE);return o.createElement(aU,{...e,canSeeBillingAddressExp:t,billingPricesResult:a})}function aH(e){return(0,_.kc)().cart_error_boundaries?o.createElement(aW,{...e}):o.createElement(aV,{...e})}function aW(e){return o.createElement(T.tH,{sentryTags:{area:w.e.MONETIZATION_UPGRADES},boundaryKey:"OrgSelfServeFigJamPage",fallback:T.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:W.y4},o.createElement(aV,{...e}))}function aj(e){let{selectedView:t,promo:a}=e,r=(0,s.wA)(),n=(0,Q.Ud)({teamId:t.teamId}),l=()=>{(0,y._H)(),r(D.Ay({promo:null})),r(A.$T(e.selectedView.previousView||{view:"team",teamId:t.teamId}))},i=()=>{r(F.S_({teamId:t.teamId,teamName:t.teamName,promoCode:(null==a?void 0:a.code)||"",onSuccess:l,onError:l}))};return a?o.createElement(O.fu,{name:"Redeem Promo Code > Confirm",properties:{teamId:t.teamId}},o.createElement("div",{className:"promo_modals--promoReviewInner---J-fs"},o.createElement("div",{className:"promo_modals--cancelRow--nBn1h"},o.createElement("button",{type:"button",className:"promo_modals--cancelButton--Rbgfe text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:l},(0,S.tx)("promo.promo_review.cancel"))),o.createElement("div",{className:"promo_modals--promoReviewTitle--e7s5s text--fontPos20--Bcz97 text--_fontBase--QdLsd"},(0,S.tx)("promo.promo_review.redeem_your_days_of_free_professional_plan",{days:a.promo_value})),o.createElement("div",{className:"promo_modals--promoReviewDescription--aLeG8 text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,S.tx)("promo.promo_review.any_additional_editors_invited_to_selected_view_team_name_will_also_be_free_of_charge_for_the_next_days.seat_rename",{teamName:t.teamName,days:a.promo_value})),o.createElement("div",null,o.createElement(N.x,{isLoading:n},()=>o.createElement(tE,{selectedView:t,onClickConfirm:i,currency:(0,Y.LN)(),canSeeBillingAddressExp:!1}))))):(l(),null)}var a$=a(586459);let aG=(0,O.tf)(function(e){return o.createElement("div",{onClick:e.onClick},e.children)});function az(e){return o.createElement(o.Fragment,null,o.createElement("div",{className:"full_width_page--closeMenu--AW-0T"},e.menu),o.createElement("div",{ref:e.pageRef,className:"full_width_page--fullWidthPage--AfTzb overflow--overflowYAuto--nfK38 overflow--momentumScroll--qtsu7",...e}))}var aY=a(805447),aK=a(229403),aQ=a(630834);let aq=e=>{let t=(0,s.d4)(t=>{let a=aK.Xw.loadingKeyForPayload({teamId:e});return t.loadingState[a]}),a=(0,s.d4)(t=>t.teamUserByTeamId[e]||{}),r=(0,s.wA)();o.useEffect(()=>{r(aK.Xw({teamId:e}))},[r,e]);let n=t!==a$.r.SUCCESS;return o.useEffect(()=>{if(!n){let e=Object.keys(a).length;r(D.Az({numWhiteboardEditors:e})),r(D.js({numDesignEditors:e}))}},[r,n,a]),n};function aX({selectedView:e}){let{teamId:t}=e,a=aq(t),r=(0,s.wA)(),n=()=>{r(D.Nj({teamId:t,onCloseOrComplete:e.onCloseOrComplete}))};return o.createElement(O.fu,{name:"Edu Review",properties:{teamId:t}},o.createElement("div",null,o.createElement(az,{menu:o.createElement(aG,{onClick:()=>{var a;r(A.$T({view:"team",teamId:t})),null==(a=e.onCloseOrComplete)||a.call(e)}},o.createElement(es.B,{svg:aQ.default,className:"edu_review--modalCloseX--t3-Et"}))},o.createElement("span",{className:e.showBreadcrumbs?void 0:"edu_review--hidden--IgK6O"},o.createElement(aY.J,{index:3})),o.createElement(aD.JR,null,(0,S.tx)("edu.almost_done_everything_look_good")),o.createElement(I.Kz,{multiple:4}),o.createElement(N.x,{isLoading:a},()=>o.createElement(tE,{selectedView:e,onClickConfirm:n,currency:(0,Y.LN)(),canSeeBillingAddressExp:!1})))))}var aJ=a(374626),aZ=a(680140),a0=a(243058),a1=a(498750),a2=a(717068),a4=a(448169),a8=a(172088),a3=a(413695),a5=a(134279),a9=a(172115),a6=a(796933),a7=a(296447),re=a(896474),rt=a(396147),ra=a(138020),rr=a(915440),rn=a(404090),rl=a(279453);function ri(e){var t,a,r,n,l;let{getConfig:i}=(0,E.I7)("exp_all_admin_request_dash"),s=(0,rr.Rs)(rl.HpJ,{orgId:e.planId},{enabled:e.planType===rt.ps.ORG}),c="loaded"===s.status&&null!=(a=null==(t=s.data)?void 0:t.org)&&!!a.bigmaEnabledAt&&i().get("enabled",!1)&&!!e.isOrgAdmin,d=(0,rt.ZY)({isIntendedAudience:e.planType===rt.ps.ORG&&"loaded"===s.status&&null!=(n=null==(r=s.data)?void 0:r.org)&&!!n.bigmaEnabledAt&&!1===e.isOrgAdmin}),m=e.isOrgAdmin?[null,...e.managedBillingGroups??[]]:e.managedBillingGroups,u=(0,rr.Rs)(rl.KR2,{planType:e.planType,planId:e.planId,filterParams:c||d?JSON.stringify({billing_group_ids:m}):e.isOrgAdmin?JSON.stringify({billing_group_ids:[null]}):JSON.stringify({billing_group_ids:[]})}),_=(0,rt.IA)({planType:e.planType,planId:e.planId,isOrgAdmin:e.isOrgAdmin}),p=e.planType===rt.ps.TEAM||e.isOrgAdmin,f="loaded"===u.status&&u.data.adminDashboardRequestsTotalCount.status===ra.tT.Loaded&&("loaded"===s.status||e.planType===rt.ps.TEAM)?null==(l=u.data.adminDashboardRequestsTotalCount.data)?void 0:l.rowCount:void 0,g=f??0,[v,h]=(0,aJ.fp)(rn.Y),[y,b]=(0,aJ.fp)(rn._),w=c?[e.planType,e.planId,!0].toString():[e.planType,e.planId].toString();o.useEffect(()=>{let t=e.isDataLoaded&&null!==_;if(f&&(t||!p)){let t={...v};t[w]=g,h(t);let a={...y};a[w]=!!(_||e.showDevModeOptIn),b(a)}return()=>{let e={...v};delete e[w],h(e);let t={...y};delete t[w],b(t)}},[e.isDataLoaded,f,w,e.showDevModeOptIn,_]);let T=e.showDevModeOptIn||y[w]?1:0,I=(v[w]??0)+(e.billingStatusCount||0)+(e.taxStatusCount||0)+T;if(I<1)return null;let x=eb.zE.DEFAULT;return e.billingStatusCount||e.taxStatusCount||T?x=eb.zE.WARNING:e.isSelected&&(x=eb.zE.LIGHT),void 0!==f&&I>0&&e.isDataLoaded&&(null!==_||!p)?o.createElement(eb.Ex,{text:I.toString(),color:x,className:x===eb.zE.DEFAULT?ef.cx.mr0.colorText.colorBgSelectedSecondary.$:ef.cx.mr0.$,dataTestId:"admin-notifications-badge"}):null}var ro=a(227795),rs=a(376783),rc=a(131043);function rd(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.teams)[e.team.id],r=o.useCallback(r=>{r.stopPropagation(),t(A.$T({view:"teamAdminConsole",teamId:e.team.id,isProTeam:null==a?void 0:a.pro_team})),(0,tK.sx)("Admin Console Opened",{trackingContext:e.trackingContextName,entryPoint:"sidebar"})},[t,e.team,e.trackingContextName,null==a?void 0:a.pro_team]);return o.createElement(ro.Me,{svg:rc.A,onClick:r,"data-tooltip-type":eB.Ib.TEXT,"data-tooltip":(0,S.t)("sidebar.admin_console"),className:"admin_console_button--button--O4Rxd addition_button--button--X9H6b"})}function rm(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.currentTeamId),r=(0,s.d4)(e=>e.teams),n=(0,s.d4)(q.getPermissionsState);if(!a)return null;let l=r[a];if(!(0,q.hasAdminRoleAccessOnTeam)(a,n)||!l||!(0,K.w5)(l))return null;let i=e.selectedView&&"teamAdminConsole"===e.selectedView.view,c=o.createElement(ri,{planType:rt.ps.TEAM,planId:a,isSelected:i,isDataLoaded:!0,isOrgAdmin:!1});return o.createElement(rs.Z,{isSelected:i,onClick:()=>{t(A.$T({view:"teamAdminConsole",teamId:a,isProTeam:l.pro_team})),t(A.Oe({clickedResourceType:"teamAdminSettings",resourceIdOrKey:l.id}))},"data-onboarding-key":"PRO_ADMIN_SETTINGS_LINK_ONBOARING_KEY","data-testid":"admin-settings-link",icon:o.createElement(re.In,{icon:"settings-16"}),text:o.createElement(ev.E,{truncate:!0},(0,S.tx)("sidebar.admin_dashboard")),badge:(null==l?void 0:l.pro_team)?c:void 0})}var ru=a(365879),r_=a(145586),rp=a(385111),rf=a(742809),rg=a(723245),rE=a(318812),rv=a(694687),rh=a(7e3),ry=a(611978),rb=a(147206),rw=a(746869),rT=a(389643),rI=a(731078),rx=a(266431);function rN(){return o.createElement(eb.Ex,{color:eb.zE.INFORMATIONAL,text:(0,S.t)("team_list.pro_trial"),className:"pro_trials_badge--proTrialsBadge--HmAFD team_link--freeBadge--ynTW7 team_link--badge--Ou6oy"})}var rC=a(454542),rS=a(123948);let rk="team_link--lockedBadge--rfbIf team_link--badge--Ou6oy",rA="team_link--badgeButton--NRkT9",rL="team_link--teamWarningIcon--eC3Yz";function rR(e){let t;let a=(0,s.wA)(),r=(0,$.iZ)(),n=(0,ry._6)(),l=(0,rE.Um)(),i=(0,rv.dq)(),c=(0,j.FC)(),d=(0,s.d4)(e=>e.teams),m=(0,s.d4)(e=>e.teamRoleRequests),u=(0,s.d4)(e=>e.avatarEditorState),_=(0,s.d4)(e=>e.renamingNavTeamWithId),[p,f]=o.useState(!1),g=e.team,E=function(e,t){if(e&&e.type===a6.RQ&&e.data.teamId in t)return t[e.data.teamId]}(l,d),v=n&&"team"===n.view&&n.teamId===g.id&&_!==g.id;E&&E.id===g.id&&(t="team_link--contextSelectedTeam--Q2cQV team_link--team--qXgRE sidebar--sidebarSection---c9jn text--fontPos11--2LvXf text--_fontBase--QdLsd");let h=(0,q.hasAdminRoleAccessOnTeam)(g.id,c),y=(0,q.hasEditorRoleAccessOnTeam)(g.id,c),w=(0,q.canEditTeam)(g.id,c),T=_===g.id,I=(()=>{var t,a;let r=d[e.team.id];return!!((null==(t=null==r?void 0:r.restrictions_list)?void 0:t.includes(z.P4.FILES_LIMITED_LEGACY))||(null==(a=null==r?void 0:r.restrictions_list)?void 0:a.includes(z.P4.WHITEBOARD_FILES_LIMITED_BETA)))})(),x=(0,K.oc)(g.id,c),N=!T&&!(0,rb.R$)(r,i)&&p&&!(I||x),C=!T&&h&&(0,K.XX)(e.team)&&!e.team.orgId,S={showReminder:!1,showAccessRestricted:!1};return c.user&&(S=(0,b.GU)(c.userEduGracePeriods,(0,b.cn)(c.user),g.id,!!g.studentTeamAt)),o.createElement("div",{onContextMenu:t=>{t.stopPropagation(),t.preventDefault(),e.team&&(0,rT.xN)(e.team.id,{dispatch:a});let r={top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1};a(A.j7({type:a6.RQ,data:{teamId:e.team.id,targetRect:r}}))},onMouseOver:()=>{f(!0)},onMouseLeave:()=>{f(!1)},"data-onboarding-key":e.onboardingKey},o.createElement(rs.Z,{rowClassName:t,onClick:t=>{let r=e.team;a(L.dm(r.id)),a(A.Oe({clickedResourceType:"team",resourceIdOrKey:r.id}))},showGrabber:!1,isSelected:v,icon:o.createElement("div",{className:ef.cx.h16.w16.flex.itemsCenter.justifyCenter.$},o.createElement(ed.nl,{size:{imgSize:ed.Pf.SMALL,fallbackSize:ed.Pf.XSMALL},fallbackDisplay:a5.U.HIDDEN,team:{...e.team,imgUrl:e.team.imgUrl||void 0}})),text:o.createElement("div",{className:ef.cx.flex.flexRow.overflowHidden.flexGrow1.itemsCenter.$},T?o.createElement(a3.p,{className:"team_link--teamNameInput--ZUj8d input--input--IPk3x",placeholderValue:g.name,submit:t=>{a((0,H.IA)({team:e.team,name:t})),a(A.tw({teamId:e.team.id}))},cancel:()=>{a(A.tw({teamId:e.team.id}))}}):o.createElement(ev.E,{truncate:!0},g.name),o.createElement(rD,{team:g,dispatch:a,permissionsState:c,selectedView:n,shouldShowFileLimitBadge:I,eduVerificationNeeded:S})),badge:o.createElement(o.Fragment,null,N&&o.createElement(ru.I,{team:e.team,trackingContextName:t3.e0.FILE_BROWSER}),C&&o.createElement(rd,{team:e.team,trackingContextName:t3.e0.FILE_BROWSER}))}),!(0,rg.D6)(i)&&E&&E.id===g.id&&o.createElement(r_.W,{team:{...E,canEdit:w,canEditTeamContents:y},onRenameClick:e=>{a(A.m({teamId:e.id}))},onChangeTeamIconClick:()=>{a((0,rf.o)({team:{...e.team,imgUrl:e.team.imgUrl||void 0}}))},teamRoleRequests:m}),h&&o.createElement("span",{className:"team_link--hiddenEditableAvatar--IO5YA"},o.createElement(rx.ER,{entity:{...g,imgUrl:g.imgUrl||void 0},entityType:rI.ck.TEAM,avatarEditorState:u,size:14,dispatch:a})))}function rD(e){var t,a,r,n;let[l,i]=o.useState(!1),s=o.useRef(),c=(0,rh.TN)(e.team.id);if(e.shouldShowFileLimitBadge)return o.createElement(a7.YR,{className:rL,dataTooltipType:eB.Ib.TEXT,dataTooltip:(0,S.t)("team_list.your_team_is_over_the_starter_plan_s_file_limit"),dataTooltipShowAbove:!0,dataTooltipMaxWidth:160,dataTooltipTimeout:50});let d=e.permissionsState,m=(0,q.getRolesForUserAndTeam)(e.team.id,d),u=(0,q.hasMinRole)(m,t8.e6.EDITOR);if(d.user&&((null==(t=e.eduVerificationNeeded)?void 0:t.showReminder)||(null==(a=e.eduVerificationNeeded)?void 0:a.showAccessRestricted))&&u){let t=o.createElement(a7.YR,{className:rL,dataTooltipType:eB.Ib.TEXT,dataTooltip:(0,S.t)("team_list.verify_that_youre_a_student_or_educator"),dataTooltipShowAbove:!0,dataTooltipMaxWidth:160,dataTooltipTimeout:50});return(null==(r=e.eduVerificationNeeded)?void 0:r.showReminder)&&(t=o.createElement(a7.vW,{className:rL,dataTooltipType:eB.Ib.TEXT,dataTooltip:(0,S.t)("team_list.verify_that_youre_a_student_or_educator"),dataTooltipShowAbove:!0,dataTooltipMaxWidth:160,dataTooltipTimeout:50})),t}let p=null==(n=d.user)?void 0:n.id,f=t=>{e.dispatch((0,R.to)({type:a9.V,data:{teamId:e.team.id,upsellSource:t}}))};if((0,K.oc)(e.team.id,e.permissionsState)){if(e.team.studentTeamAt&&(0,_.kc)().edu_onboarding_grace_period)return null;let t=rw.ng.canSeeProTrialExpiryUx(c);return(0,q.hasEditorRoleAccessOnTeam)(e.team.id,d)?t?o.createElement(O.fu,{name:eb._Y.PRO_TRIAL_EXPIRED,properties:{userId:p,teamId:e.team.id,...rw.ng.getTrackingProperties()}},o.createElement(O.$z,{type:"button",onClick:()=>f(J.b.PRO_TRIAL_UPSELL_MODAL),className:rA,trackingProperties:rw.ng.getTrackingProperties("Badge Clicked")},o.createElement("span",{"data-tooltip-type":eB.Ib.SPECIAL,"data-tooltip":rC.d,"data-tooltip-show-right":!0,"data-tooltip-max-width":128,"data-tooltip-timeout-delay":50},o.createElement(eb.Ex,{color:eb.zE.WARNING,text:(0,S.t)("team_list.pro_trial_expired"),className:rk})))):o.createElement(O.fu,{name:eb._Y.LOCKED,properties:{userId:p,teamId:e.team.id}},o.createElement(O.$z,{type:"button",onClick:()=>f(J.b.LOCKED_TEAM_BADGE),className:rA,trackingProperties:{text:"Badge Clicked"}},o.createElement(eb.Ex,{color:eb.zE.WARNING,text:(0,S.t)("team_list.locked"),className:rk}))):t?o.createElement(O.fu,{name:eb._Y.PRO_TRIAL_EXPIRED,properties:{userId:p,teamId:e.team.id,...rw.ng.getTrackingProperties()}},o.createElement(eb.Ex,{color:eb.zE.WARNING,text:(0,S.t)("team_list.pro_trial_expired"),className:rk})):o.createElement(eb.Ex,{color:eb.zE.WARNING,text:(0,S.t)("team_list.locked"),className:"team_link--badge--Ou6oy"})}if(c&&rw.ng.canSeeProTrialUx(c))return o.createElement(O.fu,{name:eb._Y.PRO_TRIAL,properties:{userId:p,teamId:e.team.id,...rw.ng.getTrackingProperties()}},o.createElement(O.$z,{type:"button",onClick:()=>f(J.b.PRO_TRIAL_UPSELL_MODAL),className:rA,trackingProperties:rw.ng.getTrackingProperties("Badge Clicked")},o.createElement("span",{"data-tooltip-type":eB.Ib.SPECIAL,"data-tooltip":rS.V,"data-tooltip-pro-trials-days-left":c.daysLeft,"data-tooltip-show-right":!0,"data-tooltip-max-width":195,"data-tooltip-timeout-delay":50},o.createElement(rN,null))));if(!(0,K.XX)(e.team)&&(0,q.hasEditorRoleAccessOnTeam)(e.team.id,d)){let t={monetization_surface:rp.h.MonetizationSurface.FILE_BROWSER,monetization_trigger:J.b.STARTER_TEAM_BADGE};return o.createElement("button",{onClick:a=>{a.stopPropagation(),e.dispatch(L.dm(e.team.id)),f(J.b.STARTER_TEAM_BADGE),(0,tK.sx)("Starter Team Badge Clicked",{userId:p,teamId:e.team.id,...t})},onMouseEnter:()=>{l||(s.current=setTimeout(()=>{(0,tK.sx)("Starter Team Badge Viewed",{userId:p,teamId:e.team.id,...t}),i(!0)},1e3))},onMouseLeave:()=>{clearTimeout(s.current)},className:rA},o.createElement(eb.Ex,{color:eb.zE.INFORMATIONAL,text:(0,S.t)("team_list.free"),className:"team_link--freeBadge--ynTW7 team_link--badge--Ou6oy"}))}return null}var rF=a(617427),rP=a(980820);let rM=(0,rP.nF)((e,t)=>{var a,r,n;let l=null==(a=e.getState().user)?void 0:a.id,i=e.getState().currentUserOrgId;if(t.userInitiated){let a=tQ.Ay.put(`/api/file_browser_preferences/section/${t.prefs.section_type}`,{...t.prefs,org_id:i}).catch(t=>{var a;e.dispatch(C.s.error((null==(a=t.data)?void 0:a.message)||"An error occurred.")),console.error(t)});t.prefs.id?null==(r=(0,rF.WB)())||r.optimisticallyUpdate({FileBrowserSectionPreferences:{[t.prefs.id]:{orderedFolderIds:t.prefs.ordered_folder_ids,sectionType:t.prefs.section_type,teamId:"team"===t.prefs.section_type?t.prefs.team_id:null,orgId:i}}},a):null!=l&&(null==(n=(0,rF.WB)())||n.optimisticallyCreate({FileBrowserSectionPreferences:{"optimistic-id":{userId:l,orderedFolderIds:t.prefs.ordered_folder_ids||null,sectionType:t.prefs.section_type,teamId:"team"===t.prefs.section_type?t.prefs.team_id:null,updatedAt:new Date,createdAt:new Date,orgId:i}}},a))}});var rO=a(688083),rB=a(164249);let rU={USER_FOLDERS:"user_folders",USER_DRAFTS:"user_drafts",TEAM:"team"},rV="nav_section--folderSeparatorBefore--RgAUv";function rH(e,t,a){let{projects:r,sidebarData:n}=a,l=(null==n?void 0:n.fileBrowserSectionPreferences)||[],i=[];for(let a of l)if("team"===a.sectionType){if("team"===e&&a.teamId===(t||null)){i=a.orderedFolderIds||[];break}}else e===a.sectionType&&(i=a.orderedFolderIds||[]);return r.sort((e,t)=>{let a=i.indexOf(e.id),r=i.indexOf(t.id);return a<r?-1:r<a?1:0}),r}function rW(e,t,a,r,n,l,i,o){var s,c;let d=rG(r,a),m=null==(c=null==(s=e.sidebarData)?void 0:s.fileBrowserSectionPreferences)?void 0:c.filter(e=>e.sectionType===n&&("team"!==n||e.teamId===(null==l?void 0:l.id))),u=m&&m.length>0?m[0].id:void 0;d===n&&(n!==rU.TEAM||r.teamId===(null==l?void 0:l.id))?rj(e,t,n,null==l?void 0:l.id,r.id,i,o,u):l&&r$(e,t,r,n,l,i,o,u)}let rj=(e,t,a,r,n,l,i,o)=>{let s=rH(a,r,e).map(e=>e.id),c=(0,a2.Pe)(s,n,l,i);c!==s&&t(rM({prefs:a===rU.TEAM?{id:o,section_type:a,team_id:r,ordered_folder_ids:c}:{id:o,section_type:a,ordered_folder_ids:c},userInitiated:!0}))},r$=(e,t,a,r,n,l,i,o)=>{if(!n)return;t((0,rO.Nr)({folder:a,team:n}));let s=rH(r,n.id,e).map(e=>e.id),c=null==l?-1:s.indexOf(l);return c<0?c=i?0:s.length:i||(c+=1),s.splice(c,0,a.id),t(rM({prefs:r===rU.TEAM?{id:o,section_type:r,team_id:n.id,ordered_folder_ids:s}:{id:o,section_type:r,ordered_folder_ids:s},userInitiated:!0})),!0},rG=(e,t)=>{var a;return e.teamId&&e.teamId in t.roles.byTeamId?rU.TEAM:e.id===(null==(a=t.user)?void 0:a.drafts_folder_id)?rU.USER_DRAFTS:rU.USER_FOLDERS};function rz(e){var t;let a=(0,s.wA)(),r=(0,s.d4)(e=>e.dragState),n=(0,j.FC)(),l=(0,$.iZ)(),i=(0,rv.dq)(),c=(0,s.d4)(e=>e.renamingNavFolderWithId),[d,m]=o.useState(null),[u,_]=o.useState(!1),p=()=>{var t,a;if(e.isEnterpriseSidenavEnabled&&(null==(t=r.data)?void 0:t.licenseGroupId)&&r.data.licenseGroupId!==(null==(a=e.licenseGroup)?void 0:a.id))return!1;if(r.type===rB.R.Folder){let t=r.data,a=rG(t,n);return!!(a===rU.USER_FOLDERS&&(0,K.S$)(t,e.team,l))||!!a&&e.acceptDropsFrom.has(a)}return!1},f=e=>{r.type===rB.R.Folder&&m(e)},g=e=>{_(e.upper)},E=e=>{m(t=>t===e?null:t)},v=t=>{rW(e,a,n,r.data,e.sectionType,e.team,t,u),m(null)},h=rH(e.sectionType,null==(t=e.team)?void 0:t.id,e),y=(0,rg.D6)(i)?"nav_section--folderSeparatorOffCustomSections--Z4VcU nav_section--sectionTextCustomSections--Jz4II sidebar--sectionTextCustomSections---1KFn sidebar--sectionContentCustomSections--wI9mZ ellipsis--ellipsis--Tjyfa":"nav_section--folderSeparatorOff--auqlH nav_section--sectionText--oYnQA sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa",b=(0,rg.D6)(i)?"nav_section--folderSeparatorOnCustomSections--2EgRi nav_section--folderSeparatorOffCustomSections--Z4VcU nav_section--sectionTextCustomSections--Jz4II sidebar--sectionTextCustomSections---1KFn sidebar--sectionContentCustomSections--wI9mZ ellipsis--ellipsis--Tjyfa":"nav_section--folderSeparatorOn--CIaoN nav_section--folderSeparatorOff--auqlH nav_section--sectionText--oYnQA sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa";return o.createElement("div",{className:0===h.length?"nav_section--orderedFoldersEmpty--7AgI4 nav_section--orderedFolders--3ZY9c":"nav_section--orderedFolders--3ZY9c"},o.createElement("div",{className:rV},o.createElement("div",{className:e.showPrependIndicator||0===h.length&&e.showAppendIndicator?b:y})),h.length>0&&h.map(t=>o.createElement(a4.Y,{key:t.id,isDragTarget:p,onTargetDragEnter:()=>f(t.id),onTargetDragQuadrantUpdate:g,onTargetDragLeave:()=>E(t.id),onTargetDrop:()=>v(t.id),style:{position:"relative"}},o.createElement("div",{className:rV},o.createElement("div",{className:d===t.id&&u?b:y})),o.createElement(a8.BS,{key:`folder-${t.id}`,folder:t,team:e.team,disambiguationFolders:e.sectionType===rU.USER_FOLDERS?h:void 0,renamingNavFolderWithId:c,isSharedProject:e.sectionType===rU.USER_FOLDERS}))),o.createElement("div",{className:"nav_section--folderSeparatorAfter--V0NpT"},o.createElement("div",{className:e.showAppendIndicator&&h.length>0?b:y})))}function rY(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.dragState),r=(0,j.FC)(),n=(0,$.iZ)(),[l,i]=o.useState(!1),[c,d]=o.useState(!1);return o.createElement(a4.Y,{isDragTarget:()=>{var t,l;if(e.isEnterpriseSidenavEnabled&&(null==(t=a.data)?void 0:t.licenseGroupId)&&a.data.licenseGroupId!==(null==(l=e.licenseGroup)?void 0:l.id))return!1;if(a.type===rB.R.Folder){let t=a.data,l=rG(t,r);return!!(l===rU.USER_FOLDERS&&(0,K.S$)(t,e.team,n))||!!l&&e.acceptDropsFrom.has(l)}return!1},onTargetDragEnter:()=>{a.type===rB.R.Folder&&i(!0)},onTargetDragQuadrantUpdate:e=>{d(e.upper)},onTargetDragLeave:()=>{i(!1)},onTargetDrop:()=>{a.type===rB.R.Folder&&e.team&&rW(e,t,r,a.data,e.sectionType,e.team,null,c),i(!1)}},o.createElement("div",{className:"nav_section--section--CCwMs sidebar--section--COZVK"},e.sectionType===rU.USER_FOLDERS&&o.createElement(o.Fragment,null,o.createElement(rz,{showPrependIndicator:l&&c,showAppendIndicator:l&&!c,...e})),e.sectionType===rU.TEAM&&o.createElement(o.Fragment,null,o.createElement(rR,{team:e.team,projects:e.projects,onboardingKey:e.onboardingKey}),o.createElement(rz,{showPrependIndicator:l&&c,showAppendIndicator:l&&!c,...e}))))}function rK(e){let t=e.projectsByTeam[rY.USER_FOLDERS]||[];return o.createElement(rY,{sectionType:rU.USER_FOLDERS,team:null,projects:t,acceptDropsFrom:new Set([rU.USER_FOLDERS]),sidebarData:e.sidebarData})}function rQ(e){let t=e.team.id,a=e.projectsByTeam[t]||[];return o.createElement(rY,{sectionType:rU.TEAM,acceptDropsFrom:new Set([rU.TEAM]),projects:a,onboardingKey:e.onboardingKey,team:e.team,sidebarData:e.sidebarData,licenseGroup:e.licenseGroup})}rY.USER_FOLDERS="USER_FOLDERS",rY.USER_DRAFTS="USER_DRAFTS";var rq=a(564780),rX=a(225868),rJ=a(270056),rZ=a(643067),r0=a(832568),r1=a(711525),r2=a(112967),r4=a(428322),r8=a(616705),r3=a(309798),r5=a(984968),r9=a(489291),r6=a(566067),r7=a(455566),ne=a(444173),nt=a(51924);function na(e){let t=(0,s.d4)(e=>e.teams),a=(0,s.d4)(e=>e.roles.byTeamId),r=(0,s.d4)(e=>e.user),n=(0,r3.f)("team_creation_speed_bump_dismissed"),l=(0,E.I7)("starter_team_loophole_experiment_m0"),i=(0,E.I7)("starter_team_loophole_experiment_m1");return o.createElement("div",{className:"new_team_link--createNewTeamLink--ESx5o","data-onboarding-key":r8.CREATE_TEAM_ONBOARDING_KEY},o.createElement(nn,{currentOrgId:e.currentOrgId,onClick:()=>{if(e.currentOrgId)e.dispatch(R.to({type:r6.Uc,data:{}}));else{let o=()=>{e.dispatch(L.Dw({}))};(null==r?void 0:r.id)&&!n&&(0,r5.Ct)(r.id,Object.values(t),a)&&!(0,M.e5)({userId:r.id,teams:Object.values(t),rolesByTeamId:a,getM0Config:l.getConfig,getM1Config:i.getConfig})?e.dispatch(R.to({type:r7.FK,data:{user:r,startTeamCreation:o,editorType:null}})):o()}},onMouseEnter:e.onMouseEnter,dimmed:e.disabled??!1,"data-tooltip-type":e.tooltipText?eB.Ib.TEXT:void 0,"data-tooltip":e.tooltipText,"data-tooltip-show-immediately":!0,disabled:e.disabled},(0,S.tx)("sidebar.create_new_team")))}function nr(e){var t;let a=(0,s.wA)();return o.createElement("div",{className:"new_team_link--teamsListEmptyState--jFJWC sidebar--sidebarSection---c9jn text--fontPos11--2LvXf text--_fontBase--QdLsd"},o.createElement(es.B,{className:"new_team_link--icon--UYAD3 sidebar--icon--wMzUY",svg:nt.A}),o.createElement("div",{className:e.org&&(0,rg.D6)(e.org.id)?"new_team_link--teamsListEmptyStateContentCustomSections--gJW6m sidebar--sectionContentCustomSections--wI9mZ":"new_team_link--teamsListEmptyStateContent--80VyB sidebar--sectionContent--NHX7b"},(0,S.tx)("sidebar.your_teams_and_favorited_projects_will_appear_here"),(null==(t=e.org)?void 0:t.id)&&!e.isOrgGuest&&o.createElement("a",{className:"new_team_link--blueLink--HG5xD blue_link--blueLink--9rlnd",onClick:()=>{e.org&&a(A.$T({view:"org",orgId:e.org.id,orgViewTab:r9.X.HOME}))}},(0,S.tx)("sidebar.browse_org",{orgName:e.org.name}))))}let nn=(0,O.tf)(function(e){let{currentOrgId:t,children:a,onClick:r,dimmed:n,disabled:l,...i}=e;return o.createElement("div",{className:l?"new_team_link--navLinkDisabled--nWmFJ new_team_link--_navLink--rQ9f- sidebar--sidebarSection---c9jn text--fontPos11--2LvXf text--_fontBase--QdLsd":n?"new_team_link--navLinkDimmed--SNDWb new_team_link--_navLink--rQ9f- sidebar--sidebarSection---c9jn text--fontPos11--2LvXf text--_fontBase--QdLsd":"new_team_link--navLink--wO1bP new_team_link--_navLink--rQ9f- sidebar--sidebarSection---c9jn text--fontPos11--2LvXf text--_fontBase--QdLsd",onMouseDown:l?void 0:r,...i},o.createElement(rs.Z,{icon:o.createElement(es.B,{"data-onboarding-key":"new-team-icon",className:ef.cx.colorIcon.$,svg:ne.A}),text:o.createElement(o.Fragment,null,a)}))});var nl=a(935938);function ni(){let e=(0,s.wA)(),t=(0,ry.z3)();return o.createElement(rs.Z,{onClick:()=>{e(A.$T({view:"recentsAndSharing",tab:nl.G.RECENTLY_VIEWED})),e(A.Oe({clickedResourceType:"recentsAndSharing"}))},isSelected:"recentFiles"===t||"recentsAndSharing"===t,icon:o.createElement(re.In,{icon:"recent-16"}),text:o.createElement(ev.E,{truncate:!0},(0,S.tx)("sidebar.recents"))})}var no=a(54552),ns=a(6949),nc=a(837502),nd=a(207286),nm=a(578585),nu=a(753757),n_=a(698812),np=a(860529),nf=a(186828),ng=a(155367),nE=a(352898);let nv="admin_settings_link--yellowIcon--xqAn1";var nh=a(612325),ny=(e=>(e.WARNING="warning",e.NOTICE="notice",e))(ny||{});function nb(e){var t,a,r;let n;let l=(0,s.wA)(),i=e.orgUser.permission===z._D.ADMIN,c=(0,n_.RG)(),d=(0,n_.MX)(),{groupsUserIsAdminOf:m}=(0,n_.EQ)(d,e.orgUser.user_id,!i),u=(0,nd.Xf)(e.org.id),_="loaded"===u.status?(null==(t=u.data)?void 0:t.invoices)??[]:void 0;o.useEffect(()=>{l(nm.Jt({forceRefetch:!1}))},[l,e.org.id]);let{groupsToReview:p}=(0,n_.Cz)(m,_),f=null==(a=m[0])?void 0:a.id,g=e.org.bigma_enabled&&c&&!!f,E=(0,G.NJ)(e.org.id).data??[],v=e.org.bigma_enabled&&E.length>0,h=i||g||v,y=(0,rt.ZY)({isIntendedAudience:e.org.bigma_enabled&&!i}),b=(0,rr.Rs)(rl.Wt6,{orgId:e.org.id},{enabled:i}),w="loaded"===b.status?null==(r=b.data.org)?void 0:r.taxIdVerificationStatus:void 0;if(!h)return null;let T=function(e){switch(e.view){case"orgAdminSettings":case"billingGroupDashboard":return!0;case"licenseGroup":return e.subView===nf.GN.ADMIN;case"workspace":return e.subView===nE.V0.ADMIN;default:return!1}}(e.selectedView);return i?n=o.createElement(nN,{planType:rt.ps.ORG,planId:e.org.id,orgUser:e.orgUser,licenseGroups:d,taxIdVerificationStatus:w,invoices:_,isSelected:T}):g&&(n=y?o.createElement(nx,{invoices:_,groupsUserIsAdminOf:m,isSelected:T,planId:e.org.id,planType:rt.ps.ORG}):o.createElement(nI,{invoices:_,showTooltip:!0,org:e.org,orgUser:e.orgUser})),o.createElement(rs.Z,{icon:o.createElement(re.In,{icon:"settings-16"}),text:o.createElement(ev.E,{truncate:!0},(0,S.tx)("sidebar.admin_dashboard")),isSelected:T,onClick:()=>{let e=_&&(0,tZ.hX)(_);if(i){let e=ng.J7.DASHBOARD;l(A.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:e})),l(A.Oe({clickedResourceType:"orgAdminSettings"}))}else g?y?l(A.$T({view:"billingGroupDashboard",selectedTab:np.D.REQUESTS})):(l(A.$T({view:"licenseGroup",subView:nf.GN.ADMIN,licenseGroupId:e&&p.length>0?p[0].id:f,selectedTab:(0,nu.g)(e&&p.length>0?nf.RM.MEMBERS:nf.Uu[0])})),l(A.Oe({clickedResourceType:"licenseGroupAdminSettings"}))):v&&(l(A.$T({view:"workspace",subView:nE.V0.ADMIN,workspaceId:E[0].id,selectedTab:nE.rj[0]})),l(A.Oe({clickedResourceType:"workspaceAdminSettings"})))},badge:n,dataTestId:"admin-settings-link"})}function nw(e,t,a,r,n,l){if(!r||!(0,tZ.i0)(r))return null;if(l){if(!n)return null;let{groupsUserIsAdminOf:e}=(0,n_.EQ)(a,t.user_id,l),{groupsToReview:i}=(0,n_.Cz)(e,r);if(0===i.length)return null}return{tooltipData:(0,tZ.XL)(e,r,l),iconStyle:(0,tZ.m3)(r)?"admin_settings_link--redIcon--EqNI8":nv,iconType:(0,tZ.m3)(r)?"warning":"notice"}}function nT(e){return e!==z.kI.UNVERIFIED?null:{tooltipData:(0,S.t)("billing_status.tax_id.invalid"),iconStyle:nv,iconType:"notice"}}function nI(e){var t;let a=(0,s.wA)(),r=(0,n_.MX)(),n=e.invoices&&(0,tZ.hX)(e.invoices),l=e.org.bigma_enabled&&e.orgUser.license_admin&&e.orgUser.permission!==z._D.ADMIN,i=(0,rr.Rs)(rl.Wt6,{orgId:e.org.id}),c="loaded"===i.status?null==(t=i.data.org)?void 0:t.taxIdVerificationStatus:null;o.useEffect(()=>{n&&l&&a(nm.Jt({forceRefetch:!1}))},[a,e.org.id,n,l]);let d=(()=>{switch(e.highlightType){case tZ.EZ.BILLING_STATUS:return nw(e.org,e.orgUser,r,e.invoices,n,l);case tZ.EZ.TAX_ID_STATUS:return nT(c);default:return nw(e.org,e.orgUser,r,e.invoices,n,l)||nT(c)}})();if(!d)return null;let m=`${d.iconStyle} ${e.inlineIcon?"admin_settings_link--inline--0cz0V":""} ${e.alignTop?"admin_settings_link--multiLineIcon--E-mdX":""}`,u={};e.showTooltip&&(u["data-tooltip-type"]=eB.Ib.TEXT,u["data-tooltip"]=d.tooltipData,u["data-tooltip-show-below"]=!0,u["data-tooltip-timeout-delay"]=50,u["data-tooltip-max-width"]=117);let _=o.createElement(es.B,{className:`admin_settings_link--warningSvg--MK7zE ${m}`,svg:nh.A,useOriginalSrcFills_DEPRECATED:!0,...u}),p=e.showTooltip?o.createElement(a7.YR,{className:m,dataTooltipType:u["data-tooltip-type"],dataTooltip:u["data-tooltip"],dataTooltipShowBelow:u["data-tooltip-show-below"],dataTooltipTimeout:u["data-tooltip-timeout-delay"],dataTooltipMaxWidth:u["data-tooltip-max-width"]}):o.createElement(a7.YR,{className:m}),f="warning"===d.iconType?_:p;return(0,O.T8)(f,"Org Admin Billing Status Badge",{orgId:e.org.id,isCurrentUserLicenseAndNotOrgAdmin:l})}function nx(e){let t=0;if(e.invoices){let{groupsToReview:a}=(0,n_.Cz)(e.groupsUserIsAdminOf,e.invoices);a.length>0&&(t=1)}return o.createElement(ri,{isOrgAdmin:!1,isSelected:e.isSelected,planId:e.planId,planType:e.planType,billingStatusCount:t,managedBillingGroups:e.groupsUserIsAdminOf?e.groupsUserIsAdminOf.map(e=>e.id):[],taxStatusCount:void 0,isDataLoaded:void 0!==e.invoices,showDevModeOptIn:!1})}function nN(e){var t,a;let r=(0,n_.EQ)(e.licenseGroups,e.orgUser.user_id,!1).groupsUserIsAdminOf.map(e=>e.id),n=e.invoices&&(0,tZ.i0)(e.invoices)?1:0,l=(0,rr.Rs)(rl.lVt,{orgId:e.planType===rt.ps.ORG?e.planId:""},{enabled:e.planType===rt.ps.ORG}),i="loaded"===l.status,s=!!(e.planType===rt.ps.ORG&&i&&(0,tZ.CA)((null==(a=null==(t=l.data)?void 0:t.org)?void 0:a.devModeOptInPlanProperty)||null)),c=e.taxIdVerificationStatus===z.kI.UNVERIFIED?1:0;return i&&void 0!==e.taxIdVerificationStatus&&void 0!==e.invoices?o.createElement(ri,{isOrgAdmin:!0,isSelected:e.isSelected,planId:e.planId,planType:e.planType,billingStatusCount:n,managedBillingGroups:r,taxStatusCount:c,isDataLoaded:i&&void 0!==e.invoices,showDevModeOptIn:s}):null}function nC(e){let t=(0,s.d4)(e=>e.currentTeamId),a=(0,s.wA)();return t?o.createElement(rs.Z,{isSelected:e.selectedView&&"team"===e.selectedView.view,onClick:()=>{a(L.dm(t)),a(A.Oe({clickedResourceType:"allProjects"}))},"data-onboarding-key":"ALL_PROJECTS_LINK_ONBOARIND_KEY",icon:o.createElement(re.In,{icon:"grid-32"}),text:o.createElement(ev.E,{truncate:!0},(0,S.tx)("sidebar.all_projects"))}):null}function nS(e){let t=(0,s.wA)(),a=(0,ry._6)(),r="workspace"===a.view&&a.workspaceId===e.workspace.id&&a.subView===nE.V0.DIRECTORY;return o.createElement(rs.Z,{isSelected:r,onClick:()=>{t(A.$T({view:"workspace",workspaceId:e.workspace.id,selectedTab:nE.dN.TEAMS,subView:nE.V0.DIRECTORY})),t(A.Oe({clickedResourceType:"workspace",resourceIdOrKey:e.workspace.id}))},icon:o.createElement(eV.z6,{entity:e.workspace,size:16}),text:o.createElement(ev.E,{truncate:!0},e.workspace.name),"data-onboarding-key":e.dataOnboardingKey})}var nk=a(456104),nA=a(723239),nL=a(582947),nR=a(397065),nD=a(340514),nF=a(493364),nP=a(463546);let nM="seen_sidebar_workspace_link_onboarding",nO="sidebar_workspace_link_onboarding";function nB(){let e=(0,nL.r1)(nM),t=(0,aJ.md)(e),a=(0,aJ.md)(nA.Fy),{show:r,isShowing:n,complete:l}=(0,nk.e)({overlay:nP.Tp6,priority:nR.N.DEFAULT_MODAL},[t,a]);return(0,u.h)(()=>{r({canShow:(e,t)=>!e&&t})}),o.createElement(nD.rq,{isShowing:n,trackingContextName:"sidebar-workspace-link-onboarding",targetKey:nO,title:(0,S.tx)("sidebar.workspaces.onboarding_title"),description:(0,S.tx)("sidebar.workspaces.onboarding_description"),emphasized:!0,primaryCta:{label:(0,S.tx)("general.done"),ctaTrackingDescriptor:ew.c.DONE,type:"button",onClick:l},secondaryCta:{label:(0,S.tx)("general.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/7576392133527-Guide-to-workspaces",ctaTrackingDescriptor:ew.c.LEARN_MORE},userFlagOnShow:nM,onClose:l,arrowPosition:nF.F_.LEFT_TITLE,clickOutsideToHide:!0,disableHighlight:!0})}var nU=a(119735);let nV="sidebar--section--COZVK",nH="sidebar--loading--AITp2",nW="sidebar--divider--sHsz4";function nj({userStateLoaded:e,sidebarData:t}){var a,r,n,l;let i=(0,ns.a9)(),s=(0,nU.J_)();if(!i||!s())return null;if(!e)return o.createElement("div",{className:nH},o.createElement(tc.kt,null));let c=(null==(a=null==t?void 0:t.baseOrgUser)?void 0:a.permission)===z._D.GUEST,d=null==(l=null==(n=null==(r=null==t?void 0:t.baseOrgUser)?void 0:r.workspaceUsers)?void 0:n.find(e=>e.isMainWorkspace))?void 0:l.workspace;return!d||c?null:o.createElement(o.Fragment,null,o.createElement(nB,null),o.createElement(nS,{workspace:d,dataOnboardingKey:nO}))}var n$=a(171791),nG=a(666901),nz=a(47506),nY=a(919114),nK=a(858212);let nQ=(0,eU.Ju)(function(e){let t=(0,s.wA)(),a=o.createElement("span",{className:ef.cx.fontBold.$},e.sectionName);return o.createElement(ej.Rw,{onConfirm:()=>{t(no.de({sidebarSectionId:e.sectionId}))},confirmationTitle:(0,S.t)("sidebar.delete_section"),titleClass:"confirm_section_delete_modal--title--8Haoy text--fontPos11--2LvXf text--_fontBase--QdLsd",confirmText:(0,S.t)("sidebar.delete"),destructive:!0,autoFocusCta:!1},o.createElement("p",{className:"confirm_section_delete_modal--content--BToo-"},(0,S.tx)("sidebar.if_you_delete_section_the_section",{item:e.count>1?(0,S.t)("sidebar.items"):(0,S.t)("sidebar.item"),section:a,count:e.count,pronoun:e.count>1?(0,S.t)("sidebar.them"):(0,S.t)("sidebar.it")})))},"CONFIRM_SECTION_DELETE_MODAL",eU.ZU.YES);var nq=a(206074);let nX="custom-section-header-context-menu";function nJ(){let e=(0,s.d4)(e=>e.dropdownShown);return e&&(null==e?void 0:e.type)===nX?e:null}function nZ(e){let t=(0,s.wA)(),a=nJ();if(null==a)return o.createElement(o.Fragment,null);let r=()=>{0===a.data.favoritesCount?t(no.de({sidebarSectionId:a.data.customSection.id})):t((0,R.to)({type:nQ,data:{sectionId:a.data.customSection.id,sectionName:a.data.customSection.name,count:a.data.favoritesCount}}))},n=()=>{e.setRenamingSectionId(a.data.customSection.id)},l=[{displayText:(0,S.t)("sidebar.rename_section"),callback:()=>n()},{displayText:(0,S.t)("sidebar.delete_section"),callback:()=>r()}];return o.createElement(nq.j,{depth:0,items:l,lean:"right",leanPadding:0,dispatch:t,minWidth:162,parentRect:a.data.targetRect,onSelectItem:(e,a)=>{e.callback&&e.callback("",null,t)},showPoint:!a.data.isFromRightClick,hidePointWhenContentOffScreen:!0})}let n0="favorited_section--emojiIcon--pDnB-",n1="favorited_section--favoriteStar--2R5nb",n2="favorited_section--isDragTarget--dQd5-",n4="favorited_section--previewContainer--4E-dF _overlayBase--_overlayBase--Rkj8l",n8="favorited_section--previewContainerNoDelay--buvES favorited_section--previewContainer--4E-dF _overlayBase--_overlayBase--Rkj8l",n3="favorited_section--favoriteClickTarget--Z9eur",n5="favorited_section--thumbnailContainer--C4PE-",n9="favorited_section--lowerContainer--9gDfQ",n6="favorited_section--lowerPartTitles--44fhW",n7="favorited_section--title--bWf4x ellipsis--ellipsis--Tjyfa text--fontPos13--xW8hS text--_fontBase--QdLsd",le="favorited_section--editorTypeIndicator--OmyvY",lt="favorited_section--svgContainer--vwRae",la="favorited_section--icon--E7nFx";function lr(e){let t=(0,s.wA)(),a=(0,s.d4)(rZ.wA);if(!a)return null;let r=o.createElement("span",{role:"link",tabIndex:0,onClick:()=>{t(A.$T({view:"org",orgId:a.id,orgViewTab:r9.X.HOME}))},className:"favorited_section--browseOrgLink--BvX0-"},(0,S.tx)("sidebar.browse_org_custom_sections"));return o.createElement("div",{className:"favorited_section--customSectionsEmptyStateContent--Z6jKH"},(0,S.tx)("sidebar.just_click_the_on_files_projects_and_teams_to_add_and_organize_them_here"),r)}function ln(e){return o.createElement("div",{className:"favorited_section--customSectionsEmptyState--JcvfB favorited_section--customSectionsEmptyStateContent--Z6jKH"},o.createElement(lr,{setNewCustomSectionIndex:e.setNewCustomSectionIndex}))}var ll=a(722138),li=a(358145),lo=a(786013),ls=a(823810),lc=a(391388);function ld(e,t){return e===lo.C7b.CAN_VIEW?function(e){let t=(0,j.FC)();return(0,o.useMemo)(()=>lc.Qw.loaded((0,q.canViewFolder_DEPRECATED)(e,t)),[e,t])}(t):lc.Qw.loaded(!1)}var lm=a(286098),lu=a(970516),l_=a(944682),lp=a(76320),lf=a(782656),lg=a(128751),lE=a(355513),lv=a(67085),lh=a(477782),ly=a(499743),lb=a(132135),lw=a(892542),lT=a(623746),lI=a(691205),lx=a(421234),lN=a(451e3),lC=a(851363),lS=a(378356),lk=a(878679),lA=a(714728),lL=(e=>(e.FAVORITED_PROTOTYPE_CONTEXT_MENU="favorited-prototype-context-menu",e.FAVORITED_FILE_CONTEXT_MENU="favorited-file-context-menu",e.FAVORITED_PROJECT_CONTEXT_MENU="favorited-project-context-menu",e.FAVORITED_TEAM_CONTEXT_MENU="favorited-team-context-menu",e.FAVORITED_WORKSPACE_CONTEXT_MENU="favorited-workspace-context-menu",e))(lL||{});let lR="sidebar context menu";function lD(e,t,a,r){if(t.stopPropagation(),t.preventDefault(),"file"in e&&e.file){let t=e.file;a(l_.yJ({file:{key:t.key,team_id:t.teamId,file_repo_id:t.fileRepoId,folder_id:t.folderId}}));let r=(0,lm.QJ)(e);r&&a(lf.bE({repo:r}))}a(A.j7({type:r,data:{resource:{...e},targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1}}}))}let lF=(e,t,a,r={})=>e?[{displayText:t?t():"",callback:a,...r}]:[],lP=[{displayText:"",separator:!0}];function lM({dropdownShown:e}){var t,a,r,n,l;let i=(0,s.wA)(),m=(0,s.d4)(e=>e.selectedView),u=(0,s.d4)(e=>{var t;return null==(t=e.user)?void 0:t.personal_drafts_folder_id}),p=(0,ly.p)(),f=(0,_.kc)().ps_benchmark,g="favorited-project-context-menu"===e.type?null==(t=e.data.resource.project)?void 0:t.id:null==(r=null==(a=e.data.resource)?void 0:a.file)?void 0:r.folderId,E=e.data.resource,v=f&&!!u&&(null==(n=null==E?void 0:E.file)?void 0:n.folderId)===u,h=ld(lo.C7b.CAN_VIEW,g).unwrapOr(!1),y=!v&&h,b="favorited-prototype-context-menu"===e.type,w=(0,ls.As)((null==(l=null==E?void 0:E.file)?void 0:l.key)??""),T=o.useMemo(()=>{var t;return"favorited-file-context-menu"===e.type&&!!(null==(t=w.unwrapOr(null))?void 0:t.canDelete)},[e.type,w]),I=[...lF(!0,()=>(0,S.t)("tile.dropdown.open"),()=>{(0,ll.DF)("open"),"favorited-file-context-menu"===e.type?((0,ll.LP)(E.file.key,z.bk.FILE,E.sidebarSectionId,lR,E.file.editorType),(0,lE.Tq)(i,{key:E.file.key,editor_type:E.file.editorType})):"favorited-prototype-context-menu"===e.type?((0,ll.LP)(E.prototype.fileKey,z.bk.PROTOTYPE,E.sidebarSectionId,lR,"design"),(0,rg.FS)(i,E)):"favorited-project-context-menu"===e.type&&(i(L.kg({clickedResourceType:"folder",resourceIdOrKey:E.project.id})),(0,lE.U8)(E.project.id,i))}),...lF(!d.eD&&!(0,c.ce)(),()=>(0,S.t)("tile.dropdown.open_new_tab"),()=>{if("favorited-file-context-menu"===e.type)(0,lE.nz)((0,lb.jN)({...E,allowDefaulting:!0}),E.file.key,m,i),(0,ll.LP)(E.file.key,z.bk.FILE,E.sidebarSectionId,lR,E.file.editorType),(0,ll.DF)("open_in_new_tab");else if("favorited-prototype-context-menu"===e.type){let e=E.prototype.url;(0,lE.D4)(e,E.prototype.fileKey,E.prototype.file.pageId,m),(0,ll.LP)(E.prototype.fileKey,z.bk.PROTOTYPE,E.sidebarSectionId,lR,"design"),(0,ll.DF)("open_in_new_tab")}else"favorited-project-context-menu"===e.type&&(i(L.kg({clickedResourceType:"folder",resourceIdOrKey:E.project.id})),(0,lE.Wq)((0,lN.EE)(E.project.id,E.project.org_id??null),i),(0,ll.LP)(E.project.id,z.bk.FOLDER,E.sidebarSectionId,lR,"design"))}),...lP,...lF(!0,()=>(0,S.t)("tile.dropdown.copy_link"),()=>{(0,ll.DF)("copy_link"),"favorited-file-context-menu"===e.type?i(l_.S({fileKey:E.file.key,url:(0,lb.jN)({file:E.file,attributionContext:(0,lw.b)(p,lw.d.FAVORITED_FILE_CONTEXT_MENU),allowDefaulting:!0}),source:lw.d.FAVORITED_FILE_CONTEXT_MENU})):"favorited-prototype-context-menu"===e.type?i(lu.S({url:E.prototype.url})):"favorited-project-context-menu"===e.type&&i(lu.S({url:(0,lN.EE)(E.project.id,E.project.org_id??null)}))}),...lF(!b&&!v,()=>(0,S.t)("sidebar.share"),()=>{(0,ll.DF)("share"),"favorited-file-context-menu"===e.type?i((0,R.to)({type:lk.g_,data:{fileKey:E.file.key,source:lv.nk.fileBrowserFavoritedContextMenu}})):"favorited-project-context-menu"===e.type&&i((0,R.to)({type:lA.W,data:{folderId:E.project.id}}))}),...lF(y,()=>(0,S.t)("tile.dropdown.show_in_project"),()=>{var t;if((0,ll.DF)("show_in_project"),"favorited-file-context-menu"===e.type&&(null==(t=e.data.resource.file)?void 0:t.folderId)!=null){if(i(A.$T({view:"folder",folderId:e.data.resource.file.folderId})),i(lg.an()),e.data.resource.file.repo){let t=(0,lm.QJ)(e.data.resource);null!=t&&i(lg.y$({type:lS.F.REPOS,tiles:[{type:lh.nb.REPO,repo:t,branches:[],selectedBranchKey:""}]}))}else i(lg.y$({type:lS.F.FILES,tiles:[{type:lh.nb.FILE,file:e.data.resource.file}]}))}},{disabled:!y}),...lP,...lF(!b,()=>(0,S.t)("tile.favoriting.remove_from_favorites"),()=>{"favorited-prototype-context-menu"===e.type&&E.prototype?i(no.X7({prototype:{file_key:E.prototype.fileKey,page_id:E.prototype.pageId},entrypoint:"sidebar",favoriteId:E.id})):"favorited-file-context-menu"===e.type&&E.file?i(no.qP({file:{key:E.file.key,editor_type:E.file.editorType.toString()??void 0},entrypoint:"sidebar",favoriteId:E.id})):"favorited-project-context-menu"===e.type&&E.project&&i(rJ.ZJ({folderId:E.resourceId,folderName:E.project.path,teamId:E.project.teamId,isSubscribed:!1}))}),...lP,...lF(!b&&!v,()=>(0,S.t)("sidebar.delete"),()=>{var t;if((0,ll.DF)("delete"),"favorited-file-context-menu"===e.type){let e=(null==(t=w.unwrapOr(null))?void 0:t.canDelete)?{[E.file.key]:E.file}:{};i(lp.U1({filesByKey:e}))}},{disabled:!T})];return o.createElement(nq.j,{items:I,parentRect:e.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorited-resource-dropdown",dispatch:i,onSelectItem:(e,t)=>{var a;null==(a=e.callback)||a.call(e,"",{},i,t)}})}function lO(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.selectedView),r=(0,ly.p)(),n=e.favoritedFile.file,l=lI.M4.useFile(null==n?void 0:n.key).data,i=ld(lo.C7b.CAN_VIEW,e.folderId).unwrapOr(!1),m=(0,s.d4)(e=>e.dropdownShown);if(null==m||null==n)return null;let u="favorited-file-context-menu"===m.type,_=[...lF(!0,()=>(0,S.t)("tile.dropdown.open"),()=>{var a;(0,ll.DF)("open"),(0,ll.LP)(n.key,z.bk.FILE,(null==(a=e.favoritedFile)?void 0:a.sidebarSectionId)??void 0,lR,n.editorType??void 0),(0,lE.Tq)(t,{key:n.key,editor_type:n.editorType})}),...lF(!d.eD&&!(0,c.ce)(),()=>(0,S.t)("tile.dropdown.open_new_tab"),()=>{var r;(0,lE.nz)((0,lb.jN)({file:n,allowDefaulting:!0}),n.key,a,t),(0,ll.LP)(n.key,z.bk.FILE,(null==(r=e.favoritedFile)?void 0:r.sidebarSectionId)??void 0,lR,n.editorType),(0,ll.DF)("open_in_new_tab")}),...lP,...e.organizeFavoriteOptions,...lP,...lF(!0,()=>(0,S.t)("file_browser.copy_link"),()=>{t(l_.S({fileKey:n.key,url:(0,lb.jN)({file:n,attributionContext:(0,lw.b)(r,lw.d.FAVORITED_FILE_CONTEXT_MENU),allowDefaulting:!0}),source:lw.d.FAVORITED_FILE_CONTEXT_MENU})),t(A.oB())}),...lF(!0,()=>(0,S.t)("sidebar.share"),()=>{(0,ll.DF)("share"),t((0,R.to)({type:lk.g_,data:{fileKey:n.key,source:lv.nk.fileBrowserFavoritedContextMenu}}))}),...lF(!0,()=>(0,S.t)("tile.dropdown.show_in_project"),()=>{if((0,ll.DF)("show_in_project"),t(A.$T({view:"folder",folderId:e.folderId})),t(lg.an()),n.fileRepoId){let a=(0,lm.QJ)(e.favoritedFile);null!=a&&t(lg.y$({type:lS.F.REPOS,tiles:[{type:lh.nb.REPO,repo:a,branches:[],selectedBranchKey:""}]}))}else{if(!l)return;t(lg.y$({type:lS.F.FILES,tiles:[{type:lh.nb.FILE,file:l}]}))}},{disabled:!(u&&i)})];return o.createElement(nq.j,{items:_,parentRect:m.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorite-file-dropdown",dispatch:t,onSelectItem:(e,a)=>{var r;null==(r=e.callback)||r.call(e,"",{},t,a)}})}function lB(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.dropdownShown);if(null==a)return null;let r=[...e.organizeFavoriteOptions,...lP,...lF(!0,()=>(0,S.t)("file_browser.copy_link_to_team"),()=>{let a=(0,lC.bL)(e.teamId,e.orgId);t(lu.S({url:a})),t(A.oB())})];return o.createElement(nq.j,{items:r,parentRect:a.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorite-file-dropdown",dispatch:t,onSelectItem:(e,a)=>{var r;null==(r=e.callback)||r.call(e,"",{},t,a)}})}function lU(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.dropdownShown);if(null==a)return null;let r=[...e.organizeFavoriteOptions,...lP,...lF(null!==e.orgId,()=>(0,S.t)("file_browser.copy_link_to_workspace"),()=>{if(null!==e.orgId){let a=(0,lx.fO)(e.workspaceId,e.orgId);t(lu.S({url:a}))}t(A.oB())})];return o.createElement(nq.j,{items:r,parentRect:a.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorited-resource-dropdown",dispatch:t,onSelectItem:(e,a)=>{var r;null==(r=e.callback)||r.call(e,"",{},t,a)}})}function lV(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.dropdownShown);if(null==a)return null;let r=[...e.organizeFavoriteOptions,...lP,...lF(!0,()=>(0,S.t)("file_browser.copy_link_to_project"),()=>{let a=(0,lN.EE)(e.projectId,e.orgId);t(lu.S({url:a})),t(A.oB())})];return o.createElement(nq.j,{items:r,parentRect:a.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorited-resource-dropdown",dispatch:t,onSelectItem:(e,a)=>{var r;null==(r=e.callback)||r.call(e,"",{},t,a)}})}function lH(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.dropdownShown);if(null==a)return null;let r=[...e.organizeFavoriteOptions,...lP,...lF(!0,()=>(0,S.t)("file_browser.copy_link"),()=>{var a;let r=(0,lT._3)(e.prototype.fileKey,null==(a=e.prototype.file)?void 0:a.name,e.prototype.pageId);t(lu.S({url:r})),t(A.oB())})];return o.createElement(nq.j,{items:r,parentRect:a.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorited-resource-dropdown",dispatch:t,onSelectItem:(e,a)=>{var r;null==(r=e.callback)||r.call(e,"",{},t,a)}})}var lW=a(313231),lj=a(575675);function l$(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.currentUserOrgId),r=(0,s.d4)(e=>e.currentTeamId),n=(0,s.d4)(e=>e.favorites.collapsedCustomSections),l=e.favorite.team,i=(0,j.FC)(),c=(0,s.d4)(e=>e.dropdownShown),d=(0,s.d4)(e=>e.avatarEditorState),u=o.useMemo(()=>c&&c.type===lL.FAVORITED_TEAM_CONTEXT_MENU&&c.data.teamId===(null==l?void 0:l.id),[c,null==l?void 0:l.id]),_=o.useCallback((e,a)=>{var r;(0,ll.LP)(null==(r=a.team)?void 0:r.id,z.bk.TEAM,a.sidebarSectionId??void 0,ll.vg);let n=(0,lC.bL)(a.resourceId,a.orgId);(0,a1.oJ)(e)?(m.Ay.redirect(n,"_blank"),e.stopPropagation()):(t(L.dm(a.resourceId)),e.preventDefault())},[t]),p=o.useCallback(e=>{if(!l)return;e.stopPropagation(),e.preventDefault();let a={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};t(A.j7({type:lL.FAVORITED_TEAM_CONTEXT_MENU,data:{teamId:l.id,targetRect:a}}))},[t,l]);if(!a||null===l)return o.createElement(o.Fragment,null);let f=(0,q.canAdminTeam)(l.id,i),g=(0,lW.o)({dispatch:t,currentOrgId:a,currentTeamId:r,collapsedCustomSections:n,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:z.bk.TEAM,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,updateFavorite:(a,r)=>{let n={entrypoint:"sidebar",sectionId:r,team:{id:l.id},favoriteId:e.favorite.id,resourceType:z.bk.TEAM};a?t(no.V1(n)):t(no.ox(n))}});return o.createElement(o.Fragment,null,o.createElement(rs.Z,{isSelected:e.isSelected,rowClassName:n3,onClick:t=>_(t,e.favorite),showGrabber:e.showGrabber,onContextMenu:p,icon:l.imgUrl?o.createElement("div",{className:ef.cx.colorIcon.$},o.createElement(ed.nl,{shape:"ROUNDED_SQUARE",size:{imgSize:ed.Pf.SMALL,fallbackSize:ed.Pf.SMALL},fallbackDisplay:a5.U.HIDDEN,team:{...l,imgUrl:l.imgUrl},fallbackSvg:lj.A})):o.createElement(re.In,{icon:"team-16"}),text:o.createElement(ev.E,{truncate:!0},l.name)}),u&&o.createElement(lB,{teamId:l.id,orgId:l.orgId,organizeFavoriteOptions:g}),f&&o.createElement("span",{className:"favorited_section--hiddenEditableAvatar--MuzYX"},o.createElement(rx.ER,{entity:{...l,imgUrl:l.imgUrl||void 0},entityType:rI.ck.TEAM,avatarEditorState:d,size:14,dispatch:t})))}var lG=a(93536),lz=a(331737),lY=a(386909),lK=a(487342),lQ=a(875847),lq=a(112235);function lX(e){switch(e.iconType){case ax.y1.DESIGN:case ax.y1.DESIGN_AND_DEV_MODE:case ax.y1.SLIDES:case ax.y1.SLIDES_TEMPLATE:return o.createElement(ax.oS,{type:e.iconType,size:ax.LE.SMALL});case ax.y1.SITES:return o.createElement(re.In,{icon:"file-design-16-file-type"});case ax.y1.WHITEBOARD:return o.createElement(re.In,{icon:"file-figjam-16-file-type"});case ax.y1.DEV_MODE:case ax.y1.DEV_MODE_SELECTED:case ax.y1.PROTOTYPE:case ax.y1.PUBLISHED:return o.createElement(ax.oS,{type:e.iconType,size:ax.LE.SMALL});case ax.y1.TEMPLATE:return o.createElement(re.In,{icon:"file-team-template-16-file-type"});case ax.y1.REPO:return o.createElement(re.In,{icon:"file-design-branch-16-file-type"});default:(0,el.xb)(e.iconType)}}let lJ=e=>o.createElement("div",{className:n0},e);function lZ(e){var t,a,r,n,l;let i=(0,s.wA)(),c=(0,s.d4)(e=>e.currentUserOrgId),d=(0,s.d4)(e=>e.currentTeamId),u=(0,s.d4)(e=>e.favorites.collapsedCustomSections),p=(0,s.d4)(e=>e.dropdownShown),f=e.favorite.file,g=lI.M4.useFile(null==f?void 0:f.key).data,E=(0,lq.p)(!0),v=null!==c,h=(0,_.kc)().ps_benchmark&&d,y=o.useMemo(()=>p&&p.type===lL.FAVORITED_FILE_CONTEXT_MENU&&p.data.fileKey===(null==f?void 0:f.key),[p,f]),b=o.useMemo(()=>p&&p.type===nX,[p]),w=o.useCallback(e=>{if(!f)return;g||i(l_.yJ({file:{key:f.key,team_id:f.teamId,file_repo_id:f.fileRepoId,folder_id:f.folderId}})),e.stopPropagation(),e.preventDefault();let t={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};i(A.j7({type:lL.FAVORITED_FILE_CONTEXT_MENU,data:{fileKey:f.key,targetRect:t}}))},[i,f,g]);if(null===f)return o.createElement(o.Fragment,null);let T=(0,lb.jN)({file:f,allowDefaulting:!0}),I=(e,t)=>{var a,r,n;(0,ll.LP)(null==(a=t.file)?void 0:a.key,z.bk.FILE,t.sidebarSectionId??void 0,ll.vg,(null==(r=t.file)?void 0:r.editorType)??void 0),(0,a1.oJ)(e)?(i(L.UN({fileKey:(null==(n=t.file)?void 0:n.key)??"",entrypoint:ll.vg})),e.stopPropagation()):e.preventDefault(),t.file&&(m.Ay.redirect(T,"_blank"),i(L.UN({fileKey:t.file.key,entrypoint:ll.vg})))},x=()=>{null!==f&&i(no.qP({file:{key:f.key,editor_type:f.editorType??z._Y.DESIGN},repoId:f.fileRepoId??void 0,entrypoint:"sidebar",favoriteId:e.favorite.id}))},N=(0,lW.o)({dispatch:i,currentOrgId:c,currentTeamId:d,collapsedCustomSections:u,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:z.bk.FILE,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,updateFavorite:(t,a)=>{if(t&&g){let t={entrypoint:"sidebar",sectionId:a,favoriteId:e.favorite.id,resourceType:z.bk.FILE};i(no.V1(t))}else t||null===f||x()}}),C=null==f?void 0:f.name,k=(0,lK.AE)(C),R=E(e.favorite.file),D=k?lJ(k):o.createElement(lX,{iconType:R}),F=k?(0,lK.Nn)(C,k):C,P=null==(a=null==(t=e.favorite.file)?void 0:t.project)?void 0:a.path,M=(0,lQ.S)(P),O=M?n7:"favorited_section--titleWithoutSubtitle--BXdOW ellipsis--ellipsis--Tjyfa text--fontPos13--xW8hS text--_fontBase--QdLsd";return o.createElement(o.Fragment,null,o.createElement(rs.Z,{isSelected:e.isSelected,rowClassName:n3,showGrabber:e.showGrabber,onContextMenu:v||h?w:t=>{lD(e.favorite,t,i,lL.FAVORITED_FILE_CONTEXT_MENU)},onClick:t=>I(t,e.favorite),icon:D,text:""!==F?o.createElement(ev.E,{truncate:!0,showTooltipWhenTruncated:!1},F):o.createElement(ev.E,{truncate:!0},(0,S.tx)((null==(r=e.favorite.file)?void 0:r.editorType)==="whiteboard"?"sidebar.fig_jam_file":(null==(n=e.favorite.file)?void 0:n.editorType)==="slides"?"sidebar.slides_file":"sidebar.design_file")),badge:e.isHover&&!(v||h)?o.createElement("div",{className:n1},o.createElement(lY.r,{favoriteType:z.bk.FILE,resourceId:e.favorite.resourceId,favoriteId:e.favorite.id,size:lY.m.MEDIUM,setFavorite:x,orgId:e.favorite.orgId})):void 0,isFavoritesToMove:e.isFavoritesToMove}),!y&&!b&&o.createElement("div",{className:e.showPreviewDelay?n4:n8,style:{transform:`translateY(${-e.previewYOffset}px)`}},o.createElement("div",{className:n5},o.createElement(lz.NM,{editor_type:f.editorType,client_meta:(0,_.kc)().thumbnail_lg_client_meta?f.checkpointClientMeta||null:f.clientMeta,isLocked:!!f.hasFileLinkPassword,thumbnail_url:f.thumbnailUrl,thumbnailGuid:f.thumbnailGuid,noBorder:!0})),o.createElement("div",{className:n9},o.createElement(ax.oS,{svgOptions:{id:"sidebar-thumbnail"},className:le,type:R}),o.createElement("div",{className:n6},o.createElement("div",{className:O},null==(l=e.favorite.file)?void 0:l.name),M&&o.createElement("div",{className:"favorited_section--subtitle--sQ1zI ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},M)))),(v||h)&&y&&(null==f?void 0:f.folderId)&&o.createElement(lO,{favoritedFile:e.favorite,folderId:f.folderId,organizeFavoriteOptions:N}))}let l0=e=>o.createElement("div",{className:n0},e);function l1(e){let t=(0,s.wA)(),a=e.favorite.project,r=(0,s.d4)(e=>e.currentTeamId),n=(0,s.d4)(e=>e.currentUserOrgId),l=(0,s.d4)(e=>e.favorites.collapsedCustomSections),i=(0,nK.S)(),c=(0,s.d4)(e=>e.dropdownShown),d=o.useMemo(()=>c&&c.type===lL.FAVORITED_PROJECT_CONTEXT_MENU&&c.data.projectId===(null==a?void 0:a.id),[c,a]),m=o.useCallback(e=>{if(!a)return;e.stopPropagation(),e.preventDefault();let r={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};t(A.j7({type:lL.FAVORITED_PROJECT_CONTEXT_MENU,data:{projectId:a.id,targetRect:r}}))},[t,a]),u=o.useCallback((e,a)=>{var r;(0,ll.LP)(null==(r=a.project)?void 0:r.id,z.bk.FOLDER,a.sidebarSectionId??void 0,ll.vg),t(L.gN(a.resourceId))},[t]);if(!i||null==a)return null;let _=(0,lW.o)({dispatch:t,currentOrgId:n,currentTeamId:r,collapsedCustomSections:l,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:z.bk.FOLDER,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,updateFavorite:(r,n)=>{let l={entrypoint:"sidebar",sectionId:n,folder:a,favoriteId:e.favorite.id};r?t(no.Mv(l)):t(no.jv(l))}}),p=(0,lK.AE)(a.path),f=p?(0,lK.Nn)(a.path,p):a.path;return o.createElement(o.Fragment,null,o.createElement(rs.Z,{rowClassName:n3,onContextMenu:m,isSelected:e.isSelected,onClick:t=>u(t,e.favorite),icon:p?o.createElement("div",null,l0(p)):o.createElement(re.In,{icon:"folder-16"}),showGrabber:e.showGrabber,text:o.createElement(ev.E,{truncate:!0},f),isFavoritesToMove:e.isFavoritesToMove}),d&&o.createElement(lV,{projectId:a.id,orgId:a.orgId,organizeFavoriteOptions:_}))}var l2=a(102504),l4=a(869381);function l8(e){return o.createElement(l2.V,{thumbnailUrl:e.thumbnailUrl,thumbnailType:l4.F.PROTOTYPE,isLockedThumbnail:e.isLocked,noBorder:e.noBorder,borderRadius:e.borderRadius,size:e.size})}let l3=o.createElement(ax.oS,{type:ax.y1.PROTOTYPE,size:ax.LE.SMALL});function l5(e){var t,a,r,n,l;let i=(0,s.wA)(),c=(0,s.d4)(e=>e.currentTeamId),d=(0,s.d4)(e=>e.currentUserOrgId),u=(0,s.d4)(e=>e.favorites.collapsedCustomSections),_=(0,s.d4)(e=>e.dropdownShown),p=o.useMemo(()=>{var t;return _&&_.type===lL.FAVORITED_PROTOTYPE_CONTEXT_MENU&&_.data.resource.prototype.id===(null==(t=e.favorite.prototype)?void 0:t.id)},[_,e.favorite.prototype]),f=o.useMemo(()=>_&&_.type===nX,[_]),g=(0,nK.S)();if(null===e.favorite.prototype)return o.createElement(o.Fragment,null);let E=(0,lT._3)(e.favorite.prototype.fileKey,null==(t=e.favorite.prototype.file)?void 0:t.name,e.favorite.prototype.pageId),v=(e,t)=>{var a;if((0,ll.LP)(null==(a=t.prototype)?void 0:a.fileKey,z.bk.PROTOTYPE,t.sidebarSectionId??void 0,ll.vg),(0,a1.oJ)(e)){e.stopPropagation();return}e.preventDefault(),m.Ay.redirect(E,"_blank")},h=(t,a)=>{t||null===e.favorite.prototype||i(no.X7({prototype:{file_key:e.favorite.prototype.fileKey,page_id:e.favorite.prototype.pageId},entrypoint:"sidebar",favoriteId:a}))},y=(0,lW.o)({dispatch:i,currentOrgId:d,currentTeamId:c,collapsedCustomSections:u,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:z.bk.PROTOTYPE,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,updateFavorite:(t,a)=>{if(t){let t={entrypoint:"sidebar",sectionId:a,favoriteId:e.favorite.id,resourceType:z.bk.PROTOTYPE};i(no.V1(t))}else h(!1,e.favorite.id)}});return o.createElement(o.Fragment,null,o.createElement(rs.Z,{isSelected:e.isSelected,rowClassName:n3,onContextMenu:t=>{lD(e.favorite,t,i,lL.FAVORITED_PROTOTYPE_CONTEXT_MENU)},showGrabber:e.showGrabber,onClick:t=>v(t,e.favorite),icon:l3,text:o.createElement(ev.E,{truncate:!0,showTooltipWhenTruncated:!1},null==(a=e.favorite.prototype.file)?void 0:a.name),badge:e.isHover&&!g?o.createElement("div",{className:n1},o.createElement(lY.r,{favoriteType:z.bk.PROTOTYPE,resourceId:e.favorite.resourceId,favoriteId:e.favorite.id,size:lY.m.MEDIUM,setFavorite:h,orgId:e.favorite.orgId})):void 0,isFavoritesToMove:e.isFavoritesToMove}),!p&&!f&&o.createElement("div",{className:e.showPreviewDelay?n4:n8,style:{transform:`translateY(${-e.previewYOffset}px)`}},o.createElement("div",{className:n5},o.createElement(l8,{isLocked:null!=(r=e.favorite.prototype.file)&&!!r.hasProtoLinkPassword&&(null==(n=e.favorite.prototype.file)?void 0:n.hasProtoLinkPassword),thumbnailUrl:e.favorite.prototype.thumbnailUrl,noBorder:!0})),o.createElement("div",{className:n9},o.createElement(ax.oS,{type:ax.y1.PROTOTYPE,className:le}),o.createElement("div",{className:n6},o.createElement("div",{className:n7},null==(l=e.favorite.prototype.file)?void 0:l.name)))),g&&p&&e.favorite.prototype&&o.createElement(lH,{prototype:e.favorite.prototype,organizeFavoriteOptions:y}))}var l9=a(9821);function l6(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.currentUserOrgId),r=(0,s.d4)(e=>e.currentTeamId),n=(0,s.d4)(e=>e.favorites.collapsedCustomSections),l=(0,s.d4)(e=>e.dropdownShown),i=e.favorite.workspace,c=o.useMemo(()=>l&&l.type===lL.FAVORITED_WORKSPACE_CONTEXT_MENU&&l.data.workspaceId===(null==i?void 0:i.id),[l,null==i?void 0:i.id]),d=o.useCallback((e,a)=>{let r=a.workspace;(0,ll.LP)(null==r?void 0:r.id,z.bk.WORKSPACE,a.sidebarSectionId??void 0,ll.vg),r&&t(A.$T({view:"workspace",subView:nE.V0.DIRECTORY,workspaceId:r.id,selectedTab:nE.dN.TEAMS}))},[t]),m=o.useCallback(e=>{if(!i)return;e.stopPropagation(),e.preventDefault();let a={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};t(A.j7({type:lL.FAVORITED_WORKSPACE_CONTEXT_MENU,data:{workspaceId:i.id,targetRect:a}}))},[t,i]);if(!a||null===i)return o.createElement(o.Fragment,null);let u=(0,lW.o)({dispatch:t,currentOrgId:a,currentTeamId:r,collapsedCustomSections:n,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:z.bk.WORKSPACE,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,updateFavorite:(a,r)=>{var n;let l={workspace:{id:i.id,name:i.name??"",imgUrl:(null==(n=e.favorite.workspace)?void 0:n.imgUrl)??null},entrypoint:"sidebar",sectionId:r,favoriteId:e.favorite.id};a?t(no.ZW(l)):t(no.if(l))}}),_=e.favorite.workspace?o.createElement(eV.z6,{entity:e.favorite.workspace,size:16}):o.createElement(es.B,{svg:l9.A,className:ef.cx.colorIcon.$});return o.createElement(o.Fragment,null,o.createElement(rs.Z,{isSelected:e.isSelected,showGrabber:e.showGrabber,rowClassName:n3,onClick:t=>d(t,e.favorite),onContextMenu:m,icon:_,text:o.createElement(ev.E,{truncate:!0}," ",i.name)}),c&&o.createElement(lU,{workspaceId:i.id,orgId:e.favorite.orgId,organizeFavoriteOptions:u}))}var l7=a(408409);let ie=(e,t)=>{let a=e.cloneNode(!0),r=document.createElement("div");return r.className="favorited_generic_row--favorite--vFcy4 favorited_generic_row--_favorite--jiaJX sidebar--sidebarSection---c9jn text--fontPos11--2LvXf text--_fontBase--QdLsd",Object.assign(r.style,{position:"absolute",top:"-100%",left:"-100%",width:`${e.clientWidth}px`,height:`${e.clientHeight}px`,overflow:"hidden",zIndex:-1}),t&&(a.classList.add(t),a.classList.add(ef.cx.colorText.$)),r.appendChild(a),document.body.appendChild(r),r};function it(e){var t,a,r;let n=(0,s.wA)(),l=(0,s.d4)(e=>e.dragState),[i,c]=o.useState(!1),d=e.favorite.resourceType,m=(0,ry._6)(),[u,_]=o.useState(!1),p=(null==(t=e.rearrangeDragState)?void 0:t.draggedOverFavoriteId)===e.favorite.resource.id&&!u,[f,g]=o.useState(!1),E=o.useRef(null),v=(0,nK.S)(),h=i&&!v,y=e.isSelected||(()=>{switch(d){case z.bk.FOLDER:return"folder"===m.view&&m.folderId===e.favorite.resource.resourceId;case z.bk.TEAM:return"team"===m.view&&m.teamId===e.favorite.resource.resourceId;case z.bk.WORKSPACE:return"workspace"===m.view&&m.subView===nE.V0.DIRECTORY&&m.workspaceId===e.favorite.resource.resourceId;default:return!1}})();return o.createElement("div",{className:p?(null==(a=e.rearrangeDragState)?void 0:a.dropBefore)?"favorited_generic_row--dropBefore--xZvBN sidebar--dropBefore--wZDYO":(null==(r=e.rearrangeDragState)?void 0:r.dropInto)?"favorited_generic_row--dropInto--VKuX5":"favorited_generic_row--dropAfter--a64Ax sidebar--dropAfter--JEX7d":void 0},o.createElement(a4.Y,{key:e.favorite.resource.resourceId,isDragTarget:e=>{let t=new lG.le(e);return _(t.isFile()),l.type!==rB.R.SidebarSection&&!t.isFile()},onTargetDragEnter:(t,a)=>{let r=new lG.le(t),n=!1;(l.type===rB.R.Favorite||r.isFigFiles()||r.isRepos()||r.isPrototypes()||r.isTiles())&&((r.isFigFiles()||r.isRepos()||r.isTiles())&&(n=e.favorite.resourceType===z.bk.FOLDER),e.updateRearrangeDragState({draggedOverFavoriteId:e.favorite.resource.id,dropBefore:n?a.upperQuarter:a.upper,dropInto:n&&a.middleVerticalHalf,draggedOverSectionId:e.favorite.resource.sidebarSectionId}),g(n))},onTargetDragLeave:t=>{let a=new lG.le(t);(l.type===rB.R.Favorite||a.isFigFiles()||a.isRepos()||a.isPrototypes()||a.isTiles()&&p)&&(e.clearRearrangeDragState(e.favorite.resource.id),g(!1))},onTargetDrop:t=>{var a;let r=new lG.le(t);if((null==(a=e.rearrangeDragState)?void 0:a.dropInto)&&e.favorite.resourceType===z.bk.FOLDER&&e.favorite.resource.project)(0,l7.A)(n,e.favorite.resource.project,e.favorite.resource.project.team,r),n(nY.T());else if(r.isFigFiles()||r.isRepos()||r.isPrototypes()||r.isTiles())e.onSetResourceFavoriteDragDrop(t);else if(l.type===rB.R.Favorite&&p){let t=l.data;e.reorderOrInsertFavorite(t.resource.id,t.resourceType),n(nY.T())}e.clearRearrangeDragState(e.favorite.resource.id),g(!1)},onTargetDragQuadrantUpdate:t=>{e.updateRearrangeDragState({draggedOverFavoriteId:e.favorite.resource.id,dropBefore:f?t.upperQuarter:t.upper,dropInto:f&&t.middleVerticalHalf,draggedOverSectionId:e.favorite.resource.sidebarSectionId})},draggable:!1},o.createElement("div",{onMouseEnter:()=>{e.preventHoverStyle||c(!0)},onMouseLeave:()=>{e.setShowPreviewDelay(!1),c(!1)},onDragStart:t=>{t.dataTransfer.effectAllowed="move";let a=new lG.le(t.dataTransfer);a.setArbitraryData(e.favorite.resource.id);let r=t.currentTarget.firstElementChild;if(null===r)return;let l=r.getBoundingClientRect(),i=t.clientX-l.left,o=t.clientY-l.top;E.current=ie(r,"favorited_generic_row--draggable--QinZd"),a.setDragImage(E.current,i,o),n(nY.v({type:rB.R.Favorite,data:e.favorite}))},onDragEnd:t=>{E.current&&E.current.remove(),n(nY.T()),e.clearRearrangeDragState(e.favorite.resource.id),g(!1)},draggable:!e.isFavoritesToMove},(()=>{switch(d){case z.bk.FILE:return o.createElement(lZ,{favorite:e.favorite.resource,isHover:i,showGrabber:h,isSelected:y,previewYOffset:e.previewYOffset,showPreviewDelay:e.showPreviewDelay,sections:e.sections,isFavoritesToMove:e.isFavoritesToMove});case z.bk.PROTOTYPE:return o.createElement(l5,{favorite:e.favorite.resource,isHover:i,showGrabber:h,isSelected:y,previewYOffset:e.previewYOffset,showPreviewDelay:e.showPreviewDelay,sections:e.sections,isFavoritesToMove:e.isFavoritesToMove});case z.bk.FOLDER:return o.createElement(l1,{favorite:e.favorite.resource,isHover:i,showGrabber:h,isSelected:y,previewYOffset:e.previewYOffset,showPreviewDelay:e.showPreviewDelay,sections:e.sections,isFavoritesToMove:e.isFavoritesToMove});case z.bk.TEAM:return o.createElement(l$,{favorite:e.favorite.resource,isHover:i,showGrabber:h,isSelected:y,previewYOffset:e.previewYOffset,showPreviewDelay:e.showPreviewDelay,sections:e.sections});case z.bk.WORKSPACE:return o.createElement(l6,{favorite:e.favorite.resource,isHover:i,showGrabber:h,isSelected:y,previewYOffset:e.previewYOffset,showPreviewDelay:e.showPreviewDelay,sections:e.sections});default:(0,el.xb)(d)}})())))}var ia=a(975988),ir=a(949207),il=a(432023),ii=a(604771);function io(e){var t,a,r,n,l,i,c;let d=(0,s.wA)(),m=(0,s.d4)(e=>e.currentTeamId),u=function(){let e=(0,s.d4)(e=>e.dropdownShown),t=(0,s.d4)(e=>e.currentUserOrgId),a=(0,s.d4)(e=>e.currentTeamId),r=(0,_.kc)().ps_benchmark&&a;return!e||(null==e?void 0:e.type)!=="favorited-file-context-menu"&&(null==e?void 0:e.type)!=="favorited-prototype-context-menu"||t||r?null:e}(),p=(0,rv.sZ)(),f=(null==p?void 0:p.id)??null,g=(0,rg.sb)(e.favorites,e.order),E=(0,ry._6)(),[v,h]=o.useState(!1),y=(0,s.d4)(e=>e.favorites.movingResource),b=(0,nK.S)(),w=(0,s.d4)(e=>e.favorites.collapsedCustomSections),T=b&&e.section?!w.has(null==(t=e.section)?void 0:t.id):!w.has("favorited"),[I,x]=o.useState(!1),[N,C]=o.useState(),[k,L]=o.useState(),R=(0,s.d4)(e=>e.dragState),D=(0,li.ZC)(R);o.useEffect(()=>{R.type===rB.R.None&&D&&D.type!==rB.R.None&&L(void 0)},[R,D]),o.useEffect(()=>{!e.isCurrentHoveredSection&&R.type===rB.R.SidebarSection&&k&&L(void 0)},[e.isCurrentHoveredSection,k,R]);let[F,P]=o.useState(void 0),[M,O]=o.useState(!0),B=o.useRef(null),U=nJ();o.useEffect(()=>{F===(null==k?void 0:k.draggedOverFavoriteId)&&L(void 0),P(void 0)},[k,L,F,P]);let V=o.useCallback(t=>{var a;(null==(a=e.section)?void 0:a.id)&&(t.dataTransfer.effectAllowed="move",new lG.le(t.dataTransfer).setArbitraryData(e.section.id),d(nY.v({type:rB.R.SidebarSection,data:e.section.id})))},[d,e.section]),H=o.useCallback(()=>{var t;(0,ll.xs)(!T),b&&e.section?(ia.Fp({type:"topLevel",id:"custom",orgId:f,sectionId:null==(t=e.section)?void 0:t.id},!T),T?w.add(e.section.id):w.delete(e.section.id)):(ia.Fp({type:"topLevel",id:"favorited",orgId:f},!T),T?w.add("favorited"):w.delete("favorited")),d(no.U6({collapsedCustomSections:w}))},[T,f,e.section,w,b,d]),W=(t,a)=>{var r,n,l,i,o,s,c;let m;let u=g.map(e=>e.resource.id);if(!(null==k?void 0:k.draggedOverFavoriteId))return u;let _=-1!==u.indexOf(t);if(_)m=(0,a2.Pe)(u,t,k.draggedOverFavoriteId,k.dropBefore);else{let e=u.indexOf(k.draggedOverFavoriteId);k.dropBefore||(e+=1),m=[...u.slice(0,e),t,...u.slice(e)]}if((0,ll.hp)(),C(t),null==(r=e.section)?void 0:r.id){_?d(no.vg({sectionId:e.section.id,orderedFavoriteIds:m})):d(no.V1({favoriteId:t,sectionId:e.section.id,resourceType:a,orderedFavoriteIds:m}));return}_?d(rX.yJ({prefs:{id:(null==(n=e.fileBrowserPreferences)?void 0:n.id)||"optimistic-id",orderedFavoritedResourceIds:m,orderedTeamIds:null==(l=e.fileBrowserPreferences)?void 0:l.orderedTeamIds,orderedLicenseGroupIds:null==(i=e.fileBrowserPreferences)?void 0:i.orderedLicenseGroupIds},userInitiated:!0})):(d(no.V1({favoriteId:t,sectionId:void 0,resourceType:a})),d(rX.yJ({prefs:{id:(null==(o=e.fileBrowserPreferences)?void 0:o.id)||"optimistic-id",orderedFavoritedResourceIds:m,orderedTeamIds:null==(s=e.fileBrowserPreferences)?void 0:s.orderedTeamIds,orderedLicenseGroupIds:null==(c=e.fileBrowserPreferences)?void 0:c.orderedLicenseGroupIds},userInitiated:!0})))},j=o.useCallback(e=>{e.stopPropagation(),N&&C(void 0)},[N]),$=o.useCallback(()=>{O(!0)},[]),G=o.useCallback(e=>{let t=new lG.le(e);return h(t.isFile()),t.isFigFiles()||t.isRepos()||t.isPrototypes()||t.isTiles()},[]),z=t=>{var a;let r=new lG.le(t),n=[],l=[],i=[];if(x(!1),r.isFigFiles()){if(!(n=r.getData()))return!1}else if(r.isPrototypes()){if(!(i=r.getData()))return!1}else if(r.isRepos()){let e=r.getReposData();if(!e)return!1;l=e.repos}else if(r.isTiles()){let e=r.getTilesData();if(!e)return!1;n=e.files,l=e.repos,i=e.prototypes}n=n.filter(e=>!e.is_favorited),l=l.filter(e=>!e.is_favorited),i=i.filter(e=>!e.is_favorited);let o=g.map(e=>e.resource.id),s=n.length+l.length+i.length,c=(0,rg.kK)(f);if(s+g.length>c)return d(ec.F.enqueue({message:(0,S.t)("tile.favoriting.max_favorites",{maxFavorites:c})})),!1;let u=null;return k&&(u=o.indexOf(k.draggedOverFavoriteId)+(k.dropBefore?0:1)),d(no.N9({files:n,repos:l,prototypes:i,orgId:f,teamId:m,selectedView:E.view,entrypoint:"sidebar",insertAtIndex:u,orderedFavorites:o,sectionId:null==(a=e.section)?void 0:a.id,fileBrowserPrefs:e.fileBrowserPreferences})),!0},Y=o.useCallback(()=>{x(!0)},[]),K=o.useCallback(()=>{x(!1)},[]),Q=ey()([ef.cx.relative.$,"favorited_section--showsCaret--vjo7-",I||(null==k?void 0:k.draggedOverSectionId)&&e.section&&!v&&k.draggedOverSectionId===e.section.id?n2:""]),q=b?(null==(a=e.section)?void 0:a.name)===""||(null==(r=e.section)?void 0:r.name)===void 0?(0,S.tx)("sidebar.starred"):e.section.name:(0,S.tx)("sidebar.favorite_files"),X=(null==(l=null==(n=null==U?void 0:U.data)?void 0:n.customSection)?void 0:l.id)===(null==(i=e.section)?void 0:i.id),J=e.isCreatingNewSection||e.isRenaming,Z=ey()({"favorited_section--sectionHeaderContainer--otgqF sidebar--sectionHeaderContainer--TcvBb sidebar--sectionHeaderName--xToHG sidebar--sectionName--4N7hT sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa":!0,"favorited_section--actionButtonsVisibleOnHover--AOJ8E":!J,"favorited_section--actionButtonsVisible--Ey4QI":X&&!J}),ee=(null==(c=e.section)?void 0:c.name)===void 0?(0,S.t)("sidebar.new_section"):(0,rg.R3)(e.section)?(0,S.t)("sidebar.starred"):e.section.name;return o.createElement(a4.Y,{className:Q,isDragTarget:G,draggable:!1,onTargetDrop:z,onTargetDragEnter:Y,onTargetDragLeave:K},o.createElement("div",null,o.createElement("div",{draggable:!0,onDragStart:V,className:Z,onClick:H,onContextMenu:t=>{t.stopPropagation(),t.preventDefault();let a={top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1};d(A.j7({type:nX,data:{customSection:e.section,favoritesCount:g.length,isFromRightClick:!0,targetRect:a}}))},role:"button",tabIndex:0},o.createElement(es.B,{className:b?"favorited_section--expandCaretCustomSections--SUjwA":"favorited_section--expandCaret--LgAK5 sidebar--expandCaret--eXGWm",svg:T?ir.A:il.A}),o.createElement("div",{className:"favorited_section--sectionName--PrU2k ellipsis--ellipsis--Tjyfa","data-onboarding-key":1===e.allSections.length?null:"FAVORITES_ONBOARDING_KEY"},e.isRenaming?o.createElement(a3.p,{className:"favorited_section--input--8x-Vh",placeholderValue:ee,submit:t=>{e.isCreatingNewSection?(y?d(no.yH({name:t,insertAtIndex:e.sectionIndex,currentOrderedSections:e.allSections.map(e=>e.id),prefs:e.fileBrowserPreferences??void 0,newResourceForSection:y})):d(no.YI({name:t,insertAtIndex:e.sectionIndex,currentOrderedSections:e.allSections.map(e=>e.id),prefs:e.fileBrowserPreferences??void 0})),e.setNewCustomSectionIndex&&e.setNewCustomSectionIndex(void 0)):e.section&&(d(no.vg({sectionId:e.section.id,name:t.trim()})),e.setRenamingSectionId&&e.setRenamingSectionId(void 0))},cancel:()=>{e.isCreatingNewSection?(e.setNewCustomSectionIndex&&e.setNewCustomSectionIndex(void 0),y&&d(no.to({movingResource:void 0}))):e.setRenamingSectionId&&e.setRenamingSectionId(void 0)},maxLength:25}):q),f&&o.createElement("div",{className:"favorited_section--actionButtons--VZ6Er"},o.createElement("div",{role:"button",tabIndex:0,className:lt,"data-tooltip-max-width":200,ref:B,onClick:t=>{U?d(A.oB()):B.current&&d(A.j7({type:nX,data:{targetRect:B.current.getBoundingClientRect(),customSection:e.section,favoritesCount:g.length}})),t.stopPropagation(),t.preventDefault()},onContextMenu:e=>e.stopPropagation()},o.createElement(es.B,{svg:ii.A,className:la})),o.createElement(is,{newCustomSectionIndex:e.sectionIndex,setNewCustomSectionIndex:e.setNewCustomSectionIndex})))),o.createElement("div",{className:T?void 0:ef.cx.hidden.$},(()=>{if(0===g.length){let t=1===e.allSections.length&&(0,rg.R3)(e.allSections[0]);return b||e.isCreatingNewSection?b&&t&&!e.isCreatingNewSection?o.createElement(lr,{setNewCustomSectionIndex:e.setNewCustomSectionIndex}):o.createElement(o.Fragment,null):o.createElement(ic,{setNewCustomSectionIndex:e.setNewCustomSectionIndex})}return o.createElement("div",{onMouseMove:j,onMouseLeave:$},g.map(t=>{var a;let r=N===t.resource.id||t.resource.resourceId===(null==(a=null==u?void 0:u.data)?void 0:a.resource.resourceId);return o.createElement(it,{key:t.resource.resourceId,favorite:t,isSelected:r,onSetResourceFavoriteDragDrop:z,reorderOrInsertFavorite:W,clearRearrangeDragState:P,updateRearrangeDragState:L,rearrangeDragState:k,previewYOffset:e.previewYOffset,showPreviewDelay:M,setShowPreviewDelay:O,sections:e.allSections,preventHoverStyle:void 0!==N})}),u&&o.createElement(lM,{dropdownShown:u}))})()))}function is(e){return o.createElement("div",{role:"button",tabIndex:0,className:lt,"data-tooltip-max-width":200,"data-tooltip-type":eB.Ib.TEXT,"data-tooltip":(0,S.t)("favorited_resources.create_a_new_section_tooltip"),onClick:t=>{t.stopPropagation(),e.setNewCustomSectionIndex&&e.setNewCustomSectionIndex(e.newCustomSectionIndex)},onContextMenu:e=>e.stopPropagation()},o.createElement(es.B,{svg:tt.A,className:la}))}function ic(e){return o.createElement("div",{className:"favorited_section--favoritedSectionEmptyState--Xhxgt sidebar--emptySection--SKfhv sidebar--sidebarSection---c9jn text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,S.tx)("sidebar.to_favorite_files_you_use_often"))}function id(e){var t;let a=(0,rg.ds)(e.favoritedFiles,e.favoritedPrototypes,e.favoritedProjects,e.favoritedTeams,e.favoritedWorkspaces);return o.createElement(io,{favorites:a,order:(null==(t=e.fileBrowserPreferences)?void 0:t.orderedFavoritedResourceIds)??void 0,fileBrowserPreferences:e.fileBrowserPreferences,isEnterpriseSidenavEnabled:e.isEnterpriseSidenavEnabled,allSections:e.userSidebarSections??[],sectionIndex:0,previewYOffset:e.previewYOffset})}function im(e){var t;let a=(0,s.wA)(),r=(0,s.d4)(e=>e.dragState),n=(0,s.d4)(e=>e.favorites.newCustomSectionIndex),l=(0,s.d4)(e=>e.favorites.favoritesCount),i=(0,rg.ds)(e.favoritedFiles,e.favoritedPrototypes,e.favoritedProjects,e.favoritedTeams,e.favoritedWorkspaces),[c,d]=o.useState(),[m,u]=o.useState(),[_,p]=o.useState(!1),f=(0,nK.S)(),g=o.useMemo(()=>{var t;return(0,rg.t$)(e.userSidebarSections??[],(null==(t=e.fileBrowserPreferences)?void 0:t.orderedSidebarSections)??void 0)},[e.userSidebarSections,null==(t=e.fileBrowserPreferences)?void 0:t.orderedSidebarSections]);o.useMemo(()=>{l&&l<15&&i.length>=15&&(0,nz.YQ)({id:r8.FAVORITES_COUNT_CROSSED_THRESHOLD_EVENT}),a(no.lF({favoritesCount:i.length}))},[l,i.length,a]);let E={},v=[];i.forEach(e=>{e.resource.sidebarSectionId?E[e.resource.sidebarSectionId]?E[e.resource.sidebarSectionId].push(e):E[e.resource.sidebarSectionId]=[e]:v.push(e)});let h=o.useCallback(()=>r.type===rB.R.Favorite||r.type===rB.R.SidebarSection,[r]),y=o.useCallback(e=>{r.type===rB.R.SidebarSection&&p(e.upper)},[r]),b=o.useCallback(()=>{var t,n,l,i;let o="starred"===c?void 0:c;if(r.type===rB.R.Favorite){let e=r.data;a(no.V1({favoriteId:e.resource.id,sectionId:o,resourceType:e.resourceType}))}else if(r.type===rB.R.SidebarSection&&o){let s=g.map(e=>e.id)??[],c=(0,a2.Pe)(s,r.data,o,_);a(rX.yJ({prefs:{id:(null==(t=e.fileBrowserPreferences)?void 0:t.id)||"optimistic-id",orderedFavoritedResourceIds:null==(n=e.fileBrowserPreferences)?void 0:n.orderedFavoritedResourceIds,orderedTeamIds:null==(l=e.fileBrowserPreferences)?void 0:l.orderedTeamIds,orderedLicenseGroupIds:null==(i=e.fileBrowserPreferences)?void 0:i.orderedLicenseGroupIds,orderedSidebarSections:c},userInitiated:!0}))}p(!1),d(void 0),a(nY.T())},[c,a,r,_,g,e.fileBrowserPreferences]),w=o.useCallback(e=>()=>{d(e)},[]),T=o.useCallback(()=>{d(void 0)},[]),I=o.useCallback(e=>{a(no.pS({newCustomSectionIndex:e}))},[a]);if(0===g.length&&f&&void 0===n)return o.createElement(ln,{setNewCustomSectionIndex:I});let x=o.createElement("div",{className:ef.cx.mb8.$},o.createElement(io,{favorites:[],order:[],allSections:g,isEnterpriseSidenavEnabled:e.isEnterpriseSidenavEnabled,isRenaming:!0,setRenamingSectionId:u,sectionIndex:n||0,isCreatingNewSection:!0,setNewCustomSectionIndex:I,fileBrowserPreferences:e.fileBrowserPreferences,previewYOffset:e.previewYOffset}));return o.createElement("div",{className:ef.cx.mt8.$},0===n&&x,g.map((t,a)=>{let l=r.type===rB.R.Favorite?n2:_?"favorited_section--dropBefore--6poyi sidebar--dropBefore--wZDYO":"favorited_section--dropAfter--7G6L7 sidebar--dropAfter--JEX7d",i=ey()([c===t.id?l:"",ef.cx.mb8.$]);return o.createElement("div",{key:t.id},o.createElement(a4.Y,{className:i,isDragTarget:h,draggable:!1,onTargetDragQuadrantUpdate:y,onTargetDrop:b,onTargetDragEnter:w(t.id),onTargetDragLeave:T},o.createElement(io,{favorites:E[t.id]??[],sectionIndex:a,section:t,allSections:g,order:t.orderedFavoritedResourceIds??[],isEnterpriseSidenavEnabled:e.isEnterpriseSidenavEnabled,isRenaming:m===t.id,setRenamingSectionId:u,setNewCustomSectionIndex:I,previewYOffset:e.previewYOffset,isCurrentHoveredSection:c===t.id})),n===a+1&&x)}),f&&o.createElement(nZ,{setRenamingSectionId:u}))}var iu=a(372038),i_=a(660656),ip=a(838329),ig=a(533600);let iE=(0,eU.Ju)(function(e){let[t,a]=(0,o.useState)(null),r=(0,s.wA)(),n=(0,iu.Gs)(),l=(0,$.TA)(),i=(0,s.d4)(e=>e.teamUserByTeamId),c=(0,s.d4)(e=>{var t,a;return l?null==(a=null==(t=e.authedUsers.byId[l])?void 0:t.plans)?void 0:a.filter(e=>!e.is_org):null}),d=(0,S.t)("file_browser.planless_favorites.add_favorites_to_modal_title"),m=()=>r(R.Ce()),u={};l&&(0,ip._)(i,l).forEach(e=>{e.drafts_folder_id&&(u[e.team_id]=e.drafts_folder_id)});let _=(e,t)=>{t&&r(i_.C({files:e,folderName:"",folderId:t,isDraftsToMove:!0,fromFileModal:!0}))};return o.createElement(eW.XV,{title:d,fixedTop:!0,minWidth:480,maxWidth:480,onClose:m,truncateTitleText:!0},o.createElement("div",{className:"move_favorites_modal--modalBody---Rdx2"},c&&o.createElement(ep.P,{width:480},o.createElement("div",{className:ef.cx.pl8.pr8.$},c.map(e=>o.createElement(iv,{key:e.plan_id,planId:e.plan_id,name:e.name,imgUrl:e.img_url,checked:(null==t?void 0:t.plan_id)===e.plan_id,onSelect:()=>a((null==t?void 0:t.plan_id)===e.plan_id?null:e)})))),o.createElement("div",{className:"move_favorites_modal--footer--ERUeX"},o.createElement(I.nR,{onClick:m},(0,S.tx)("modal.cancel")),o.createElement(I.vd,{disabled:!t,onClick:()=>{let a=(null==t?void 0:t.is_org)?null:null==t?void 0:t.plan_id,l=e.favorites.reduce((e,t)=>{var a,r;return t.resourceType===z.bk.FILE&&(null==(a=t.resource.file)?void 0:a.key)?{...e,[null==(r=t.resource.file)?void 0:r.key]:!0}:e},{}),i={},o=n.filter(e=>{let t=!!l[e.key];return t&&(i[e.key]=!0),t}),s=e.favorites.filter(e=>{var t,a;return e.resourceType!==z.bk.FILE||null==(t=e.resource.file)||!t.key||!i[null==(a=e.resource.file)?void 0:a.key]}).map(e=>e.resource.id);r(no.Ic({favoriteIds:s,teamId:a})),a&&_(o,u[a]),m()}},(0,S.t)("modal.confirm")))))},"MoveFavoritesModal");function iv(e){return o.createElement("button",{"data-testid":`${e.name}-button`,className:ey()("move_favorites_modal--teamRow--qNRGf",e.checked?ef.cx.colorBgSelected.$:""),onClick:e.onSelect},o.createElement("div",{className:"move_favorites_modal--iconContainer--oDATP"},e.checked?o.createElement(es.B,{className:ef.cx.colorIcon.$,svg:ig.A}):o.createElement(ed.nl,{size:ed.Pf.MEDIUM,shape:"CIRCLE",fallbackDisplay:a5.U.HIDDEN,team:{id:e.planId,imgUrl:e.imgUrl}})),o.createElement("div",{className:"move_favorites_modal--teamName--pVqcu ellipsis--ellipsis--Tjyfa"},o.createElement("span",{className:"move_favorites_modal--destinationHeading--mwxLX"},e.name)))}var ih=a(842232);let iy="favorited_drafts_to_move";function ib(e){var t,a,r,n,l,i;let c=(0,s.wA)(),[d,m]=o.useState(!0),u=(0,s.d4)(e=>e.favorites.collapsedCustomSections),_=null==(a=null==(t=e.teamUser)?void 0:t.planlessFavoritedFiles)?void 0:a.filter(t=>{var a;return!(null==(a=e.dataDriftCorrectedTeamResources)?void 0:a.favoritedFilesKeySet.has(t.resourceId))}),p=null==(n=null==(r=e.teamUser)?void 0:r.planlessFavoritedPrototypes)?void 0:n.filter(t=>{var a;return!(null==(a=e.dataDriftCorrectedTeamResources)?void 0:a.favoritedPrototypesIdSet.has(t.resourceId))}),g=null==(i=null==(l=e.teamUser)?void 0:l.planlessFavoritedProjects)?void 0:i.filter(t=>{var a;return!(null==(a=e.dataDriftCorrectedTeamResources)?void 0:a.favoritedFoldersIdSet.has(t.resourceId))}),E=(0,rg.ds)(_,p,g),v=!u.has(iy),h=o.useCallback(()=>{ia.Fp({type:"topLevel",id:iy,orgId:null},!v),v?u.add(iy):u.delete(iy),c(no.U6({collapsedCustomSections:u}))},[v,u,c]),y=o.useCallback(()=>{c(no.vr({favoriteIds:E.map(e=>e.id)}))},[c,E]);if(0===E.length)return o.createElement(o.Fragment,null);let b=E.map(t=>o.createElement(it,{key:t.resource.resourceId,favorite:t,isSelected:!1,onSetResourceFavoriteDragDrop:f.lQ,reorderOrInsertFavorite:f.lQ,updateRearrangeDragState:f.lQ,clearRearrangeDragState:f.lQ,rearrangeDragState:void 0,previewYOffset:e.previewYOffset,showPreviewDelay:d,setShowPreviewDelay:m,sections:[],preventHoverStyle:!1,isFavoritesToMove:!0}));return o.createElement(o.Fragment,null,o.createElement("div",{className:"favorited_section--divider--o9WjE favorited_section--divider--o9WjE"}),o.createElement("div",{className:ey()("favorited_section--moveFavoritesContainer--qp39R",ef.cx.pt4.pb4.ml8.mr8.mb8.$)},o.createElement("div",{className:ey()(ef.cx.flex.itemsCenter.justifyBetween.pl8.pr8.$,"favorited_section--favoriteToMoveHeaderContainer--2RB9p favorited_section--sectionHeaderContainer--otgqF sidebar--sectionHeaderContainer--TcvBb sidebar--sectionHeaderName--xToHG sidebar--sectionName--4N7hT sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa")},o.createElement("div",{onClick:h,className:ef.cx.flex.itemsCenter.justifyBetween.$,role:"button",tabIndex:0},o.createElement(es.B,{className:ey()(ef.cx.flex.itemsCenter.p6.mr12.colorIcon.$,"favorited_section--moveFavoritesContainerHeaderLeftBlockItems--pl1Hf"),svg:v?ir.A:il.A}),(0,S.tx)("sidebar.move_these_starred_items"),o.createElement(es.B,{svg:ih.A,className:ey()("favorited_section--helpIcon--vfl5Y",ef.cx.flex.itemsBaseline.ml4.$),"data-tooltip-type":eB.Ib.TEXT,"data-tooltip":(0,S.t)("file_browser.planless_favorites.your_favorited_items_tooltip"),"data-tooltip-timeout-delay":50,"data-tooltip-max-width":200})),v?null:o.createElement(eb.Ex,{text:E.length>99?"99+":`${E.length}`,color:eb.zE.DEFAULT,className:ef.cx.mr8.colorText.colorBgSelectedSecondary.$})),v?o.createElement("div",{className:"favorited_section--favoritesToMoveContentContainer--xYv6p"},b,o.createElement("div",{className:ef.cx.flex.justifyBetween.m8.h24.$},o.createElement(eu.$$,{className:"favorited_section--favoritesToMoveActionButtons--FUt77",onClick:()=>{c(R.to({type:iE,data:{favorites:E}}))}},(0,S.tx)("file_browser.planless_favorites.add_to_sidebar")),o.createElement(eu.nR,{className:"favorited_section--unstarAllButton--Rhy3- favorited_section--favoritesToMoveActionButtons--FUt77",onClick:y},(0,S.tx)("file_browser.planless_favorites.unstar_all")))):null))}var iw=a(459231);function iT(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.dragState),r=(0,rv.dq)(),[n,l]=o.useState(null),[i,c]=o.useState(!1),d=o.useRef(null),m=(r,n)=>{var l,i,o,s,c,d,m,u,_,p,f;a.type!==rB.R.Team&&console.error("Expected Team");let g=a.data;if(!g)return;let E=g.id,v=n.upper,h=(0,r5.n$)((null==(o=null==(i=null==(l=e.sidebarData)?void 0:l.teamRoles)?void 0:i.map(e=>e.team))?void 0:o.filter(e=>!!e))||[],(null==(c=null==(s=e.sidebarData)?void 0:s.fileBrowserPreferences)?void 0:c.orderedTeamIds)||[]),y=(0,a2.Pe)(h,E,r,v),b=null==(m=null==(d=e.sidebarData)?void 0:d.fileBrowserPreferences)?void 0:m.orderedFavoritedResourceIds;y!==h&&t(rX.yJ({prefs:{id:(null==(_=null==(u=e.sidebarData)?void 0:u.fileBrowserPreferences)?void 0:_.id)||"optimistic-id",orderedTeamIds:y,orderedFavoritedResourceIds:b,orderedLicenseGroupIds:null==(f=null==(p=e.sidebarData)?void 0:p.fileBrowserPreferences)?void 0:f.orderedLicenseGroupIds},userInitiated:!0}))},u=(e,a)=>{a.dataTransfer.effectAllowed="move";let r=new lG.le(a.dataTransfer);r.setArbitraryData(e),d.current&&r.setDragImage(d.current),t(nY.v({type:rB.R.Team,data:e})),a.stopPropagation()},_=()=>{t(nY.T())},p=()=>{var t,r;return(!e.isEnterpriseSidenavEnabled||null==(t=a.data)||!t.licenseGroupId||a.data.licenseGroupId===(null==(r=e.licenseGroup)?void 0:r.id))&&a.type===rB.R.Team},f=e=>{a.type===rB.R.Team&&l(e)},g=e=>{c(e.upper)},E=e=>{l(t=>t===e?null:t)},v=(e,t)=>{m(e,t),l(null)},h=1!==e.orderedTeams.length;return o.createElement(o.Fragment,null,o.createElement("div",null,e.orderedTeams.map((t,a)=>o.createElement(a4.Y,{key:t.id,className:n===t.id?i?"sidebar--dropBefore--wZDYO":"sidebar--dropAfter--JEX7d":"",isDragTarget:p,onTargetDragEnter:()=>f(t.id),onTargetDragQuadrantUpdate:g,onTargetDragLeave:()=>E(t.id),onTargetDrop:(e,a)=>v(t.id,a),draggable:h,onDragStart:e=>u(t,e),onDragEnd:_},o.createElement(rQ,{key:t.id,team:t,sidebarData:e.sidebarData,projectsByTeam:e.projectsByTeam,onboardingKey:0===a?r8.TEAM_FILES_ONBOARDING_KEY:void 0,licenseGroup:e.licenseGroup}))),o.createElement("div",{className:"sidebar--dragImage--HwlFW",ref:d})),!(0,rg.D6)(r)&&e.contextSelectedFolder&&o.createElement(iw.p,{folder:e.contextSelectedFolder,onRenameClick:e.onFolderRenameClick}))}function iI(){let e=(0,s.d4)(e=>e.currentUserOrgId),t=(0,s.d4)(t=>e?t.orgById[e]:null),a=(0,G.c4)(e).data??!1;return t&&e?a?(0,S.t)("sidebar.browse.all_workspaces"):(0,S.t)("sidebar.browse.all_teams"):null}function ix(){let e=iI();return o.createElement(o.Fragment,null,e)}var iN=a(499893);function iC(){let e=(0,s.wA)(),t=(0,s.d4)(e=>e.currentUserOrgId),a=(0,s.d4)(e=>e.selectedView),r=(0,nK.S)(),n=(0,s.d4)(e=>t?e.orgById[t]:null),l="org"===a.view&&a.orgId===t,i=iI();return n&&t&&i?o.createElement(rs.Z,{isSelected:l,onClick:()=>{e(A.$T({view:"org",orgId:t,orgViewTab:r9.X.HOME})),e(A.Oe({clickedResourceType:"org",resourceIdOrKey:t}))},icon:o.createElement(es.B,{className:ef.cx.colorIcon.$,svg:r?l9.A:iN.A}),text:o.createElement(ev.E,{truncate:!0},i)}):null}var iS=a(807749),ik=a(408462),iA=a(74592);function iL(){return o.createElement("div",{className:"base_upgrade_section--divider--k-uOp sidebar--divider--sHsz4"})}function iR(e){return o.createElement(O.fu,{name:e.trackingContext,properties:e.trackingProperties},o.createElement("div",{className:"base_upgrade_section--content--95XrT"},e.onDismiss&&o.createElement(e_.Jn,{className:"base_upgrade_section--closeButton--cbjWt",onClick:e.onDismiss}),e.header&&o.createElement("div",{className:ef.cx.mb12.wFull.$},e.header,o.createElement(iL,null)),e.svg&&o.createElement(es.B,{className:`base_upgrade_section--icon--B3S9V ${e.svgStyles??""}`,svg:e.svg}),e.countDownDaysLeft&&o.createElement("div",{className:"base_upgrade_section--countdownTicker--6YLVt"},o.createElement(ev.E,{children:e.countDownDaysLeft,fontWeight:"medium",fontSize:14})),o.createElement("div",{className:"base_upgrade_section--textContainer--ObHaO"},e.titleText&&o.createElement("p",{className:"base_upgrade_section--title--MLhT1"},e.titleText),o.createElement("p",null,e.bodyText)),o.createElement(I.vd,{className:"base_upgrade_section--ctaButton--B1ywj",onClick:e.onClickCTA,dataTestId:e.ctaDataTestId,trackingProperties:e.ctaTrackingProperties},e.ctaText)))}let iD="upgrade_section--upgradeTextEmphasized--aQCr9";var iF=a(491095),iP=a(247866),iM=(e=>(e[e.UPGRADE=0]="UPGRADE",e[e.CREATE=1]="CREATE",e))(iM||{});function iO(e){let t=(0,s.wA)(),a=o.createElement("span",{className:iD},(0,S.t)("edu.sidebar_section.verified"));return o.createElement(iR,{trackingContext:0===e.type?"Edu Upgrade Section":"Edu Create Section",svg:iF.A,bodyText:o.createElement(o.Fragment,null,a," ",0===e.type?(0,S.t)("edu.sidebar_section.upgrade"):(0,S.t)("edu.sidebar_section.create_team")),ctaText:0===e.type?(0,S.t)("edu.choose_team"):(0,S.t)("edu.create_free_team"),onClickCTA:0===e.type?()=>{t((0,R.to)({type:ik.q}))}:()=>{t(L.Dw({isEduTeam:!0}))},onDismiss:()=>{t(P.b({dismissed_edu_sidebar:!0}))},ctaDataTestId:"edu-upgrade-cta"})}function iB({daysLeft:e}){var t,a,r;let n=(0,s.wA)(),l=(0,rr.Rs)(rl.UpR,{},{enabled:!(0,_.kc)().edu_bootcamps_reverification}),i=(0,M.H5)(),c=!!(0,r3.f)("edu_hide_verification");if((0,_.kc)().edu_bootcamps_reverification||(c=((null==(r=null==(a=null==(t=l.data)?void 0:t.currentUser)?void 0:a.schoolType)?void 0:r.status)===r1.tT.Loaded?l.data.currentUser.schoolType.data:null)===iA.h6.BOOTCAMP_OR_ONLINE&&i()),e<0)return null;let d=()=>{n((0,R.to)({type:a9.V,data:{upsellSource:J.b.EDU_UPGRADE_SECTION}}))},u=o.createElement(I.eM,{onClick:()=>m.Ay.redirect("/education/apply","_blank")},(0,S.tx)("edu.sidebar_section.verify_your_education_status"));return e>0?o.createElement(iR,{trackingContext:"Universal Upgrade Section Education Plan Countdown",countDownDaysLeft:e,titleText:(0,S.tx)("edu.sidebar_section.education_plan_expires_in_days",{daysLeft:e}),bodyText:c?(0,S.tx)("edu.sidebar_section.bootcamp_users_after_that_you_ll_need_to_upgrade_your_team"):(0,S.tx)("edu.sidebar_section.after_that_you_ll_need_to_upgrade_your_team_or_verify",{verify:u}),ctaText:(0,S.tx)("upgrade.upgrade_to_professional"),onClickCTA:d}):o.createElement(iR,{trackingContext:"Universal Upgrade Section Education Plan Expired",svg:iP.A,titleText:(0,S.tx)("edu.sidebar_section.education_plan_expired"),bodyText:c?(0,S.tx)("edu.sidebar_section.bootcamp_users_to_keep_editing_upgrade_your_team"):(0,S.tx)("edu.sidebar_section.to_keep_editing_upgrade_your_team",{verify:u}),ctaText:(0,S.tx)("upgrade.upgrade_to_professional"),onClickCTA:d})}var iU=a(990546);function iV({orgUpsellEligibility:e}){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.userFlags),r=e===to.VY.SINGLE_TEAM?(0,S.tx)("upgrade.access_cross_team_design_libraries_sso_and_more"):(0,S.tx)("upgrade.centralize_your_teams_and_share_design_libraries"),n=`${e===to.VY.SINGLE_TEAM?"Single-Team":"Multi-Team"} Dismissible Org Upgrade Section`;return o.createElement(iR,{trackingContext:n,svg:iU.A,bodyText:r,ctaText:(0,S.tx)("upgrade.view_plans"),onClickCTA:()=>{e===to.VY.SINGLE_TEAM&&t((0,R.to)({type:k.HS,data:{upsellSource:J.b.ORG_UPGRADE_SECTION}})),e===to.VY.MULTIPLE_TEAMS&&t((0,R.to)({type:k.u3,data:{upsellSource:J.b.ORG_UPGRADE_SECTION}}))},onDismiss:()=>t((0,to.CJ)(a)),ctaDataTestId:"org-upgrade-cta"})}var iH=a(378459);let iW="pro_trials_upgrade_section--divider--0tBoX sidebar--divider--sHsz4";var ij=a(707990);function i$(){let e=(0,s.wA)();return o.createElement(iR,{trackingContext:"Universal Upgrade Section Pro Trial Entry",trackingProperties:rw.ng.getTrackingProperties(),svg:ij.A,titleText:o.createElement(ev.E,null,(0,S.tx)("upgrade.free_professional_team_trial")),bodyText:o.createElement(ev.E,null,(0,S.tx)("upgrade.enjoy_our_best_design_features_for_14_days")),ctaText:o.createElement(ev.E,null,(0,S.tx)("upgrade.try_the_professional_plan")),onClickCTA:()=>e((0,R.to)({type:iH.m})),ctaDataTestId:"redesigned-upgrade-button-pro-trial-entry-upgrade",ctaTrackingProperties:rw.ng.getTrackingProperties("Try the Professional Plan"),svgStyles:"pro_trials_upgrade_section--sparkleIcon--ybCKo"})}function iG({team:e}){return o.createElement(eg.Y,{spacing:8,dataTestId:"team-info"},o.createElement(ed.nl,{size:ed.Pf.SMALL,team:e,fallbackDisplay:a5.U.HIDDEN,shape:"ROUNDED_SQUARE"}),o.createElement(ev.E,{children:e.name,fontWeight:"medium",fontSize:11,truncate:"end"}))}function iz({daysLeft:e,trialTeam:t,onClickCTA:a}){var r;let n=o.createElement(I.eM,{onClick:a,dataTestId:"pro_trial_inline_upgrade",trackingProperties:rw.ng.getTrackingProperties()},(0,S.tx)("upgrade.pro_trial_inline_upgrade_cta"));return o.createElement(O.fu,{name:"Universal Upgrade Section Pro Trial Countdown",properties:rw.ng.getTrackingProperties()},o.createElement("div",{className:iW}),o.createElement("div",{className:"pro_trials_upgrade_section--redesignedUpgradeSection--E-f1E"},o.createElement("div",{className:"pro_trials_upgrade_section--countdownInfo--sN5Pd"},o.createElement(iG,{team:t})),o.createElement("div",{className:iW}),o.createElement("div",{className:"pro_trials_upgrade_section--countdownDaysTicker--rDpWO"},o.createElement(ev.E,{children:e,color:e<=2?"danger":"default",fontWeight:"medium",fontSize:24})),o.createElement("div",{className:"pro_trials_upgrade_section--countdownDaysLeftText--a-ppM"},o.createElement(ev.E,{color:e<=2?"danger":"default",fontWeight:"medium",fontSize:13},(0,S.tx)("upgrade.days_left_in_trial",{days:e}))),o.createElement("div",{className:"pro_trials_upgrade_section--redesignedUpgradeText--ho-7F"},o.createElement(ev.E,{children:(r=e)>=14?o.createElement(ev.E,null,(0,S.tx)("upgrade.pro_trial_uub_countdown.this_counter_will_help_you_keep_track",{upgrade:n})):r>=10?o.createElement(ev.E,null,(0,S.tx)("upgrade.pro_trial_uub_countdown.if_you_are_enjoying_your_trial",{upgrade:n})):r>=4?o.createElement(ev.E,null,(0,S.tx)("upgrade.pro_trial_uub_countdown.try_out_these_features")):r>=2?o.createElement(ev.E,null,(0,S.tx)("upgrade.pro_trial_uub_countdown.you_will_miss_these_files")):r>=1?o.createElement(ev.E,null,(0,S.tx)("upgrade.pro_trial_uub_countdown.just_a_memory")):null})),e<=9&&o.createElement(I.vd,{className:"pro_trials_upgrade_section--redesignedUpgradeButton--SP1nz",onClick:a,dataTestId:"redesigned-upgrade-button-pro-trial-countdown-upgrade",trackingProperties:rw.ng.getTrackingProperties()},o.createElement(ev.E,null,(0,S.tx)("upgrade.upgrade_to_professional")))))}function iY(e){return o.createElement(iR,{trackingContext:"Universal Upgrade Section Pro Trial Expired",trackingProperties:rw.ng.getTrackingProperties(),titleText:o.createElement(ev.E,null,(0,S.tx)("upgrade.currently_on_starter_plan")),bodyText:o.createElement(ev.E,null,(0,S.tx)("upgrade.your_trial_has_ended")),ctaText:o.createElement(ev.E,null,(0,S.tx)("upgrade")),onClickCTA:e.onClickCTA,ctaDataTestId:"redesigned-upgrade-button-pro-trial-expired-upgrade",ctaTrackingProperties:rw.ng.getTrackingProperties(),header:o.createElement(iG,{team:e.team})})}function iK(e){let t=(0,s.wA)(),{ongoingUpgradableTrials:a,expiredUpgradableTrials:r}=e,n=(0,s.d4)(e=>e.teams),l=e=>{t((0,R.to)({type:a9.V,data:{teamId:e,upsellSource:J.b.PRO_TRIAL_UPSELL_MODAL}}))};return r.length>0?o.createElement(iY,{team:n[r[0].teamId],onClickCTA:()=>l(r[0].teamId)}):a.length>0?o.createElement(iz,{trialTeam:n[a[0].teamId],daysLeft:a[0].daysLeft,onClickCTA:()=>l(a[0].teamId)}):null}var iQ=(e=>(e.PRO_TRIALS_ENTRY="Pro Trials Entry",e.PRO_TRIALS_UPGRADE="Pro Trials Upgrade",e.EDU_EXPIRY="EDU Expiry",e.EDU_UPGRADE="EDU Upgrade",e.ORG_UPGRADE="Org Upgrade",e.UNIVERSAL="Universal",e))(iQ||{});function iq({onTeam:e,hitFileLimit:t}){let a=(0,s.wA)(),r=rp.h.useTrackingContext({trigger:J.b.UNIVERSAL_UPGRADE_SECTION}),n=t?o.createElement(o.Fragment,null,o.createElement("span",{className:iD},(0,S.tx)("upgrade.running_out_of_files_in_your_free_team"))," ",(0,S.tx)("upgrade.upgrade_to_give_your_ideas_and_designs_room_to_grow_without_limits")):(0,S.tx)("upgrade.ready_to_go_beyond_free_plan_upgrade_for_premium_features");return o.createElement(iR,{trackingContext:"Universal Upgrade Section",trackingProperties:{onTeam:e,hitFileLimit:t,...r},svg:iU.A,bodyText:n,ctaText:(0,S.tx)("upgrade.view_plans"),ctaTrackingProperties:{trackingDescriptor:ew.c.UPGRADE},ctaDataTestId:"redesigned-upgrade-button",onClickCTA:()=>{a((0,R.to)({type:a9.V,data:{upsellSource:J.b.UNIVERSAL_UPGRADE_SECTION}}))}})}var iX=a(794272),iJ=a(38580),iZ=a(529928),i0=a(693223);let i1=(0,iJ.eU)(e=>{let t=e(i0.m),a=e(i2),r=(0,_.kc)().ps_benchmark;if(!a)return!1;let n=function(e){return[z.P4.FILES_LIMITED,z.P4.FILES_LIMITED_LEGACY,z.P4.WHITEBOARD_FILES_LIMITED,z.P4.WHITEBOARD_FILES_LIMITED_BETA].some(t=>{var a;return null==(a=null==e?void 0:e.restrictions_list)?void 0:a.includes(t)})}(a);return r?n:Object.values(t).some(e=>[z.P4.FILES_LIMITED,z.P4.FILES_LIMITED_LEGACY,z.P4.WHITEBOARD_FILES_LIMITED,z.P4.WHITEBOARD_FILES_LIMITED_BETA].some(t=>e.restrictions_list&&e.restrictions_list.includes(t)))}),i2=(0,iZ.bt)(e=>{let t=e.currentTeamId;return t?e.teams[t]:null});function i4(){return o.createElement(T.tH,{boundaryKey:"SidebarUpgradeSection",fallback:T.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:w.e.MONETIZATION_UPGRADES}},o.createElement(i8,null))}function i8(){let e=function(){let e=function(){let e=(0,j.FC)(),t=(0,$.TA)(),a=(0,r3.f)(rw.Jy),r=(0,rh.xX)(),n=(0,ns.a9)(),l=(0,s.d4)(e=>e.userTeamFlags);if(rw.ng.uxEnabled()&&!n){let{ongoingTrials:n,expiredTrials:i}=rw.ng.getUpgradableProTrials(l,e),o=i.filter(rw.ng.canSeeProTrialExpiryUx);if(n.length>0||o.length>0)return{type:iQ.PRO_TRIALS_UPGRADE,props:{ongoingUpgradableTrials:n,expiredUpgradableTrials:o}};if(a&&r.length>0&&rw.ng.isUserInVariant(t))return{type:iQ.PRO_TRIALS_ENTRY}}return null}(),t=function(){var e,t;let a=(0,$.iZ)(),r=(0,ns.a9)(),n=(0,r5.ol)(),l=(0,j.FC)(),i=(0,rr.Rs)(rl.UpR,{}),o=null==(t=null==(e=i.data)?void 0:e.currentUser)?void 0:t.eduPeriodEnd,c=(0,s.d4)(e=>e.userFlags);if(!a||"loaded"!==i.status)return null;let d=(0,b.x$)(o,(0,b.cn)(a)),m=d>0&&d!==1/0&&(0,b.cn)(a)&&(null==n?void 0:n.student_team_state)===lC.kU.STUDENT_TEAM_CURRENT,u=0===d&&(null==n?void 0:n.student_team_state)===lC.kU.STUDENT_TEAM_EXPIRED&&(0,K.oc)(n.id,l);if((0,_.kc)().edu_offboarding_experience&&(m||u))return{type:iQ.EDU_EXPIRY,props:{daysLeft:d}};if(!c.dismissed_edu_sidebar&&(0,b.cn)(a)&&!r){let e=(0,K.Kg)(l).length>0;return{type:iQ.EDU_UPGRADE,props:{type:e?iM.UPGRADE:iM.CREATE}}}return null}(),a=function(){var e;let t=(0,$.iZ)(),a=0===Object.keys((0,s.d4)(e=>e.orgById)).length,r=(0,s.d4)(e=>e.teams),n=(0,r5.ol)(),l=(0,aJ.md)(i1),i=!Object.values(r).some(e=>null!==e.subscription||e.student_team_at),o=!!(0,_.kc)().ps_benchmark,c=(0,aJ.md)(nA.Lm),d=(0,rr.Rs)(rl.kQI,{id:(null==n?void 0:n.id)??""},{enabled:!!n&&o}),m=(0,r0.vt)(),u=(0,M.Yz)();if(!t||o&&!n||o&&("loaded"!==d.status||!(null==(e=d.data.team)?void 0:e.hasPermission)||"loaded"!==c.status||!c.data))return null;let p=n&&o&&!(0,b.cn)(t)&&!(0,K.w5)(r[n.id])&&!u(m);return!o&&a&&!(0,b.cn)(t)&&i||p?{type:iQ.UNIVERSAL,props:{onTeam:Object.keys(r).length>0,hitFileLimit:l}}:null}(),r=function(){let e=(0,j.FC)(),t=(0,s.d4)(e=>e.userFlags),a=(0,iX.R)(e=>({orgUsersByOrgId:e.orgUsersByOrgId,user:e.user,userFlags:e.userFlags,teams:e.teams,currentTeamId:e.currentTeamId})),r=(0,to.hF)(a,e),n=(0,to.j)(t);return r===to.VY.NONE||n?null:{type:iQ.ORG_UPGRADE,props:{orgUpsellEligibility:r}}}();return null!==e?e:null!==t?t:null!==a?a:null!==r?r:null}(),t=(0,M.fn)();return null===e?null:o.createElement(o.Fragment,null,![M.ih.VARIANT_A,M.ih.VARIANT_B].includes(t)&&o.createElement("div",{className:ef.cx.my8.mx0.h1.$,style:ea.sx.add({backgroundColor:"var(--color-border)"}).$}),o.createElement(i3,{...e}))}function i3(e){switch(e.type){case iQ.PRO_TRIALS_ENTRY:return o.createElement(i$,null);case iQ.PRO_TRIALS_UPGRADE:return o.createElement(iK,{ongoingUpgradableTrials:e.props.ongoingUpgradableTrials,expiredUpgradableTrials:e.props.expiredUpgradableTrials});case iQ.EDU_EXPIRY:return o.createElement(iB,{daysLeft:e.props.daysLeft});case iQ.EDU_UPGRADE:return o.createElement(iO,{type:e.props.type});case iQ.ORG_UPGRADE:return o.createElement(iV,{orgUpsellEligibility:e.props.orgUpsellEligibility});case iQ.UNIVERSAL:default:return o.createElement(iq,{onTeam:e.props.onTeam,hitFileLimit:e.props.hitFileLimit})}}var i5=a(913270),i9=a(195907);function i6(){let e=(0,s.wA)(),t=()=>{(0,tK.sx)("community_browser_sidebar_action_clicked"),e(A.$T({view:"communityHub",subView:"searchAndBrowse",data:(0,i5.Gu)()}))};return o.createElement(O.L0,{trackingEventName:"community_browser_sidebar_action_clicked",className:ey()(ef.cx.flex.flexRow.itemsCenter.gap12.h48.pl16.pr16.colorText.cursorDefault.$,"explore_community_button--hoverColor--mDUIs"),"data-onboarding-key":i9.vM,onClick:e=>{e.preventDefault(),e.stopPropagation(),t()}},o.createElement(re.In,{icon:"community-16"}),o.createElement(ev.E,null,(0,S.tx)("sidebar.explore_community")))}function i7(e){return o.createElement("div",{className:ef.cx.sticky.bottom0.colorBg.zIndex1.if(e.hasTopBorder,ef.cx.bt1.colorBorder.bSolid).$},e.shouldShowUUBInFooter&&o.createElement("div",{className:ef.cx.pb10.pt12.$},o.createElement(i4,null)),o.createElement(i6,null))}var oe=a(55710),ot=a(111075);function oa(e){return o.createElement("div",{className:ef.cx.colorBg.if(e.hasBottomBorder,ef.cx.bb1.colorBorder.bSolid).$},o.createElement(ot.X,null),o.createElement(oe.Zn,null))}var or=a(900581),on=a(278362);function ol(e){let t=(0,s.wA)(),a=(0,ry._6)(),r=(0,s.d4)(e=>e.currentUserOrgId),n=(0,nK.S)(),l=(0,s.d4)(e=>e.teamFeedBellStates),i=!!(r&&l[r]),c="teamFeed"===a.view;return o.createElement(rs.Z,{onClick:()=>{t(A.$T({view:"teamFeed"})),t(A.Oe({clickedResourceType:"teamFeed"}))},isSelected:c,icon:o.createElement(es.B,{className:ef.cx.colorIcon.$,svg:n?on.A:or.A}),text:o.createElement("span",{className:"team_feed_page_link--sectionNameCustomSections--dPwog sidebar--sectionNameCustomSections--9e7LZ sidebar--sectionTextCustomSections---1KFn sidebar--sectionContentCustomSections--wI9mZ ellipsis--ellipsis--Tjyfa"},o.createElement("div",{className:"team_feed_page_link--sectionNameCustomSectionsLeft--MLMFK"},(0,S.tx)("fig_feed.feed"),i&&o.createElement("div",{className:"team_feed_page_link--redDot--t6QPY red_dot--baseRedDot--pgZV7"})))})}function oi({selectedView:e,teamFolderId:t,teamFolderName:a}){let r=(0,s.wA)();return t&&a?o.createElement(rs.Z,{isSelected:e&&"folder"===e.view&&e.folderId===t,onClick:()=>{r(L.gN(t)),r(A.Oe({clickedResourceType:"folder"}))},icon:o.createElement(re.In,{icon:"folder-32"}),text:o.createElement(ev.E,{truncate:!0,showTooltipWhenTruncated:!1},a),"data-onboarding-key":a6.Jo}):null}var oo=a(699575);function os(){let e=(0,s.wA)(),t="deletedFiles"===(0,s.d4)(e=>e.selectedView).view;return o.createElement(rs.Z,{isSelected:t,onClick:()=>{e(A.$T({view:"deletedFiles"})),e(A.Oe({clickedResourceType:"deletedFiles"}))},icon:o.createElement(es.B,{className:ef.cx.colorIcon.$,svg:oo.A}),text:o.createElement(ev.E,null,(0,S.tx)("file_browser.tool_bar.trash"))})}function oc(e){var t,a,r,n,l,i,s;let c=e.currentUserOrgId&&e.userFlags.show_create_new_section_banner,d=o.createRef(),m=(0,ei.s)(tK.sx,eP.WL,!0),[u,p]=o.useState(!c&&ia.hG({type:"topLevel",id:"teamsOrLicenseGroups",orgId:e.currentUserOrgId})),[f,E]=o.useState(0),[v,h]=o.useState(!1),[y,b]=o.useState(!1),[w,T]=o.useState(!1),x=t=>{e.dispatch(A.z5({folderId:t.id}))},N=t=>{e.dispatch(P.b({show_create_new_section_banner:!1}))},C=t=>{e.dispatch(no.pS({newCustomSectionIndex:0})),N(t)},k=()=>{ia.Fp({type:"topLevel",id:"teamsOrLicenseGroups",orgId:e.currentUserOrgId},!u),p(!u)},L=(0,_.kc)().ps_benchmark&&e.currentTeamId,R=e.projectsByTeam[rY.USER_DRAFTS],D=R?R[0]:null,F=(0,a8.He)(e.dropdownShown),O=0===((null==(a=null==(t=e.sidebarData)?void 0:t.teamRoles)?void 0:a.map(e=>e.team).filter(e=>e))||[]).map(e=>e.id).length,B=(0,rZ.wA)(e),U=(0,ns.a9)(),V=U&&U.permission===z._D.ADMIN,H=(0,rg.D6)(e.currentUserOrgId),W=()=>e.userStateLoaded?o.createElement(i4,null):null,j=(0,nc.l2)(B,V??!1,!1),$=o.createElement(o.Fragment,null,o.createElement(na,{dispatch:e.dispatch,notOnAnyTeams:O,currentOrgId:e.currentUserOrgId,tooltipText:j?(0,S.t)("license_group_view.toolbar.create_team_disabled"):void 0,disabled:j||(0,rb.R$)(e.user,null==B?void 0:B.id),onMouseEnter:j?()=>{m(eP.jd,{orgId:e.currentUserOrgId,orgName:null==B?void 0:B.name,placement:"teamsSidebar"})}:void 0})),G=()=>!(0,q.canMemberOrg)(e.currentUserOrgId,e.permissionsState)&&e.currentUserOrgId||g.Ay.mobile?null:$,Y=()=>{let t=!(0,q.canMemberOrg)(e.currentUserOrgId,e.permissionsState);return o.createElement(o.Fragment,null,O&&o.createElement(o.Fragment,null,o.createElement(nr,{org:B,isOrgGuest:t,dispatch:e.dispatch})))},K=()=>o.createElement("div",{onClick:k,role:"button",tabIndex:0,className:"sidebar--sectionHeaderContainer--TcvBb sidebar--sectionHeaderName--xToHG sidebar--sectionName--4N7hT sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa"},o.createElement(es.B,{className:"sidebar--expandCaret--eXGWm",svg:u?ir.A:il.A,onClick:k}),o.createElement("div",null,e.isEnterpriseSidenavEnabled?o.createElement(o.Fragment,null,o.createElement("span",null,(0,S.tx)("sidebar.workspaces"))):(0,S.tx)("sidebar.teams"))),Q=o.createElement(rK,{sidebarData:e.sidebarData,projectsByTeam:e.projectsByTeam}),X=!e.currentUserOrgId&&e.projectsByTeam[rY.USER_FOLDERS],J=e.sidebarData,Z=(0,_.kc)().ps_benchmark&&L?null==(r=e.dataDriftCorrectedTeamResources)?void 0:r.favoritedFiles:null==J?void 0:J.favoritedFiles,ee=(0,_.kc)().ps_benchmark&&L?null==(n=e.dataDriftCorrectedTeamResources)?void 0:n.favoritedPrototypes:null==J?void 0:J.favoritedPrototypes,et=(0,_.kc)().ps_benchmark&&L?null==(l=e.dataDriftCorrectedTeamResources)?void 0:l.favoritedProjects:null==J?void 0:J.favoritedProjects;et&&e.FBGNavigationUpdatesTreatment!==M.ih.CONTROL&&(et=et.filter(t=>{var a;return(null==(a=t.project)?void 0:a.id)!==e.teamFolderId}));let ea=(null==Z?void 0:Z.length)===0&&(null==ee?void 0:ee.length)===0&&(null==et?void 0:et.length)===0,er=e.FBGNavigationUpdatesTreatment===M.ih.CONTROL||!ea,en=e.FBGNavigationUpdatesTreatment===M.ih.VARIANT_A,el=e.FBGNavigationUpdatesTreatment===M.ih.VARIANT_B,eo=!!e.dragState.data&&(e.dragState.type===rB.R.Folder||e.dragState.type===rB.R.Team||e.dragState.type===rB.R.Favorite),ec=B&&o.createElement("div",{className:nV},e.userFlags.show_create_new_section_banner?o.createElement("div",{className:"sidebar--betaAnnouncementContainer--FfmFT"},o.createElement("div",{className:"sidebar--betaAnnouncementHeader--g6Qzz"},o.createElement("div",{className:"sidebar--betaAnnouncementHeaderTitle--AyDjm"},(0,S.tx)("favorited_resources.custom_sections_banner_header")),o.createElement("div",{role:"button",tabIndex:0,className:"sidebar--closeX---nRcN",onClick:e=>N(e)},o.createElement(es.B,{svg:aQ.default}))),o.createElement("div",{className:"sidebar--betaAnnouncementBodyContainer--8u60g"},o.createElement("p",null,(0,S.tx)("favorited_resources.custom_sections_banner_body")),o.createElement("br",null),o.createElement("p",null,o.createElement(I.tM,{className:"sidebar--betaAnnouncementButton--RCpKp",onClick:e=>C(e)},(0,S.tx)("favorited_resources.custom_sections_banner_create_new_section_button"))))):null),ed=!(e.showLoadingState||e.showingFileBrowserLoader);return o.createElement(r2.A,{loadingElementId:"filebrowser-loading-sidebar",loaded:ed},o.createElement("div",{className:ef.cx.flex.flexColumn.wFull.$},o.createElement(oa,{hasBottomBorder:w}),o.createElement(ep.P,{className:"sidebar--sidebarScrollContainer--Z95XT",innerClassName:ef.cx.hFull.$,scrollingDisabled:!1,onScroll:e=>E(e)},o.createElement(r4.a,{onIntersectionChange:t=>{T(!t.isIntersecting),t.isIntersecting||v||(e.trackScroll(),h(!0))}}),o.createElement("div",{className:ey()("sidebar--navContent--15V3f",{"sidebar--grabbingCursor--6rbhU":eo})},o.createElement("div",{className:ef.cx.flexGrow1.flex.flexColumn.$},o.createElement(o.Fragment,null,o.createElement(ni,null),(0,_.kc)().ps_benchmark&&o.createElement(nG.r,{selectedView:e.selectedView,dispatch:e.dispatch}),o.createElement("div",{className:nW}),o.createElement("div",{className:ef.cx.ml8.mr8.mt2.mb2.$},o.createElement(iS.b,null)),(0,_.kc)().xr_debounce_threshold&&B&&U&&U.permission!==z._D.GUEST?o.createElement(ol,null):null,D&&o.createElement(n$.s,{folder:D,selectedView:e.selectedView,dispatch:e.dispatch,shouldHideCreateFileButton:e.isShowingLockedRedesign}),o.createElement(nj,{userStateLoaded:e.userStateLoaded,sidebarData:e.sidebarData}),L&&o.createElement(o.Fragment,null,o.createElement(nC,{selectedView:e.selectedView}),(0,_.kc)().pdr_trashed_section&&o.createElement(os,null),o.createElement(rm,{selectedView:e.selectedView}),e.FBGNavigationUpdatesTreatment!==M.ih.CONTROL&&o.createElement(oi,{selectedView:e.selectedView,teamFolderId:e.teamFolderId,teamFolderName:e.teamFolderName})),!en&&!el&&o.createElement("div",{className:nV},W()),!(U&&B)&&er&&o.createElement("div",{className:nW}),U&&B&&(e.userStateLoaded?o.createElement(o.Fragment,null,o.createElement(iC,null),(0,_.kc)().pdr_trashed_section&&o.createElement(os,null),e.currentUserOrgId&&U&&!g.Ay.mobile&&o.createElement(nb,{selectedView:e.selectedView,org:e.orgById[e.currentUserOrgId],orgUser:U})):o.createElement("div",{className:nH},o.createElement(tc.kt,null))),H&&ec,e.userStateLoaded?o.createElement(o.Fragment,null,e.currentUserOrgId?o.createElement(im,{fileBrowserPreferences:null==(i=e.sidebarData)?void 0:i.fileBrowserPreferences,favoritedFiles:Z,favoritedPrototypes:ee,favoritedProjects:et,favoritedTeams:null==J?void 0:J.favoritedTeams,favoritedWorkspaces:null==J?void 0:J.favoritedWorkspaces,userSidebarSections:(null==J?void 0:J.userSidebarSections)?(0,r1.oA)(J.userSidebarSections):[],isEnterpriseSidenavEnabled:e.isEnterpriseSidenavEnabled,previewYOffset:f}):o.createElement(o.Fragment,null,er&&o.createElement(id,{fileBrowserPreferences:null==(s=e.sidebarData)?void 0:s.fileBrowserPreferences,favoritedFiles:Z,favoritedPrototypes:ee,favoritedProjects:et,favoritedTeams:null,favoritedWorkspaces:null,isEnterpriseSidenavEnabled:e.isEnterpriseSidenavEnabled,previewYOffset:f}),!L&&X&&o.createElement(o.Fragment,null,o.createElement("div",{className:nW}),o.createElement("div",{className:ey()(["sidebar--sectionName--4N7hT sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa","sidebar--sharedProjectsSectionHeaderContainer--yEyoT sidebar--sectionHeaderContainer--TcvBb sidebar--sectionHeaderName--xToHG sidebar--sectionName--4N7hT sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa"])},o.createElement(ev.E,null,(0,S.tx)("file_browser.shared_projects"))),Q)),(0,_.kc)().ps_benchmark&&L&&o.createElement(ib,{teamUser:null==J?void 0:J.currentTeamUser,dataDriftCorrectedTeamResources:e.dataDriftCorrectedTeamResources,previewYOffset:f}),(()=>{var t,a,r,n;if(L||(0,rg.D6)(e.currentUserOrgId))return o.createElement(o.Fragment,null);let l=(0,r5.yR)((null==(a=null==(t=e.sidebarData)?void 0:t.teamRoles)?void 0:a.map(e=>e.team).filter(e=>!!e))||[],(null==(n=null==(r=e.sidebarData)?void 0:r.fileBrowserPreferences)?void 0:n.orderedTeamIds)||[]);return o.createElement(o.Fragment,null,o.createElement("div",{className:nW}),K(),!e.isEnterpriseSidenavEnabled&&o.createElement("div",{className:ef.cx.if(!u,ef.cx.hidden).$},o.createElement(iT,{sidebarData:e.sidebarData,projectsByTeam:e.projectsByTeam,isEnterpriseSidenavEnabled:!1,orderedTeams:l,contextSelectedFolder:F,onFolderRenameClick:e=>x(e)}),Y(),o.createElement("div",{ref:d}),G()))})()):o.createElement("div",{className:nH},o.createElement(tc.kt,null)),el&&o.createElement("div",{className:ef.cx.sticky.bottom0.colorBg.pb10.pt12.$},W()))),o.createElement(r4.a,{onInitialLoad:e=>{b(!e)},onIntersectionChange:e=>{b(!e.isIntersecting)}}))),o.createElement(i7,{hasTopBorder:!el&&!en&&(y||w),shouldShowUUBInFooter:en})))}function od(e){var t,a,r,n,l,i,c,d,m;let u;let f=(0,$.iZ)(),g=(0,s.wA)(),E=(0,et.Q)({currentOrgId:e.currentUserOrgId,currentTeamId:(0,_.kc)().ps_benchmark&&e.currentTeamId||null}),v=(0,$.TA)(),h=(0,s.d4)(e=>{var t;return v?null==(t=e.authedUsers.byId[v])?void 0:t.plans:null}),[{status:y,data:b}]=(0,p.IT)((0,rO.Xg)({teamId:e.currentTeamId||void 0})),w="loaded"===y&&(null==b?void 0:b.length)===1?b[0]:null,T=null==w?void 0:w.id,I=null==w?void 0:w.name,x=(0,rZ.wA)(e),N=!(0,q.canMemberOrg)((null==x?void 0:x.id)??null,(0,q.getPermissionsState)(e.permissionsState)),C="loaded"===E.status?E.data:null,S="loaded"!==E.status,k={},A={},L=[],R=((null==(t=null==C?void 0:C.currentUser)?void 0:t.sharedProjectRolesWithoutOrgDeletedDrafts)||[]).filter(t=>{var a;let{project:r}=t;if(!r)return!1;let n=(null==(a=r.team)?void 0:a.orgId)||r.orgId;return e.currentUserOrgId?n===e.currentUserOrgId:!n}),D=(0,r0.vt)(e.currentTeamId),F=(0,M.Yz)(),P=R.length>0,O=(0,o.useMemo)(()=>C?{...C.currentUser}:null,[C]),B=o.useMemo(()=>{if(O&&O.currentTeamUser&&e.currentTeamId)return(0,rg.TF)(O,e.currentTeamId,h)},[O,e.currentTeamId,h]),U=e.showingFileBrowserLoader;if(o.useEffect(()=>{var t,a;if((0,_.kc)().ps_benchmark&&e.currentTeamId&&O&&(null==O?void 0:O.currentTeamUser)){let r=O.currentTeamUser;!r.fileBrowserPreferences&&O.fileBrowserPreferences&&g(rX.Sh({prefs:O.fileBrowserPreferences,orderedFolderSubscriptions:(null==(a=null==(t=O.fileBrowserSectionPreferences)?void 0:t.filter(t=>t.teamId===e.currentTeamId)[0])?void 0:a.orderedFolderIds)??[],teamUser:r}))}},[e.currentTeamId,O,g]),O){let t;u=null==(r=null==(a=O.privilegedOrgUser)?void 0:a.licenseGroupMember)?void 0:r.licenseGroup;let o=[],s=new Set;for(let t of O.teamRoles||[])(null==(n=t.team)?void 0:n.orgId)!==e.currentUserOrgId||(null==(l=t.team)?void 0:l.deletedAt)||t.pending||(o.push(t),s.add(t.team.id),(null==(i=t.team)?void 0:i.licenseGroupId)?(A[t.team.licenseGroupId]=A[t.team.licenseGroupId]||[],A[t.team.licenseGroupId].push(t)):t.team&&L.push(t));if(O.teamRoles=o,e.currentUserOrgId&&O.baseOrgUser){let e=O.baseOrgUser;O.fileBrowserPreferences=e.fileBrowserPreferences,O.fileBrowserSectionPreferences=e.fileBrowserSectionPreferences}else(0,_.kc)().ps_benchmark&&e.currentTeamId&&O.currentTeamUser&&(O.fileBrowserPreferences=null==(c=O.currentTeamUser)?void 0:c.fileBrowserPreferences);let p=(O.projectSubscriptions||[]).sort((e,t)=>{var a,r,n,l;return(null==(r=null==(a=e.projectV2)?void 0:a.path)?void 0:r.toLowerCase())<(null==(l=null==(n=t.projectV2)?void 0:n.path)?void 0:l.toLowerCase())?-1:1}),f={};for(let t of p){let a=t.projectV2;if(!a||(f[a.id]=t.id,(a.team?a.team.orgId!==e.currentUserOrgId:a.orgId!==e.currentUserOrgId)||!a.team&&""===a.path||a.team&&""===a.path&&(0,_.kc)().ps_benchmark))continue;let r=s.has(a.teamId)?a.teamId:rY.USER_FOLDERS;k[r]=k[r]||[],k[r].push(a)}rJ.zL(f),t=(0,_.kc)().ps_benchmark&&e.currentTeamId?null==(d=null==C?void 0:C.currentUser.currentTeamUser)?void 0:d.draftsProject:e.currentUserOrgId?null==(m=null==C?void 0:C.currentUser.baseOrgUser)?void 0:m.draftsProject:null==C?void 0:C.currentUser.draftsProject,k[rY.USER_DRAFTS]=t?[t]:[]}return o.createElement(oc,{...e,showingFileBrowserLoader:U,hasSharedProjects:P,sidebarData:O,projectsByTeam:k,teamRolesByLicenseGroup:A,teamsUnassignedToLicenseGroup:L,mainLicenseGroup:u,isEnterpriseSidenavEnabled:(0,rZ.LU)(x??void 0,N,O??void 0),dataDriftCorrectedTeamResources:B,showLoadingState:S,trackScroll:()=>(0,eP.uE)("Sidebar Scrolled",{user:f}),isShowingLockedRedesign:F(D),FBGNavigationUpdatesTreatment:(0,M.fn)(),teamFolderId:T,teamFolderName:I})}function om(e){return o.createElement("nav",{className:ey()("sidebar--navDefault--pYuzm",{"sidebar--showMobileNav--YiFit":e.mobileNavShown})},o.createElement(T.tH,{boundaryKey:"FileBrowserSidebar",fallback:o.createElement(rq.R,null),hasCustomWASMBuild:W.y4},o.createElement(od,{...e})))}var ou=a(697551),o_=a(411916),op=a(935757),of=a(435011),og=a(840083),oE=a(726732),ov=a(106757);let oh=(0,iJ.eU)(e=>{var t;let a=(0,_.kc)().mfa_for_guests,r=e(ov.p9),n=e(t0.QI),l=null==n?void 0:n.org_id,i=(null==n?void 0:n.permission)===z._D.GUEST;if(!a||!r||!n||!l||!i)return!1;let o=e((0,rl.dFC)({orgId:l}));if("loaded"!==o.status)return!1;let s=(null==(t=o.data.orgPublicInfo)?void 0:t.mfaRequired)===t4.CT.GUESTS,c=!!(r.two_factor_app_enabled||r.phone_number),d=r.google_sso_only||r.saml_sso_only;return i&&s&&!c&&!d});var oy=a(322611),ob=a(211789);function ow({isInFileBrowser:e=!1,org:t}){let a=(0,s.wA)();return o.createElement("div",{className:ef.cx.zIndex0.$},o.createElement(oy.u,{headerImage:o.createElement("div",{className:ef.cx.pb16.$},o.createElement(eV.Ro,{entity:t,size:64})),headerText:(0,S.t)("mfa_required_modal.title",{orgName:t.name}),secondaryText:(0,S.t)("mfa_required_modal.subtitle",{orgName:t.name}),unblockFileBrowserSidebar:e},o.createElement(eu.vd,{className:"mfa_required--ctaButton--PSKI-",type:"submit",onClick:()=>{(0,tK.sx)("Two-factor setup started"),a((0,R.to)({type:ob.J}))}},(0,S.tx)("mfa_required_modal.cta")),o.createElement(I.CY,{className:"mfa_required--learnMoreLink--17Yuc",target:"_blank",href:"https://help.figma.com/hc/en-us/articles/360039817634-Enable-two-factor-authentication-2FA",trusted:!0},(0,S.tx)("general.learn_more"))))}var oT=a(809838),oI=a(91408),ox=a(170588),oN=a(550642),oC=a(539321),oS=a(568214),ok=a(138392),oA=a(168039),oL=a(809511),oR=a(231959),oD=a(42173);let oF=(0,iJ.eU)(void 0),oP=(0,oS.H0)("#2c2c2c");function oM(e){var t;let a=(0,aJ.md)(oF);if(!e||"unset"===a)return;let r=((null==(t=e.colorConfig)?void 0:t.colors)??[])[0];return a?(0,oC.colorToHex)(a):r}function oO(e){return!!e&&"unset"!==e}function oB(e){return e&&e!==oR.O&&"colorConfig"in e?e:void 0}function oU(e){return void 0!==e.team_id}function oV(e,t){if(e!==oR.O){if("team_id"in e&&e.team_id)return t.teams[e.team_id];if("workspace_id"in e)return e}}var oH=a(383986),oW=a(127391);function oj(e){return o.createElement(eg.Y,{spacing:4},o.createElement(oW.H,{entityId:e.planEntity.id,entityName:e.planEntity.name,imgUrl:e.planEntity.img_url}),o.createElement(ev.E,{fontSize:13,color:"secondary"},e.planEntity.name))}let o$={folder:e=>e?{view:"folder",folderId:e}:void 0,team:e=>e?{view:"team",teamId:e}:void 0,workspace:e=>({view:"workspace",subView:nE.V0.DIRECTORY,workspaceId:e??null,selectedTab:nE.dN.TEAMS}),org:e=>e?{view:"org",orgId:e,orgViewTab:r9.X.HOME}:void 0};function oG({resource:e}){var t,a,r;let n=(0,s.wA)(),l=(0,j.FC)(),i=(0,rv.sZ)(),c=oM(oB(e)),d=(0,rr.Rs)(rl.bUn,{orgId:(null==i?void 0:i.id)??null},{enabled:!!i}),m="loaded"!==d.status,u=(null==(a=null==(t=d.data)?void 0:t.org)?void 0:a.workspaces)??[],_=function(e,t){let a=(0,iX.R)(e=>({currentUserOrgId:e.currentUserOrgId,teams:e.teams,orgById:e.orgById}));return(0,o.useMemo)(()=>({folder:oU(e)?e:void 0,team:oV(e,a),workspace:function(e,t,a){let r=oV(e,t);if(e===oR.O);else if(r&&r.workspace_id)return null==a?void 0:a.find(e=>e.id===r.workspace_id);else if(r&&!r.workspace_id&&r.org_id){let e=t.orgById[r.org_id];return(null==e?void 0:e.workspaces_count)?oR.O:void 0}else if("domain_capture"in e||oU(e)||"workspace_id"in e)return;return e}(e,a,t),org:function(e,t){let a=oV(e,t);return(null==a?void 0:a.org_id)?t.orgById[a.org_id]:e===oR.O?t.currentUserOrgId?t.orgById[t.currentUserOrgId]:void 0:"org_id"in e?e.org_id?t.orgById[e.org_id]:void 0:"orgId"in e?e.orgId?t.orgById[e.orgId]:void 0:"domain_capture"in e?e:void 0}(e,a)}),[e,a,t])}(e,m?[]:[...u]);if(i||_.org?(null==i?void 0:i.id)!==(null==(r=_.org)?void 0:r.id):!_.team||!(0,q.canViewTeam)(_.team.id,l)){let e=_.org??_.team;return e?o.createElement(oj,{planEntity:e}):null}let p=e===oR.O?void 0:e.id,f=(e,t)=>{let a=t===oR.O?void 0:t.id,r=o$[e](a);(0,eP.Cu)({clickedResourceType:e,clickedResourceId:a,currentResource:p,orgId:null==i?void 0:i.id}),r&&n(A.$T(r))},g=["org","workspace","team","folder"].reduce((e,t)=>{let a=_[t];if(a){let r="workspace"===t&&!a.canView,n=a===oH.s?(0,S.t)("breadcrumbs.unassigned_license_group"):r?(0,S.t)("breadcrumbs.private_workspace_ellipses"):null==a?void 0:a.name;e.push({text:n,onClick:()=>{r||f(t,a)},parentBackgroundColor:c,isHoverable:!(a===oH.s||r)})}return e},[]);return g.pop(),o.createElement(aZ.B,{items:g})}function oz(e){return e.rightSideActions?o.createElement(oY,{headerLabel:e.label,rightSideActions:e.rightSideActions}):e.label}function oY(e){let t=(0,rr.Rs)(rl.RIo,{orgId:null});return((0,rr.ap)(t,"file_creation_defaults_latency"),"loaded"!==t.status)?null:o.createElement("div",{className:ef.cx.flex.justifyBetween.wFull.itemsCenter.columnGap16.$},e.headerLabel,o.createElement("div",{className:ef.cx.flex.gap8.$},e.rightSideActions))}function oK(e){let t=oM(oB(e.resource));return o.createElement("div",{className:ef.cx.if(e.showNavigationChevrons,ef.cx.pl20,ef.cx.pl32).if(!!e.pageHeaderContent,ef.cx.bb1.colorBorder.bSolid).flex.flexRow.flexShrink0.gap8.itemsCenter.h48.pr32.$,style:{backgroundColor:t},"data-testid":"file-browser-desktop-header"},e.showNavigationChevrons&&o.createElement(oT.J,{parentBackgroundColor:t}),e.pageHeaderContent?o.createElement("span",{className:ef.cx.minW0.wFull.$},o.createElement(oz,{label:e.pageHeaderContent,rightSideActions:e.pageHeaderActions})):e.resource&&o.createElement(oG,{resource:e.resource}))}var oQ=a(860168);let oq=(0,oI.jz)(oQ.tgj);function oX(e){return o.createElement(o.Fragment,null,o.createElement(ox.z,{query:`(min-width: ${oq}px)`,defaultClass:ef.cx.sticky.top0.colorBg.zIndexTopBar.$},o.createElement(oK,{resource:e.breadcrumbResource,pageHeaderContent:e.pageHeaderContent?o.createElement(ev.E,{fontSize:13,truncate:!0},e.pageHeaderContent):void 0,pageHeaderActions:e.pageHeaderActions,showNavigationChevrons:e.showNavigationChevrons})),e.pageHeaderContent&&o.createElement(oN.i,{tabs:[o.createElement(ev.E,{key:"mobilePageHeaderKey",truncate:!0},e.pageHeaderContent)]}))}function oJ(e){let t=(0,s.d4)(({selectedView:e})=>e),a=(0,oT.E)(),r=(0,s.d4)(of.iy),n=(0,G.P)(e.currentUserOrgId,(0,s.d4)(of.o$)),l=(0,aJ.md)(oh),i=(0,rv.sZ)(),m=l&&i&&!ee.T8.includes(t.view);!function(){let e=(0,_.kc)().ps_benchmark,t=(0,s.Pj)();o.useEffect(()=>{if(!e)return;let a=t.getState(),r=(0,q.getPermissionsState)(a),n=(0,o_.vp)(r.user,r.currentUserOrgId,r.currentTeamId);n&&(0,op.Y9)(n.userId,(0,ou.d9)(a.selectedView),n.orgId,void 0,n.teamId)},[t,e])}();let u=r||n.data||void 0,p="orgAdminSettings"===t.view||"licenseGroup"===t.view&&t.subView===nf.GN.ADMIN||"workspace"===t.view&&t.subView===nE.V0.ADMIN||"billingGroupDashboard"===t.view,f=!e.showingFileBrowserLoader&&!p&&(!!d.eD||(0,c.ce)()||u||e.pageHeaderContent);o.useEffect(()=>{let e=e=>{var t;if(e.keyCode===a1.Uz.PERIOD&&(null==(t=document.activeElement)?void 0:t.tagName)==="BODY"){if(!(0,_.kc)().internal_only_debug_tools||!(0,_.kc)().figment_debugger)return;(0,oE.Y)()}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]);let g=(0,j.FC)();return o.createElement("div",{className:ef.cx.flex.flexRow.flexGrow1.$},o.createElement(om,{...e,permissionsState:g,showLoadingState:!1,showingFileBrowserLoader:e.showingFileBrowserLoader}),o.createElement("div",{className:"file_browser_layout--fileBrowserPageViewContainer--m7oe2"},f&&o.createElement(T.tH,{boundaryKey:"FileBrowserPageHeader",fallback:T.H4.NONE_I_KNOW_WHAT_IM_DOING,hasCustomWASMBuild:W.y4},o.createElement(oX,{pageHeaderContent:e.pageHeaderContent,pageHeaderActions:e.pageHeaderActions,breadcrumbResource:u,showNavigationChevrons:a})),o.createElement(T.tH,{boundaryKey:"FileBrowserLayout-content",fallback:o.createElement(rq.R,null),hasCustomWASMBuild:W.y4},!e.showingFileBrowserLoader&&(m?o.createElement(ow,{org:i,isInFileBrowser:!0}):e.children))),o.createElement(og.G,{entryPoint:og.Q.FILE_BROWSER}))}var oZ=a(90885);a(461816),(n||(n={})).filter=function(e,t){return"loaded"!==e.status?e:(0,r1.gB)(e.data.filter(t))};var o0=a(336191),o1=a(660986);function o2(e){return o.createElement("div",{className:o1.p$},o.createElement("div",{className:o1._U},(0,S.tx)("team_tile.no_teams.title")),e.onCreateTeam&&o.createElement(o.Fragment,null,o.createElement("p",null,(0,S.tx)("team_tile.no_teams.info")),o.createElement(I.cw,{className:o1.yd,onClick:e.onCreateTeam},o.createElement(es.B,{svg:ne.A,className:o1.RS}),(0,S.tx)("team_tile.no_teams.create_team_button"))))}var o4=a(785598);function o8(e){let t=[...e.orgTeams.data||[]],a=t.length<a2.Tw;(0,a2.KQ)(t,"name",{useExpensiveNaturalComparison:a});let r="loaded"!==e.orgTeams.status,[n,l]=o.useState(void 0),i=(0,s.wA)(),c=(e,t)=>{e.stopPropagation(),e.preventDefault();let a={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};l(t.id),i(A.j7({type:a6.RQ,data:{teamId:t.id,targetRect:a}}))};return o.createElement(o0.X,{isLoading:r,emptyView:e.emptyView??o.createElement(o2,{onCreateTeam:e.onCreateTeam})},t.map(t=>o.createElement(o4.mc,{key:t.id,team:t,onJoin:e.onJoin,onLeave:e.onLeave,setSelectedTeamId:l,selectedTeamId:n,onContextMenu:c})))}var o3=a(245675),o5=a(297032);function o9(e){let[t,a]=o.useState(!1),r=(0,s.wA)(),n=(0,s.d4)(e=>e.selectedView),l=(0,j.FC)(),i=e.team,c=()=>{(0,eP._J)("file_browser_team_click",i.id,l,{selectedView:"recentsAndSharing"===n.view?n.tab||nl.G.RECENTLY_VIEWED:n.view,viewMode:"grid"}),r(L.kg({clickedResourceType:"team",resourceIdOrKey:i.id})),r(A.$T({view:"team",teamId:i.id}))},d=e.selectedTeamId===e.team.id,m=t||d;return o.createElement(o3.a,{name:i.name,description:i.description,headerLeft:o.createElement(eV.Ro,{className:o1.rP,entity:i,size:40}),headerRight:o.createElement(o5.m,{team:i,onLeave:e.onLeave,isCardActive:m}),onClick:t=>{1===t.detail?e.setSelectedTeamId(e.team.id):2===t.detail&&c()},canView:!0,isCardActive:m,isSelected:d,onMouseOver:()=>{a(!0)},onMouseOut:()=>{a(!1)}})}function o6(e){let t=e.teams;(0,a2.KQ)(t,"name");let[a,r]=o.useState(void 0);return o.createElement(o0.X,{emptyView:(0,S.tx)("team_tile.guest.no_teams.info",{orgName:e.orgName})},t.map(t=>o.createElement(o9,{key:t.id,team:t,onLeave:e.onLeave,selectedTeamId:a,setSelectedTeamId:r})))}var o7=a(377090),se=a(937294),st=a(626322),sa=a(590564);let sr=(0,iJ.eU)(()=>(0,r1.gB)([])),sn=(0,s.Ng)(e=>({teamRoleRequests:e.teamRoleRequests,currentOrgUser:e.orgUsersByOrgId[e.currentUserOrgId][e.user.id],teams:e.teams,user:e.user,roles:e.roles,org:e.orgById[e.currentUserOrgId],orgId:e.currentUserOrgId,orgName:e.orgById[e.currentUserOrgId].name,permissionsState:(0,q.getPermissionsStateMemoized)(e)}))(function(e){var t;let a=(0,s.wA)(),r=e.currentOrgUser&&e.currentOrgUser.permission===z._D.GUEST,l=Object.keys((0,st.t)(e.roles.byTeamId,e.user.id)).filter(t=>e.teams[t]);if(r){let{orgId:t}=e,r=l.map(t=>e.teams[t]).filter(e=>e.org_id===t);return o.createElement(o6,{teams:r,onLeave:e=>{a(R.to({type:sa.p,data:{teamId:e.id}}))},orgName:e.orgName})}let i=(null==(t=e.workspace)?void 0:t.id)??oR.O,c=n.filter(e.orgTeams,t=>{if(e.onlyJoinedTeams)return(0,q.hasViewerRoleAccessOnTeam)(t.id,e.permissionsState);if(i===oR.O){if(t.workspace_id)return!1}else if(i&&t.workspace_id!==i)return!1;return(0,se.dP)(t,e.permissionsState,e.orgId)});return o.createElement(o8,{orgTeams:c,onJoin:e=>(0,o7.GR)(a,e)(),onLeave:e=>{a(R.to({type:sa.p,data:{teamId:e.id}}))},onCreateTeam:e.canCreateTeam?()=>{var t;let r={workspaceId:(null==(t=e.workspace)?void 0:t.id)??oR.O};a(R.to({type:r6.Uc,data:r}))}:void 0,emptyView:i&&!e.canCreateTeam?(0,S.t)("team_tile.no_teams.empty_workspace"):void 0})});function sl(e){var t;let a=(0,rv.sZ)(),r=(0,j.FC)(),n=!(0,q.canMemberOrg)((null==a?void 0:a.id)??null,r),l=(0,aJ.md)(n?sr:oZ.EK),{canCreateTeam:i}=(0,G.l6)(a,null==(t=e.workspace)?void 0:t.id);return o.createElement(sn,{orgTeams:l,workspace:e.workspace,canCreateTeam:i,onlyJoinedTeams:e.onlyJoinedTeams})}var si=a(214289),so=a(602242),ss=a(939683);function sc(e){return o.createElement(eu.nR,{className:"button_custom--buttonSecondaryDisabled--9JtXq","data-tooltip-type":eB.Ib.TEXT,"data-tooltip":e.tooltipText,"data-tooltip-show-immediately":!0,onMouseEnter:e.onMouseEnter},e.text)}function sd({backgroundColor:e}){let t=(0,ss.NV)(eP.WL),a=(0,s.d4)(e=>e.selectedView.view),r=(0,S.t)("license_group_view.toolbar.new_team_button"),n=()=>{t(eP.jd,{placement:a})};return e?o.createElement("button",{className:ey()("button_custom--buttonBase--H2KEL button--buttonBase---72nl",(0,oS.kx)(e)?"button_custom--buttonColorsForDarkBackground--CiydL":"button_custom--buttonColorsForLightBackground--wejKf","button_custom--buttonHugContents--Ntibj"),"data-tooltip-type":eB.Ib.TEXT,"data-tooltip":(0,S.t)("license_group_view.toolbar.create_team_disabled"),"data-tooltip-show-immediately":!0,onMouseEnter:n,disabled:!0},o.createElement(ev.E,{fontSize:11,fontWeight:"medium",truncate:!0},r)):o.createElement(sc,{text:r,tooltipText:(0,S.t)("license_group_view.toolbar.create_team_disabled"),onMouseEnter:n})}var sm=a(239831);function su({avatar:e,title:t,rightSideActions:a,rightSideOfTitleAction:r,pageHeaderIcon:n,belowHeaderItem:l,textColor:i,badge:s}){return o.createElement(o.Fragment,null,o.createElement(oN.i,{tabs:null,hideToolBarOnMobile:!0}),o.createElement("div",{className:ey()(ef.cx.mt12.mx32.mb20.$,"page_header--mx16Mobile--8Eihb")},o.createElement("div",{className:ef.cx.flex.mt8.itemsCenter.justifyBetween.$},o.createElement("div",{className:ef.cx.flex.itemsCenter.h40.minW0.$},e,o.createElement("div",{className:ef.cx.wFull.overflowHidden.$,style:ea.sx.if(e&&!n,ea.sx.ml16).$},o.createElement("span",{className:ef.cx.flex.itemsCenter.$},n,o.createElement(ev.E,{color:i,fontSize:24,truncate:"line-clamp",lineClamp:2},t," "),o.createElement("div",{className:ef.cx.ml8.$},s),r&&r.element))),o.createElement("div",{className:ef.cx.flex.ml16.gap8.$},null==a?void 0:a.map(e=>o.createElement(sm.K,{action:e,key:e.key}))))),l)}var s_=a(798099),sp=a(292164);function sf(e){let t=(0,s.wA)(),a=o.useRef(null),r=(0,s.d4)(({dropdownShown:e})=>e),n=e.dropdownKey&&e.dropdownOptions&&r&&r.type===e.dropdownKey&&r.data&&r.data.targetRect,l=(0,O.j6)();return o.createElement("button",{ref:a,onClick:()=>{a.current&&t(A.j7({type:e.dropdownKey,data:{targetRect:a.current.getBoundingClientRect()}}))},onMouseDown:s_.dG,className:ef.cx.bgNone.ml8.$,"aria-label":e.buttonAriaLabel},o.createElement(es.B,{svg:sp.A,className:ey()("page_header_dropdown--dropdownIcon--tr-Wo",e.dropdownColorClassName?e.dropdownColorClassName:"page_header_dropdown--dropdownIconColor--kMRsm")}),n&&o.createElement(nq.j,{parentRect:r.data.targetRect,minWidth:224,rootAndSubmenuMaxWidth:224,items:e.dropdownOptions,dispatch:t,onSelectItem:e=>{e.callback&&e.callback("",null,t),e.trackingProperties&&(0,eP.Cu)({...l.properties,trackingContext:l.name,...e.trackingProperties})},showPoint:!0}))}var sg=a(96796),sE=a(46481);let sv=o.forwardRef(function({disabled:e,onClick:t,onKeyDown:a,icon:r,children:n,onFocus:l,onBlur:i},s){let c=o.useCallback(e=>{null==a||a(e),e.keyCode===a1.Uz.ESCAPE&&e.currentTarget.blur()},[a]);return o.createElement("button",{disabled:e,onClick:t,onKeyDown:c,className:ey()("inverted_inverse_button--buttonBase--P39G5 button--buttonBase---72nl","inverted_inverse_button--buttonColors--7P1RD","inverted_inverse_button--buttonHugContents--PlfBM"),onFocus:l,onBlur:i,ref:s},r&&o.createElement("div",{className:"inverted_inverse_button--iconContainer--nR8Kk"},o.createElement(re.In,{icon:r})),n&&o.createElement(ev.E,{fontSize:11,fontWeight:"medium",truncate:!0},n))});var sh=a(783423),sy=a(740998);let sb=(e,t)=>{if(t)return ef.cx.colorIconDisabled.$;switch(e){case"primary":case"destructive":case"success":case"toolbar-secondary":return ef.cx.colorIconOnbrand.$;case"inverse":return ef.cx.colorIconOninverse.$;default:return ef.cx.colorIcon.$}},sw=o.forwardRef((e,t)=>{let a=o.createElement("div",{className:ef.cx.flex.gap6.itemsCenter.$,"data-testid":e.dataTestId},o.createElement(es.B,{className:sb(e.variant,e.disabled),svg:sy.A}),o.createElement(ev.E,null,e.text),e.hasDropdown&&o.createElement(sE.U,{className:sb(e.variant,e.disabled),svg:sh.A},o.createElement(sg.O,{className:"plus_button--icon--zl7Xl"})));return"inverted-inverse"===e.variant?o.createElement(sv,{onMouseDown:e.onMouseDown?e.onMouseDown:f.lQ,onClick:e.onMouseDown?f.lQ:e.onClick,disabled:e.disabled},a):o.createElement(tP.$,{"data-onboarding-key":e["data-onboarding-key"],variant:e.variant,onMouseDown:e.onMouseDown?e.onMouseDown:f.lQ,onClick:e.onMouseDown?f.lQ:e.onClick,disabled:e.disabled,ref:t},a)});var sT=a(895379),sI=a(268537),sx=a(56342),sN=a(300587),sC=a(677859),sS=a(260378),sk=(e=>(e.SOLID="solid",e.NO_FILL="no_fill",e))(sk||{});function sA({selectedFillOption:e,onSelectFillOption:t}){let a={solid:(0,S.t)("workspace_view.toolbar.solid"),no_fill:(0,S.t)("workspace_view.toolbar.no_fill")};return o.createElement(sI.Ve,{className:ef.cx.ml8.colorTextMenuSecondary.colorIconMenuSecondary.$,dropdownButton:function({onClick:t}){return o.createElement(sC.$n,{className:ef.cx.ml4.mr4.$,role:"combobox",onClick:t,caret:"down"},o.createElement("span",{className:ef.cx.minW32.mr8.$},a[e]))},dropdownOptionsClassName:ef.cx.mt4.$,options:["solid","no_fill"].map((e,r)=>o.createElement(sI.c$,{className:ef.cx.colorTextMenuSecondary.$,key:r,id:e,onClick:()=>{t(e)}},a[e])),optionsBelowSelector:!0,noBorder:!0})}let sL=lI.M4.Mutation(async e=>{await sx.u.updateColor(e)});function sR({workspace:e,onClose:t}){var a;let r=(0,s.wA)(),n=(0,lI.n_)(sL),l=[{option:oP},...(0,oD.TS)("base").filter(e=>!(0,oS.DA)(e,(0,oD.BV)(oL.daH.BLACK,"base"))).map(e=>({option:e})),...(0,oD.TS)("baseLight").map(e=>({option:e}))],i=o.useRef(null),[c,d]=o.useState(!1),m=(0,oA.DP)(),u=function(e){try{if(e)return(0,oS.H0)(e)}catch(e){console.error(e)}}(((null==(a=null==e?void 0:e.colorConfig)?void 0:a.colors)??[])[0]),[_,p]=o.useState(u?"solid":"no_fill"),[f,g]=(0,aJ.fp)(oF);return o.useEffect(()=>(g(u),()=>{g(void 0)}),[]),o.useEffect(()=>{if(!c){let e=e=>{"Escape"===e.key&&t()},a=e=>{i.current&&!i.current.contains(e.target)&&t()};return document.addEventListener("keydown",e),document.addEventListener("pointerdown",a),()=>{document.removeEventListener("keydown",e),document.removeEventListener("pointerdown",a)}}},[c,t]),o.createElement(o.Fragment,null,o.createElement("div",{role:"button","aria-label":(0,S.t)("common.close"),tabIndex:0,className:ef.cx.absolute.wFull.hFull.top0.left0.zIndexTertiaryModal.$,onClick:t}),o.createElement("div",{className:ef.cx.absolute.flex.h40.justifyCenter.alignCenter.flexShrink0.bRadius4.colorBgMenu.elevation400.mt8.ml32.zIndexModal.$,ref:i},o.createElement(sA,{selectedFillOption:_,onSelectFillOption:e=>{if(p(e),"solid"===e){let e="dark"===m?oP:oS.UE;g(u??e)}else g("unset")}}),oO(f)&&o.createElement(o.Fragment,null,o.createElement(sC.wv,null),o.createElement(sN.qW,{buttonClassName:ef.cx.ml2.mr2.$,options:l,value:{option:f},onColorChange:e=>{g(e.option)},paletteType:"base",numColumns:9,optionSize:"medium",buttonSize:"xsmall",shouldDisableDataTooltip:!0,dropperDisabled:!0,positionX:()=>0,positionY:(e,t)=>(0,sS.DH)(e,t,4),shouldCustomColorPopoverCloseOnEscape:!0,isColorPopoverOpen:c,setIsColorPopoverOpen:d,hasNonWhiteboardColors:!0})),o.createElement(sC.wv,null),o.createElement(sC.$n,{className:ef.cx.ml4.mr2.$,onClick:t},o.createElement("span",{className:ef.cx.mr1.colorTextToolbarSecondary.$},(0,S.t)("workspace_view.color.toolbar.cancel"))),o.createElement(sC.$n,{className:ef.cx.mr8.$,onClick:()=>{n({workspaceId:e.id,colors:oO(f)?[(0,oC.colorToHex)(f)]:[],onfulfilled:()=>r(ec.F.enqueue({message:(0,S.t)("workspace_view.toolbar.workspace_color_updated")})),onrejected:()=>{let e=(0,S.t)("workspace_view.toolbar.workspace_color_update_error");r(C.s.error(e)),console.error(e)}}),t()}},o.createElement("span",{className:ef.cx.colorTextOnbrand.$},(0,S.t)("workspace_view.color.toolbar.save")))))}var sD=a(782174);let sF=lI.M4.Mutation(async e=>{await sx.u.updateDescription(e)}),sP=(0,eU.Ju)(function({workspace:e}){let t=(0,s.wA)(),a=(0,lI.n_)(sF);return o.createElement(sD.c,{title:(0,S.t)("workspace_view.description_modal.title"),subtitle:o.createElement("div",{className:ef.cx.mb16.$},o.createElement(ev.E,{color:"secondary"},(0,S.tx)("workspace_view.description_modal.subtitle",{allWorkspacesText:o.createElement("span",{className:ef.cx.fontSemiBold.$},(0,S.t)("sidebar.browse.all_workspaces"))}))),initialName:e.description??"",placeholder:(0,S.t)("workspace_view.description.placeholder"),submitText:(0,S.t)("workspace_view.description.save"),onRename:r=>a({workspaceId:e.id,description:r}).then(()=>t(ec.F.enqueue({message:(0,S.t)("workspace_view.description_update_updated")})),()=>{let e=(0,S.t)("workspace_view.description_update_error");t(C.s.error(e)),console.error(e)})})},"UpdateWorkspaceDescriptionModal");var sM=a(32863),sO=a(797804);let sB=(0,s.Ng)(e=>{var t;return{currentUserId:null==(t=e.user)?void 0:t.id}})(function(e){let t=t=>{t.stopPropagation(),e.canLeave&&e.onLeaveClick()},a=e.members.length,r=e.membersToShow||10;return o.createElement("div",null,!e.removeHeader&&o.createElement("div",{className:ef.cx.font13.fontMedium.mb12.$},e.label||(0,S.t)("file_browser.team_overview.member_label")),e.members.slice(0,r).map(a=>{let r=a.id===e.currentUserId,n=e.showAdminBadge&&e.showAdminBadge(a);return o.createElement(eV.az,{key:a.id,size:24,entity:a,className:e.customAvatarRowStyle?e.customAvatarRowStyle:ef.cx.font13.mb16.$,showIsMe:r,onClick:e.onMemberClick,badge:n?{color:eb.zE.DEFAULT,text:(0,S.t)("file_browser.badge_label.admin")}:void 0,includeUserEmailAddress:e.shouldIncludeUserEmailAddress},e.canLeave&&r&&o.createElement("span",{onClick:t,className:"members_preview--leaveLink--v8vxs text--fontPos13--xW8hS text--_fontBase--QdLsd blue_link--blueLink--9rlnd"},(0,S.tx)("file_browser.team.leave_confirm")))}),a>r&&(e.customOverflowRow||o.createElement("div",{className:"members_preview--totalMemberCountContainer--wYQwX",onClick:e.onClickShowMore},o.createElement(es.B,{svg:sO.A,className:"members_preview--teamIcon--UFW2s"}),o.createElement("div",{className:"members_preview--totalMemberCount--D3Q8a text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,S.tx)("file_browser.team_overview.num_others",{numMembers:a-r})))))});var sU=a(589640),sV=a(548593),sH=(e=>(e.MEMBERS="MEMBERS",e.ADMINS="ADMINS",e))(sH||{});function sW(e){let t=(0,sV.rw)(),a=new Map([["MEMBERS",(0,S.t)("workspace_view.members_modal.members")],["ADMINS",(0,S.t)("workspace_view.members_modal.admins")]]),r=[];return a.forEach((a,n)=>{r.push(o.createElement(t,{tab:n,mobileNavTabTitle:a,selectedTab:e.selectedTab,key:n,onClick:()=>e.setTab(n)},a))}),o.createElement("div",{className:"workspace_members_modal--tabsContainer--DBh33"},r)}function sj(e){return o.createElement("div",{className:"workspace_members_modal--searchContainer--KGPrU modal--searchContainer--EA8ib"},o.createElement(sM.IW,{className:"workspace_members_modal--searchBar--z110d",focusOnMount:!0,query:e.query,clearSearch:()=>{e.onChange("")},onChange:e.onChange,hideXIcon:!0,hasTransparentBackground:!0,iconClassName:"workspace_members_modal--searchIcon--7DSd4",placeholder:(0,S.t)("workspace_view.members_modal.search_placeholder")}))}function s$(e){return o.createElement("div",{className:"workspace_members_modal--emptyContainer--bTf-s"},o.createElement("div",{className:"workspace_members_modal--emptyState--IwqA2 text--fontPos11--2LvXf text--_fontBase--QdLsd"},e.content))}let sG=(0,eU.Ju)(function(e){var t,a,r,n;let l=(0,s.wA)(),i=(e,t)=>null===e.baseOrgUser?-1:null===t.baseOrgUser?1:e.baseOrgUser.user.handle.localeCompare(t.baseOrgUser.user.handle),c=((null==(t=e.workspace)?void 0:t.members)||[]).slice().sort(i),d=((null==(a=e.workspace)?void 0:a.admins)||[]).slice().sort(i),m={};c.forEach(e=>{e.baseOrgUser&&(m[e.baseOrgUser.user.id]=e.permission)});let[u,_]=(0,o.useState)("MEMBERS"),[p,f]=(0,o.useState)(c),[g,E]=(0,o.useState)(""),v=o.createElement(sW,{dispatch:l,selectedTab:u,setTab:e=>{E(""),_(e),f("MEMBERS"===e?c:d)}}),h=p.filter(e=>{var t,a;let r=null==(t=e.baseOrgUser)?void 0:t.user,n=g.toLocaleLowerCase();return!!(null==(a=null==r?void 0:r.email)?void 0:a.toLocaleLowerCase().includes(n))||!!(null==r?void 0:r.handle.toLocaleLowerCase().includes(n))}).map(e=>{let t=e.baseOrgUser.user;return{id:t.id,handle:t.handle,img_url:t.imgUrl,email:t.email}})||[],y=o.createElement(sj,{query:g,onChange:e=>E(e)}),b=o.createElement(s$,{content:(0,S.tx)("workspace_view.members_modal.no_members",{workspaceName:null==(r=e.workspace)?void 0:r.name})}),w=o.createElement(s$,{content:(0,S.tx)("workspace_view.members_modal.no_admins",{workspaceName:null==(n=e.workspace)?void 0:n.name})}),T=o.createElement(s$,{content:(0,S.tx)("workspace_view.members_modal.no_results",{query:g})}),I=o.createElement(ep.P,{className:"workspace_members_modal--outerContainer--in03x",innerClassName:"workspace_members_modal--membersContainer--16pMi"},o.createElement(sB,{members:h,showAdminBadge:e=>"ADMINS"!==u&&m[e.id]===z.bp.ADMIN,membersToShow:h.length,canLeave:!1,removeHeader:!0,customAvatarRowStyle:"workspace_members_modal--memberPopup--y5bbv text--fontPos13--xW8hS text--_fontBase--QdLsd admin_settings_page--avatarWithHandle--awCiS ellipsis--ellipsis--Tjyfa",shouldIncludeUserEmailAddress:!0,onMemberClick:(e,t)=>{l(A.$T({view:"user",userId:t.id,userViewTab:sU.o.INTERNAL_PROFILE})),l(R.Ce())}}));return"MEMBERS"===u?0===c.length?I=b:0===h.length&&(I=T):"ADMINS"===u&&0===d.length&&(I=w),o.createElement(eW.XV,{title:v,headerSize:"large",fixedTop:!0,onClose:()=>{l(R.Ce())}},o.createElement("div",{className:"workspace_members_modal--modalContainer--3d9wu"},o.createElement(eg.Y,{direction:"vertical",height:"fill-parent",width:"fill-parent",spacing:0},"MEMBERS"===u&&c.length>0&&y," ",I)))},"WORKSPACE_MEMBERS_MODAL",eU.ZU.YES);var sz=a(247576);function sY(e){let{workspace:t,org:a}=e,r=(0,s.wA)(),n=(0,s.d4)(e=>e.currentUserOrgId),l=(0,s.d4)(e=>e.avatarEditorState),i=(0,ry._6)(),c=(null==t?void 0:t.canAdmin)??!1,[d,m]=o.useState(!1),{canCreateTeam:u,cannotCreateTeamReason:_}=(0,G.l6)(a,null==t?void 0:t.id),p=(0,nK.S)(),f=window.innerWidth<=(0,oI.hG)(oQ.tgj),g=t?t.id:oR.O,E=function(e){let t=(0,oA.DP)(),a=oM(e);if(a&&("light"===t||"dark"===t))return(0,oS.kx)(a)!==("dark"===t)}(t),v=oM(t),h=(null==t?void 0:t.members)||[],y=()=>{n?r(R.to({type:r6.Uc,data:{workspaceId:g}})):r(L.Dw({previousView:i}))},b=o.useCallback((e,a,n)=>{if(t){let l={workspace:{id:t.id,name:t.name??"",imgUrl:t.imgUrl},entrypoint:"workspace_page_view",sectionId:n,favoriteId:a};e?r(no.ZW(l)):r(no.if(l))}},[r,t]),w=()=>{r(R.to({type:sG,data:{workspace:e.workspace,tab:sH.MEMBERS}}))},T={kind:sT.A.ICON_TEXT_BUTTON,key:sT.D.VIEW_MEMBERS,displayText:h.length.toString(),onClick:e=>w(),icon:sz.A,svgStyleClass:ey()(v?(0,oS.kx)(v)?"workspace_page_header--iconTextButtonSvgForDarkBackground--Sq5Fx workspace_page_header--iconTextButtonSvg--zStD-":"workspace_page_header--iconTextButtonSvgForLightBackground--pL63t workspace_page_header--iconTextButtonSvg--zStD-":"workspace_page_header--iconTextButtonSvg--zStD-"),styleClass:ey()(v?(0,oS.kx)(v)?"workspace_page_header--membersButtonForDarkBackground--2IRgt workspace_page_header--favoriteStarContainerForDarkBackground--MXtIt":"workspace_page_header--membersButtonForLightBackground--N75P8 workspace_page_header--favoriteStarContainerForLightBackground--AKL23":void 0),isLoading:e.isWorkspaceMembersLoading},I=o.useMemo(()=>o.createElement(lY.r,{setFavorite:b,favoriteType:z.bk.WORKSPACE,resourceId:g,isFavoriteHeaderStar:!0,orgId:n,parentBackgroundColor:v}),[g,b,n,v]),x=function(){let e=(0,s.wA)(),t=(0,$.TA)();return a=>{let r=a.workspace.admins.some(e=>{var a;return(null==(a=e.baseOrgUser)?void 0:a.user.id)===t}),n=[];return r&&n.push({displayText:(0,S.t)("workspace_view.toolbar.admin_settings"),callback:()=>{e(A.$T({view:"workspace",subView:nE.V0.ADMIN,workspaceId:a.workspace.id,selectedTab:nE.rj[0]}))}}),n.length>0&&n.push({displayText:"",separator:!0}),n.push({displayText:(0,S.t)("file_browser.copy_link"),callback:()=>{let t=(0,lx.fO)(a.workspace.id,a.org.id);e(lu.S({url:t}))}}),a.workspace.canAdmin&&(n.push({displayText:(0,S.t)("license_group_view.toolbar.change_icon"),callback:()=>{e((0,rf.X)({entity:a.workspace,entityType:rI.ck.WORKSPACE,shape:"SQUARE"}))}}),n.push({displayText:(0,S.t)("workspace_view.toolbar.change_color"),callback:a.onWorkspaceChangeColorClick}),n.push({displayText:(0,S.t)("workspace_view.description.title"),callback:()=>{e(R.to({type:sP,data:{workspace:a.workspace}}))}})),n}}(),N=t&&a?x({workspace:t,org:a,onWorkspaceChangeColorClick:()=>m(!0)}):u&&f?[{displayText:(0,S.t)("org_view.new_team"),callback:y}]:void 0,C=[];if(_===G.z4.TEAM_CREATION_CONTROL?C.push({kind:sT.A.CUSTOM,key:sT.D.NEW_TEAM,element:o.createElement(sd,{backgroundColor:v})}):u&&C.push({kind:sT.A.CUSTOM,key:sT.D.NEW_TEAM,element:o.createElement(sw,{onClick:y,variant:E?"inverted-inverse":"inverse",text:(0,S.t)("license_group_view.toolbar.new_team_button")})}),e.showMembersButton&&C.push(T),p&&t&&C.push({kind:sT.A.CUSTOM_BUTTON,key:sT.D.FAVORITE,element:I,styleClass:ey()(v?(0,oS.kx)(v)?"workspace_page_header--favoriteStarContainerForDarkBackground--MXtIt":"workspace_page_header--favoriteStarContainerForLightBackground--AKL23":void 0)}),!t)return o.createElement(su,{title:(0,S.t)("license_group_view.meta.unassigned_title",{orgName:a.name}),rightSideActions:C});let k=N?{kind:sT.A.CUSTOM,key:sT.D.DROPDOWN,element:o.createElement(sf,{buttonAriaLabel:(0,S.t)("org_view.page_header_dropdown_label"),dropdownKey:`workspace-context-${t.id}`,dropdownOptions:N,dropdownColorClassName:v?(0,oS.kx)(v)?"workspace_page_header--dropdownColorsForDarkBackground--OIHSt":"workspace_page_header--dropdownColorsForLightBackground--uH-aL":void 0})}:void 0;return o.createElement("div",{style:{backgroundColor:e.headerColor}},o.createElement(su,{avatar:c?o.createElement(rx.j,{avatarEditorState:l,entityType:rI.ck.WORKSPACE,entity:t,dispatch:r,size:40}):o.createElement(eV.z6,{entity:t,size:40}),title:v&&(0,oS.kx)(v)?o.createElement("span",{className:"workspace_page_header--titleColorForDarkBackground--Qnjvi"},t.name):t.name,badge:t.orgAccess===z.bU.SECRET?o.createElement("div",{"data-tooltip-type":eB.Ib.TEXT,"data-tooltip":(0,S.t)("workspace_table.secret_workspace_lock_tooltip"),"data-tooltip-subtext":(0,S.t)("workspace_table.secret_workspace_lock_tooltip_subtext"),"data-tooltip-timeout-delay":500,"data-tooltip-max-width":300},o.createElement(re.In,{icon:"lock-16"})):void 0,rightSideActions:C,rightSideOfTitleAction:k,belowHeaderItem:d?o.createElement(sR,{workspace:t,onClose:()=>m(!1)}):void 0,textColor:E?"oninverse":void 0}))}function sK(e){var t;let a=(0,s.wA)(),r=null==(t=e.workspace)?void 0:t.members,n=o.useMemo(()=>r||[],[r]),l=o.useMemo(()=>n.slice(0).sort(()=>Math.random()-.5),[n]),i={};return n.forEach(e=>{e.baseOrgUser&&(i[e.baseOrgUser.user.id]=e.permission)}),o.createElement("div",{className:ef.cx.my24.mr8.ml24.$},o.createElement("div",{className:"workspace_page_meta_content--membersHeader--0jaJ3 text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,S.t)("workspace_view.sidebar.members")),o.createElement(sB,{removeHeader:!0,members:l.map(e=>{var t;return null==(t=e.baseOrgUser)?void 0:t.user}).filter(e=>!!e),onMemberClick:(e,t)=>{a(A.$T({view:"user",userId:t.id,userViewTab:sU.o.INTERNAL_PROFILE}))},canLeave:!1,showAdminBadge:e=>i[e.id]===z.bp.ADMIN,customOverflowRow:o.createElement(o.Fragment,null,o.createElement("button",{className:"workspace_page_meta_content--seeAllMembers--mIOar text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:()=>{a(R.to({type:sG,data:{workspace:e.workspace,tab:sH.MEMBERS}}))}},(0,S.t)("workspace_view.sidebar.see_all_members")))}))}var sQ=a(330654);function sq({isExpanded:e,fill:t,onClick:a}){return o.createElement("div",{role:"button",tabIndex:-1,className:ey()("expand_caret--animation--GOE8s",{"expand_caret--expanded--MmsW9":e}),onClick:a},o.createElement(re.In,{icon:"caret-right-16",fill:t}))}function sX({isOpen:e,toggleIsOpen:t,collapseHeader:a,content:r}){return o.createElement("div",{className:ef.cx.flex.flexColumn.wFull.$},o.createElement("div",{className:ef.cx.flex.flexRow.gap4.itemsCenter.wFull.$},o.createElement(sq,{isExpanded:e,fill:"secondary",onClick:t}),a),o.createElement("div",{className:ef.cx.grid.ml20.$,"aria-hidden":!e,style:ea.sx.add({transition:"grid-template-rows 0.3s ease"}).if(e,ea.sx.add({gridTemplateRows:"1fr"}),ea.sx.add({gridTemplateRows:"0fr"})).$},o.createElement("div",{className:ef.cx.if(!e,ef.cx.overflowHidden).$},r)))}var sJ=a(126049),sZ=a(635344),s0=a(883913),s1=a(433676),s2=a(550163),s4=a(172522),s8=a(737329),s3=a(445092),s5=a(967409),s9=a(335856);function s6({title:e,confirmText:t,emptyStateText:a,onSelectFile:r,onSubmit:n,files:l,tileClassName:i,renderFileTile:s,renderTileFooter:c,query:d,setQuery:m,gridText:u,shouldDisableTile:_}){let[p,g]=o.useState(null),E=o.useCallback(()=>{p&&n(p)},[n,p]),v=o.useCallback(e=>{if(e.length>0){let t=e[0].key;null==r||r(t),g(t)}else g(null)},[r]);return o.createElement(s7,{title:e,onSubmit:E,confirmText:t,isDisabled:!p,query:d,onSearchChange:m,clearSearch:()=>m(""),searchPlaceholder:(0,S.t)("file_browser.choose_file_modal.search_for_a_file")},0===l.length?o.createElement("div",{className:ef.cx.flex.flexRow.gap2.itemsCenter.justifyCenter.colorTextSecondary.hFull.wFull.alignCenter.$},a):o.createElement(o.Fragment,null,u&&o.createElement("span",{className:ef.cx.colorTextSecondary.$},u),o.createElement(s9.g,{containerClassName:ef.cx.pb16.$,handleContextMenu:f.lQ,isDraggable:!1,items:l,multiselectDisabled:!0,doNotFocusOnLoad:!0,getAriaLabel:e=>e.name,tileClassName:i,renderTile:s,renderTileFooter:c,onSelection:v,keepSelectionOnFocusLost:!0,canSelectItem:e=>!(null==_?void 0:_(e))})))}function s7({title:e,confirmText:t,onSubmit:a,isDisabled:r,children:n,query:l,onSearchChange:i,clearSearch:s,searchPlaceholder:c}){return o.createElement(eW.Eo,{title:e,confirmText:t,onSubmit:a,disabled:r,maxWidth:1024,useRedesign:!0,fullWidthContent:!0},o.createElement(sM.IW,{className:ey()(ef.cx.px16.py8.colorBg.wFull.bb1.bSolid.colorBorder.borderBox.$,"choose_file_modal--heightOverride--QTue5"),hasTransparentBackground:!0,placeholder:c,focusOnMount:!0,query:l,onChange:i,clearSearch:s,iconClassName:ef.cx.colorIcon.$,hideXIcon:!0}),o.createElement(ep.P,{className:"choose_file_modal--gridMaxHeight--8NKvW",innerClassName:ef.cx.hFull.gap12.flex.flexColumn.pt16.px24.borderBox.$},n))}function ce({file:e,orgName:t,isDisabled:a}){let r=(0,s4.l)(e.folder_id),n=r.data;return o.createElement("div",{className:ef.cx.pt8.flex.flexColumn.overflowHidden.$},o.createElement("div",{className:ef.cx.flex.flexRow.gap4.justifyBetween.itemsCenter.maxWFull.$},o.createElement("span",{className:ef.cx.ellipsis.textBodyLargeStrong.truncate.with({colorTextSecondary:a}).$},e.name),a&&t&&o.createElement("span",{"data-tooltip-type":"text","data-tooltip":(0,S.t)("file_browser.pinning.choose_file_to_pin_modal.file_not_workspace_visible.tooltip",{orgName:t}),"data-tooltip-show-immediately":!0,"data-tooltip-show-above":!0,"data-tooltip-max-width":500},o.createElement(re.In,{icon:"info-16",fill:"secondary"}))),o.createElement("span",{className:ef.cx.ellipsis.colorTextSecondary.truncate.$},"loaded"===r.status&&n?o.createElement("div",{className:ef.cx.colorTextSecondary.truncate.$},n):null))}let ct=(0,eU.Ju)(function({workspaceId:e}){let t=(0,s.wA)(),a=(0,rv.sZ)(),[r,n]=o.useState(""),[l,i]=o.useState(null),c=o.useCallback(e=>{i(e)},[]);(0,rr.Rs)(rl.wtK,{fileKey:l??""},{enabled:!!l});let d=(0,s0.L)("file_browser:file_picker_modal",s5.Rx.ORG,!1),m=(0,nU.dD)(e),u=o.useCallback(e=>{t(R.ES(ct)),t(R.to({type:(0,sZ.a)(),data:{fileKey:e,source:r?"add_file_modal_search":"add_file_modal_suggested"}}))},[t,r]);o.useEffect(()=>(t(s3.Dy({entryPoint:"file_browser:file_picker_modal"})),t(s3.Rz({workspaceFilter:e})),()=>{t(s3.Rz({workspaceFilter:null})),t(s3.ky())}),[t,n,e]);let _=(0,sJ.A)(d,400),p=o.useCallback(e=>{n(e),_(e,s5.uH.FILES,null,!1,!1,!1,!0)},[_,n]),g=(0,nU.$o)(e),E=(0,aJ.md)(s2.ic),v=(0,s1.h)(),h=lc.Qw.useTransformShallowEqual(lc.Qw.all([g,m]),([e,t])=>{var a;let n=new Set(t??[]);return((r?null==(a=E.files)?void 0:a.results.map(e=>e.model):e.map(e=>(0,nU.KR)(e)))??[]).filter(e=>!n.has(e.key))}),y=o.useMemo(()=>{var e;return(null==(e=E.files)?void 0:e.results.map(e=>e.model.key))??[]},[E]),b=(0,nU.H6)(y,{enabled:r.length>0});if("loaded"!==b.status||!r&&"loaded"!==h.status||r&&v!==a$.r.SUCCESS)return o.createElement(s7,{title:(0,S.t)("file_browser.pinning.pin_modal.pin_file_to_workspace"),confirmText:(0,S.t)("general.next"),isDisabled:!0,query:r,onSearchChange:p,clearSearch:f.lQ,searchPlaceholder:(0,S.t)("file_browser.choose_file_modal.search_for_a_file")},o.createElement("div",{className:ey()(ef.cx.flex.itemsCenter.justifyCenter.wFull.hFull.$)},o.createElement(tc.qc,null)));let w=h.data??[],T=e=>{let t=b.data.get(e.key);return!!t&&!(null==t?void 0:t.canPinFileToWorkspace)};return o.createElement(s6,{title:(0,S.t)("file_browser.pinning.pin_modal.pin_file_to_workspace"),confirmText:(0,S.t)("general.next"),tileClassName:"choose_file_to_pin_modal--showOnHoverContainer--DO9-h",query:r,setQuery:p,renderFileTile:(e,{isSelected:t,isHovered:a})=>o.createElement(s8.Z,{tile:(0,lh.fA)(e),isSelected:t&&!T(e),isHovered:a,hideBranchIndicator:!0,hideFavoriteStar:!0}),renderTileFooter:e=>o.createElement(ce,{file:e,orgName:(null==a?void 0:a.name)??null,isDisabled:T(e)}),onSubmit:u,onSelectFile:c,files:w??[],gridText:r?void 0:(0,S.t)("file_browser.pinning.suggested"),emptyStateText:r?(0,S.tx)("file_browser.workspace_pinning.no_files_matching_query",{searchQuery:o.createElement("div",{className:ef.cx.colorText.fontMedium.truncate.$},r)}):(0,S.t)("file_browser.workspace_pinning.no_suggested_files"),shouldDisableTile:T})},"ChooseFileToPinModal");var ca=a(609494),cr=a(773362),cn=a(606856),cl=a(121072),ci=a(347120),co=a(323256),cs=a(671653);let cc={open:!0,openNewTab:!0,showInFolder:!0,copyLink:!0,pinToWorkspace:!0};function cd({suggestedFiles:e}){let t=e.slice(0,8),a=(0,ry._6)(),r=(0,s.wA)(),{showing:n,show:l,data:i}=(0,cl.L)(),c=o.useCallback((e,t)=>{m.Ay.redirect((0,lb.r1)(e)),(0,eP.k1)(e.key,{selectedViewName:a.view,entrypoint:"suggested_files_empty_state"}),t.stopPropagation(),t.preventDefault()},[a.view]),d=o.useCallback((e,t)=>{c({key:e.key,editor_type:e.editorType,url:e.url},t)},[c]),u=o.useCallback((e,t,a)=>{l({data:{tile:(0,nU.bn)(e[0]),targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},index:a,enableRestore:t.shiftKey&&t.altKey}})},[l]);return o.createElement(o.Fragment,null,o.createElement("div",{className:ef.cx.colorTextSecondary.truncate.$},(0,S.t)("file_browser.pinning.suggested")),o.createElement(co.A,{items:t,multiselectDisabled:!0,isDraggable:!1,handleOpenItem:d,onSelection:e=>{r(lg.an()),r(lg.Ku({fileKeys:e.map(e=>e.key)}))},handleContextMenu:u,gridViewProps:{containerClassName:"suggested_files_grid--gridContainer--ZdukV",renderTile:e=>o.createElement("div",{className:ef.cx.m8.opacity0_5.bRadius4.elevation100.overflowHidden.$,style:ea.sx.add({width:"80px"}).$},o.createElement(lz.NM,{editor_type:e.editorType,thumbnailGuid:e.thumbnailGuid,client_meta:e.clientMeta,thumbnail_url:e.thumbnailUrlOverride??e.thumbnailUrl,isLocked:!1,noBorder:!0,size:l4.y.SMALL})),tileBorderRadius:8,tileBorderStyle:"dashed",tileFooterPosition:"right",renderTileFooter:(e,{isSelected:t,isHovered:a})=>o.createElement(cm,{file:e,isHovered:a,isSelected:t})},viewType:cs.XU.GRID}),n&&(null==i?void 0:i.tile)?o.createElement(ci.i,{tileActions:cc,openTile:e=>c(i.tile.file,e),tile:i.tile,selectedTiles:[i.tile],dropdownVisible:n}):null)}function cm({file:e,isHovered:t,isSelected:a}){var r;let n=(0,s.wA)(),l=o.useCallback(t=>{n(R.to({type:(0,sZ.a)(),data:{fileKey:e.key,source:"suggested_files_empty_state"}})),t.stopPropagation(),t.preventDefault()},[n,e]),i=null==(r=e.project)?void 0:r.name;return o.createElement("div",{className:ef.cx.flex.flexColumn.gap2.flexGrow1.justifyCenter.overflowHidden.ml16.$},o.createElement("div",{className:ef.cx.textBodyMedium.truncate.$},e.name),t||a||g.Ay.mobile||g.Ay.tablet?o.createElement("div",{role:"button",tabIndex:0,className:ef.cx.colorTextBrand.truncate.cursorPointer.$,onClick:l},(0,S.t)("file_browser.pinning.pin_file")):i?o.createElement("div",{className:ef.cx.colorTextSecondary.truncate.$},i):null)}function cu({workspaceId:e}){let t;let a=(0,nU.$o)(e);return t="loaded"!==a.status?o.createElement("div",{className:ef.cx.py1.h20.wFull.$},o.createElement(tc.qc,null)):a.data.length>0?o.createElement(cd,{suggestedFiles:a.data}):o.createElement("span",{className:ef.cx.colorTextSecondary.truncate.textBodyLarge.alignCenter.$},(0,S.t)("file_browser.pinning.no_pinned_files")),o.createElement("div",{className:ef.cx.bRadius8.colorBgSecondary.px32.py24.flex.flexColumn.gap16.mt8.$},t)}var c_=a(109388),cp=a(88823),cf=a.n(cp),cg=a(511617),cE=a(988652),cv=a(755887),ch=a(733334),cy=a(564577),cb=a(167893),cw=a(296045);function cT({pinnedFile:e}){var t,a;let r=(0,nU.bn)(e.file),n=(0,s4.l)(e.file.folderId);return o.createElement("div",{className:ef.cx.bRadius8.borderBox.p16.flex.flexColumn.gap16.colorBg.colorText.b1.bSolid.colorBorder.elevation300.flexGrow1.$,style:ea.sx.add({width:"422px",overflowY:"auto",overflowX:"hidden"}).$},o.createElement("div",{className:ef.cx.flex.flexRow.gap16.$},o.createElement("div",{className:ef.cx.flexBasisAuto.$},o.createElement(cw.e,{entity:{id:e.creator.id,img_url:e.creator.imgUrl,name:(null==(t=e.creator)?void 0:t.name)??void 0,handle:null==(a=e.creator)?void 0:a.handle}})),o.createElement("div",{className:ef.cx.flex.flexColumn.overflowHidden.$},o.createElement("div",{className:ef.cx.flex.flexRow.gap8.textBodyLarge.$},o.createElement(ev.E,{fontWeight:"semi-bold",truncate:!0},e.creator.name),o.createElement("span",{className:ef.cx.flexBasisAuto.flexGrow1.flexShrink0.$},o.createElement(ev.E,{color:"secondary"},o.createElement(cy.h1,{date:e.createdAt})))),o.createElement("div",{className:ef.cx.textBodyLarge.overflowBreakWord.$,dangerouslySetInnerHTML:{__html:(0,ch.p)((0,ca.sP)(e.description))}}))),o.createElement("div",{className:ef.cx.flex.flexColumn.$},o.createElement("div",{className:ef.cx.bRadius8.b1.colorBorder.bSolid.wFull.overflowHidden.$},o.createElement("div",null,o.createElement(cr.Z,{tile:r,noBorder:!0})),o.createElement("div",{className:ef.cx.flex.flexRow.gap8.itemsCenter.bt1.bSolid.colorBorder.p16.$},o.createElement(cb.x,{tile:r,usePageIcon:!0}),o.createElement("div",{className:ef.cx.flex.flexColumn.gap2.flexGrow1.justifyCenter.overflowHidden.$},o.createElement("div",{className:ef.cx.textBodyLargeStrong.truncate.$},e.file.name),"loaded"===n.status&&n.data?o.createElement("div",{className:ef.cx.textBodyMedium.colorTextSecondary.truncate.$},n.data):null)))))}let cI={width:0,height:0};function cx({pinnedFile:e,targetRef:t,shouldHide:a}){let r=(0,cE.s)(t),[n,l]=(0,cE.M)(),[i,s]=o.useState(cI),[c,d]=o.useState(!1),m=o.useCallback(()=>{if(!t.current)return;let e=(0,cg.E)(t.current.getBoundingClientRect()),a=window.innerWidth,r=window.innerHeight,n=r-e.top-8,l=n>100;if(a-e.right>438&&l){s({transform:`translate(${e.right+8}px, ${e.top}px)`,maxHeight:n});return}if(e.left>438&&l){s({transform:`translate(${e.left-430}px, ${e.top}px)`,maxHeight:n});return}let i=430-(a-e.left),o=r-e.bottom-16;if(o>100){s({transform:`translate(${(0,cv.qE)(e.left-i,0,e.left)}px, ${e.bottom+8}px)`,maxHeight:o});return}let c=e.top-16;s({top:"auto",bottom:"100vh",transform:`translate(${(0,cv.qE)(e.left-i,0,e.left)}px, ${e.top-8}px)`,maxHeight:c})},[t,s]),u=!a&&(r||l),_=(0,li.ZC)(u);if(o.useEffect(()=>{if(!_&&u)m();else if(_&&!u){d(!0);let e=setTimeout(()=>{d(!1)},(0,oI.XB)("150ms"));return()=>{clearTimeout(e)}}},[u,_,m]),o.useEffect(()=>{let e=cf()(m),t=()=>{u&&e()};return document.addEventListener("scroll",t,!0),()=>{document.removeEventListener("scroll",t,!0)}},[u,m]),!t.current)return null;let p=o.createElement("div",{className:"pinned_files_hover--hoverCardOverflowWrapper--VaAZM"},o.createElement("div",{className:ey()("pinned_files_hover--hoverCard--MLJbb",u&&"pinned_files_hover--makeVisible--QrDF7"),style:i,ref:n,role:"tooltip",onContextMenu:e=>{e.preventDefault(),e.stopPropagation()}},(u||c)&&o.createElement(cT,{pinnedFile:e})));return c_.createPortal(p,document.body)}let cN={open:!0,openNewTab:!0,showInFolder:!0,copyLink:!0,share:!0,duplicateToDrafts:!0,pinToWorkspace:!0,publishOrgTemplate:!0,favoriteFile:!0,unfavoriteFile:!0};function cC({workspaceId:e,pinnedFiles:t}){let a=(0,s.wA)(),r=(0,ry._6)(),{showing:n,show:l,data:i}=(0,cl.L)(),c=(0,cn.v)(),d=o.useCallback((t,a,n,l)=>{c(t,n),(0,eP.E9)(eP.gH,a.file,{entrypoint:l,selectedView:r.view,resourceType:"workspace",resourceId:e,pinDescription:(0,ca._Z)(a.description)})},[c,r.view,e]),m=o.useCallback((e,t)=>{d((0,nU.bn)(e.file),e,t,"pinned files")},[d]),u=o.useMemo(()=>t.filter(({file:e})=>!!e).map(e=>(0,nU.bn)(e.file)),[t]),_=(0,lh.nw)(u),p=o.useMemo(()=>t.sort((e,t)=>e.createdAt>t.createdAt?1:-1),[t]);return o.createElement(o.Fragment,null,t.length>0?o.createElement(co.A,{handleContextMenu:(e,t,r)=>{a(lg.an()),a(lg.Ku({fileKeys:e.map(e=>e.file.key)})),l({data:{tile:(0,nU.bn)(e[0].file),targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},index:r}})},isDraggable:!0,items:p,handleDragDataTransfer:(e,t)=>{t.setFigFilesData(e.map(e=>(0,nU.KR)(e.file)))},doNotFocusOnLoad:!0,getAriaLabel:e=>e.file.name,viewType:cs.XU.GRID,handleOpenItem:m,gridViewProps:{containerClassName:"pinned_files_content--pinnedFilesGrid--WZBpn",renderTile:e=>o.createElement(cS,{pinnedFile:e,isDropdownOpen:n}),renderTileFooter:e=>o.createElement(ck,{pinnedFile:e}),renderTileDragImage:e=>o.createElement(lz.NM,{editor_type:e.file.editorType,thumbnail_url:e.file.thumbnailUrlOverride??e.file.thumbnailUrl,client_meta:e.file.clientMeta,isLocked:!1,thumbnailGuid:e.file.thumbnailGuid,noBorder:!0})}}):o.createElement(cu,{workspaceId:e}),(()=>{let e=(null==i?void 0:i.tile)??null,a=(null==i?void 0:i.index)??0;return o.createElement(ci.i,{tile:e,selectedTiles:_,tileActions:cN,openTile:r=>{e&&d(e,t[a],r,"pinned files: context menu")},dropdownVisible:n})})())}function cS({pinnedFile:e,isDropdownOpen:t}){let a=o.useRef(null),r=(0,nU.bn)(e.file);return o.createElement(o.Fragment,null,o.createElement(cx,{pinnedFile:e,targetRef:a,shouldHide:t}),o.createElement("div",{ref:a},o.createElement(cr.Z,{tile:r,noBorder:!0,size:l4.y.SMALL})))}function ck({pinnedFile:e}){var t;return o.createElement("div",{className:ef.cx.pt8.flex.flexColumn.$},o.createElement("span",{className:ef.cx.ellipsis.textBodyLargeStrong.truncate.$},e.file.name),o.createElement(ev.E,{truncate:!0,showTooltipWhenTruncated:!0,color:"secondary"},(0,S.t)("tile.file_tile.pinned_by_user",{name:(null==(t=e.creator)?void 0:t.name)??""})))}let cA=(0,aJ.Iz)(e=>(0,aJ.E2)(`file_browser.workspace.pinned_section_open.${e}`,!0,sQ.boolean()));function cL({workspaceId:e}){let[t,a]=(0,aJ.fp)(cA(e)),r=o.useCallback(()=>a(e=>!e),[a]),n=(0,s.wA)(),l=(0,rv.dq)(),i=(0,G.Au)(l),c=(0,rr.Rs)(rl.qTu,{workspaceId:e}),d=lc.Qw.useTransform(c,e=>{var t;return(null==(t=e.workspace)?void 0:t.pinnedFiles)??null}),m=lc.Qw.useTransform(d,e=>e?e.length:0),u=lc.Qw.useTransform(lc.Qw.all([i,c]),([t,a])=>!!a.workspace&&(t===e||a.workspace.canAdmin)),_="loaded"!==m.status||m.data>=nU.D1,p="loaded"===u.status&&u.data||"loaded"===m.status&&m.data>0,f=o.useCallback(()=>{n(R.to({type:ct,data:{workspaceId:e}}))},[n,e]);return o.createElement(o.Fragment,null,p&&o.createElement(sX,{isOpen:t,toggleIsOpen:r,collapseHeader:o.createElement("div",{className:ef.cx.flex.justifyBetween.itemsCenter.wFull.$},o.createElement("div",{"aria-expanded":t,role:"button",tabIndex:0,className:ef.cx.flex.flexRow.gap4.itemsCenter.textBodyLargeStrong.cursorDefault.$,onClick:r},(0,S.t)("file_browser.pinning.pinned_files")),"loaded"===u.status&&u.data&&o.createElement("button",{onClick:f,disabled:_,"data-tooltip":_&&"loaded"===m.status?(0,S.t)("file_browser.pinning.max_files.add_button_tooltip",{maxPins:nU.D1}):void 0,"data-tooltip-type":eB.Ib.TEXT,"data-tooltip-show-above":!0},o.createElement("div",{className:_?ef.cx.colorTextDisabled.$:ef.cx.colorTextBrand.$},(0,S.t)("file_browser.pinning.add_file")))),content:"loaded"===d.status?o.createElement(cC,{workspaceId:e,pinnedFiles:d.data??[]}):o.createElement(tc.qc,null)}))}function cR(){var e,t,a,r;let n=(0,ry._6)(),l=(0,rv.sZ)(),i=(0,rr.Rs)(rl.bUn,{orgId:l.id}),s="loaded"!==i.status,c=(null==(t=null==(e=i.data)?void 0:e.org)?void 0:t.workspaces)??[],d=s?[]:[...c],m=null;n.workspaceId&&(m=d.find(e=>{var t;return e.id===n.workspaceId||(null==(t=e.mirroringLicenseGroup)?void 0:t.id)===n.workspaceId}));let u=(0,S.t)("view_selectors.file_browser.other_teams");m&&(u=m.name),(0,lE.hL)(u);let _=oM(m),p=!!n.workspaceId,f=(0,rr.Rs)(rl.nD$,{workspaceId:n.workspaceId??""},{enabled:p}),g="loaded"===f.status,E="loading"===f.status,v=(null==(r=null==(a=f.data)?void 0:a.workspace)?void 0:r.members)??[],h=m?{...m,members:v}:void 0,y=(null==m?void 0:m.admins)??[],b=p&&g&&v.length>0,w=p&&(E||v.length>0||y.length>0),T=(0,nU.J_)();return s&&n.workspaceId?o.createElement(tc.qc,null):!m||(null==m?void 0:m.canView)?o.createElement(so.r,{header:o.createElement(sY,{headerColor:_,workspace:h,org:l,isWorkspaceMembersLoading:E,showMembersButton:w}),content:o.createElement("div",{className:ef.cx.flex.flexColumn.gap24.my24.$},m&&(null==m?void 0:m.id)!==oR.O&&T()?o.createElement("section",{"aria-label":(0,S.t)("file_browser.pinning.pinned_files"),className:ef.cx.pl12.pr32.borderBox.wFull.$},o.createElement(cL,{workspaceId:m.id})):null,o.createElement("section",{"aria-label":(0,S.t)("file_browser.teams")},o.createElement("div",{className:ef.cx.mx32.textBodyLargeStrong.$},o.createElement("div",null,(0,S.t)("file_browser.teams"))),o.createElement(sl,{workspace:m}))),metaContent:b?o.createElement(sK,{workspace:h}):void 0}):o.createElement(si.S,{resourceType:ee.Ft.WORKSPACE})}var cD=a(753178),cF=a(632923),cP=a(427472),cM=a(802755),cO=a(909595),cB=a(108545),cU=a(293014),cV=a(444077);let cH=o.memo(function(e){let t,a;return"implicit"===e.consentRegion?(t=cM.Ml,a=cM.e2):"explicit"===e.consentRegion&&(t=(0,cP.aJ)(),a=(0,cP.Sz)()),o.createElement("div",{role:"region","aria-label":t,className:ey()(cB.MZ)},o.createElement(I.Yo,{className:cB.o2,rel:"noopener",target:"_blank",href:a},o.createElement(es.B,{svg:cU.A})),o.createElement("span",{className:cB.R2,"aria-hidden":"true"},t))}),cW=o.memo(function(){return(0,_.kc)().cookie_banners_community?"implicit"===(0,_.Ay)().consent_region?o.createElement(cM.C$,{variant:cO.a.COMMUNITY,dismissIcon:cV.A,SecondaryButton:e=>o.createElement(cF.Wd,{fullWidth:!1,className:cB.Rn,use:"hollow",...e}),persistentMessage:o.createElement(cH,{consentRegion:"implicit"})}):"explicit"===(0,_.Ay)().consent_region?o.createElement(cP.ZQ,{variant:cO.a.COMMUNITY,dismissIcon:cV.A,SecondaryButton:e=>o.createElement(cF.Wd,{fullWidth:!1,className:cB.Rn,use:"hollow",...e}),PrimaryButton:e=>o.createElement(cF.Wd,{fullWidth:!1,className:cB.Rn,use:"standard",...e}),persistentMessage:o.createElement(cH,{consentRegion:"explicit"})}):null:null});var cj=a(385422),c$=a(460845),cG=a(837324),cz=a(612776),cY=a(555328),cK=a(686257);function cQ({children:e}){return o.createElement(o.Fragment,null,e)}var cq=a(590237),cX=a(637961);let cJ=e=>{let t={};return e.filter(e=>{let a="model"in e?e.model.id:e.id;return!t[a]&&(t[a]=!0,!0)})};function cZ(e="normal"){return"rows"===e?cX.bu:"profile"===e?cX._1:"compact"===e?cX.en:cX.z3}function c0({resources:e,adtlClassName:t,showAsTable:a=!1,showMoreCallback:r,onIntersectionChange:n,viewContext:l="feedResourceGrid",TileWrapper:i=cQ}){let c=(0,cz.X5)(),d=(0,s.d4)(e=>e.authedActiveCommunityProfile),m=o.useMemo(()=>cJ(e),[e]);return o.createElement(O.fu,{name:l},o.createElement("div",{className:ey()(t||cX.z3,{[cX.wS]:c})},m.map((e,t)=>"is_widget"in e?e.is_widget?o.createElement(i,{key:`widget-${e.id}`,resourceId:e.id,resourceType:cY.vt.WIDGET,resourceName:(0,cG.qD)(e).name},o.createElement(cq.bN,{key:`widget-${e.id}`,index:t,resource:e,animationIndex:t%30,onIntersectionChange:t=>null==n?void 0:n(e,t),subView:l})):a?o.createElement(i,{key:`pluginRow-${e.id}`,resourceId:e.id,resourceType:cY.vt.PLUGIN,resourceName:(0,cG.qD)(e).name},o.createElement(cq.mb,{key:`pluginRow-${e.id}`,index:t,resource:e,animationIndex:t%30,onIntersectionChange:t=>null==n?void 0:n(e,t),isOrgTeamBrowsing:!!((null==d?void 0:d.team_id)||(null==d?void 0:d.org_id))})):o.createElement(i,{key:`plugin-${e.id}`,resourceId:e.id,resourceType:cY.vt.PLUGIN,resourceName:(0,cG.qD)(e).name},o.createElement(cq.cS,{index:t,key:`plugin-${e.id}`,resource:e,animationIndex:t%30,onIntersectionChange:t=>null==n?void 0:n(e,t),subView:l})):"resources"in e?o.createElement(i,{key:`profileRow-${e.model.id}`,resourceId:e.model.id,resourceType:"profile",resourceName:e.model.name},o.createElement(cq.Yw,{index:t,key:`profileRow-${e.model.id}`,resource:e,animationIndex:t%30,authedActiveCommunityProfile:d})):"profile_handle"in e?o.createElement(i,{key:`profile-${e.id}`,resourceId:e.id,resourceType:"profile",resourceName:e.name},o.createElement(cq.UG,{key:`profile-${e.id}`,resource:e})):o.createElement(i,{key:`file-${e.id}`,resourceId:e.id,resourceType:cY.vt.HUB_FILE,resourceName:(0,cG.qD)(e).name},o.createElement(cq.Cv,{index:t,key:`file-${e.id}`,resource:e,animationIndex:t%30,onIntersectionChange:t=>null==n?void 0:n(e,t),subView:l})))),e.length>0&&r&&o.createElement(cK.a,{callback:e=>{e[0].isIntersecting&&r()}}))}var c1=a(813408),c2=(e=>(e.BUNDLE_SECTION="bundle_section",e.HERO_SECTION="hero_section",e))(c2||{});let c4=sQ.object({title:sQ.string(),description:sQ.string().optional(),imageUrl:sQ.string().url(),prompt:sQ.string(),category:sQ.string()});sQ.object({figjam_ai:sQ.array(c4).nullable()});let c8=sQ.object({hub_file_id:sQ.string().optional(),plugin_id:sQ.string().optional(),widget_id:sQ.string().optional(),title:sQ.string().optional(),description:sQ.string().optional()}),c3=sQ.object({resources:sQ.array(c8).nullish(),resource:c8.nullish()}).nonstrict(),c5=sQ.object({title:sQ.string().nullable(),description:sQ.string().nullable(),meta:c3,position:sQ.number(),section_type:sQ.nativeEnum(c2),created_at:sQ.string().nullable(),updated_at:sQ.string().nullable()}),c9=c5.extend({resources:sQ.array(sQ.custom())}),c6=c5.extend({resource:sQ.custom().nullable()}),c7=sQ.object({question:sQ.string(),answer:sQ.string()}),de=sQ.object({faqs:c7.nullish(),breadcrumb_text:sQ.string().nullish()}).nonstrict();function dt(e,t){var a;let r=(0,cG.Vm)(e);return(null==(a=null==t?void 0:t.resources)?void 0:a.length)?(null==t?void 0:t.resources).find(t=>r===cY.vt.HUB_FILE?(null==t?void 0:t.hub_file_id)===e.id:r===cY.vt.PLUGIN?(null==t?void 0:t.plugin_id)===e.id:r===cY.vt.WIDGET?(null==t?void 0:t.widget_id)===e.id:void 0):(null==t?void 0:t.resource)?null==t?void 0:t.resource:void 0}sQ.object({title:sQ.string().nullable(),description:sQ.string().nullable(),header_img_url:sQ.string().url().nullable(),meta_title:sQ.string().nullable(),meta_description:sQ.string().nullable(),thumbnail_url:sQ.string().url().nullable(),meta:de,url_slug:sQ.string(),sections:sQ.array(sQ.union([c9,c6])),profile:c1.bo,publishing_status:sQ.string(),latest_published_at:sQ.string().nullable(),created_at:sQ.string().nullable(),updated_at:sQ.string().nullable(),is_template_url:sQ.boolean(),faqs:sQ.array(c7).nullable()});let da={"ui-kits":"ui-kits","2023-presentation-templates":"presentations","2023-resume-templates":"resume-templates","plugins-accessibility":"accessibility","org-chart-templates":"diagramming","plugins-tidy-cleanup":"file-organization","flow-chart-templates":"diagramming",icons:"icons","build-and-play":"fun-games","figjam-plugins":"whiteboarding",widgets:"team-meetings",typography:"fonts-typography","favorite-educational":"education","favorite-graphic-resources":"visual-assets",workshops:"brainstorming",diagramming:"diagramming",meetings:"team-meetings",engineering:"development",planning:"strategic-planning",brainstorms:"brainstorming",education:"education","favorite-team-bonding":"team-meetings",fun:"fun-games","graphic-resources":"visual-assets","how-teams-jam":"team-meetings","figjam-team-bonding":"team-meetings",educational:"education"},dr={"world-emoji-day-2021":"world-emoji-day","config2021-sessions":"config-sessions","holidays-2022":"holidays","config-2022-speaker-decks":"config-speaker-decks","schema-2022-speaker-decks":"schema-speaker-decks","social-media":"instagram-mockup-designs","pride-2021":"pride-posters"},dn="community_collections--bannerContainer--7yGIP",dl="community_collections--copyButton--Mb-fA text--fontPos13--xW8hS text--_fontBase--QdLsd",di="community_collections--resourcePreviewRow--wcOSC",ds="community_collections--resourcePreview--QDaaf",dc="community_collections--breadcrumbTrailContainer--uibe8",dd="community_collections--breadcrumbTrail--JQcAW",dm="community_collections--breadcrumbArrow--bv6Ia",du="community_collections--parentBreadcrumb--fhqqK community_collections--breadcrumb--E-9f5 text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",d_="community_collections--childBreadcrumb--X4qf6 community_collections--breadcrumb--E-9f5 text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",dp="community_collections--footerContainer--OI6W4";function df({page:e}){let t=o.useRef(null),a=function(e,t=4,a=540){let[r,n]=o.useState(t),l=o.useCallback(()=>{if(window.innerWidth<=a){n(t);return}let r=e.current.children[1];if(0===r.children.length){n(0);return}let l=r.children[0].getBoundingClientRect().width;n(Math.floor(r.getBoundingClientRect().width/l))},[e,n,t,a]);return(0,u.h)(()=>(l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l))),r}(t),r=function(e){let{resources:t}=e.sections.reduce(({resources:e,resourceIds:t},a)=>{if("bundle_section"===a.section_type)for(let r of a.resources)(null==r?void 0:r.id)&&!t.has(r.id)&&(t.add(r.id),e.push(r));else if("hero_section"===a.section_type){let r=a.resource;r&&!t.has(r.id)&&(e.push(r),t.add(r.id))}return{resources:e,resourceIds:t}},{resources:[],resourceIds:new Set});return t}(e);return o.createElement("div",{className:"community_collections--communityShelfAllPageRow--xw1Ut",ref:t},o.createElement("div",{className:"community_collections--communityShelfAllPageHeader--pbqhx"},o.createElement("div",{className:"community_collections--communityShelfAllPageHeaderLeftSide--6UBkD text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement("div",{className:"community_collections--communityShelfAllPageSubTitle--sP1yP text--fontPos12--YsUAh text--_fontBase--QdLsd"}),o.createElement("div",{className:"community_collections--communityShelfAllPageTitle--r8QHx ellipsis--ellipsis--Tjyfa text--fontPos24--YppUD text--_fontBase--QdLsd"},e.title)),o.createElement(c$.N_,{to:e.is_template_url?`/community/templates/${e.url_slug}`:`/community/collections/${e.url_slug}`,className:"community_collections--communityShelfAllPageHeaderRightSide--UQUv8 community_collections--communityShelfAllPageHeaderLeftSide--6UBkD text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,S.tx)("community.shelves.show_more"))),o.createElement(c0,{resources:r.slice(0,a),adtlClassName:"community_collections--allCollectionsResourceGrid--jMwuQ feed_page--feedGrid--Wm-8Q"}))}var dg=a(167807),dE=a(547807);let dv=new class{constructor(){this.CollectionPageSchemaValidator=(0,dE.vh)()}getCollectionPageByUrlSlug(e,t){return this.CollectionPageSchemaValidator.validate(async({xr:a})=>await a.get(`/api/collection_pages/${e}?is_template_url=${t}`))}},dh=new class{constructor(){this.CollectionPageSchemaValidator=(0,dE.vh)()}getCollectionPageByUrlSlug(e){return this.CollectionPageSchemaValidator.validate(async({xr:t})=>await t.get(`/api/admin/collection_pages/${e}`))}updateCollectionPageByUrlSlug(e){return this.CollectionPageSchemaValidator.validate(async({xr:t})=>await t.put(`/api/admin/collection_pages/${e.urlSlug}`,dE.td.toAPIParameters(e.collectionPage||{})))}deleteCollectionPageByUrlSlug(e){return this.CollectionPageSchemaValidator.validate(async({xr:t})=>await t.del(`/api/admin/collection_pages/${e.urlSlug}`))}createCollectionPage(e){return this.CollectionPageSchemaValidator.validate(async({xr:t})=>await t.post("/api/admin/collection_pages",dE.td.toAPIParameters(e.collectionPage||{})))}},dy=lI.M4.Query({fetch:async({urlSlug:e,isTemplateUrl:t})=>(await dv.getCollectionPageByUrlSlug(e,t)).data.meta});lI.M4.Query({fetch:async({urlSlug:e})=>(await dh.getCollectionPageByUrlSlug(e)).data.meta}),lI.M4.Mutation(async({urlSlug:e,collectionPage:t})=>(await dh.updateCollectionPageByUrlSlug({urlSlug:e,collectionPage:t})).data.meta),lI.M4.Mutation(async({urlSlug:e})=>(await dh.deleteCollectionPageByUrlSlug({urlSlug:e})).data.meta),lI.M4.Mutation(async e=>(await dh.createCollectionPage({collectionPage:e})).data.meta),lI.M4.PaginatedQuery({fetch:(0,dg.ER)(()=>"/api/admin/collection_pages",8)});let db=lI.M4.PaginatedQuery({fetch:(0,dg.ER)(()=>"/api/collection_pages",8)});var dw=a(674694),dT=a(233562),dI=a(222085),dx=a(22332),dN=a(542061),dC=a(463420);function dS({breadcrumbs:e,surface:t}){return o.createElement("div",{className:ey()("community_breadcrumbs--breadcrumbsContainer--e76p8",{"community_breadcrumbs--resourcePagePadding--MUCrg":"resource_page"===t,"community_breadcrumbs--categoryPadding--b-ilJ":"category"===t})},o.createElement("div",{className:"community_breadcrumbs--breadcrumbs--S2TN8"},o.createElement(O.o3,{trackingEventName:"cmty_breadcrumbs_home",to:"/community"},o.createElement("div",{className:"community_breadcrumbs--homeIcon--VSWVj"},o.createElement(dN.Q,null))),e.map(e=>o.createElement("div",{className:"community_breadcrumbs--breadcrumbContainer--eI8-l",key:e.text},o.createElement("div",{className:"community_breadcrumbs--chevronIcon--rXeJw"},o.createElement(dC.k,null)),o.createElement(O.o3,{...e.linkProps,className:"community_breadcrumbs--breadcrumb--Op180 text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.text)))))}function dk({collection:e}){let t=(0,dx.N)(`(max-width: ${oQ._C6})`),a=[{text:(0,S.t)("community.breadcrumbs.collections"),linkProps:{to:"/community/collections",trackingEventName:"cmty_breadcrumbs_collections"}},(null==e?void 0:e.title)&&{text:e.title,linkProps:{to:`/community/collections/${e.url_slug}`,trackingEventName:"cmty_breadcrumbs_collection",trackingProperties:{name:"collection_breadcrumb_clicked",collection_slug:e.url_slug,collection_text:e.title,is_mobile:t}}}].filter(Boolean);return o.createElement(dS,{breadcrumbs:a,surface:"collection"})}var dA=a(800576),dL=a(742580),dR=a(944452);let dD="footer--divider--srDs2";var dF=a(686352);let dP=sQ.object({label:sQ.string(),url:sQ.string()});function dM(){let e=[{title:(0,S.t)("community.footer.popular_searches"),items:[{label:(0,S.t)("community.footer.resume"),url:new dR.IE({categorySlug:dL.LJ.resumes}).href},{label:(0,S.t)("community.footer.mobile_apps"),url:new dR.IE({categorySlug:dL.LJ.mobileApps}).href},{label:(0,S.t)("community.footer.presentations"),url:new dR.IE({categorySlug:dL.LJ.presentations}).href},{label:(0,S.t)("community.footer.ui_kits"),url:new dR.IE({categorySlug:dL.LJ.uiKits}).href},{label:(0,S.t)("community.footer.calendar_templates"),url:new dR.IE({categorySlug:dL.LJ.calendarTemplates}).href}]},{title:(0,S.t)("community.footer.most_used"),items:[{label:"Material Design Icons",url:"/community/file/878585965681562011"},{label:"Apple Design Resources",url:"/community/file/1385659531316001292"},{label:"Figma auto layout playground",url:"/community/file/784448220678228461"},{label:"Anima - Figma to React, HTML",url:"/community/plugin/857346721138427857/anima-figma-to-react-html-react-html-in-devmode"},{label:"Ant Design Open Source",url:"/community/file/831698976089873405"}]},{title:(0,S.t)("community.footer.recommended_categories"),items:[{label:(0,S.t)("community.collections.instagram_templates"),url:new dR.IE({categorySlug:dL.LJ.instagramTemplates}).href},{label:(0,S.t)("community.footer.workshop_templates"),url:new dR.IE({categorySlug:dL.LJ.workshopTemplates}).href},{label:(0,S.t)("community.footer.data_templates"),url:new dR.IE({categorySlug:dL.LJ.dataTemplates}).href},{label:(0,S.t)("community.collections.laptop_mockups"),url:new dR.IE({categorySlug:dL.LJ.laptopMockups}).href},{label:(0,S.t)("community.footer.design_inspirations"),url:new dR.IE({categorySlug:dL.LJ.designInspirations}).href}]},{title:(0,S.t)("community.footer.top_categories"),items:[{label:(0,S.t)("categories.design_templates"),url:new dR.IE({categorySlug:dL.LJ.designTemplates}).href},{label:(0,S.t)("categories.libraries"),url:new dR.IE({categorySlug:dL.LJ.libraries}).href},{label:(0,S.t)("categories.icons"),url:new dR.IE({categorySlug:dL.LJ.icons}).href},{label:(0,S.t)("categories.development"),url:new dR.IE({categorySlug:dL.LJ.development}).href},{label:(0,S.t)("categories.brainstorming"),url:new dR.IE({categorySlug:dL.LJ.brainstorming}).href}]}];function t({href:e,children:t}){let a={trackingEventName:"cmty_footer",trackingProperties:{name:"footer_link_clicked",link:e}};return(0,dA.vh)(e)?o.createElement(O.L0,{href:e,...a},t):o.createElement(O.o3,{to:e,...a},t)}return o.createElement("div",{className:"footer--footer--tuKBS text--fontPos13--xW8hS text--_fontBase--QdLsd","data-testid":"community-footer"},o.createElement("div",{className:"footer--sectionsContainer--BR5as"},e.map(e=>o.createElement(eg.Y,{key:e.title,direction:"vertical",padding:{right:16}},o.createElement("div",{className:"footer--sectionTitle--pM53E"},e.title),e.items.map(e=>o.createElement(t,{key:e.url,href:e.url},e.label))))),o.createElement(eg.Y,{direction:"vertical",spacing:16},o.createElement(t,{href:"/"},o.createElement(es.B,{svg:dF.A,className:"footer--wordmark--CrA9E"})),o.createElement("div",null,o.createElement("span",null,(0,S.tx)("community.footer.copyright")),o.createElement("span",{className:dD},"\u2022"),o.createElement(t,{href:"/sitemaps/figma-community-index.xml"},(0,S.tx)("community.footer.site_map")),o.createElement("span",{className:dD},"\u2022"),o.createElement(t,{href:"https://help.figma.com/hc/en-us/articles/360038510573-Figma-Community-Guidelines"},(0,S.tx)("community.footer.community_guidelines")),o.createElement("span",{className:dD},"\u2022"),o.createElement(t,{href:"/community-terms"},(0,S.tx)("community.footer.terms_of_service")))))}sQ.object({title:sQ.string(),items:sQ.array(dP)});let dO="load_more_pagination_button--loadMoreButtonWrapper--nNqNo";function dB({onClick:e,isLoading:t,isMoreToFetch:a}){return t?o.createElement("div",{className:dO},o.createElement(dT.y$,null)):a?o.createElement("div",{className:dO},o.createElement(I.tM,{onClick:e},(0,S.tx)("community.landing_page.load_more"))):null}var dU=a(781779),dV=a(694953);let dH=o.createElement("svg",{width:"7",height:"10",viewBox:"0 0 7 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M1 1L5 4.91111L1 9",strokeWidth:"2"})),dW=o.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.0304 9.53033L8.00006 16.5607L3.46973 12.0303L4.53039 10.9697L8.00006 14.4393L13.9697 8.46967L15.0304 9.53033Z",fill:"white"})),dj=o.createElement("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.52469 13.6568L8.17634 11.0052L8.88345 11.7123L6.2318 14.3639C4.96259 15.6331 2.90481 15.6331 1.6356 14.3639C0.366401 13.0947 0.366401 11.0369 1.6356 9.76772L4.28726 7.11607L4.99436 7.82317L2.34271 10.4748C1.46403 11.3535 1.46403 12.7781 2.34271 13.6568C3.22139 14.5355 4.64601 14.5355 5.52469 13.6568ZM11.7119 8.88383L11.0048 8.17673L13.6564 5.52507C14.5351 4.6464 14.5351 3.22177 13.6564 2.34309C12.7777 1.46441 11.3531 1.46442 10.4744 2.34309L7.82279 4.99474L7.11568 4.28764L9.76733 1.63599C11.0365 0.366784 13.0943 0.366784 14.3635 1.63599C15.6327 2.90519 15.6327 4.96298 14.3635 6.23218L11.7119 8.88383ZM6.26126 10.5043L10.5039 6.26164L9.73787 5.49561L5.49523 9.73825L6.26126 10.5043Z",fill:"white"})),d$={Blue:dU.wRm,"Multiplayer Yellow":dU.KsR,Teal:dU.Dmn,"Hot Pink":dU.FXh,Redish:dU.uAC,Green:dU.zo1,Purple:dU.A8q,"Dark Blue":dU.WGG,"FigJam Primary":dU.L2H},dG=Object.keys(d$)[0];function dz(){let{urlSlug:e}=(0,cD.g)();return o.createElement(o.Fragment,null,o.createElement(dQ,{urlSlug:e}))}function dY({isLoading:e,collectionPages:t}){if(!t.length&&e)return null;let a=t.filter(e=>!function(e){for(let t of e.sections)if("bundle_section"===t.section_type&&t.meta.hasOwnProperty("figjam_ai"))return!0;return!1}(e));return o.createElement(o.Fragment,null,a.map(e=>o.createElement(df,{key:e.url_slug,page:e})))}function dK(){let[e,t]=(0,p.IT)(db("")),a="loading"===e.status||!!e.isFetchingNextPage,r=(0,cz.o5)(),n=(0,cz.kk)();return o.createElement(o.Fragment,null,o.createElement(cj.S,null),o.createElement("div",{className:"community_collections--allCollectionsPage--YFBlU"},o.createElement("div",{className:"community_collections--allCollectionsHeaderContainer--9UL5p"},o.createElement("h1",{className:"community_collections--allCollectionsHeader--L0frM text--fontPos32Whyte--AHO3S text--_fontBaseWhyte--efAjI"},(0,S.tx)("community.categories.figma_community_collections")),o.createElement("h2",{className:"community_collections--allCollectionsSubHeader--Ww0AY text--fontPos18--rYXJb text--_fontBase--QdLsd"},(0,S.tx)("community.categories.check_out_collections_of_some_of_our_favorite_design_files_plugins_and_creators_from_figma_community"))),n()?o.createElement(dk,null):o.createElement("div",{className:dc},o.createElement("ul",{className:dd},o.createElement("li",{className:du},o.createElement("a",{href:"/community"},(0,S.tx)("community.view_bar.home"))),o.createElement("div",{className:dm},dH),o.createElement("li",{className:d_},(0,S.tx)("community.shelves.all_collections")))),o.createElement(dY,{isLoading:a,collectionPages:e.data||[]}),r()?o.createElement(dB,{onClick:e=>{e.preventDefault(),t.fetchNextPage()},isLoading:a,isMoreToFetch:!!e.hasNextPage}):o.createElement(o.Fragment,null,a&&o.createElement(dT.y$,null),!!e.hasNextPage&&o.createElement(cK.a,{callback:e=>{e[0].isIntersecting&&t.fetchNextPage()}})),r()&&!(0,d.y3)()&&o.createElement("div",{className:dp},o.createElement(dM,null))))}function dQ(e){var t;let{urlSlug:a,profileTile:r,onSetShelf:n}=e,[l,i]=o.useState(null),s=(0,cz.o5)(),c=()=>{dI.A.getCommunityShelves({urlSlug:a}).then(({data:e})=>{n&&n(e.meta[0]),i(e.meta[0])}).catch(()=>{})};if(o.useEffect(()=>{c()},[a]),!l)return o.createElement(o.Fragment,null);let m=o.createElement("div",{className:dn},o.createElement("div",{className:dc},o.createElement("ul",{className:dd},o.createElement("li",{className:du},o.createElement("a",{href:"/community"},(0,S.tx)("community.view_bar.home"))),o.createElement("div",{className:dm},dH),o.createElement("li",{className:du},o.createElement("a",{href:"/community/collections"},(0,S.tx)("community.shelves.all_collections"))),o.createElement("div",{className:dm},dH),o.createElement("li",{className:d_,style:{color:d$[(null==(t=l.shelf_meta.banner)?void 0:t.color)||dG]}},o.createElement("a",{href:window.location.href},(0,S.Yd)(l.i18n_meta.title,l.title)))))),u=o.createElement("div",{className:"community_collections--gridContainer--PkTIN"},o.createElement("div",{className:cX.IB},o.createElement("div",{className:"community_collections--feed--71Y8R feed_page--feed--7UNQq text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement(c0,{resources:l.shelf_content,profileTile:r}))));return o.createElement(o.Fragment,null,o.createElement(cj.S,null),o.createElement(dX,{shelf:l}),m,u,s()&&!(0,d.y3)()&&o.createElement("div",{className:dp},o.createElement(dM,null)))}function dq(e){let{isMobileScreen:t}=e,[a,r]=o.useState(!1);return a?o.createElement("button",{className:dl},t?dW:(0,S.tx)("community.view_bar.copied")):o.createElement("button",{className:dl,onClick:()=>{r(!0),(0,cG.lW)(window.location.href),setTimeout(()=>r(!1),1e3)}},t?dj:(0,S.tx)("community.view_bar.copy_link"))}function dX(e){var t;let{shelf:a,bannerStyle:r}=e,[n,l]=o.useState(window.innerWidth),[i,s]=o.useState(null);o.useEffect(()=>{let e=null==i?void 0:i.querySelectorAll(`.${ds}`),t=setInterval(()=>{null==e||e.forEach((e,t)=>{setTimeout(()=>{e.style.transform="scale(1.03) translateX(-3px)",setTimeout(()=>{e.style.transform="scale(1)"},400)},100*t)})},4e3);return()=>clearTimeout(t)},[i]);let c=a?new Date(null==a?void 0:a.updated_at):new Date;o.useEffect(()=>{let e=()=>{l(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let d=d$[(null==(t=null==a?void 0:a.shelf_meta.banner)?void 0:t.color)||Object.keys(d$)[0]];return o.createElement("div",{className:r||dn,ref:e=>s(e)},o.createElement("div",{className:"community_collections--banner--S2zb2 text--fontPos13--xW8hS text--_fontBase--QdLsd",style:{background:`linear-gradient(45deg, ${d}, ${d}80)`}},o.createElement("div",{className:"community_collections--bannerLeft--1oEnB"},o.createElement("div",{className:"community_collections--info--7PVz2"},a&&o.createElement(o.Fragment,null,o.createElement("div",{className:"community_collections--subtitle--dm958 text--fontPos12--YsUAh text--_fontBase--QdLsd community_collections--marginX--8hpWs"},(0,S.Yd)(a.i18n_meta.subtitle,a.subtitle)),o.createElement("h1",{className:"community_collections--title--cqPZt text--fontPos32Whyte--AHO3S text--_fontBaseWhyte--efAjI community_collections--marginX--8hpWs text--fontPos24--YppUD text--_fontBase--QdLsd"},(0,S.Yd)(a.i18n_meta.title,a.title)),o.createElement("p",{className:"community_collections--description--cjsSf community_collections--marginX--8hpWs text--fontPos16--oMC-G text--_fontBase--QdLsd"},(0,S.Yd)(a.i18n_meta.description,a.description))),o.createElement("div",{className:"community_collections--meta--Z25Vv"},o.createElement("div",{className:"community_collections--metaLeft--9gNAe"},o.createElement("div",{className:"community_collections--curatedImage--YDOQy community_collections--metaSpace--9Jcor"},o.createElement(es.B,{svg:dV.A,width:"15px",height:"15px",useOriginalSrcFills_DEPRECATED:!0})),o.createElement("div",{className:"community_collections--curated--fHhRS"},(0,S.tx)("community.view_bar.curated_by"),"\xa0"),o.createElement("a",{className:"community_collections--figmaLink--4hdDG community_collections--metaSpace--9Jcor",href:`${(0,_.tl)().figma_url}/@figma`},(0,S.tx)("community.view_bar.figma"))),o.createElement("div",{className:"community_collections--metaRight--hhG9k"},o.createElement("div",{className:"community_collections--separator--OfDbC community_collections--metaSpace--9Jcor"},"\u2022\xa0"),o.createElement("div",{className:"community_collections--updateDate--vgkWS"},(0,S.tx)("community.view_bar.updated_date",{date:c.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})),o.createElement(dq,{isMobileScreen:n<=540}))))),o.createElement("div",{className:"community_collections--bannerRight--CuT0Z"},(null==a?void 0:a.shelf_content)&&o.createElement(dZ,{resources:a.shelf_content}))))}function dJ({resource:e}){let t=(0,cG.qD)(e),a=(0,cG.Qo)(e),r=e.thumbnail_url;return o.createElement("div",{className:ds},a?o.createElement(dw.Xy,{hubFileId:e.id,image:r,alt:t.name,onLoad:e=>e.target.style.opacity="1",resizedThumbnailUrls:e.resized_thumbnail_urls}):o.createElement("img",{alt:t.name,src:r}))}function dZ(e){let t=e.resources.filter(e=>e&&("current_hub_file_version_id"in e||"current_plugin_version_id"in e));return o.createElement("div",{className:"community_collections--previewTransformContainer--8b6Bh"},o.createElement("div",{className:di},!!t[0]&&o.createElement(dJ,{resource:t[0]}),!!t[1]&&o.createElement(dJ,{resource:t[1]})),o.createElement("div",{className:"community_collections--previewRowMiddle--jwXWH community_collections--resourcePreviewRow--wcOSC"},!!t[2]&&o.createElement(dJ,{resource:t[2]}),!!t[3]&&o.createElement(dJ,{resource:t[3]})),o.createElement("div",{className:di},!!t[4]&&o.createElement(dJ,{resource:t[4]}),!!t[5]&&o.createElement(dJ,{resource:t[5]})))}var d0=a(629732);function d1({collection:e}){return o.createElement("div",{className:"header_attributes--attributes--UE7uE text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement(d0.L,{publishers:[e.profile]}),o.createElement("div",{className:"header_attributes--profile--qrbMp"},(0,S.tx)("community.collections.curated_by"),o.createElement("span",{className:"header_attributes--profileName--n9lfZ"},o.createElement(d0.I,{publishers:[e.profile],useSmallWidth:!0,removeByLabel:!0,openInNewTab:!0}))),!!e.latest_published_at&&o.createElement("div",{className:"header_attributes--date--Zt4VW"},o.createElement("span",{className:"header_attributes--dot--1yVwn"},"\u2022"),o.createElement("span",null,new Date(e.latest_published_at).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}))))}function d2({collection:e,preview:t=!1}){let a=(0,dx.N)(`(max-width: ${oQ._C6})`);return o.createElement("div",{className:"collection_banner--collectionBanner--vyr9z"},o.createElement("div",{className:ey()("collection_banner--headerContainer--52lrp")},!t&&o.createElement(dk,{collection:e}),o.createElement("div",{className:ey()("collection_banner--collectionHeader--85DYX text--fontPos24Whyte--gYiFz text--_fontBaseWhyte--efAjI",{[ef.cx.flexColumn.$]:a})},o.createElement("h1",null,e.title)),o.createElement("p",{className:"collection_banner--collectionDescription--TjSn1 text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.description)),o.createElement(d1,{collection:e}))}var d4=a(815063),d8=a(96328);let d3="breadcrumbs--link--8OB6k";function d5({pathname:e,overrideText:t}){let a=decodeURIComponent(e).split("/").slice(1),r=a[a.length-1].replace(/-/g," ");return o.createElement("div",{className:"breadcrumbs--breadcrumbs--7n1rP text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement(c$.N_,{className:d3,to:"/community/collections"},(0,S.tx)("community.shelves.all_collections")),o.createElement("div",{className:"breadcrumbs--separator--4AJjS"},"/"),o.createElement("span",{className:ey()(d3,"breadcrumbs--black--BefO-")},t||(0,d8.Zr)(r)))}function d9({title:e,hasDivider:t=!1,children:a}){let[r,n]=(0,o.useState)(!1);return o.createElement(eg.Y,{verticalAlignItems:"start",width:"fill-parent",height:"hug-contents"},o.createElement("div",{tabIndex:0,className:"faq_accordion--accordionButton--t23kN",role:"button",onClick:()=>{n(e=>!e)}},o.createElement("div",{className:ey()("faq_accordion--accordionButtonContent--lHulm text--fontPos13--xW8hS text--_fontBase--QdLsd",{"faq_accordion--divider--VdCtu":t})},o.createElement(eg.Y,{direction:"vertical"},o.createElement(eg.Y,{horizontalAlignItems:"space-between",verticalAlignItems:"center"},o.createElement("div",{className:r?"faq_accordion--semibold--ff-Ee":"faq_accordion--medium--4FEsg"},e),o.createElement(re.In,{icon:r?"chevron-up-32":"chevron-down-32",fill:"secondary"})),o.createElement("div",{className:r?void 0:"faq_accordion--hidden--G1Whc"},a)))))}function d6({faqs:e}){return o.createElement("div",{className:"faqs_section--sectionContainer--NWPTP"},o.createElement(eg.Y,{horizontalAlignItems:"center"},o.createElement("div",{className:"faqs_section--section--5Tey9"},o.createElement(eg.Y,{width:"fill-parent",height:"hug-contents",direction:"vertical",spacing:0},o.createElement("div",{className:"faqs_section--sectionTitle--I5tGC text--fontPos24--YppUD text--_fontBase--QdLsd"},(0,S.tx)("community.collections.frequently_asked_questions")),o.createElement("div",{className:"faqs_section--sectionBody--e9hQ3"},e.map((e,t)=>o.createElement(d9,{key:t,hasDivider:0!==t,title:e.question},o.createElement("p",{className:"faqs_section--answer--CBO9A"},e.answer))))))))}var d7=a(675665);let me=(0,iJ.eU)(d7.$O.DescriptionView);var mt=a(892123),ma=a(175420),mr=a(654923),mn=a(466636),ml=a(215822),mi=a(408552),mo=a(365292);function ms({orgName:e}){return o.createElement(mo.Ex,{background:"white",height:"16",border:"strong"},e?(0,S.tx)("community.plugins.private_for_plugin_org_name",{orgName:e}):(0,S.tx)("community.plugins.private_for_your_organization"))}var mc=a(17284);function md({resource:e}){var t,a;let r=(0,s.d4)(e=>e.authedActiveCommunityProfile),n=(0,mr.I)(e),l=(0,mn.QQ)(n),i=!(0,ou.cs)(r)&&l?o.createElement(mi.V6,{resource:e,backgroundColor:"white",height:"16",border:"strong"}):null,c=((0,cY.I0)(e)||(0,cY.xQ)(e))&&(0,ml.Rt)(e)?o.createElement(ms,{orgName:null==(a=null==(t=e.roles)?void 0:t.org)?void 0:a.name}):void 0;return o.createElement(o.Fragment,null,i||c||o.createElement(mc.I,{badges:e.badges,height:"16",border:"strong",disableIcon:!0}))}var mm=a(203008),mu=a(743282),m_=a(195847),mp=a(410004),mf=a(749949),mg=a(727749),mE=a(756085),mv=a(332086);let mh="save-button-clicked";function my(e,t,a,r){return function(n,l){var i,o;let s=l();if((0,eP.Cu)(mw({state:s,resource:e,viewContext:t,action:"save",loggedIn:!!s.user,forOrg:a}),mh),!s.user){(0,tS.$D)(w.e.COMMUNITY,Error("[Community Saves] Attempted unsave without currentUser"));return}if((0,cY.U)(e)){let t=()=>{let t=tQ.Ay.post(`/api/hub_file/${e.id}/save`),a=`optimistic-resource-save-${(0,mu.g)()}`;(0,rF.WB)().optimisticallyCreate({ResourceSave:{[a]:{userId:s.user.id,hubFileId:e.id,createdAt:new Date(Date.now())}}},t),t.then(()=>{n(ec.F.enqueue({message:(0,S.t)("community.saves.file_saved_for_your_profile"),type:"resource-save"}))}).catch(e=>{(0,tS.$D)(w.e.COMMUNITY,e)})};if(!(null==(i=s.authedActiveCommunityProfile)?void 0:i.public_at)){n(R.to({type:mv.G$,data:{userId:s.user.id,variations:[mv.FF.OPT_IN],onFinish:t}}));return}t()}else n((0,mg.d6)({id:e.id,resourceType:(0,cG.Vm)(e),communityProfile:l().authedActiveCommunityProfile||void 0,orgId:(0,_.kc)().cmty_deprecate_browse_as_admin?r:a&&(null==(o=s.authedActiveCommunityProfile)?void 0:o.org_id)||void 0,source:mg.uR.COMMUNITY_HUB,optimisticData:{resource:e}}))}}function mb(e,t,a,r){return function(n,l){var i;let o=l();if(!o.user){(0,tS.$D)(w.e.COMMUNITY,Error("[Community Saves] Attempted save without currentUser"));return}((0,eP.Cu)(mw({state:o,resource:e,viewContext:t,action:"unsave",loggedIn:!!o.user,forOrg:a}),mh),(0,cY.U)(e))?tQ.Ay.del(`/api/hub_file/${e.id}/save`).then(()=>{n(ec.F.enqueue({message:(0,S.t)("community.saves.file_removed_from_your_profile"),type:"resource-save"}))}).catch(e=>{(0,tS.$D)(w.e.COMMUNITY,e)}):n((0,mg.s1)({id:e.id,resourceType:(0,cG.Vm)(e),communityProfile:l().authedActiveCommunityProfile||void 0,orgId:(0,_.kc)().cmty_deprecate_browse_as_admin?r:a&&(null==(i=o.authedActiveCommunityProfile)?void 0:i.org_id)||void 0,source:mg.uR.COMMUNITY_HUB}))}}function mw({state:e,resource:t,viewContext:a,action:r,loggedIn:n,forOrg:l=!1}){var i;return{action:r,resourceId:t.id,resourceType:(0,cG.Vm)(t),viewContext:a,loggedIn:n,forOrgId:l?null==(i=e.authedActiveCommunityProfile)?void 0:i.org_id:void 0,searchSessionId:(0,mf.w)(e)}}function mT(e,t){let a=(0,s.wA)(),r=!!function(e,t){var a,r,n,l;let i=(0,rr.Rs)(rl.Ko6,{hubFileId:t},{enabled:e===cY.vt.HUB_FILE}),o=(0,rr.Rs)(rl.H$B,{pluginId:t,orgIds:[]},{enabled:e===cY.vt.PLUGIN||e===cY.vt.WIDGET});return((null==(r=null==(a=i.data)?void 0:a.resourceSave)?void 0:r.createdAt)||(null==(l=null==(n=o.data)?void 0:n.pluginInstall)?void 0:l.createdAt))??null}((0,cG.Hh)(e),e.id),n=o.useCallback(n=>{(0,nz.YQ)({id:"cmty-detail-view-saved-button-clicked"}),null==n||n.stopPropagation(),r?a(mb(e,t)):a(my(e,t))},[r,a,e,t]);return o.useCallback(e=>{(0,mp.FL)(m_.qB.SIGN_UP,{preventDefaultRedirect:!0})},[]),{onUserSaveActionClick:n,isResourceSavedForUser:r}}function mI(e,t){var a;let r=(0,s.wA)(),n=(0,s.d4)(e=>(0,ou.Tm)(e)),l=(0,rr.Rs)(rl.H$B,{pluginId:e.id,orgIds:Object.keys(n)}),i=(0,rr.Rs)(rl.KC4,{pluginId:e.id,orgIds:Object.keys(n)}),c=o.useMemo(()=>{var t,a;if((0,cY.U)(e))return{};let r=(null==(t=l.data)?void 0:t.orgPluginInstalls.status)!==r1.tT.Loaded?[]:(null==(a=l.data)?void 0:a.orgPluginInstalls.data)||[],o={};return Object.values(n).forEach(t=>{var a,n;(!((0,cY.I0)(e)&&t.plugins_whitelist_enforced||(0,cY.xQ)(e)&&t.widgets_whitelist_enforced)||((null==(a=i.data)?void 0:a.orgAllowlistedPlugins.status)!==r1.tT.Loaded?[]:(null==(n=i.data)?void 0:n.orgAllowlistedPlugins.data)||[]).some(e=>e.orgId===t.id))&&(o[t.id]=r.some(e=>e.orgId===t.id))}),o},[n,i,e,null==(a=l.data)?void 0:a.orgPluginInstalls]),d=o.useCallback((a,n)=>{null==n||n.stopPropagation(),c[a]?r(mb(e,t,!0,a)):r(my(e,t,!0,a))},[r,e,t,c]);return{savesByOrgId:c,onOrgSaveAction:d}}let mx="save_button--buttonContainerBrandColors--xQhK7",mN="save_button--buttonContainerBase--m8dS8 text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",mC="save_button--buttonContainerBaseWide--EDZcF",mS="save_button--buttonContainer--JQjtD save_button--buttonContainerBase--m8dS8 text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",mk="save_button--iconContainer--Brlqe",mA="save_button--iconDisabled--15buP save_button--iconContainer--Brlqe";function mL(e){return o.createElement(mR,{...e})}function mR({resource:e,viewContext:t,authedActiveCommunityProfile:a}){let r=(0,rv.sZ)(),{onOrgInstallActionClick:n,isResourceInstalledForOrg:l}=function(e,t){let a=(0,s.wA)(),{orgPlugins:r,orgWidgets:n}=(0,mE.Be)(),l=(0,cY.xQ)(e)?n[e.id]:r[e.id];return{onOrgInstallActionClick:o.useCallback(r=>{r.stopPropagation(),l?a(mb(e,t,!0)):a(my(e,t,!0))},[a,l,e,t]),isResourceInstalledForOrg:l}}(e,t),i=(0,cY.xQ)(e)?null==r?void 0:r.widgets_whitelist_enforced:null==r?void 0:r.plugins_whitelist_enforced,c=(0,mE.ll)(),d=(0,mE.U6)(),m=(0,cY.xQ)(e)?!!d[e.id]:!!c[e.id];return i&&!m?o.createElement("button",{className:mS,disabled:!0},o.createElement("div",{className:mA},o.createElement(mm.LP,null))):o.createElement("button",{className:mS,onClick:n,"data-tooltip-type":eB.Ib.TEXT,"data-tooltip":l?(0,S.t)("community.saves.remove_this_resource_for_everyone_at",{orgName:a.name}):(0,S.t)("community.saves.save_this_resource_for_everyone_at",{orgName:a.name})},o.createElement("div",{className:mk},l?o.createElement(mm.Ns,null):o.createElement(mm.LP,null)))}let mD="community-save-button-dropdown";function mF(e){let{viewContext:t}=e,a=(0,s.d4)(e=>e.authedActiveCommunityProfile);return(0,_.kc)().cmty_deprecate_browse_as_admin?o.createElement(mP,{resource:e.resource,viewContext:t,type:e.type,theme:e.theme,allowOrgSaves:e.allowOrgSaves,enableWideButtonForStickyFooter:e.enableWideButtonForStickyFooter}):(null==a?void 0:a.team_id)||(null==a?void 0:a.org_id)&&(0,cY.U)(e.resource)?o.createElement("button",{className:mS,disabled:!0},o.createElement("div",{className:mA},o.createElement(mm.LP,null))):(null==a?void 0:a.org_id)?o.createElement(mL,{resource:e.resource,viewContext:t,authedActiveCommunityProfile:a}):o.createElement(mO,{resource:e.resource,viewContext:t,type:e.type,theme:e.theme,enableWideButtonForStickyFooter:e.enableWideButtonForStickyFooter})}function mP({resource:e,viewContext:t,type:a,theme:r,allowOrgSaves:n,enableWideButtonForStickyFooter:l}){let i=(0,s.wA)(),{onUserSaveActionClick:c,isResourceSavedForUser:d}=mT(e,t),{savesByOrgId:m}=mI(e,t),u=n?m:{},_=o.useRef(null),p=ey()(mN,{[ef.cx.gap6.pl16.pr16.$]:"containText"===a,[mx]:"brand"===r,[ef.cx.w40.h40.$]:"square"===a,[mC]:l}),f=ey()(mk,{[ef.cx.ml2.$]:"containText"===a}),g="brand"===r?"var(--color-icon-onbrand)":void 0,E=d||Object.values(u).some(e=>e);return o.createElement(o.Fragment,null,o.createElement("button",{className:p,onClick:e=>{var t;if(0===Object.keys(u).length)return c(e);let a=null==(t=_.current)?void 0:t.getBoundingClientRect();a&&i(A.j7({type:mD,data:{targetRect:a}}))},"data-testid":"save-button","data-onboarding-key":"save-button","data-tooltip-type":eB.Ib.TEXT,ref:_,"data-tooltip":E?(0,S.t)("community.saves.remove_from_saves"):(0,S.t)("community.saves.save")},o.createElement("div",{className:f},E?o.createElement(mm.Ns,{fill:g}):o.createElement(mm.LP,{fill:g})),"containText"===a&&o.createElement("div",null,(0,S.tx)(E?"community.saves.remove_from_saves":"community.saves.save_for_later"))),n&&o.createElement(mM,{resource:e,viewContext:t}))}function mM({resource:e,viewContext:t}){let a=(0,s.wA)(),r=(0,s.d4)(e=>{var t;return(null==(t=e.dropdownShown)?void 0:t.type)===mD}),n=(0,s.d4)(e=>{var t,a;return null==(a=null==(t=e.dropdownShown)?void 0:t.data)?void 0:a.targetRect}),{onUserSaveActionClick:l,isResourceSavedForUser:i}=mT(e,t),{savesByOrgId:c,onOrgSaveAction:d}=mI(e,t),m=(0,s.d4)(e=>(0,ou.Tm)(e));if((0,cY.U)(e))return null;let u=[{displayText:(0,S.t)("community.saves.save_this_resource_for_yourself"),isChecked:i,callback:()=>{l()}}],_=Object.values(m).map(e=>({displayText:(0,S.t)("community.saves.save_for_everyone_at",{orgName:e.name}),isChecked:c[e.id],callback:()=>{d(e.id)}}));return u=u.concat(_),o.createElement(o.Fragment,null,r&&o.createElement(nq.j,{showPoint:!0,items:u,onSelectItem:(e,t)=>{e.callback&&e.callback("",null,a,t)},parentRect:n,dispatch:a}))}function mO({resource:e,viewContext:t,type:a,theme:r,enableWideButtonForStickyFooter:n}){let{onUserSaveActionClick:l,isResourceSavedForUser:i}=mT(e,t),s=ey()(mN,{[ef.cx.gap6.pl16.pr16.$]:"containText"===a,[mx]:"brand"===r,[ef.cx.w40.h40.$]:"square"===a,[mC]:n}),c=ey()(mk,{[ef.cx.ml2.$]:"containText"===a}),d="brand"===r?"var(--color-icon-onbrand)":void 0;return o.createElement("button",{className:s,onClick:l,"data-testid":"save-button","data-onboarding-key":"save-button","data-tooltip-type":eB.Ib.TEXT,"data-tooltip":i?(0,S.t)("community.saves.remove_from_saves"):(0,S.t)("community.saves.save")},o.createElement("div",{className:c},i?o.createElement(mm.Ns,{fill:d}):o.createElement(mm.LP,{fill:d})),"containText"===a&&o.createElement("div",null,(0,S.tx)(i?"community.saves.remove_from_saves":"community.saves.save_for_later")))}function mB(e){return o.createElement(mF,{resource:e.resource,viewContext:e.viewContext,type:"square",theme:"default",allowOrgSaves:!0})}function mU(e){return o.createElement(mF,{resource:e.resource,viewContext:e.viewContext,type:"containText",theme:"brand",enableWideButtonForStickyFooter:e.enableWideButtonForStickyFooter})}var mV=a(545941);let mH="basic_resource_header--numberOfUsers--oWoBg",mW="basic_resource_header--mobileResourcePageHeaderMaxWidth--McUl4 basic_resource_header--resourcePageHeaderMaxWidth--ym-5U",mj="basic_resource_header--mobileResourceNameHeader--oN4qX text--fontPos24--YppUD text--_fontBase--QdLsd",m$="basic_resource_header--mobileName--5NvYd",mG="basic_resource_header--anchorLink--r0iNn meta_container--metaTab--zRKXG text--fontPos14--OL9Hp text--_fontBase--QdLsd",mz="basic_resource_header--activeAnchorLink--3ueWI meta_container--selectedMetaTab--5IRWQ meta_container--metaTab--zRKXG text--fontPos14--OL9Hp text--_fontBase--QdLsd",mY="basic_resource_header--ctaContainer--k8wqG",mK="basic_resource_header--leftSide--MzgPN";var mQ=a(404554),mq=a(815234);function mX({resource:e,viewContext:t}){var r,n;let l=e.like_count>0,i=(0,mV.mk)(e)>0,s=(0,cG.Bl)(e.id,(0,cG.Vm)(e)),c=null==(r=s.data)?void 0:r[0],d=a(892123).o.useLikeActions(e,!!c,(null==(n=s.data)?void 0:n[1])||null,t||"")(),m=o.createElement("div",{className:"basic_resource_header--bulletSeparator--OGYaL text--fontPos10--s1PI5 text--_fontBase--QdLsd"},(0,S.tx)("community.detail_view.bullet_point"));return o.createElement("div",{className:"basic_resource_header--stats--U1D-b text--fontPos13--xW8hS text--_fontBase--QdLsd","data-testid":"resource-header-stats"},o.createElement("div",null,(0,cG.c8)(e)),l&&o.createElement(o.Fragment,null,m,o.createElement("button",{onClick:e=>{(0,_.kc)().cmty_deprecate_browse_as_admin&&d(e)}},(0,_.kc)().cmty_deprecate_browse_as_admin?c?mZ:mJ:o.createElement(es.B,{svg:mQ.A})),o.createElement("div",{className:mH},(0,d8.$M)(e.like_count))),i&&o.createElement(o.Fragment,null,m,o.createElement(es.B,{svg:mq.A}),o.createElement("div",{className:mH},(0,S.tx)("community.detail_view.number_of_users",{numberOfUsers:(0,d8.$M)((0,mV.mk)(e))}))))}let mJ=o.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99988 4.5L7.3254 3.96042C6.28613 3.129 4.78791 3.21198 3.84681 4.15308C2.82678 5.17311 2.82678 6.8269 3.84681 7.84693L7.99988 12L12.153 7.84693C13.173 6.8269 13.173 5.17311 12.153 4.15308C11.2119 3.21198 9.71364 3.129 8.67437 3.96042L7.99988 4.5ZM7.99988 10.5858L11.4459 7.13982C12.0754 6.51032 12.0754 5.48969 11.4459 4.86018C10.8651 4.27939 9.94044 4.22818 9.29906 4.74129L7.99988 5.78063L6.70071 4.74128C6.05933 4.22818 5.13471 4.27939 4.55391 4.86018C3.92441 5.48969 3.92441 6.51032 4.55392 7.13982L7.99988 10.5858Z",fill:"black"})),mZ=o.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("rect",{width:"16",height:"16",fill:"var(--color-background)"}),o.createElement("path",{d:"M3.84693 7.84693L8 12L12.1531 7.84692C13.1731 6.8269 13.1731 5.1731 12.1531 4.15308C11.212 3.21198 9.71375 3.129 8.67448 3.96041L8 4.5L7.32552 3.96041C6.28625 3.129 4.78802 3.21198 3.84692 4.15308C2.8269 5.1731 2.8269 6.8269 3.84693 7.84693Z",fill:"#F24822"})),m0=a(258520).U;var m1=a(198181);let m2=a(62258).X;var m4=a(708071),m8=a(225266),m3=a(782501),m5=a(820642),m9=a(624618);function m6({resourceId:e,resourceType:t,containerClassName:a}){let r=(0,s.wA)(),n=(0,s.d4)(a=>t===cY.vt.HUB_FILE?(0,m5.M3)(e,a.hubFiles):(0,ml.my)(e,a.publishedPlugins)),l=(0,s.d4)(e=>e.authedActiveCommunityProfile),i=(0,s.d4)(e=>(0,m3.MK)(e,n)),c=o.useCallback(()=>{r((0,m8.z8)({hub_file_id:(0,cY.U)(n)?n.id:void 0,widget_id:(0,cY.xQ)(n)?n.id:void 0,plugin_id:(0,cY.I0)(n)?n.id:void 0})),r(ec.F.enqueue({message:(0,S.t)("community.detail_view.accepted_creator_invite")}))},[r,n]),d=o.useCallback(()=>{r((0,m8.bb)({hub_file_id:(0,cY.U)(n)?n.id:void 0,widget_id:(0,cY.xQ)(n)?n.id:void 0,plugin_id:(0,cY.I0)(n)?n.id:void 0})),r(ec.F.enqueue({message:(0,S.t)("community.detail_view.declined_creator_invite")}))},[r,n]);return!l||(0,ou.cs)(l)||!m3.ot.includes(i)?null:o.createElement("div",{className:a},o.createElement(m9.vR,{onClickAccept:c,onClickDecline:d,label:(0,S.t)("community.detail_view.you_have_been_added_as_a_creator_of_this_resource")}))}var m7=a(986323);function ue({pluginId:e,containerClassName:t}){let a=(0,s.wA)(),r=(0,s.d4)(t=>(0,ml.my)(e,t.publishedPlugins)),n=(0,s.d4)(e=>(0,m7.A)(e,r));return void 0!==n&&(0,m7.jT)(n)?o.createElement("div",{className:t},o.createElement(m9.vR,{onClickAccept:()=>{a((0,m8.dx)({widget_id:(0,cY.xQ)(r)?r.id:void 0,plugin_id:(0,cY.I0)(r)?r.id:void 0,src:m8.Nn.COMMUNITY_PAGE})),a(ec.F.enqueue({message:(0,S.t)("community.detail_view.accepted_publisher_invite")}))},onClickDecline:()=>{a((0,m8.MZ)({widget_id:(0,cY.xQ)(r)?r.id:void 0,plugin_id:(0,cY.I0)(r)?r.id:void 0,src:m8.Nn.COMMUNITY_PAGE})),a(ec.F.enqueue({message:(0,S.t)("community.detail_view.declined_publisher_invite")}))},label:(0,S.t)("community.detail_view.you_have_been_added_as_a_publisher_of_this_resource")})):null}var ut=a(609271),ua=a(107877),ur=a(629521),un=a(27703),ul=a(927625);let ui="canvas_viewer--canvasViewer--aDA8H",uo=(e,{width:t,height:a,top:r,left:n})=>{e.style.position="fixed",e.style.width=t+"px",e.style.height=a+"px",e.style.top=r+"px",e.style.left=n+"px"},us=(e,t)=>{if(e.viewer_mode===z.y4.PROTOTYPE)return`/community/file/${e.id}/embed`;let a=`/embed?embed_host=fastma&community_viewer=true&hub_file_id=${e.id}`;return void 0===t?a:`${a}&fuid=${t}`};function uc({viewer:e,resource:t,fixedSize:a}){let[r,n]=o.useState(void 0),[l,i]=o.useState(!1),[s,c]=o.useState(!1),d=(0,aJ.md)(ov.kS);o.useEffect(()=>{if(!e)return;let t=t=>{"LOAD_FINISHED"===t.data&&(e.querySelector("iframe").classList.add("canvas_viewer--showIframe--uYOO5"),e.setAttribute("data-loaded","true"),i(!0),(0,eP.qD)({name:"hub-file-canvas-loaded"}))},a=()=>{document.activeElement===e.querySelector("iframe")&&(0,eP.qD)({name:"community-LO-embed-iframe-interacted",comparisonVariant:s?"fullscreen":"thumbnail"})};return window.addEventListener("message",t,!1),window.addEventListener("blur",a,!1),()=>{window.removeEventListener("message",t,!1),window.removeEventListener("blur",a,!1)}},[e,s]);let m=()=>{if(!e)return;let t=e.querySelector(`div.${ui}`);if(!t)return;let a=t.getBoundingClientRect();uo(t,a),n(a),requestAnimationFrame(()=>{e.setAttribute("data-animation-phase","open"),t.style.position="fixed",t.style.width="calc(100vw - 96px)",t.style.height="calc(100vh - 96px)",t.style.top="48px",t.style.left="48px"}),(0,eP.qD)({name:"community-LO-embed-view-expanded"}),c(!0)},u=()=>{if(!e)return;let t=e.querySelector(`.${ui}`);t&&(uo(t,r),e.setAttribute("data-animation-phase","closing"),setTimeout(()=>{e.removeAttribute("data-animation-phase"),t.style.position="absolute",t.style.removeProperty("width"),t.style.removeProperty("height"),t.style.removeProperty("top"),t.style.removeProperty("left")},300),c(!1))};return e?o.createElement(o.Fragment,null,o.createElement("div",{className:"canvas_viewer--iframeWrapper--eemgJ"},o.createElement("iframe",{key:t.id,title:(0,S.t)("community.embed.preview_title_long"),style:{width:a?"100%":(0,cG.zS)(l),height:"100%"},src:us(t,d),allowFullScreen:!0}),o.createElement("svg",{onClick:()=>{s?u():m()},"aria-label":s?"Close":"Open",className:"canvas_viewer--fullscreenIcon--ew-9d",width:"18",height:"18",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M14.54 4.168l-3.187 3.186-.708-.708 3.197-3.197.753-.449H11V2h5v5h-1V3.334l-.46.834zM3.46 13.832l3.186-3.186.708.708-3.198 3.197-.752.449H7v1H2v-5h1v3.666l.46-.834z",fillRule:"nonzero",fillOpacity:"1",fill:"#000",stroke:"none"}))),o.createElement("div",{role:"button",tabIndex:0,onClick:u,className:"canvas_viewer--iframeBackdrop--1sZT3"})):o.createElement(o.Fragment,null)}function ud({resource:e,enableEmbedOnSmallScreens:t}){let[a,r]=o.useState(null),n=e.viewer_mode===z.y4.WHITEBOARD,l=!!e.thumbnail_is_set,i=t?ua.YW:900;return o.createElement("div",{className:ey()("canvas_viewer--canvasViewerWrapper--PEx4d",{"canvas_viewer--smallEmbed--1di1B":t}),"data-loaded":"false",ref:e=>r(e)},o.createElement("div",{className:n?"canvas_viewer--canvasViewerFigJam--GQ00B canvas_viewer--canvasViewer--aDA8H":ui,key:e.id},o.createElement("div",{className:"canvas_viewer--hubFileLoadingCoverImage--2onuq canvas_viewer--resourceLoadingCoverImage--e9uBx"},o.createElement(ul.Ho,{image:e.thumbnail_url,isSet:l,isWhiteboard:n,backgroundColor:(0,un.Cn)(e.client_meta),hubFileId:e.id,alt:(0,cG.qD)(e).name+" preview",thumbnailContext:dw.O7.DETAIL,resizedThumbnailUrls:e.resized_thumbnail_urls})),o.createElement(ut.Ay,{mediaQuery:`(min-width: ${i}px)`,onHide:()=>{a&&a.setAttribute("data-loaded","false")}},o.createElement(uc,{fixedSize:t,viewer:a,resource:e}))))}function um({resource:e}){return o.createElement("div",{className:"canvas_viewer--canvasViewerWrapperPlugins--YfQ3Y canvas_viewer--canvasViewerWrapper--PEx4d","data-loaded":"true"},o.createElement("div",{className:ui},o.createElement("img",{className:"canvas_viewer--pluginLoadingCoverImage--nn23R canvas_viewer--resourceLoadingCoverImage--e9uBx",src:e.thumbnail_url,alt:(0,cG.qD)(e).name+" preview",key:e.id})))}function uu({resource:e,enableEmbedOnSmallScreens:t}){return"current_hub_file_version_id"in e?o.createElement(O.fu,{name:"Canvas Embed"},o.createElement(ud,{resource:e,enableEmbedOnSmallScreens:t})):o.createElement(um,{resource:e})}function u_(e){let t;return()=>t??(t=e())}let up=u_(function(){return{designTemplates:[{urlSlug:dL.LJ.desktopAppsWebsites,text:(0,S.t)("categories.desktop_apps_websites")},{urlSlug:dL.LJ.mobileApps,text:(0,S.t)("categories.mobile_apps")},{urlSlug:dL.LJ.resumes,text:(0,S.t)("categories.resumes")},{urlSlug:dL.LJ.portfolios,text:(0,S.t)("categories.portfolios")},{urlSlug:dL.LJ.presentations,text:(0,S.t)("categories.presentations")}],libraries:[{urlSlug:dL.LJ.uiKits,text:(0,S.t)("categories.ui_kits")},{urlSlug:dL.LJ.wireframes,text:(0,S.t)("categories.wireframes")}],designTools:[{urlSlug:dL.LJ.accessibility,text:(0,S.t)("categories.accessibility")},{urlSlug:dL.LJ.editingEffects,text:(0,S.t)("categories.editing_effects")},{urlSlug:dL.LJ.fileOrganization,text:(0,S.t)("categories.file_organization")},{urlSlug:dL.LJ.importExport,text:(0,S.t)("categories.import_export")},{urlSlug:dL.LJ.prototypingAnimation,text:(0,S.t)("categories.prototyping_animation")}],visualAssets:[{urlSlug:dL.LJ.fontsTypography,text:(0,S.t)("categories.fonts_typography")},{urlSlug:dL.LJ.illustrations,text:(0,S.t)("categories.illustrations")},{urlSlug:dL.LJ.shapesColors,text:(0,S.t)("categories.shapes_colors")},{urlSlug:dL.LJ.stockPhotography,text:(0,S.t)("categories.stock_photography")}],whiteboarding:[{urlSlug:dL.LJ.brainstorming,text:(0,S.t)("categories.brainstorming")},{urlSlug:dL.LJ.diagramming,text:(0,S.t)("categories.diagramming")},{urlSlug:dL.LJ.funGames,text:(0,S.t)("categories.fun_games")},{urlSlug:dL.LJ.strategicPlanning,text:(0,S.t)("categories.strategic_planning")},{urlSlug:dL.LJ.teamMeetings,text:(0,S.t)("categories.team_meetings")}]}}),uf=u_(function(){return{designTemplates:{urlSlug:dL.LJ.designTemplates,text:(0,S.t)("categories.design_templates"),allText:(0,S.t)("categories.all_design_templates")},libraries:{urlSlug:dL.LJ.libraries,text:(0,S.t)("categories.libraries"),allText:(0,S.t)("categories.all_libraries")},designTools:{urlSlug:dL.LJ.designTools,text:(0,S.t)("categories.design_tools"),allText:(0,S.t)("categories.all_design_tools")},visualAssets:{urlSlug:dL.LJ.visualAssets,text:(0,S.t)("categories.visual_assets"),allText:(0,S.t)("categories.all_visual_assets")},whiteboarding:{urlSlug:dL.LJ.whiteboarding,text:(0,S.t)("categories.whiteboarding"),allText:(0,S.t)("categories.all_whiteboarding")},education:{urlSlug:dL.LJ.education,text:(0,S.t)("categories.education")},development:{urlSlug:dL.LJ.development,text:(0,S.t)("categories.development")},icons:{urlSlug:dL.LJ.icons,text:(0,S.t)("categories.icons")},more:{text:(0,S.t)("categories.more")}}});function ug(){let e=up(),t=uf();return(0,o.useMemo)(()=>({designTemplates:{category:t.designTemplates,dropdownCategories:e.designTemplates},libraries:{category:t.libraries,dropdownCategories:e.libraries},designTools:{category:t.designTools,dropdownCategories:e.designTools},visualAssets:{category:t.visualAssets,dropdownCategories:e.visualAssets},whiteboarding:{category:t.whiteboarding,dropdownCategories:e.whiteboarding},more:{category:t.more,dropdownCategories:[t.education,t.development,t.icons]},icons:{category:t.icons},development:{category:t.development},education:{category:t.education}}),[t,e])}var uE=a(97128);let uv="tags_container--tagsHeader--6f339 text--fontPos14--OL9Hp text--_fontBase--QdLsd",uh="tags_container--tagsContainer--M7709",uy="tags_container--tag--40TSY text--fontPos13--xW8hS text--_fontBase--QdLsd";function ub({parentCategorySlug:e,childCategorySlug:t,rdpImpressionId:a}){let r=function(){let e=function(){let e=ug();return(0,o.useMemo)(()=>[e.libraries,e.designTemplates,e.designTools,e.visualAssets,e.whiteboarding,e.more],[e])}();return(0,o.useMemo)(()=>{let t={};return e.forEach(({category:e,dropdownCategories:a})=>{"urlSlug"in e&&(t[e.urlSlug]=e.text),null==a||a.forEach(e=>{t[e.urlSlug]=e.text})}),t["calendar-templates"]=(0,S.t)("categories.calendar_templates"),t},[e])}(),n=(0,d4.S)(e,dL.LJ),l=(0,d4.S)(t,dL.LJ);if(!n&&!l)return null;let i=n?new dR.IE({categorySlug:n}).href:null,s=l?new dR.IE({categorySlug:l}).href:null,c=n?r[n]:null,d=l?r[l]:null;return d||c?o.createElement("div",{className:ef.cx.mb32.$},o.createElement("h3",{className:uv},(0,S.tx)("community.detail_view.category")),o.createElement("div",{className:uh},!!c&&!!i&&o.createElement(O.o3,{to:i,trackingEventName:"cmty_category",trackingProperties:{name:"rdp_pill_clicked",category_slug:e,category_text:c,rdpImpressionId:a}},o.createElement("div",{className:uy},c)),!!d&&!!s&&o.createElement(O.o3,{to:s,trackingEventName:"cmty_category",trackingProperties:{name:"rdp_pill_clicked",category_slug:t,category_text:d,rdpImpressionId:a}},o.createElement("div",{className:uy},d)))):o.createElement(o.Fragment,null)}function uw({resource:e}){return null}var uT=a(443474);function uI(){return o.createElement(uT.b,{onClick:()=>(0,mp.FL)(m_.qB.SIGN_UP,{preventDefaultRedirect:!0}),isResourceLiked:!1})}var ux=a(751297);let uN=a(342646).G;var uC=a(137459),uS=a(376485),uk=a(943089);let uA="resource_page_metadata_badge--badge--PWa-6",uL="resource_page_metadata_badge--badgeRedesign--mM76e";function uR(e){let{hubFileEditorType:t,pluginEditorType:a}=e;if(!t&&!a)return null;let r=(0,S.t)("community.detail_view.made_for_figma_design");if(t||(null==a?void 0:a.length)===1){let e=t||(null==a?void 0:a[0]);r=(()=>{switch(e){case uC.LE.SLIDES:return(0,S.t)("community.detail_view.made_for_slides");case uC.LE.FIGJAM:case uS.FW.FIGJAM:return(0,S.t)("community.detail_view.made_for_fig_jam");case uS.FW.INSPECT:case uS.FW.DEV:return(0,S.t)("community.detail_view.made_for_dev_mode");case uC.LE.FIGMA:case uS.FW.FIGMA:default:return(0,S.t)("community.detail_view.made_for_figma_design")}})()}(null==a?void 0:a.includes(uS.FW.FIGJAM))&&(null==a?void 0:a.includes(uS.FW.FIGMA))&&(0,ml.Pe)(a)?r=(0,S.t)("community.detail_view.universal"):(null==a?void 0:a.includes(uS.FW.FIGJAM))&&(null==a?void 0:a.includes(uS.FW.FIGMA))?r=(0,S.t)("community.detail_view.made_for_figma_design_and_figjam"):(null==a?void 0:a.includes(uS.FW.FIGJAM))&&(0,ml.Pe)(a)?r=(0,S.t)("community.detail_view.made_for_fig_jam_and_dev_mode"):(null==a?void 0:a.includes(uS.FW.FIGMA))&&(0,ml.Pe)(a)&&(r=(0,S.t)("community.detail_view.made_for_figma_design_and_dev_mode"));let n=(0,_.kc)().cmty_rdp_badge_update;return o.createElement("div",{className:n?uL:uA},o.createElement(uk.dn,{editorType:t??a,is16x16:!n}),o.createElement("div",null,r))}var uD=a(520863),uF=a(830445),uP=a(965270),uM=a(51055),uO=a(733648);function uB({resource:e}){let t=(0,_.kc)().cmty_rdp_badge_update,a=function(e){if((0,cY.U)(e))return o.createElement(uR,{hubFileEditorType:(0,cG.JJ)(e.viewer_mode)});let t=(0,cG.qD)(e).manifest.editorType;return(0,_.kc)().cmty_rdp_badge_update&&t?o.createElement(o.Fragment,null,t.map(e=>o.createElement(uR,{key:e,pluginEditorType:[e]}))):o.createElement(uR,{pluginEditorType:t})}(e),r=(0,_.kc)().dse_preset_libraries&&(0,_.kc)().presets_on_cmty&&(0,uF.TX)(e.id)&&o.createElement(uU,{useRedesignBadges:!!t}),n=!(0,cY.U)(e)&&(0,ml.pk)((0,cG.qD)(e))&&o.createElement(uV,{useRedesignBadges:!!t}),l=e.community_publishers.accepted.reduce((e,t)=>e.concat(t.badges),[]),i=[...new Set(e.badges.concat(l))],s=(0,ma.C2)({badges:i},!1,t),c=(0,cY.U)(e)?null:function(e,t){let a=(0,cG.qD)(e).manifest;return o.createElement(o.Fragment,null,o.createElement(uH,{plugin:e,is24x24:t}),o.createElement(uP.u,{networkAccess:a.networkAccess,isWidget:e.is_widget,isLearnMoreLinkVisible:!0,is24x24:t}))}(e,t);return o.createElement(o.Fragment,null,a,r,n,s&&o.createElement("div",{className:t?uL:uA},o.createElement(ma.Gx,null,s),(0,S.tx)("community.detail_view.made_by_a_figma_partner")),c)}function uU({useRedesignBadges:e}){return o.createElement("div",{className:e?uL:uA},o.createElement(es.B,{svg:uO.A,svgClassName:e?"resource_page_metadata_badge--uiKitBadgeSvg--deluf":"resource_page_metadata_badge--uiKitBadgeSvg16---g-GU",useOriginalSrcFills_DEPRECATED:!0}),o.createElement("div",null,(0,S.t)("community.detail_view.ui_kit")))}function uV({useRedesignBadges:e}){return o.createElement("div",{className:e?uL:uA},o.createElement(uk.ZA,{is24x24:e}),o.createElement("div",null,(0,S.t)("community.detail_view.made_for_codegen")))}function uH({plugin:e,is24x24:t}){var a;let r=(0,uD.A)(e.id,!0);return o.createElement(o.Fragment,null,r.loaded&&(null==(a=r.data)?void 0:a.status)===z.bQ.APPROVED&&o.createElement(uM.b,{securityFormResponse:r.data,entryPoint:uM.X.COMMUNITY_DETAIL,isWidget:e.is_widget,is24x24:t}))}function uW(e){return o.createElement("div",{className:(0,_.kc)().cmty_rdp_badge_update?"resource_page_metadata_badge--badgesContainerRedesign--I4Jqr resource_page_metadata_badge--badgesContainer--heM3E text--fontPos13--xW8hS text--_fontBase--QdLsd":"resource_page_metadata_badge--badgesContainer--heM3E text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.children)}var uj=a(226900),u$=a(831949),uG=a(126815);function uz({monetizedResourceMetadata:e,isFreemium:t,isOffPlatform:a}){if(t&&e){let t=(0,mn.X2)(e);return(0,S.tx)("community.detail_view.in_app_purchases",{priceString:t})}return a?o.createElement("div",{className:u$.UH},(0,S.tx)("community.detail_view.third_party_badge.off_platform"),o.createElement(es.B,{svg:uG.A,className:u$.G,"data-tooltip-type":eB.Ib.TEXT,"data-tooltip":(0,S.t)("community.detail_view.resource_outside_of_figma"),"data-tooltip-show-immediately":!0})):null}function uY(e){let{updatedAt:t,paymentInfo:a,supportContact:r,creatorPolicyData:n,license:l}=e,[i,s]=o.useState(!1),c=r;return r&&((0,h.xf)(r)?c=`mailto:${r}`:r.startsWith("https://")||r.startsWith("http://")||(c=`//${r}`)),o.createElement(uj.z,null,o.createElement("div",null,(0,S.tx)("community.detail_view.last_updated_at_time_stamp",{timeStamp:o.createElement(cy.h1,{date:t})})),r&&o.createElement("div",{className:u$.Ev},(0,S.tx)("community.detail_view.support_contact",{supportContact:o.createElement("a",{href:c||void 0,className:u$.tx,target:"_blank",rel:"nooppener noreferrer"},r)})),a,l,(0,_.kc)().cmty_hub_file_creator_policy&&(null==n?void 0:n.policyText)&&o.createElement("span",null,o.createElement("span",{role:"button",onClick:()=>{s(!0)},tabIndex:0,className:u$.Rc},(0,S.tx)("community.detail_view.creator_policy")),i&&o.createElement(eW.XV,{title:(0,S.t)("community.detail_view.creator_policy"),maxWidth:450,onClose:()=>{s(!1)},allowScroll:!0,containerClassName:u$.D9},o.createElement("div",{className:u$.OC},o.createElement("div",{className:u$.$h},(0,S.tx)("community.detail_view.creator_policy_publisher_name",{publisherName:n.publisherName}))))))}function uK({resource:e}){let t=(0,cG.qD)(e),a=(0,cY.m3)(e)&&(0,cY.PM)(e),r=(0,cY.zF)(e);return o.createElement("div",{className:u$.tJ,"data-testid":"metadata-container"},o.createElement(uW,null,o.createElement(uB,{resource:e})),o.createElement(uY,{updatedAt:t.created_at,supportContact:e.support_contact,license:o.createElement(ux.F,{isMonetizedResource:(0,cY.m3)(e),isHubFile:(0,cY.U)(e),isAppleResource:(0,mV.mA)(e),isFigmaResource:(0,mV.sB)(e)}),paymentInfo:o.createElement(uz,{monetizedResourceMetadata:e.monetized_resource_metadata,isFreemium:a,isOffPlatform:r}),creatorPolicyData:{policyText:t.creator_policy??null,publisherName:e.publisher.name}}),(0,m1.M)()?o.createElement(uN,{resource:e}):null,(0,m1.M)()?o.createElement(m9.dx,null):o.createElement("a",{href:"mailto:content-reviews@figma.com",className:u$.hV},(0,S.tx)("community.detail_view.report_resource")))}var uQ=a(920037),uq=a(978527),uX=a(206144);let uJ="related_content--relatedContentTile--gwfdU",uZ="related_content--relatedContentTileTitle--DJQmt text--fontPos13--xW8hS text--_fontBase--QdLsd";function u0({resource:e,rdpImpressionId:t}){let a=(0,cG.qD)(e),r=e.thumbnail_url,n=!!e.thumbnail_is_set,l=e.viewer_mode===z.y4.WHITEBOARD,i=(0,_.kc)().cmty_thumbnail_16x9_ar,s=(0,cG._t)({resource:e});return o.createElement(uX.A6,{to:s,className:ey()(uJ,{"related_content--relatedContentTile16to9--6fnkm":i}),onClick:()=>u4(e,t)},o.createElement("div",{className:n?"related_content--relatedContentTileImageThumbnailIsSet--ceK9X related_content--relatedContentTileImage--0IZ1a":"related_content--relatedContentTileImage--0IZ1a",style:{backgroundColor:(0,uQ.C)(e.client_meta)}},o.createElement(ul.Ho,{hubFileId:e.id,image:r,isWhiteboard:l,isSet:n,alt:a.name,resizedThumbnailUrls:e.resized_thumbnail_urls}),o.createElement(uk.dn,{editorType:(0,cG.JJ)(e.viewer_mode)})),o.createElement("div",{className:uZ},a.name))}function u1({resource:e,rdpImpressionId:t}){let a=(0,cG.qD)(e),r=a.redirect_icon_url,n=(0,cG._t)({resource:e});return o.createElement(uX.A6,{to:n,className:uJ,onClick:()=>u4(e,t)},o.createElement("div",{className:"related_content--relatedContentTilePluginContentWrapper--ie8pw"},o.createElement(uk.dn,{editorType:a.manifest.editorType}),o.createElement(uq.V,{className:"related_content--relatedContentPluginTileImage--4Jsqh",plugin:a}),o.createElement("div",{className:"related_content--relatedContentPluginTileImageBlurry--z0-ki related_content--relatedContentPluginTileImage--4Jsqh",style:{backgroundImage:`url(${r})`}})),o.createElement("div",{className:uZ},a.name))}function u2({resource:e,rdpImpressionId:t}){let a=(0,cG.qD)(e),r=a.redirect_snapshot_url,n=(0,cG._t)({resource:e});return o.createElement(uX.A6,{to:n,className:uJ,onClick:()=>u4(e,t)},o.createElement("div",{className:"related_content--relatedContentWidgetTileImage--rY25h related_content--relatedContentTileImage--0IZ1a"},o.createElement("img",{src:r,alt:a.name,loading:"lazy"})),o.createElement("div",{className:uZ},a.name))}let u4=(e,t)=>{var a;(0,tK.sx)("Community Related Content Clicked",{community_resource:(0,cG.Vm)(e),community_resource_id:e.id,related_content_type:null==(a=e.related_content)?void 0:a.types.join(","),rdp_impression_id:t})};function u8({resource:e,content:t,types:a,creators:r,rdpImpressionId:n}){o.useEffect(()=>{(0,tK.sx)("Community Related Content Viewed",{communityResource:(0,cG.Vm)(e),communityResourceId:e.id,relatedContentType:a,rdp_impression_id:n,itemsImpressed:t.map(e=>e.id).join(",")})},[t.map(e=>e.id).join(",")]);let l=1===a.length&&a[0]===ua.oS.by_creator?r.accepted.length>1?(0,S.t)("community.related_content.more_by_these_creators"):(0,S.t)("community.related_content.more_by_this_creator"):(0,S.t)("community.related_content.more_like_this");return o.createElement("div",{className:"related_content--relatedContent--TYPp2"},o.createElement("div",{className:"related_content--relatedContentHeader--gjj-d text--fontPos14--OL9Hp text--_fontBase--QdLsd"},o.createElement("div",{className:"related_content--relatedContentTitle--uylYw"},l)),o.createElement("div",{className:"related_content--relatedContentTilesContainer--L8KiC"},t.map(e=>{let t=e.id;return(0,cY.U)(e)?o.createElement(u0,{key:t,resource:e,rdpImpressionId:n}):(0,cY.I0)(e)?o.createElement(u1,{key:t,resource:e,rdpImpressionId:n}):o.createElement(u2,{key:t,resource:e,rdpImpressionId:n})})))}var u3=a(386339),u5=a(971120);function u9({tags:e,resourceType:t,optionalTitle:a,disableHeader:r}){return 0===e.length?o.createElement(o.Fragment,null):o.createElement(o.Fragment,null,!r&&o.createElement("h3",{className:uv},a||(0,S.tx)("community.detail_view.tags")),o.createElement("div",{className:uh},e.map(e=>{let a=`/community/tag/${e}`;return t!==u5.L.BrowseResourceTypes.MIXED&&(a+=`/${t}`),o.createElement(uX.A6,{key:e,to:a,onClick:()=>{(0,tK.sx)("Tag clicked",{text:e,tab:t})}},o.createElement("div",{className:uy},e))})))}var u6=a(568424);function u7({resource:e}){let[t,a]=o.useState(!1);if(!(0,cG.zo)(e))return null;let{versions:r}=e,n=(0,ml.uF)(e);return o.createElement("div",{className:"version_history--versionHistory--yOsFW text--fontPos14--OL9Hp text--_fontBase--QdLsd"},o.createElement("div",{className:"version_history--header--jdIyg"},o.createElement(uq.V,{className:"version_history--icon--pnnmo",plugin:n}),o.createElement("span",{className:"version_history--title--1a95q text--fontPos14--OL9Hp text--_fontBase--QdLsd"},(0,S.tx)("community.plugins.version_history"))),o.createElement("div",null,Object.keys(r).map(parseFloat).sort((e,t)=>e>t?-1:1).map(e=>r[e]).filter(e=>!!e).map(e=>{let t=!e.release_notes,a=new Date(e.created_at).toLocaleDateString(navigator.language,{year:"numeric",month:"long",day:"numeric"});return o.createElement("div",{className:t?"version_history--releaseSectionEmpty--t8k4f":"version_history--releaseSection--mOmlB",key:e.id},o.createElement("span",{className:"version_history--versionName--PC5Ws"},(0,S.tx)("community.plugins.version_version_on_date",{createdAt:a,versionName:e.version})),o.createElement("span",{className:"version_history--versionDescription--bzh-V"},e.release_notes))}).slice(0,t?1/0:2),!t&&Object.keys(r).length>2&&o.createElement("div",{className:"version_history--showAll--b8ClA",onClick:()=>a(!0),role:"button",tabIndex:0},(0,S.tx)("community.plugins.see_all"))))}let _e="meta_container--tabbedMetaContainer--DJyPv meta_container--metaContainer--kaSwh",_t="meta_container--metaTabContainer--lvUtb",_a="meta_container--metaContainerDivider--ZXFZP",_r="meta_container--metaContainerDividerSpacer--OW9jB",_n="meta_container--mobileMetaContainer--gGQKv",_l="meta_container--metaTab--zRKXG text--fontPos14--OL9Hp text--_fontBase--QdLsd",_i="meta_container--selectedMetaTab--5IRWQ meta_container--metaTab--zRKXG text--fontPos14--OL9Hp text--_fontBase--QdLsd",_o="meta_container--metaTabCommentCount--B1a21",_s="meta_container--selectedMetaTabCommentCount--lS1BF meta_container--metaTabCommentCount--B1a21";function _c({resource:e,rdpImpressionId:t}){return e.related_content&&0!==e.related_content.content.length?o.createElement(o.Fragment,null,o.createElement(u8,{resource:e,content:e.related_content.content,types:e.related_content.types,creators:e.community_publishers,rdpImpressionId:t}),o.createElement("hr",null)):null}function _d(e,t){if(e.preventDefault(),t===d7.$O.DescriptionView){window.scrollTo({top:0,behavior:"smooth"});return}let a=document.getElementById(t);if(a){let e=d7.bK,t=a.getBoundingClientRect().top+window.scrollY+e;window.scrollTo({top:t,behavior:"smooth"})}}function _m(e){if(!(0,cY.U)(e))return!1;let t=e.viewer_mode===z.y4.WHITEBOARD&&(0,cY.m3)(e),a=(0,cG.z$)(e)===ur.Z4.EMBED;return!t&&!a&&!(0,cG.cX)(e)}function _u({resource:e,rdpImpressionId:t}){let[a,r]=(0,aJ.fp)(me),n=(0,cG.qD)(e),l=_m(e),i=(0,cz.kk)(),{externalCommentScrollRef:s}=o.useContext(m4.H);return o.useEffect(()=>{let e=()=>{let e=document.getElementById(d7.$O.CommentsView);if(e){let t=e.getBoundingClientRect().top;(0,cG._m)(t,window.innerHeight,window.scrollY)?r(d7.$O.CommentsView):r(d7.$O.DescriptionView)}};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[r]),o.createElement(o.Fragment,null,o.createElement(m6,{resourceId:e.id,resourceType:(0,cG.Vm)(e),containerClassName:_e}),!(0,cY.U)(e)&&o.createElement(ue,{pluginId:e.id,containerClassName:_e}),o.createElement("div",{className:_t},o.createElement("button",{onClick:e=>_d(e,d7.$O.DescriptionView)},o.createElement("div",{className:ey()(_l,{[_i]:a===d7.$O.DescriptionView})},(0,S.t)("community.resource_page.about"))),(0,ou.e5)(e)&&o.createElement("button",{onClick:e=>_d(e,d7.$O.CommentsView)},o.createElement("div",{className:ey()(_l,{[_i]:a===d7.$O.CommentsView})},(0,S.tx)("community.resource_page.comments",{numComments:o.createElement("span",{className:ey()(_o,{[_s]:a===d7.$O.CommentsView})},e.comment_count)})))),o.createElement("div",{className:_a},o.createElement("div",{className:_r})),o.createElement("div",{className:_e},o.createElement("div",{className:"meta_container--leftSide--KSlX8",ref:s,id:d7.$O.DescriptionView},n.description&&o.createElement(u6.u,{description:n.description,hideDivider:!0}),l&&o.createElement(o.Fragment,null,o.createElement("h3",{className:ef.cx.font14.fontSemiBold.mb16.$},(0,S.t)("community.embed.preview_title")),o.createElement(uu,{enableEmbedOnSmallScreens:!0,resource:e}),o.createElement("hr",{className:ef.cx.my24.$})),o.createElement(_c,{resource:e,rdpImpressionId:t}),o.createElement(u7,{resource:e}),o.createElement("div",{id:d7.$O.CommentsView},o.createElement(m2,{resource:e}))),o.createElement("div",{className:"meta_container--rightSide--FQNL-"},o.createElement(uw,{resource:e}),!i()&&o.createElement(ub,{parentCategorySlug:e.parent_category_slug,childCategorySlug:e.category_slug,rdpImpressionId:t}),o.createElement(u9,{tags:e.tags||[],resourceType:(0,cG.Dl)(e)+"s"}),o.createElement(u3.p,{resource:e}),o.createElement(uK,{resource:e}))))}function __({resource:e,rdpImpressionId:t}){let[a,r]=(0,aJ.fp)(me),n=_m(e),l=(0,cG.qD)(e),i=(0,cz.kk)();return o.useEffect(()=>{let e=()=>{let e=document.getElementById(d7.$O.CommentsView);if(e){let t=e.getBoundingClientRect().top;(0,cG._m)(t,window.innerHeight,window.scrollY)&&r(d7.$O.CommentsView)}else r(d7.$O.DescriptionView)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[r]),o.createElement(o.Fragment,null,o.createElement(m6,{resourceId:e.id,resourceType:(0,cG.Vm)(e),containerClassName:_e}),!(0,cY.U)(e)&&o.createElement(ue,{pluginId:e.id,containerClassName:_e}),o.createElement("div",{className:_t},o.createElement("button",{onClick:e=>_d(e,d7.$O.DescriptionView)},o.createElement("div",{className:ey()(_l,{[_i]:a===d7.$O.DescriptionView})},(0,S.t)("community.resource_page.about"))),(0,ou.e5)(e)&&o.createElement("button",{onClick:e=>_d(e,d7.$O.CommentsView)},o.createElement("div",{className:ey()(_l,{[_i]:a===d7.$O.CommentsView})},(0,S.tx)("community.resource_page.comments",{numComments:o.createElement("span",{className:ey()(_o,{[_s]:a===d7.$O.CommentsView})},e.comment_count)})))),o.createElement("div",{className:_a},o.createElement("div",{className:_r})),o.createElement("div",{className:_e},o.createElement("div",{className:_n,"data-mobile-view":!0,id:d7.$O.DescriptionView},l.description&&o.createElement(u6.u,{description:l.description}),n&&o.createElement(o.Fragment,null,o.createElement("h3",{className:ef.cx.font14.fontSemiBold.mb16.$},(0,S.t)("community.embed.preview_title")),o.createElement(uu,{enableEmbedOnSmallScreens:!0,resource:e}),o.createElement("hr",{className:ef.cx.my24.$})),o.createElement(uw,{resource:e}),!i()&&o.createElement("div",{className:ef.cx.mb32.$},o.createElement(ub,{parentCategorySlug:e.parent_category_slug,childCategorySlug:e.category_slug,rdpImpressionId:t})),e.tags&&e.tags.length>0&&o.createElement(o.Fragment,null,o.createElement(u9,{tags:e.tags,resourceType:(0,cG.ss)(e,{plural:!0})}),o.createElement("hr",null)),o.createElement(_c,{resource:e,rdpImpressionId:t}),o.createElement(u7,{resource:e}),o.createElement("div",{id:d7.$O.CommentsView},o.createElement(m2,{resource:e})),o.createElement(u3.p,{resource:e}),o.createElement(uK,{resource:e}))))}function _p({resource:e}){if(!(0,m1.M)())return o.createElement(uI,null);{let t=(0,cY.U)(e)?t3.e0.COMMUNITY_HUB_FILE:(0,cY.xQ)(e)?t3.e0.COMMUNITY_HUB_WIDGET:t3.e0.COMMUNITY_HUB_PLUGIN;return o.createElement(mt.Q,{resource:e,viewContext:t})}}function _f({resource:e,rdpImpressionId:t}){let a=(0,cG.qD)(e),{externalCommentScrollRef:r}=o.useContext(m4.H),n=(0,cz.kk)();return o.createElement(o.Fragment,null,o.createElement("div",{className:_n,"data-mobile-view":!0,ref:r},!!a.description&&o.createElement(u6.u,{description:a.description}),!!a.description&&o.createElement("hr",null),!(0,cY.U)(e)&&o.createElement(ue,{pluginId:e.id}),o.createElement(uw,{resource:e}),!n()&&o.createElement("div",{className:ef.cx.mb32.$},o.createElement(ub,{parentCategorySlug:e.parent_category_slug,childCategorySlug:e.category_slug,rdpImpressionId:t})),e.tags&&e.tags.length>0&&o.createElement(o.Fragment,null,o.createElement(u9,{tags:e.tags,resourceType:(0,cG.ss)(e,{plural:!0})}),o.createElement("hr",null)),o.createElement(_c,{resource:e,rdpImpressionId:t}),o.createElement(u7,{resource:e}),o.createElement("div",{id:d7.$O.CommentsView},o.createElement(m2,{resource:e})),o.createElement(u3.p,{resource:e}),o.createElement(uK,{resource:e})))}function _g({resource:e,rdpImpressionId:t,isMobileSize:a}){return o.createElement(o.Fragment,null,o.createElement("div",{className:a?"meta_container--metaContainer--kaSwh":""},o.createElement(ut.Ay,{mediaQuery:`(max-width: ${ua.YW-1}px)`},o.createElement(_f,{resource:e,rdpImpressionId:t})),o.createElement(ut.Ay,{mediaQuery:`(min-width: ${ua.YW}px) and (max-width: ${ua.w3-1}px)`},o.createElement(__,{resource:e,rdpImpressionId:t})),o.createElement(ut.Ay,{mediaQuery:`(min-width: ${ua.w3}px)`},o.createElement(_u,{resource:e,rdpImpressionId:t}))))}var _E=a(166521);let _v=a(10588).l;function _h({resource:e}){let t=(0,mr.I)(e),a=o.useMemo(()=>(0,mn._K)(e,t)?o.createElement(_E.I,{resource:e,enableWideButtonForStickyFooter:!0}):(0,cG.cX)(e)?o.createElement(_v,{resource:e,enableWideButtonForStickyFooter:!0}):(0,cG.Qo)(e)?o.createElement(m0,{hubFile:e,enableWideButtonForStickyFooter:!0}):null,[e,t]),r=(0,m1.M)()?"mobile_logged_in":"mobile_logged_out",n=o.useMemo(()=>(0,cY.I0)(e)||(0,cY.xQ)(e)?o.createElement(o.Fragment,null,o.createElement(mU,{resource:e,viewContext:r,enableWideButtonForStickyFooter:!0}),o.createElement(_p,{resource:e})):o.createElement(o.Fragment,null,a,o.createElement(_p,{resource:e}),o.createElement(mB,{resource:e,viewContext:r})),[e,a,r]);return o.createElement("div",{className:ey()("meta_container--mobileButtonRow--a-eRc","meta_container--wideMobileButtonRow--ahIrA")},n)}let _y=a(895587).s;function _b({resource:e,CTAButton:t,hasScrolled:a}){let r=(0,cG.qD)(e),n=(0,s.d4)(e=>(0,ou.Tm)(e)),l=(0,cG.Qo)(e)?t3.e0.COMMUNITY_HUB_FILE:(0,cY.xQ)(e)?t3.e0.COMMUNITY_HUB_WIDGET:t3.e0.COMMUNITY_HUB_PLUGIN,i=null,c=Object.values(n).some(t=>(0,cY.I0)(e)&&t.plugins_whitelist_enforced||(0,cY.xQ)(e)&&t.widgets_whitelist_enforced);_y&&!(0,cG.Qo)(e)&&!("is_private"in r&&r.is_private)&&(0,_.kc)().cmty_deprecate_browse_as_admin&&c&&(i=o.createElement(_y,{resource:e,viewContext:l}));let d=o.createElement(mB,{"data-onboarding-key":"save-button",resource:e,viewContext:l}),m=i?null:o.createElement(mt.Q,{resource:e,viewContext:l}),u=o.createElement(md,{resource:e});return a?o.createElement("div",{className:"basic_resource_header--resourcePageHeaderSticky--z2Rga"},o.createElement("div",{className:"basic_resource_header--resourcePageHeaderStickyContainer--XiXE-"},o.createElement("div",{className:"basic_resource_header--headerStickyLeftSide--OkZLQ"},o.createElement("h1",{className:"basic_resource_header--stickyTitle--oG0u0 ellipsis--ellipsis--Tjyfa text--fontPos18--rYXJb text--_fontBase--QdLsd"},r.name),o.createElement(_I,{resource:e})),o.createElement("div",{className:mY},t,i,m,d))):o.createElement(_w,{resource:e,CTAButton:t,approveButton:i,likeButton:m,saveButton:d,headerBadges:u,viewContext:l})}function _w({resource:e,CTAButton:t,title:a,description:r,approveButton:n,likeButton:l,saveButton:i,learnMore:s,headerBadges:c,openInNewTab:d=!1,viewContext:m}){let u=(0,cG.qD)(e),_=e.community_publishers.accepted,p=[..._.filter(e=>(0,ma.J3)(e.badges)),..._.filter(e=>!(0,ma.J3)(e.badges))];return o.createElement("div",{className:"basic_resource_header--headerContainer--YYSPX"},o.createElement("div",{className:"basic_resource_header--authors--1PIBq text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement(d0.L,{publishers:p,showFigmaPartnerBadge:!0}),o.createElement(d0.I,{publishers:p,openInNewTab:d,useSmallWidth:!0,removeByLabel:!0})),o.createElement("div",{className:"basic_resource_header--title_badge_container--vH8BZ"},o.createElement("div",{className:"basic_resource_header--title--9jW4i text--fontPos24--YppUD text--_fontBase--QdLsd ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k"},o.createElement("h1",null,a??u.name)),c),o.createElement(mX,{resource:e,viewContext:m}),!!r&&o.createElement("div",{className:"basic_resource_header--description--718b9 text--fontPos13--xW8hS text--_fontBase--QdLsd"},r),o.createElement("div",{className:mY},t,s,n,l,i))}function _T({resource:e,hasScrolled:t}){let a=(0,cG.qD)(e),r=e.community_publishers.accepted;return t?o.createElement("div",{className:"basic_resource_header--mobileResourcePageHeaderSticky--k2EHs basic_resource_header--mobileResourcePageHeader--EgM2G"},o.createElement("div",{className:mW},o.createElement("div",{className:mK},o.createElement("h1",{className:mj},o.createElement("span",{className:m$},a.name))),o.createElement(_h,{resource:e}),o.createElement(_I,{resource:e}))):o.createElement("div",{className:"basic_resource_header--resourcePageHeaderMobile--pJLU0 basic_resource_header--mobileResourcePageHeader--EgM2G"},o.createElement("div",{className:mW},o.createElement("div",{className:mK},o.createElement("h1",{className:mj},o.createElement("span",{className:m$},a.name)),o.createElement("div",{className:"basic_resource_header--mobileAttributionLine--SVYDo basic_resource_header--attributionLine--3-ssm text--fontPos13--xW8hS text--_fontBase--QdLsd","data-testid":"mobile-header-attribution"},o.createElement(md,{resource:e}),o.createElement(mX,{resource:e}),o.createElement("div",{className:"basic_resource_header--attributionCreator--rV-9C"},o.createElement(d0.L,{publishers:r}),o.createElement(d0.I,{publishers:r})))),o.createElement(_h,{resource:e}),o.createElement(_I,{resource:e})))}function _I({resource:e}){let[t,a]=(0,aJ.fp)(me);o.useEffect(()=>{let e=()=>{let e=document.getElementById(d7.$O.CommentsView);if(e){let t=e.getBoundingClientRect().top;(0,cG._m)(t,window.innerHeight,window.scrollY)?a(d7.$O.CommentsView):a(d7.$O.DescriptionView)}};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[a]);let r=(e,t)=>{if(e.preventDefault(),t===d7.$O.DescriptionView){window.scrollTo({top:0,behavior:"smooth"});return}let a=document.getElementById(t);if(a){let e=d7.bK,t=a.getBoundingClientRect().top+window.scrollY+e;window.scrollTo({top:t,behavior:"smooth"})}};return o.createElement("div",{className:"basic_resource_header--anchorLinkContainer--UaF3S"},o.createElement("button",{onClick:e=>r(e,d7.$O.DescriptionView)},o.createElement("div",{className:ey()(mG,{[mz]:t===d7.$O.DescriptionView})},(0,S.t)("community.resource_page.about"))),(0,ou.e5)(e)&&o.createElement("button",{onClick:e=>r(e,d7.$O.CommentsView)},o.createElement("div",{className:ey()(mG,{[mz]:t===d7.$O.CommentsView})},(0,S.tx)("community.resource_page.comments",{numComments:o.createElement("span",{className:ey()(_o,{[_s]:t===d7.$O.CommentsView})},e.comment_count)}))))}var _x=a(61714),_N=a(547733),_C=a(183846);function _S({button:e,subtext:t}){return o.createElement("div",{className:_C.uu},e,t&&o.createElement("div",{className:_C.BE},t))}function _k({resource:e}){let t=(0,cY.PM)(e),a=(0,mr.I)(e);if((0,mn._K)(e,a))return o.createElement(_E.I,{resource:e,context:cY.aL.DETAIL});if((0,cG.Qo)(e))return(0,cG.cX)(e)?o.createElement(_v,{resource:e}):o.createElement(m0,{hubFile:e});{let a=t?o.createElement(_N.Cg,{resource:e,showCaret:!1}):(0,cY.zF)(e)?o.createElement(_N.Gb,null):void 0;return o.createElement(_S,{button:o.createElement(_x.d,{resource:e,context:cY.aL.DETAIL}),subtext:a})}}var _A=a(560945);let _L=(0,iJ.eU)(!1);var _R=a(491679);function _D(e){return`${(0,cG.qD)(e).name} preview`}var _F=a(302510);function _P({thumbnailUrls:e,resource:t,size:a,tileAspectRatio:r="16 / 9"}){let n=0;e.length>12&&(n=e.length-12,e=e.slice(0,12));let l=o.useMemo(()=>{let[t,a]=e.length>8?[4,3]:e.length>4?[4,2]:[2,2];return ea.sx.add({gridTemplateColumns:`repeat(${t}, 1fr)`,gridTemplateRows:`repeat(${a}, 1fr)`}).$},[e.length]),i=o.useMemo(()=>{switch(a){case"thumbnail":return"grid_view--carouselGridViewThumbnail--VQ4Aa grid_view--carouselGridView--kG9U6";case"hero":return"grid_view--carouselGridViewHero--fJM2n grid_view--carouselGridView--kG9U6 text--fontNeg20--h0WuY text--_fontBase--QdLsd text--_negText--j9g-L";case"fullscreen_hero":return"grid_view--carouselGridViewFullscreenHero--wJryP grid_view--carouselGridView--kG9U6 text--fontNeg40--v1X92 text--_fontBase--QdLsd text--_negText--j9g-L";default:(0,el.xb)(a)}},[a]),s=o.useMemo(()=>ea.sx.if(!!r,{aspectRatio:r}).$,[r]);return o.createElement("div",{className:ey()("grid_view--carouselGridViewContainer--LoaLV",{[_F.mH]:"fullscreen_hero"===a})},o.createElement("div",{"aria-label":_D(t),style:l,className:i},e.map((e,t,r)=>o.createElement("div",{key:e,style:s,"aria-hidden":!0,className:"grid_view--carouselGridImageContainer--e2OUP"},o.createElement("img",{src:e,draggable:!1}),"thumbnail"!==a&&t===r.length-1&&n>0&&o.createElement("div",{className:"grid_view--overflowThumbnailCount--2YPuu"},o.createElement("span",null,`+${n}`))))))}let _M="hero--lightboxButton--5mIOs";function _O({children:e,showLetterbox:t=!1}){let a=o.useRef(null),[r,n]=(0,aJ.fp)(_L);return o.useEffect(()=>{let e=a.current;if(e){let t=e=>{"Escape"===e.key&&n(!1)};return e.addEventListener("keydown",t),()=>{e.removeEventListener("keydown",t)}}},[n]),o.createElement("div",{ref:a,className:t?"hero--heroImageWrapperWithLetterbox--68M0e hero--heroImageWrapper--Tr0mE":"hero--heroImageWrapper--Tr0mE",onClick:()=>n(!0),role:"button",tabIndex:-1},o.createElement("div",{className:"hero--heroImage--fwiPW"},e),o.createElement("div",{className:"hero--heroImageFullScreenIcon--Mn7mU"},o.createElement(re.In,{icon:"full-screen-enter-32",fill:"menu"})))}function _B({children:e,is16to9AspectRatio:t}){let[a,r]=(0,aJ.fp)(_L),n=e=>{e.stopPropagation(),r(!1)};return a?o.createElement("div",{className:"hero--modalBackground--zjoAE",onClick:n,role:"button",tabIndex:-1},o.createElement("div",{className:t?"hero--rdpImageCloseupModal--7mxym":"hero--rdpImageCloseupModal2to1AspectRatio---JVP8 hero--rdpImageCloseupModal--7mxym",onClick:n,role:"button",tabIndex:-1},e,o.createElement("div",{className:"hero--heroImageExitFullScreenIcon--OjJSh hero--heroImageFullScreenIcon--Mn7mU"},o.createElement(re.In,{icon:"full-screen-exit-32",fill:"menu"})))):null}function _U({children:e,currentIndex:t,totalItems:a,onPrev:r,onNext:n,onRestart:l,imageAspectRatio:i="16 / 9",showLetterbox:s=!1}){let c=o.useRef(null),d=o.useRef(null),m=o.useMemo(()=>0===t,[t]),u=o.useMemo(()=>t===a-1,[t,a]),[_,p]=(0,aJ.fp)(_L),f=o.useCallback(()=>{var e;null==(e=d.current)||e.focus({preventScroll:!0})},[]);o.useEffect(()=>{let e=c.current;if(_&&e){f();let t=e=>{"ArrowLeft"===e.key?r():"ArrowRight"===e.key?n():"Escape"===e.key&&p(!1)};return e.addEventListener("keydown",t),()=>{e.removeEventListener("keydown",t)}}},[f,n,r,p,_]);let g=o.useCallback(e=>{e.stopPropagation(),p(!1)},[p]),E=o.useMemo(()=>ea.sx.if(!!i,{aspectRatio:i}).$,[i]);return _?o.createElement("div",{ref:c,className:"hero--lightboxContainer--c8JpB hero--modalBackground--zjoAE"},o.createElement("div",{className:"hero--lightboxTopRow---zayD"},o.createElement("button",{onClick:g,className:_M},o.createElement(re.In,{icon:"x-32",fill:"menu"}))),o.createElement("div",{className:"hero--lightboxMediumRow---Gopf",onBlur:f},o.createElement("button",{className:_M,disabled:m,onClick:r},o.createElement(re.In,{icon:"chevron-left-32",fill:m?"menu-disabled":"menu"})),o.createElement("div",{ref:d,style:E,className:s?"hero--lightboxHeroImageWithLetterbox--0kTBx hero--lightboxHeroImage--3orhF":"hero--lightboxHeroImage--3orhF",role:"button",tabIndex:0,onClick:u?l:n},s?o.createElement("div",{className:"hero--lightboxHeroImageWithLetterboxInnerContainer--buJug"},e):e),o.createElement("button",{className:_M,disabled:u,onClick:n},o.createElement(re.In,{icon:"chevron-right-32",fill:u?"menu-disabled":"menu"}))),o.createElement("div",{className:"hero--lightboxBottomRow--wnrYI"},o.createElement("div",{className:"hero--lightboxControlsContainer--9MZdh"},o.createElement("button",{className:"hero--lightboxControlsRestartButton--mVitF hero--lightboxControlsButton--Ve597 text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",disabled:m,onClick:l},o.createElement(re.In,{icon:"return-32",fill:m?"menu-disabled":"menu"}),(0,S.tx)("community.resource_page.media_carousel.restart")),o.createElement("button",{className:"hero--lightboxControlsButton--Ve597",disabled:m,onClick:r},o.createElement(re.In,{icon:"navigate-back-32",fill:m?"menu-disabled":"menu"})),o.createElement("span",{className:"hero--lightboxProgressIndicator--w-JVT text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L"},`${t+1} / ${a}`),o.createElement("button",{className:"hero--lightboxControlsButtonMirrored--8Ljmt hero--lightboxControlsButton--Ve597",disabled:u,onClick:n},o.createElement(re.In,{icon:"navigate-back-32",fill:u?"menu-disabled":"menu"}))))):null}var _V=a(197979),_H=a(582493);let _W=o.forwardRef(({index:e,selectedIndex:t,onClick:a,children:r},n)=>o.createElement("div",{ref:n,role:"button",tabIndex:e,onClick:a,className:e===t?"thumbnail--carouselThumbnailSelected--htIXX thumbnail--carouselThumbnailBase--WdkqA":"thumbnail--carouselThumbnail--Gr5mS thumbnail--carouselThumbnailBase--WdkqA"},r));function _j({thumbnailUrl:e,resizedThumbnailUrls:t,resource:a,isVideo:r}){return o.createElement(o.Fragment,null,o.createElement(_V.F5,{thumbnailUrl:e,resourceId:a.id,altText:_D(a),thumbnailContext:dw.O7.DETAIL,resizedThumbnailUrls:t}),r&&o.createElement("div",{className:"thumbnail--carouselThumbnailOverlayForVideo--pfKHV"},o.createElement(_H.p,null)))}function _$({resource:e,is16to9AspectRatio:t}){let a=o.useRef(null),r=o.useRef(null),[n,l]=o.useState(!1),[i,s]=o.useState(0),[c,d]=o.useState(!1),[m,u]=o.useState(!0),_=o.useMemo(()=>(0,cG.N6)(e),[e]),p=function(e,t,a=!1){let r=(0,_R.fq)((0,cG.cX)(e)?e.library_key:void 0);return o.useMemo(()=>{let e=void 0===r,n=e?t:r.length;if(n<=1)return[];let l=a?function(e){let t=e,a=[];for(;t>16;)a.push(12),t-=12;return t>12&&(a.push(8),t-=8),t>0&&a.push(t),a}(n):[n],i=[];return l.reduce((t,a)=>{let n=e?[]:r.slice(t,t+a);return i.push({type:"grid",thumbnailUrls:n}),t+a},0),i},[a,t,r])}(e,_.length),f=o.useMemo(()=>[...p,..._],[_,p]),g=o.useRef([]);o.useEffect(()=>{s(p.length)},[p.length,e]);let E=o.useCallback(()=>{a.current&&l(a.current.scrollWidth>a.current.clientWidth)},[]);o.useEffect(E,[E,f.length]),(0,_A.w)(a,E);let v=o.useCallback(()=>{let e=a.current,t=g.current[f.length-1];if(e&&t){let a=e.getBoundingClientRect(),r=t.getBoundingClientRect();d(e.scrollLeft>0),u(Math.abs(r.right-a.right)>1)}},[f.length]);o.useEffect(()=>{let e=a.current,t=g.current[i];if(e&&t){let a=e.getBoundingClientRect(),r=t.getBoundingClientRect(),n=(()=>{let e=parseInt(_F.lp)/2+parseInt(_F.v$),t=0===i,n=a.left+(t?0:e);if(r.left<n)return r.left-n;let l=i===f.length-1,o=a.right-(l?0:e);return r.right>o?r.right-o:0})();0!==n&&e.scrollBy({left:n,behavior:"smooth"})}},[f.length,i]);let h=o.useCallback(()=>{s(e=>Math.max(0,e-1))},[]),y=o.useCallback(()=>{s(e=>Math.min(f.length-1,e+1))},[f.length]),b=o.useCallback(()=>{s(0)},[]),[w,T]=(0,aJ.fp)(_L);o.useEffect(()=>{var e;let t=r.current;if(!w&&t){null==(e=g.current[i])||e.focus({preventScroll:!0});let a=e=>{let t=!0;"ArrowLeft"===e.key?h():"ArrowRight"===e.key?y():"Enter"===e.key?T(!0):t=!1,t&&e.preventDefault()};return t.addEventListener("keydown",a),()=>{t.removeEventListener("keydown",a)}}},[y,h,i,T,w]);let I=(0,mf.J)(),x=(0,cG.z$)(e),N=(0,cG.cX)(e);if(x!==ur.Z4.CURATED_IMAGE||0===f.length)return o.createElement(_G,{resource:e,heroType:x,is16to9AspectRatio:t});let C=i<f.length?f[i]:f[0],S=Object.keys(f).length>1;return o.createElement(o.Fragment,null,function(a){switch(a.type){case"image":let[r,n]=(0,_V.P)(a);return o.createElement(o.Fragment,null,o.createElement(_O,{showLetterbox:N},o.createElement(_V.F5,{thumbnailUrl:r,resourceId:e.id,altText:_D(e),thumbnailContext:dw.O7.DETAIL,resizedThumbnailUrls:n,resourceHeroType:x})),N?o.createElement(_U,{currentIndex:i,totalItems:f.length,onPrev:h,onNext:y,onRestart:b,showLetterbox:N},o.createElement(_V.ru,{thumbnailUrl:r,altText:_D(e),resourceId:e.id})):o.createElement(_B,{is16to9AspectRatio:t},o.createElement(_V.ru,{thumbnailUrl:r,altText:_D(e),resourceId:e.id})));case"video":return o.createElement("div",{className:"hero--heroVideo--XAdfp hero--heroImage--fwiPW"},o.createElement(_H.A,{src:(0,_V.Mf)(a,e),fallbackSrc:a.url,useHLS:!0,autoPlay:!0,muted:!0,onEnded:()=>{(0,tK.sx)("rdp_video_ended",{community_resource_id:e.id,resouce_type:(0,cG.Vm)(e),searchSessionId:I})}}));case"grid":return o.createElement(o.Fragment,null,o.createElement(_O,null,o.createElement(_P,{thumbnailUrls:a.thumbnailUrls,resource:e,size:"hero"})),N?o.createElement(_U,{currentIndex:i,totalItems:f.length,onPrev:h,onNext:y,onRestart:b},o.createElement(_P,{thumbnailUrls:a.thumbnailUrls,resource:e,size:"fullscreen_hero"})):o.createElement(_B,{is16to9AspectRatio:t},o.createElement(_P,{thumbnailUrls:a.thumbnailUrls,resource:e,size:"fullscreen_hero"})));default:(0,el.xb)(a)}}(C),S&&o.createElement("div",{ref:r,className:_F.xW},o.createElement("div",{ref:a,className:n?_F.UY:_F.Ec,onScroll:v},Object.values(f).map(function(t,a){let r=null;if("image"===t.type||"video"===t.type){let[a,n]=(0,_V.P)(t);r=o.createElement(_j,{thumbnailUrl:a,resizedThumbnailUrls:n,resource:e,isVideo:"video"===t.type})}else"grid"===t.type?r=o.createElement(_P,{thumbnailUrls:t.thumbnailUrls,resource:e,size:"thumbnail"}):(0,el.xb)(t);return o.createElement(_W,{ref:e=>{g.current[a]=e},key:a,index:a,selectedIndex:i,onClick:()=>{s(a),(0,tK.sx)("CTA Clicked",{name:"Resource Carousel Thumbnail Clicked",community_resource_id:e.id,index:a,media_type:t.type,resouce_type:(0,cG.Vm)(e),searchSessionId:I})}},r)})),n&&c&&o.createElement(o.Fragment,null,o.createElement("div",{className:_F.sp}),o.createElement("div",{className:_F.T9,role:"button",tabIndex:0,onClick:h},o.createElement(re.In,{icon:"chevron-left-32"}))),n&&m&&o.createElement(o.Fragment,null,o.createElement("div",{className:_F.jp}),o.createElement("div",{className:_F.aT,role:"button",tabIndex:0,onClick:y},o.createElement(re.In,{icon:"chevron-right-32"})))))}function _G({resource:e,heroType:t,is16to9AspectRatio:a}){if(t===ur.Z4.THUMBNAIL){let r=e.thumbnail_url??void 0,n=(0,cY.U)(e)?e.resized_thumbnail_urls:void 0;return o.createElement(o.Fragment,null,o.createElement(_O,null,o.createElement(_V.F5,{thumbnailUrl:r,resourceId:e.id,altText:_D(e),thumbnailContext:dw.O7.DETAIL,resizedThumbnailUrls:n,resourceHeroType:t})),o.createElement(_B,{is16to9AspectRatio:a},o.createElement(_V.ru,{thumbnailUrl:r,altText:_D(e),resourceId:e.id})))}return o.createElement("div",{className:_F.Wf},o.createElement(uu,{enableEmbedOnSmallScreens:!0,resource:e}))}var _z=a(335666);function _Y({title:e,description:t,children:a}){let r=(0,cz.kk)();return o.createElement("section",{className:ey()("collection_section--section--RLij0",{"collection_section--breadcrumbsPadding--JYTAp":r()})},o.createElement("div",{className:"collection_section--title--tNWji text--fontPos24--YppUD text--_fontBase--QdLsd"},e),!!t&&o.createElement("div",{className:"collection_section--description--UH-JN text--fontPos16--oMC-G text--_fontBase--QdLsd"},t),o.createElement("div",{className:"collection_section--content--rIF8z"},a))}var _K=a(375360);let _Q="two_column_resource_page--leftSideRedesign--W3m0M",_q="two_column_resource_page--rightSideRedesignCarousel--d7GTz two_column_resource_page--rightSideRedesign--KsU3v",_X="two_column_resource_page--rightSideRedesignFallbackThumbnail--Ydb1e two_column_resource_page--rightSideRedesign--KsU3v";function _J({title:e,resource:t,meta:a,showCTA:r=!0}){let n=(0,dx.N)(`(max-width: ${ua.YW}px)`),l=(0,_z.C)(t),i=(0,cG.z$)(t),s=dt(t,a),c=r?o.createElement(_k,{resource:t}):null,d=(0,cG._t)({resource:t}),m=o.createElement(O.o3,{className:"hero_section--learnMore--a7m3e text--fontPos13--xW8hS text--_fontBase--QdLsd",to:d,trackingEventName:"community_collections",trackingProperties:{href:d},target:"_blank"},(0,S.tx)("community.collections.learn_more"));return o.createElement(_Y,{title:e},n?o.createElement("div",null,o.createElement(_K.rS,{resource:t,title:null==s?void 0:s.title,description:null==s?void 0:s.description})):o.createElement("div",{className:"hero_section--section--xyS5J"},o.createElement(eg.Y,{width:"100%",direction:"horizontal",height:"hug-contents",verticalAlignItems:"center",horizontalAlignItems:"center",spacing:"auto"},o.createElement("div",{className:_Q},o.createElement(_w,{resource:t,CTAButton:c,learnMore:m,title:null==s?void 0:s.title,description:null==s?void 0:s.description,openInNewTab:!0})),o.createElement("div",{className:i!==ur.Z4.THUMBNAIL||l?_q:_X},o.createElement(_$,{resource:t,is16to9AspectRatio:l})))))}var _Z=a(407844),_0=a(164795),_1=a(967063);function _2(){let e={id:_0.om.communityResourceInReviewBanner,bannerType:_0.x1.WARN,icon:_1.A,mainText:(0,S.t)("community.collections.unpublished_banner.this_page_is_not_published"),description:(0,S.t)("community.collections.unpublished_banner.only_admins_can_see_this_page"),dismissible:!1,positionStatic:!0};return o.createElement(_Z.C,{content:e,onDismiss:f.lQ})}let _4=a(751325).i,_8="resource_bundle_section--resources--h-L7L";function _3({title:e,description:t,resources:a,meta:r}){let n=a.filter(e=>!!e);return n.length?o.createElement(_Y,{title:e,description:t},o.createElement("div",{className:_8},n.map(e=>{let t=dt(e,r);return o.createElement(_K.rS,{resource:e,title:null==t?void 0:t.title,description:null==t?void 0:t.description,key:e.id})}))):null}function _5({title:e,description:t,meta:a,preview:r=!1}){return o.createElement(_Y,{title:e,description:t},o.createElement("div",{className:_8},r?"Preview not supported":(a.figjam_ai??[]).map(e=>o.createElement(_4,{title:e.title,description:(null==e?void 0:e.description)??"",imageUrl:e.imageUrl,prompt:e.prompt,promptCategory:e.category,key:`${e.title}-${e.prompt}`}))))}function _9(){let{urlSlug:e}=(0,cD.g)(),[{data:t,status:a}]=(0,p.IT)(dy({urlSlug:e,isTemplateUrl:function(e){try{return/^\/community\/templates\/.+$/.test(new URL(e).pathname)}catch{return!1}}(m.Ay.location.href)}));return((0,o.useLayoutEffect)(()=>{let t=da[e];(0,d4.N)(t,dL.LJ)&&m.Ay.replace(new dR.IE({categorySlug:t}).href);let a=dr[e];a&&m.Ay.replace(`/community/collections/${a}`)},[e]),"loading"===a)?null:t?(document.title=t.meta_title||"Collection | Figma",o.createElement(o.Fragment,null,o.createElement(_6,{collection:t}),!(0,d.y3)()&&o.createElement("div",{className:"collection_page--footerContainer--Y-BuI collection_page--pageSections--mndLy"},o.createElement(dM,null)))):o.createElement(dz,null)}function _6({collection:e,preview:t=!1}){let a=(0,cz.kk)();return o.createElement(O.fu,{name:"community_collections",properties:{urlSlug:e.url_slug,title:e.title}},!("published"===e.publishing_status&&e.latest_published_at)&&o.createElement(_2,null),o.createElement("div",{className:"collection_page--page--XgZLM"},a()?o.createElement(d2,{collection:e,preview:t}):o.createElement("section",{className:"collection_page--headerSection--qYnly"},o.createElement("div",{className:"collection_page--header--XaFVY"},o.createElement("div",{className:"collection_page--headerInfo--VzudZ"},!t&&o.createElement(d5,{pathname:m.Ay.location.pathname,overrideText:e.meta.breadcrumb_text}),o.createElement("h1",{className:"collection_page--title--gNu9m text--fontPos48Whyte--uSU-k text--_fontBaseWhyte--efAjI"},e.title),o.createElement(d1,{collection:e}),o.createElement("div",{className:"collection_page--description--xFS-k text--fontPos16--oMC-G text--_fontBase--QdLsd"},e.description)),o.createElement("div",{className:"collection_page--headerImage--gReUX"},!!e.header_img_url&&o.createElement("img",{src:e.header_img_url,alt:"collection header"})))),!!e.sections.length&&o.createElement("section",{className:a()?"collection_page--pageSectionsRedesign--CwAe3":"collection_page--pageSections--mndLy"},e.sections.map((e,a)=>e.section_type===c2.BUNDLE_SECTION&&e.resources?o.createElement(_3,{title:e.title||"",description:e.description||"",resources:e.resources,meta:e.meta,key:a}):e.section_type===c2.HERO_SECTION&&e.resource?o.createElement(_J,{title:e.title||"",resource:e.resource,meta:e.meta,showCTA:!t,key:a}):e.section_type===c2.BUNDLE_SECTION&&e.meta.figjam_ai?o.createElement(_5,{title:e.title||"",description:e.description||"",meta:e.meta,preview:t,key:a}):void 0)),!!e.faqs&&o.createElement(d6,{faqs:e.faqs})))}function _7(){return(0,o.useEffect)(()=>m.Ay.listen(e=>{"PUSH"===e&&window.scrollTo(0,0)}),[]),null}function pe(){let e=(0,mf.J)(),[t,a]=o.useState();return o.useEffect(()=>m.Ay.listen(()=>{a(e)}),[e]),o.useEffect(()=>{var e;!t||(null==(e=m.Ay.location.state)?void 0:e.searchSessionId)||m.Ay.replace(null,{...m.Ay.location.state,searchSessionId:t})},[t]),null}var pt=a(211916),pa=a(343427),pr=a(232655);let pn="mobile_flyout_item--mobileFlyoutItem--7KYhr text--fontPos20--Bcz97 text--_fontBase--QdLsd";function pl({navItem:e,onClose:t}){let a={trackingEventName:"mobile_flyout_item_select",trackingProperties:{path:e.path},...e.trackingProps};return o.createElement("div",{className:pn},o.createElement(O.o3,{key:e.key,to:e.path,onClick:a=>{e.onClick&&e.onClick(a),t()},className:ey()(ef.cx.colorText.block.$,e.className??""),...a},e.text))}function pi({isExpanded:e,toggleExpanded:t,navItemGroup:a,onClose:r}){let n=o.useRef(null);return o.useEffect(()=>{var t;if(e&&(null==(t=n.current)?void 0:t.style.maxHeight)==="0px"){let e=0;n.current.childNodes.forEach(t=>{t instanceof HTMLElement&&(e+=t.offsetHeight)}),n.current.style.maxHeight=`${e}px`}else!e&&n.current&&(n.current.style.maxHeight="0px")},[e]),o.createElement("div",{className:pn},o.createElement("button",{onClick:t,className:ef.cx.flex.justifyStart.alignLeft.colorText.itemsCenter.$},a.text,o.createElement(es.B,{svg:ir.A,className:ey()("mobile_flyout_item_group--mobileFlyoutItemGroupCaret--lbbaU",{"mobile_flyout_item_group--mobileFlyoutItemGroupCaretExpanded--P269f":e}),svgClassName:ef.cx.w8.h8.$,style:{fill:(0,pr.TD)("default")}})),o.createElement("div",{ref:n,className:"mobile_flyout_item_group--mobileFlyoutSubItems--Ze8c7"},a.children.map(e=>o.createElement(pl,{key:e.key,navItem:e,onClose:r}))))}var po=a(234269),ps=a(137466);function pc({navItems:e,onClose:t,trackingContext:a}){let[r,n]=o.useState(!1);o.useEffect(()=>{let e=document.body.style.overflow;return document.body.style.overflow="hidden",n(!0),()=>{document.body.style.overflow=e}},[]);let[l,i]=o.useState(null),s={name:"mobile_flyout",...a};return o.createElement(o.Fragment,null,o.createElement("div",{className:"mobile_flyout--mobileFlyoutContainer--Z9i-T",onClick:e=>{e.stopPropagation(),t()}},o.createElement("div",{className:ey()("mobile_flyout--mobileFlyout--YX14z",{"mobile_flyout--mobileFlyoutMounted--RUFmS":r}),onClick:e=>e.stopPropagation()},o.createElement(O.fu,{...s},o.createElement("div",{className:ef.cx.flex.justifyBetween.itemsCenter.$},o.createElement(es.B,{svg:po.A,className:"mobile_flyout--communitySvgContainer--R6Qs9",style:{fill:(0,pr.TD)("default")},svgClassName:ef.cx.w32.h32.$,onClick:e=>{(0,uX.qG)("/community",e,!1),t()}}),o.createElement(es.B,{svg:ps.A,svgWidth:"18px",onClick:t,style:{fill:(0,pr.TD)("default")}})),o.createElement("div",{className:ef.cx.flex.flexWrap.flexColumn.gap2.pt32.$},e.map(e=>"children"in e?o.createElement(pi,{key:e.key,isExpanded:l===e.key,toggleExpanded:()=>i(l===e.key?null:e.key),navItemGroup:e,onClose:t}):o.createElement(pl,{key:e.key,navItem:e,onClose:t})))))))}function pd({showNewIcon:e}){let t=function(){let e=ug();return(0,o.useMemo)(()=>[e.libraries,e.designTemplates,e.designTools,e.visualAssets,e.whiteboarding,e.icons,e.development,e.education],[e])}(),[a,r]=o.useState(!1),n=t.reduce((e,{category:t,dropdownCategories:a})=>{if(!("urlSlug"in t))return e;if(a&&a.length>0){let r=a.map(e=>({key:e.urlSlug,text:e.text,path:new dR.IE({categorySlug:e.urlSlug}).href,trackingProps:{trackingEventName:"community_mobile_nav_category_clicked",trackingProperties:{slug:e.urlSlug}}}));return r.push({key:t.urlSlug,text:t.allText?t.allText:(0,S.t)("categories.all"),path:new dR.IE({categorySlug:t.urlSlug}).href,className:ef.cx.underline.$,trackingProps:{trackingEventName:"community_mobile_nav_category_clicked",trackingProperties:{slug:t.urlSlug}}}),[...e,{key:t.urlSlug,text:t.text,children:r}]}return[...e,{key:t.urlSlug,text:t.text,path:new dR.IE({categorySlug:t.urlSlug}).href}]},[{key:"home",text:(0,S.t)("community.view_bar.home"),path:"/community"}]);return o.createElement("div",{"data-testid":"flyout-category-selector",className:ef.cx.p12.flexShrink0.$},a&&o.createElement(pc,{navItems:n,onClose:()=>{r(!1)},trackingContext:{name:"community_mobile_nav_flyout"}}),o.createElement("button",{className:ef.cx.flex.gap6.flexNowrap.fontMedium.colorText.itemsCenter.$,onClick:()=>r(!0)},e?o.createElement(pa.Z,null):o.createElement(re.In,{icon:"workspace-16"}),o.createElement("span",{className:ef.cx.font13.$},(0,S.tx)("community.view_bar.browse"))))}let pm="nav_dropdown_card--linearGradientBackground--lJEst",pu="nav_dropdown_card--animatedImage--K1GI2",p_="nav_dropdown_card--icon--i86uY",pp="nav_dropdown_card--card--byB-G",pf="nav_dropdown_card--smallCard---QRv1",pg=e=>e.backgroundDotted&&e.backgroundFading?pm:e.backgroundDotted?"nav_dropdown_card--dottedBackground--JKonD":e.backgroundDottedSmall?"nav_dropdown_card--dottedBackgroundSmall--SQfOI":e.backgroundFading?pm:void 0,pE={scaleOut:"nav_dropdown_card--scaleOut--qGBOE",slideLeft:"nav_dropdown_card--slideLeft--TxPHT",shuffle:"nav_dropdown_card--shuffle--1xZAE",slideUp:"nav_dropdown_card--slideUp--ihkWb",iconFan:"nav_dropdown_card--iconFan--ujwnb",cardFan:"nav_dropdown_card--cardFan--AxUDL",accordian:"nav_dropdown_card--accordian--vOvt0"};var pv=(e=>(e.HALF="HALF",e.FULL="FULL",e))(pv||{});function ph(e){let{cardSize:t,title:a,subtitle:r,url:n,animation:l,backgroundColor:i}=e;return o.createElement(O.jm,{className:"nav_dropdown_card--navDropdownCard--MAs6u","data-card-size":t,trackingEventName:"community_global_nav_category_clicked",trackingProperties:{url:n},onClick:()=>m.Ay.push(n)},o.createElement("div",{className:"nav_dropdown_card--titleAndSubtitle--gq1Eu"},o.createElement("a",{className:"nav_dropdown_card--title--ytbFI text--fontPos13--xW8hS text--_fontBase--QdLsd",href:n,onClick:e=>e.preventDefault()},a),r&&o.createElement("div",{className:"nav_dropdown_card--subTitle--Z3jMj text--fontPos11--2LvXf text--_fontBase--QdLsd"},r)),o.createElement("div",{className:ey()("nav_dropdown_card--imagesContainer--BXAtR",pg(e),pE[l]),style:{backgroundColor:i},"data-card-size":t},"accordian"===l&&o.createElement(o.Fragment,null,o.createElement("div",{"data-animation-index":"2",className:pu}),o.createElement("div",{"data-animation-index":"1",className:pu,style:{backgroundColor:e.middleCardColor}}),o.createElement("img",{alt:a,"data-animation-index":"0",...e.images[0],className:ey()(e.images[0].className,pu)})),!!l&&"accordian"!==l&&e.images.map((e,t)=>o.createElement("img",{key:t,alt:a,"data-animation-index":t,...e,className:ey()(e.className,pu)}))))}function py(e){return({[dL.LJ.visualAssets]:(0,S.t)("community.categories.visual_assets"),[dL.LJ.development]:(0,S.t)("community.categories.development"),[dL.LJ.accessibility]:(0,S.t)("categories.accessibility"),[dL.LJ.brainstorming]:(0,S.t)("categories.brainstorming"),[dL.LJ.classroomActivities]:(0,S.t)("categories.classroom_activities"),[dL.LJ.designTemplates]:(0,S.t)("community.categories.design_templates"),[dL.LJ.designTools]:(0,S.t)("community.categories.design_tools"),[dL.LJ.desktopAppsWebsites]:(0,S.t)("categories.desktop_apps_websites"),[dL.LJ.diagramming]:(0,S.t)("categories.diagramming"),[dL.LJ.editingEffects]:(0,S.t)("categories.editing_effects"),[dL.LJ.education]:(0,S.t)("community.categories.education"),[dL.LJ.fileOrganization]:(0,S.t)("categories.file_organization"),[dL.LJ.fontsTypography]:(0,S.t)("categories.fonts_typography"),[dL.LJ.funGames]:(0,S.t)("categories.fun_games"),[dL.LJ.icons]:(0,S.t)("community.categories.icons"),[dL.LJ.illustrations]:(0,S.t)("categories.illustrations"),[dL.LJ.importExport]:(0,S.t)("categories.import_export"),[dL.LJ.libraries]:(0,S.t)("categories.libraries"),[dL.LJ.mobileApps]:(0,S.t)("categories.mobile_apps"),[dL.LJ.portfolios]:(0,S.t)("categories.portfolios"),[dL.LJ.calendarTemplates]:(0,S.t)("categories.calendar_templates"),[dL.LJ.presentations]:(0,S.t)("categories.presentations"),[dL.LJ.prototypingAnimation]:(0,S.t)("categories.prototyping_animation"),[dL.LJ.resumes]:(0,S.t)("categories.resumes"),[dL.LJ.shapesColors]:(0,S.t)("categories.shapes_colors"),[dL.LJ.stockPhotography]:(0,S.t)("categories.stock_photography"),[dL.LJ.strategicPlanning]:(0,S.t)("categories.strategic_planning"),[dL.LJ.teamMeetings]:(0,S.t)("categories.team_meetings"),[dL.LJ.tutorials]:(0,S.t)("categories.tutorials"),[dL.LJ.uiKits]:(0,S.t)("categories.ui_kits"),[dL.LJ.wireframes]:(0,S.t)("categories.wireframes"),[dL.LJ.whiteboarding]:(0,S.t)("community.categories.whiteboarding")})[e]}function pb({links:e}){return o.createElement("div",{className:"nav_dropdown_list--navDropdownList--WMnxk"},e.map(({route:e,textOverride:t,isBold:a})=>{let r=py(e.params.categorySlug);return o.createElement(O.o3,{trackingEventName:"community_global_nav_category_clicked",to:e.href,key:e.pathname,trackingProperties:{slug:e.params.categorySlug}},o.createElement("div",{className:a?"nav_dropdown_list--navDropdownListLinkBold--TAZNI nav_dropdown_list--navDropdownListLink--fjC8M text--fontPos13--xW8hS text--_fontBase--QdLsd":"nav_dropdown_list--navDropdownListLink--fjC8M text--fontPos13--xW8hS text--_fontBase--QdLsd"},t||r))}))}let pw="nav_category_selector_2--navDropdownContainer--qK25n",pT="nav_category_selector_2--navDropdownCardColumn--bCxFr";function pI(){let{uikitRoute:e,wireframesRoute:t,designTemplatesRoute:a,desktopAppRoute:r,mobileAppRoute:n,portfolioRoute:l,resumeRoute:i,visualAssetsRoute:s,illustrationsRoute:c,iconsRoute:d,shapesColorsRoute:m}=(0,o.useMemo)(()=>({uikitRoute:new dR.IE({categorySlug:dL.LJ.uiKits}),wireframesRoute:new dR.IE({categorySlug:dL.LJ.wireframes}),designTemplatesRoute:new dR.IE({categorySlug:dL.LJ.designTemplates}),desktopAppRoute:new dR.IE({categorySlug:dL.LJ.desktopAppsWebsites}),mobileAppRoute:new dR.IE({categorySlug:dL.LJ.mobileApps}),portfolioRoute:new dR.IE({categorySlug:dL.LJ.portfolios}),resumeRoute:new dR.IE({categorySlug:dL.LJ.resumes}),visualAssetsRoute:new dR.IE({categorySlug:dL.LJ.visualAssets}),illustrationsRoute:new dR.IE({categorySlug:dL.LJ.illustrations}),iconsRoute:new dR.IE({categorySlug:dL.LJ.icons}),shapesColorsRoute:new dR.IE({categorySlug:dL.LJ.shapesColors})}),[]);return o.createElement("div",{className:pw},o.createElement(ut.Ay,{mediaQuery:`(min-width: ${oQ.U1R})`},o.createElement(ph,{cardSize:pv.FULL,title:(0,S.t)("categories.ui_kits"),subtitle:(0,S.t)("categories.navbar.ui_kits.subtitle"),url:e.href,animation:"cardFan",images:[{src:"https://static.figma.com/uploads/c9620888b341fdf8bfcb6cb53ef798b8efd27159",className:pp},{src:"https://static.figma.com/uploads/f5921b0ab0398572836ad5724607bab4431bb730",className:pp}]})),o.createElement(ut.Ay,{mediaQuery:`(min-width: ${oQ.U1R})`},o.createElement(ph,{cardSize:pv.FULL,title:(0,S.t)("categories.wireframes"),subtitle:(0,S.t)("categories.navbar.wireframes.subtitle"),url:t.href,animation:"cardFan",images:[{src:"https://static.figma.com/uploads/da71ee40d7bcd76b5f8857c1694056d19da681b2",className:pp},{src:"https://static.figma.com/uploads/d50b185c8aba27a30207c8d938fcd13faadf9f32",className:pp}]})),o.createElement(ut.Ay,{mediaQuery:`(max-width: ${(0,oI.jz)(oQ.U1R)-1}px)`},o.createElement("div",{className:pT},o.createElement(ph,{cardSize:pv.HALF,title:(0,S.t)("categories.ui_kits"),subtitle:(0,S.t)("categories.navbar.ui_kits.subtitle"),url:e.href,animation:"slideUp",images:[{src:"https://static.figma.com/uploads/c9620888b341fdf8bfcb6cb53ef798b8efd27159",className:pf}]}),o.createElement(ph,{cardSize:pv.HALF,title:(0,S.t)("categories.wireframes"),subtitle:(0,S.t)("categories.navbar.wireframes.subtitle"),url:t.href,animation:"slideUp",images:[{src:"https://static.figma.com/uploads/d50b185c8aba27a30207c8d938fcd13faadf9f32",className:pf}]}))),o.createElement(pb,{links:[{route:a,isBold:!0},{route:r},{route:n},{route:l},{route:i}]}),o.createElement(pb,{links:[{route:s,textOverride:(0,S.t)("categories.assets"),isBold:!0},{route:c},{route:d},{route:m}]}))}function px(){let e=(0,oA.DP)(),{editingEffectsRoute:t,fileOrganizationRoute:a,developmentRoute:r,widgetsRoute:n,pluginsRoute:l,importExportRoute:i,accessibilityRoute:s,prototypingAnimationRoute:c}=(0,o.useMemo)(()=>({editingEffectsRoute:new dR.IE({categorySlug:dL.LJ.editingEffects},{resource_type:"plugins"}),fileOrganizationRoute:new dR.IE({categorySlug:dL.LJ.fileOrganization},{resource_type:"plugins"}),developmentRoute:new dR.IE({categorySlug:dL.LJ.development},{resource_type:"plugins"}),widgetsRoute:new dR.IE({categorySlug:dL.LJ.whiteboarding},{resource_type:"widgets"}),pluginsRoute:new dR.IE({categorySlug:dL.LJ.designTools},{resource_type:"plugins"}),importExportRoute:new dR.IE({categorySlug:dL.LJ.importExport},{resource_type:"plugins"}),accessibilityRoute:new dR.IE({categorySlug:dL.LJ.accessibility},{resource_type:"plugins"}),prototypingAnimationRoute:new dR.IE({categorySlug:dL.LJ.prototypingAnimation},{resource_type:"plugins"})}),[]);return o.createElement("div",{className:pw},o.createElement(ut.Ay,{mediaQuery:`(min-width: ${oQ.U1R})`},o.createElement(ph,{cardSize:pv.FULL,title:(0,S.t)("categories.editing_effects"),subtitle:(0,S.t)("categories.navbar.editing_effects.subtitle"),url:t.href,animation:"slideLeft",images:[{src:"dark"===e?"https://static.figma.com/uploads/c55e977611400609a084e5620d40edc6c50a9a1b":"https://static.figma.com/uploads/5c737368bdd000ee52eb78e6424e14baeded37fb",className:pp,style:{boxShadow:"none"}}]})),o.createElement("div",{className:pT},o.createElement(ph,{cardSize:pv.HALF,title:(0,S.t)("categories.file_organization"),subtitle:(0,S.t)("categories.navbar.file_organization.subtitle"),url:a.href,animation:"scaleOut",images:[{src:"https://static.figma.com/uploads/ea10da5555080d6f61eceb6403aa7c1cef613347",className:p_}]}),o.createElement(ph,{cardSize:pv.HALF,title:(0,S.t)("categories.development"),subtitle:(0,S.t)("categories.navbar.development.subtitle"),url:r.href,animation:"iconFan",images:[{src:"https://static.figma.com/uploads/33deabb795dc9e08a039e2f0994d68dfb5770cbc",className:p_},{src:"https://static.figma.com/uploads/48bc4dd034de8b31df987fa89dbf6a1faa65c194",className:p_}]})),o.createElement(ut.Ay,{mediaQuery:`(min-width: ${oQ.U1R})`},o.createElement(ph,{cardSize:pv.FULL,title:(0,S.t)("categories.widgets"),subtitle:(0,S.t)("categories.navbar.widgets.subtitle"),url:n.href,animation:"shuffle",images:[{src:"https://static.figma.com/uploads/b1db3193a01e80c6c6875e569a65db5785d85903"},{src:"https://static.figma.com/uploads/859671379f19079b85b3611c4934611a1c915174"}],backgroundDotted:!0,backgroundFading:!0})),o.createElement(ut.Ay,{mediaQuery:`(max-width: ${(0,oI.jz)(oQ.U1R)-1}px)`},o.createElement("div",{className:pT},o.createElement(ph,{cardSize:pv.HALF,title:(0,S.t)("categories.editing_effects"),subtitle:(0,S.t)("categories.navbar.editing_effects.subtitle"),url:t.href,animation:"iconFan",images:[{src:"https://static.figma.com/uploads/9fed7cff708002c2773ec818595f3c9e6cdd86e6",className:p_},{src:"https://static.figma.com/uploads/d32402204d96164f250d67fea5576b7175b3b663",className:p_}]}),o.createElement(ph,{cardSize:pv.HALF,title:(0,S.t)("categories.widgets"),subtitle:(0,S.t)("categories.navbar.widgets.subtitle"),url:n.href,animation:"scaleOut",images:[{src:"https://static.figma.com/uploads/b1db3193a01e80c6c6875e569a65db5785d85903",style:{width:"64px"}}],backgroundDottedSmall:!0}))),o.createElement(pb,{links:[{route:l,textOverride:(0,S.t)("categories.more_plugins"),isBold:!0},{route:i},{route:s},{route:c}]}))}var pN=a(357611);function pC(){let e=new dR.IE({categorySlug:dL.LJ.presentations},{editor_type:pN.k.Editors.SLIDES}),[t,a]="staging"===(0,_.Ay)().cluster_name?[{route:new uE.ax({resourceId:"1380690018201193525",apiResourceType:uE.Uo.FILE}),text:(0,S.t)("categories.presentations.pitch_deck"),subText:(0,S.t)("categories.presentations.pitch_deck.description")},{route:new uE.ax({resourceId:"1380614040001429551",apiResourceType:uE.Uo.FILE}),text:(0,S.t)("categories.presentations.product_roadmap"),subText:(0,S.t)("categories.presentations.product_roadmap.description")},{route:new uE.ax({resourceId:"1380608789812079661",apiResourceType:uE.Uo.FILE}),text:(0,S.t)("categories.presentations.research_readout")},{route:new uE.ax({resourceId:"1380608691855352876",apiResourceType:uE.Uo.FILE}),text:(0,S.t)("categories.presentations.all_hands_meeting")},{route:new uE.ax({resourceId:"1380280625154305056",apiResourceType:uE.Uo.FILE}),text:(0,S.t)("categories.presentations.design_review")}]:"prod"===(0,_.Ay)().cluster_name?[{route:new uE.ax({resourceId:"1382483546106051977",apiResourceType:uE.Uo.FILE}),text:(0,S.t)("categories.presentations.pitch_deck"),subText:(0,S.t)("categories.presentations.pitch_deck.description")},{route:new uE.ax({resourceId:"1382445842871959915",apiResourceType:uE.Uo.FILE}),text:(0,S.t)("categories.presentations.product_roadmap"),subText:(0,S.t)("categories.presentations.product_roadmap.description")},{route:new uE.ax({resourceId:"1382481559228932486",apiResourceType:uE.Uo.FILE}),text:(0,S.t)("categories.presentations.research_readout")},{route:new uE.ax({resourceId:"1382859851486347871",apiResourceType:uE.Uo.FILE}),text:(0,S.t)("categories.presentations.all_hands_meeting")},{route:new uE.ax({resourceId:"1383475610293894214",apiResourceType:uE.Uo.FILE}),text:(0,S.t)("categories.presentations.design_review")}]:"local"===(0,_.Ay)().cluster_name?[{route:new dR.IE({categorySlug:dL.LJ.uiKits}),text:(0,S.t)("categories.presentations.pitch_deck"),subText:(0,S.t)("categories.presentations.pitch_deck.description")},{route:new dR.IE({categorySlug:dL.LJ.uiKits}),text:(0,S.t)("categories.presentations.product_roadmap"),subText:(0,S.t)("categories.presentations.product_roadmap.description")},{route:new dR.IE({categorySlug:dL.LJ.uiKits}),text:(0,S.t)("categories.ui_kits")},{route:new dR.IE({categorySlug:dL.LJ.uiKits}),text:(0,S.t)("categories.ui_kits")},{route:new dR.IE({categorySlug:dL.LJ.uiKits}),text:(0,S.t)("categories.ui_kits")}]:[];return o.createElement("div",{className:pw},o.createElement(ph,{cardSize:pv.FULL,title:t.text,subtitle:t.subText,url:t.route.href,animation:"accordian",images:[{src:"https://static.figma.com/uploads/b88b1be49cdff971481ddb424741db908d32e124"}],middleCardColor:"#FFFAD0"}),o.createElement(ph,{cardSize:pv.FULL,title:a.text,subtitle:a.subText,url:a.route.href,animation:"accordian",images:[{src:"https://static.figma.com/uploads/0386cedef8498e1adb43cd3d338558dba27e0961"}],middleCardColor:"#F5F0EC"}),o.createElement(ph,{cardSize:pv.FULL,title:(0,S.t)("categories.more_presentations"),subtitle:(0,S.t)("categories.more_presentations.subheader"),url:e.href,animation:"cardFan",images:[{src:"https://static.figma.com/uploads/c798a639e2b774985f1fcc4677d056b62e9d070d",className:pp,style:{borderRadius:"4px"}},{src:"https://static.figma.com/uploads/550755dd0003cb7431de9233c72a37f7569ecad9",className:pp,style:{borderRadius:"4px"}}]}))}function pS(){let{brainstormingRoute:e,diagrammingRoute:t,funGamesRoute:a,teamMeetingsRoute:r,whiteboardingRoute:n,strategicPlanningRoute:l}=(0,o.useMemo)(()=>({brainstormingRoute:new dR.IE({categorySlug:dL.LJ.brainstorming}),diagrammingRoute:new dR.IE({categorySlug:dL.LJ.diagramming}),funGamesRoute:new dR.IE({categorySlug:dL.LJ.funGames}),teamMeetingsRoute:new dR.IE({categorySlug:dL.LJ.teamMeetings}),whiteboardingRoute:new dR.IE({categorySlug:dL.LJ.whiteboarding}),strategicPlanningRoute:new dR.IE({categorySlug:dL.LJ.strategicPlanning})}),[]);return o.createElement("div",{className:pw},o.createElement(ut.Ay,{mediaQuery:`(min-width: ${oQ.U1R})`},o.createElement(ph,{cardSize:pv.FULL,title:(0,S.t)("categories.brainstorming"),subtitle:(0,S.t)("categories.navbar.brainstorming.subtitle"),url:e.href,animation:"cardFan",images:[{src:"https://static.figma.com/uploads/60a2ac68e6705460d12ac34906f51091a7873a9c",className:pp},{src:"https://static.figma.com/uploads/8c15440f329bf3dc8940ad1d2267c4a67e592964",className:pp}]})),o.createElement("div",{className:pT},o.createElement(ph,{cardSize:pv.HALF,title:(0,S.t)("categories.diagramming"),subtitle:(0,S.t)("categories.navbar.diagramming.subtitle"),url:t.href,animation:"slideUp",images:[{src:"https://static.figma.com/uploads/881b987a3b8af1a1ee08a8316f7688e1bf34376c",className:pf}],backgroundDottedSmall:!0}),o.createElement(ph,{cardSize:pv.HALF,title:(0,S.t)("categories.fun_games"),subtitle:(0,S.t)("categories.navbar.fun_games.subtitle"),url:a.href,animation:"slideUp",images:[{src:"https://static.figma.com/uploads/7b72cc0729e30a7918fceeb4b4b3a86b4a900e18",className:pf}],backgroundColor:"#FFE9F2"})),o.createElement(ut.Ay,{mediaQuery:`(min-width: ${oQ.U1R})`},o.createElement(ph,{cardSize:pv.FULL,title:(0,S.t)("categories.team_meetings"),subtitle:(0,S.t)("categories.navbar.team_meetings.subtitle"),url:r.href,animation:"cardFan",images:[{src:"https://static.figma.com/uploads/24ec653794817747706ab7225c4c200e599fc7f8",className:pp},{src:"https://static.figma.com/uploads/fcbfaf7de5395838863bf7d8dd3dc5805bb509d6",className:pp}]})),o.createElement(ut.Ay,{mediaQuery:`(max-width: ${(0,oI.jz)(oQ.U1R)-1}px)`},o.createElement("div",{className:pT},o.createElement(ph,{cardSize:pv.HALF,title:(0,S.t)("categories.brainstorming"),subtitle:(0,S.t)("categories.navbar.brainstorming.subtitle"),url:e.href,animation:"slideUp",images:[{src:"https://static.figma.com/uploads/8c15440f329bf3dc8940ad1d2267c4a67e592964",className:pf}]}),o.createElement(ph,{cardSize:pv.HALF,title:(0,S.t)("categories.team_meetings"),subtitle:(0,S.t)("categories.navbar.team_meetings.subtitle"),url:r.href,animation:"slideUp",images:[{src:"https://static.figma.com/uploads/fcbfaf7de5395838863bf7d8dd3dc5805bb509d6",className:pf}]}))),o.createElement(pb,{links:[{route:n,textOverride:(0,S.t)("categories.more_whiteboarding"),isBold:!0},{route:l}]}))}function pk(){return o.createElement("div",{"data-testid":"nav-category-selector",className:"nav_category_selector_2--categorySelector--b-k5b"},o.createElement(pA,{text:(0,S.t)("community.homepage.figma_section.header"),slug:"design_template"},o.createElement(pI,null)),o.createElement(pA,{text:(0,S.t)("categories.plugins"),slug:"plugins"},o.createElement(px,null)),o.createElement(pA,{text:(0,S.t)("categories.whiteboarding"),slug:"whiteboarding"},o.createElement(pS,null)),o.createElement(pA,{text:(0,S.t)("categories.presentations"),slug:"presentations",showNewBadge:!0},o.createElement(pC,null)))}function pA({text:e,slug:t,children:a,showNewBadge:r}){let[n,l]=o.useState(!1),i=o.useRef(null);return(0,o.useLayoutEffect)(()=>{if(i.current){let e=i.current.getBoundingClientRect().width,t=`${Math.min(150,(document.documentElement.clientWidth-e)/2)}px`;i.current.style.left=t}}),o.createElement("div",{onMouseEnter:()=>{l(!0)},onMouseMove:()=>{n||l(!0)},onMouseLeave:()=>{l(!1)},role:"button",tabIndex:0,className:ef.cx.flex.itemsCenter.$},o.createElement(O.fu,{name:"Global Nav Category",properties:{slug:t}},o.createElement("div",{className:n?"nav_category_selector_2--navCategorySelectorTextHover--viMyk nav_category_selector_2--navCategorySelectorText--Tkc7a text--fontPos13--xW8hS text--_fontBase--QdLsd":"nav_category_selector_2--navCategorySelectorText--Tkc7a text--fontPos13--xW8hS text--_fontBase--QdLsd"},e,r&&o.createElement("div",{className:"nav_category_selector_2--newBadge--3isz- text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,S.t)("community.badge.new")),o.createElement(es.B,{svg:sh.A,style:{fill:(0,pr.TD)("default")}})),o.createElement("div",{className:ey()("nav_category_selector_2--navDropdownWrapper--UbL1U",{"nav_category_selector_2--navDropdownWrapperHover--SJqCp":n}),onClick:e=>{e.stopPropagation(),l(!1)},ref:i},a)))}var pL=a(209552);let pR=(0,iJ.eU)(!1);var pD=a(582064);let pF=(0,iJ.eU)({}),pP=(0,iJ.eU)({idx:-1}),pM=(0,iJ.eU)({}),pO=(0,iJ.eU)({idx:-1});function pB(e){let t=e===dL.PF.LANDING?pM:pF,a=e===dL.PF.LANDING?pO:pP,[r,n]=(0,aJ.fp)(t),[l,i]=(0,aJ.fp)(a),s=o.useMemo(()=>["files","plugins","widgets","creators"].reduce((e,t)=>{let a=((null==r?void 0:r[t])??[]).map((e,a)=>({type:t,idx:a})).slice(0,4);return e.concat(a)},[]),[r]),c=o.useMemo(()=>s.findIndex(e=>e.type===(null==l?void 0:l.type)&&e.idx===(null==l?void 0:l.idx)),[s,l]);return{renderedOrder:s,renderedSelectedIdx:c,resources:r,setResources:n,selectedIdx:l,setSelectedIdx:i}}var pU=a(440248),pV=a(159696);function pH({query:e,inSearchPath:t,onChange:a,onSubmit:r,inputPlaceholder:n,context:l,className:i,searchIconClassName:c,closeIconClassName:d}){let m=(0,s.wA)(),u=(0,mf.J)(!0),_=(0,o.useRef)(null),{renderedOrder:p,renderedSelectedIdx:f,resources:g,setResources:E,selectedIdx:v,setSelectedIdx:h}=pB(l),y=(0,o.useCallback)(()=>{h({idx:-1})},[h]);return o.createElement("div",{className:i,tabIndex:0,onFocus:()=>{null!==_.current&&_.current.focus(),m(pD.Dy({entryPoint:"community"}))}},o.createElement(es.B,{svg:pU.A,className:c}),o.createElement("input",{type:"text",value:e,spellCheck:!1,placeholder:n??(0,S.t)("community.search.search_community"),ref:_,onChange:e=>{let n=e.currentTarget.value;a(n),t&&n&&r(n)},onBlur:y,onKeyDown:n=>{var l,i,o,s;let c=n.currentTarget.value.trim();if("Enter"===n.key){if(n.preventDefault(),f>=0&&v.type){let t=null==(l=g[v.type])?void 0:l[v.idx],r="model"in t?`/@${t.model.profile_handle}`:(0,cG._t)({resource:t});(0,uX.VJ)(r),null==(i=_.current)||i.blur(),a(""),E({}),m(pD.ky()),(0,tK.sx)("search_result_clicked",{query:e,resourceType:null==(o=p[f])?void 0:o.type,scope:"community",is_preview:!0,index:f,entry_point:"community_via_enter",searchSessionId:u})}else r(c),t&&!c?m(pD.ky()):!t&&c&&m(pD.Je({entryPoint:"community"}))}else if("Escape"===n.key)null==(s=_.current)||s.blur();else if(n.keyCode===a1.Uz.DOWN_ARROW||n.keyCode===a1.Uz.UP_ARROW){n.preventDefault();let e=f===p.length-1?f:f+1,t=f<=0?f:f-1;switch(n.keyCode){case a1.Uz.DOWN_ARROW:h(p[e]||{idx:-1});break;case a1.Uz.UP_ARROW:h(p[t]||{idx:-1})}}},required:!0}),e&&e.length>0&&o.createElement(es.B,{svg:pV.A,className:d,onClick:()=>{a(""),t&&r(""),m(pD.ky())}}))}var pW=a(792199),pj=a(709495),p$=a(367935),pG=a(56714);let pz="search_dropdown--meta--a-aV4",pY="search_dropdown--pluginOrWidgetTilePreview--Rfef1",pK="search_dropdown--section--VJbkB",pQ="search_dropdown--sectionTitle--x7FyO",pq="search_dropdown--title--eiIIy",pX="search_dropdown--authorRow--Uk00Y",pJ="search_dropdown--authorRowText--vsAii",pZ="search_dropdown--authorRowAvatar--jFZyx",p0="search_dropdown--resourceRowExtension--v4dY8 search_dropdown--resourceRow--P-Lig",p1="search_dropdown--hover--stEGe";function p2({profiles:e,onResourceClick:t,onResourceHover:a,selectedIdx:r}){return e&&0!==e.length?o.createElement("div",{className:pK},o.createElement("div",{className:pQ},(0,S.tx)("community.view_bar.creators")),o.createElement(p4,{profiles:e.map(e=>e.model),onResourceClick:t,onResourceHover:a,selectedIdx:r})):null}function p4({profiles:e,onResourceClick:t,onResourceHover:a,selectedIdx:r}){return o.createElement("div",{className:"search_dropdown--resourceRowProfiles--bz2ck"},e.map((e,n)=>o.createElement("div",{onMouseEnter:()=>a(n),key:e.id,className:ey()({[p1]:r===n})},o.createElement(p8,{profile:e,onResourceClick:t}))))}function p8({profile:e,onResourceClick:t}){return o.createElement("div",{className:"search_dropdown--profile--HRd2s",key:e.id},o.createElement(uX.A6,{to:`/@${e.profile_handle}`,className:"search_dropdown--resourceRowProfile--HScpw",onClick:()=>{document.activeElement.blur(),t()}},o.createElement(cw.e,{adtlClassName:"search_dropdown--profileRowAvatar--TOSBT",entity:e,size:40}),o.createElement("div",{className:"search_dropdown--profileRowName--oRTAf ellipsis--ellipsis--Tjyfa text--fontPos12--YsUAh text--_fontBase--QdLsd"},e.name),o.createElement("div",{className:"search_dropdown--profileRowProfileHandle--DuEYR ellipsis--ellipsis--Tjyfa text--fontPos12--YsUAh text--_fontBase--QdLsd"},"@",e.profile_handle)))}function p3({resources:e,onResourceClick:t,onResourceHover:a,selectedIdx:r}){let n=(0,s.d4)(e=>e.authedActiveCommunityProfile);return e&&0!==e.length?o.createElement("div",{className:pK},o.createElement("div",{className:pQ},(0,S.tx)("community.view_bar.widgets")),e.slice(0,4).map((e,l)=>{let i=(0,cG.qD)(e);return o.createElement("div",{onMouseEnter:()=>a(l),key:e.id,className:ey()({[p1]:r===l})},o.createElement(uX.A6,{to:(0,cG._t)({resource:e}),className:p0,onClick:()=>{document.activeElement.blur(),t()}},o.createElement(uq.V,{plugin:i,className:pY,alt:i.name,onError:e=>e.target.src=cG.ZD}),o.createElement("div",{className:pz},o.createElement("div",{className:pq},i.name),o.createElement("div",{className:pX},e.community_publishers.accepted.map(e=>o.createElement(cw.e,{key:e.id,entity:e,size:16,adtlClassName:pZ})),o.createElement("div",{className:pJ},(0,dT.Lj)(e)))),(0,mi.$3)({resource:e,authedActiveCommunityProfile:n})))})):null}function p5({resources:e,onResourceClick:t,onResourceHover:a,selectedIdx:r}){let n=(0,s.d4)(e=>e.authedActiveCommunityProfile);return e&&0!==e.length?o.createElement("div",{className:pK},o.createElement("div",{className:pQ},(0,S.tx)("community.view_bar.plugins")),e.slice(0,4).map((e,l)=>{let i=(0,cG.qD)(e);return o.createElement("div",{onMouseEnter:()=>a(l),key:e.id,className:ey()({[p1]:r===l})},o.createElement(uX.A6,{to:(0,cG._t)({resource:e}),className:p0,onClick:()=>{document.activeElement.blur(),t()}},o.createElement("img",{src:i.redirect_icon_url,className:pY,alt:i.name,onError:e=>e.target.src=cG.ZD}),o.createElement("div",{className:pz},o.createElement("div",{className:pq},i.name),o.createElement("div",{className:pX},e.community_publishers.accepted.map(e=>o.createElement(cw.e,{key:e.id,entity:e,size:16,adtlClassName:pZ})),o.createElement("div",{className:pJ},(0,dT.Lj)(e)))),(0,mi.$3)({resource:e,authedActiveCommunityProfile:n})))})):null}function p9({resources:e,onResourceClick:t,onResourceHover:a,selectedIdx:r}){let n=(0,s.d4)(e=>e.authedActiveCommunityProfile);if(!e||0===e.length)return null;let l=(0,_.kc)().cmty_thumbnail_16x9_ar;return o.createElement("div",{className:pK},o.createElement("div",{className:pQ},(0,S.tx)("community.view_bar.files")),e.slice(0,4).map((e,i)=>{let s=(0,cG.qD)(e);return o.createElement("div",{onMouseEnter:()=>a(i),key:e.id,className:ey()({[p1]:r===i})},o.createElement(uX.A6,{to:(0,cG._t)({resource:e}),className:"search_dropdown--resourceRow--P-Lig",onClick:()=>{document.activeElement.blur(),t()}},o.createElement("img",{src:e.thumbnail_url,className:l?"search_dropdown--fileTilePreview16x9---1A4y":"search_dropdown--fileTilePreview--uCbva",alt:s.name,onError:e=>e.target.src=cG.ZD}),o.createElement("div",{className:pz},o.createElement("div",{className:pq},s.name),o.createElement("div",{className:pX},e.community_publishers.accepted.map(e=>o.createElement(cw.e,{key:e.id,entity:e,size:16,adtlClassName:pZ})),o.createElement("div",{className:pJ},(0,dT.Lj)(e)))),(0,mi.$3)({resource:e,authedActiveCommunityProfile:n})))}))}let p6=function(e,t){let a;return(...t)=>new Promise(r=>{clearTimeout(a),a=setTimeout(()=>{r(e.apply(e,t))},250)})}((e,t)=>t((0,pW.nC)().filter({query:e,sort_by:pj.e.Search.RELEVANCY}).searchResourcesAndProfiles({resourceType:"mixed",limit:8,isPreview:!0,profileLimit:3})),0);function p7(e){var t,a,r,n;let{query:l,context:i,width:c,clearSearchInput:d}=e,{resources:m,setResources:u,selectedIdx:_,setSelectedIdx:p}=pB(i),f=(0,s.wA)(),g=(0,mf.J)(!0),E=o.useCallback(()=>{f(pD.Pj({})),(0,tK.sx)("search_show_all_clicked",{query:l,scope:"community",entry_point:"community",searchSessionId:g})},[f,l,g]);o.useEffect(()=>{l&&p6(l,f).then(([e,t])=>{let a=e.data.meta.results.map(e=>e.model),r=a.filter(e=>(0,p$.zj)(e)),n=a.filter(e=>(0,p$.bT)(e)).map(pG.I$),o=a.filter(e=>(0,p$.AS)(e)).map(pG.I$);u({files:r,plugins:n,widgets:o,creators:t.data.meta.results.slice(0,3)}),p({idx:-1});let s=i===dL.PF.LANDING?"searchPreviewLanding":"searchPreview",c=n.filter(e=>void 0!==e.roles&&e.roles.is_public).length,d=o.filter(e=>void 0!==e.roles&&e.roles.is_public).length;(0,tK.sx)("search_query_result",{query:l,responseCounts:a.length,scope:"community",entry_point:"community",context:s,searchSessionId:g,files:r.length,private_plugins:n.length-c,private_widgets:o.length-d,public_plugins:c,public_widgets:d,projects:0,teams:0,users:t.data.meta.results.length})}).catch(()=>{})},[l,f,g,i,u,p]);let v=o.useCallback(e=>{(0,tK.sx)("search_result_clicked",{query:l,resourceType:e,scope:"community",is_preview:!0,entry_point:"community",searchSessionId:g}),d(),u({}),f(pD.ky())},[l,f,g,u,d]),h=o.useCallback((e,t)=>{m[t]&&!((m[t]??[]).length<e)&&p({idx:e,type:t})},[m,p]);if(!l)return null;let y=(null==(t=m.files)?void 0:t.length)||(null==(a=m.widgets)?void 0:a.length)||(null==(r=m.plugins)?void 0:r.length)||(null==(n=m.creators)?void 0:n.length),b=(0,i5.Mc)({...i5.qd,query:l});return o.createElement("div",{className:ey()("search_dropdown--searchDropdown--HqMrn",{"search_dropdown--searchDropdownLanding--HJ002":i===dL.PF.LANDING,"search_dropdown--categoryNavDropdownResponsiveWidth--HzoIl":"small-responsive"===c}),style:"small-responsive"!==c?{width:`${c}px`}:void 0},o.createElement(p9,{resources:m.files,onResourceClick:()=>v("files"),onResourceHover:e=>h(e,"files"),selectedIdx:(null==_?void 0:_.type)==="files"?null==_?void 0:_.idx:null}),o.createElement(p5,{resources:m.plugins,onResourceClick:()=>v("plugins"),onResourceHover:e=>h(e,"plugins"),selectedIdx:(null==_?void 0:_.type)==="plugins"?null==_?void 0:_.idx:null}),o.createElement(p3,{resources:m.widgets,onResourceClick:()=>v("widgets"),onResourceHover:e=>h(e,"widgets"),selectedIdx:(null==_?void 0:_.type)==="widgets"?null==_?void 0:_.idx:null}),o.createElement(p2,{profiles:m.creators,onResourceClick:()=>v("profiles"),onResourceHover:e=>h(e,"creators"),selectedIdx:(null==_?void 0:_.type)==="creators"?null==_?void 0:_.idx:null}),y?o.createElement("div",{className:"search_dropdown--searchAllLink--VCaxM text--fontPos12--YsUAh text--_fontBase--QdLsd"},o.createElement(uX.A6,{to:b,onClick:E},(0,S.tx)("community.search.show_all_search_results"))):null)}var fe=a(639685);function ft({query:e,inSearchPath:t,onChange:a,onSubmit:r,inputPlaceholder:n}){let l=o.useRef(null),i=(0,s.wA)(),[c,d]=o.useState(!1);return o.createElement("div",{className:"search_input_mobile--mobileSearchContainer--VsAJK text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement("button",{className:"search_input_mobile--searchIconButton--jvchC",onClick:()=>{var e;c?i(pD.ky()):(null==(e=l.current)||e.focus(),i(pD.Dy({entryPoint:"community"}))),d(!c)}},o.createElement(es.B,{className:"search_input_mobile--searchIcon--ExTte",svg:fe.A})),o.createElement("div",{className:"search_input_mobile--searchInput--bt9OT"},o.createElement("input",{type:"text",value:e,spellCheck:!1,ref:l,placeholder:n??(0,S.t)("community.search.search_community"),onChange:e=>{let n=e.currentTarget.value;a(n),t&&n&&r(n)},onKeyDown:e=>{var a,n;let o=e.currentTarget.value.trim();"Enter"===e.key?(e.preventDefault(),r(o),null==(a=l.current)||a.blur(),t&&!o?i(pD.ky()):!t&&o&&i(pD.Je({entryPoint:"community"}))):"Escape"===e.key&&(null==(n=l.current)||n.blur())},required:!0}),o.createElement("button",{className:"search_input_mobile--clearInputButton--cjPyc",onClick:e=>{a(""),e.preventDefault()}},"\xd7")))}function fa({onSubmit:e,pathname:t,isMobile:a}){let r=(0,i5.zX)(t)===i5.hX.SEARCH,[n,l]=o.useState(""),i=(0,aJ.md)(pR);o.useEffect(()=>{let e=(0,i5.wl)();e&&(0,dL.OE)(e)&&e.query&&l(e.query)},[]);let s=(0,sJ.A)(e,a?600:400),c=o.useCallback(()=>{l("")},[]);if(!function(e,t){let a=(0,li.ZC)(e);o.useEffect(()=>{e!==i5.hX.SEARCH&&a!==e&&t()},[e,t,a])}(t,c),i&&!n)return null;if(a)return o.createElement(ft,{onChange:l,onSubmit:s,query:n,inSearchPath:r,inputPlaceholder:(0,S.t)("community.search.placeholder")});{let e=n&&!r&&window.innerWidth>800?o.createElement(p7,{query:n,clearSearchInput:c,context:dL.PF.NAV,width:(0,oI.jz)(oQ.h63)}):null;return o.createElement(pL.ms,{preview:e,className:"dropdown_search_input--dropdown--fBh7I dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd",disableRepositioning:!0},o.createElement(pH,{onChange:l,onSubmit:s,query:n,inSearchPath:r,inputPlaceholder:(0,S.t)("community.search.placeholder"),context:dL.PF.NAV,className:"dropdown_search_input--searchInput--ALtDK text--fontPos13--xW8hS text--_fontBase--QdLsd",searchIconClassName:"dropdown_search_input--searchIcon--edfC0",closeIconClassName:"dropdown_search_input--closeIcon--Zfoh0"}))}}function fr(){let e=(0,i5.UH)(),t=!!(e&&(0,dL.OE)(e));return{onSubmit:a=>{a.length?m.Ay.push(function({query:e,view:t,inSearchPath:a}){let r={...i5.qd,editor_type:(null==t?void 0:t.editor_type)||i5.qd.editor_type,resourceType:(null==t?void 0:t.resourceType)||i5.qd.resourceType,price:(null==t?void 0:t.price)||i5.qd.price,query:e};return a&&(r.sort_by=(null==t?void 0:t.sort_by)||i5.qd.sort_by),(0,i5.Mc)(r)}({query:a,view:e,inSearchPath:t})):t&&m.Ay.push("/community")},inSearchPath:t}}function fn(e){let{pathname:t}=(0,cD.zy)(),{onSubmit:a}=fr(),r=e.isMobile??g.Ay.mobile;return o.createElement(fa,{isMobile:r,onSubmit:a,pathname:t})}var fl=a(167139);function fi({parentBackgroundColor:e}){let t=o.useRef(window.history.length-1),[a,r]=o.useState(t.current);return o.useEffect(()=>m.Ay.listen(e=>{"PUSH"===e&&r(e=>e+1)}),[]),o.createElement(fl.f,{onLeftClick:()=>{m.Ay.back(),r(e=>e-1)},onRightClick:()=>{m.Ay.forward(),r(e=>e+1)},isLeftEnabled:a>t.current,isRightEnabled:a<window.history.length-1,parentBackgroundColor:e})}var fo=a(63397);function fs(){let e=(0,s.wA)(),t=(0,ou.kc)();return(null==t?void 0:t.primary_user_id)?o.createElement(o.Fragment,null):o.createElement("div",{className:"admin_profile_banner--root--HDfDA"},o.createElement("span",{className:"admin_profile_banner--text--cpDIW text--fontNeg13--7Ebf5 text--_fontBase--QdLsd text--_negText--j9g-L"},(null==t?void 0:t.org_id)?(0,S.tx)("community.banner.browsing_community_as_the_current_profile_name_organization",{profileName:null==t?void 0:t.name}):(0,S.tx)("community.banner.browsing_community_as_the_current_profile_name_team",{profileName:null==t?void 0:t.name})),o.createElement("div",{className:"admin_profile_banner--closeIconContainer--bm5wf",onClick:()=>{e((0,fo.rO)())}},o.createElement(es.B,{svg:eq.A,className:"admin_profile_banner--close--ib2wO"})))}function fc(){return o.createElement("div",{className:ef.cx.flex.flexShrink0.alignCenter.alignCenter.gap16.$},o.createElement(O.$z,{className:"auth_buttons--logInButton--ln482 shared--_button--qcVz- text--fontPos11--2LvXf text--_fontBase--QdLsd",trackingProperties:{trackingDescriptor:ew.c.LOGGED_OUT_NAV_LOGIN},onClick:()=>(0,mp.FL)(m_.qB.SIGN_IN,{preventDefaultRedirect:!0}),type:"button"},(0,S.t)("community.signed_out_modal.log_in")),o.createElement(O.$z,{className:"auth_buttons--signUpButton--lM9GB shared--_button--qcVz- text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:()=>(0,mp.FL)(m_.qB.SIGN_UP,{preventDefaultRedirect:!0}),trackingProperties:{trackingDescriptor:ew.c.LOGGED_OUT_NAV_SIGN_UP},type:"button"},(0,S.t)("community.signed_out_modal.sign_up")))}function fd(){return o.createElement("svg",{className:"svg",width:"38",height:"57",viewBox:"0 0 38 57",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M19 28.5c0-5.247 4.253-9.5 9.5-9.5 5.247 0 9.5 4.253 9.5 9.5 0 5.247-4.253 9.5-9.5 9.5-5.247 0-9.5-4.253-9.5-9.5z",fillRule:"nonzero",fillOpacity:"1",fill:"#1abcfe",stroke:"none"}),o.createElement("path",{d:"M0 47.5C0 42.253 4.253 38 9.5 38H19v9.5c0 5.247-4.253 9.5-9.5 9.5C4.253 57 0 52.747 0 47.5z",fillRule:"nonzero",fillOpacity:"1",fill:"#0acf83",stroke:"none"}),o.createElement("path",{d:"M19 0v19h9.5c5.247 0 9.5-4.253 9.5-9.5C38 4.253 33.747 0 28.5 0H19z",fillRule:"nonzero",fillOpacity:"1",fill:"#ff7262",stroke:"none"}),o.createElement("path",{d:"M0 9.5C0 14.747 4.253 19 9.5 19H19V0H9.5C4.253 0 0 4.253 0 9.5z",fillRule:"nonzero",fillOpacity:"1",fill:"#f24e1e",stroke:"none"}),o.createElement("path",{d:"M0 28.5C0 33.747 4.253 38 9.5 38H19V19H9.5C4.253 19 0 23.253 0 28.5z",fillRule:"nonzero",fillOpacity:"1",fill:"#a259ff",stroke:"none"}))}function fm({showCommunityText:e}){return o.createElement("div",{className:ey()("homepage_link--homepageLinkContainer---EZRJ",{"homepage_link--rightBorder--hQMW-":!e})},o.createElement(O.o3,{trackingEventName:"community_nav_click_communitiy_heading",to:"/community",className:ef.cx.font14.fontSemiBold.lh24.flex.flexNowrap.$},o.createElement("div",{className:"homepage_link--logoLinkWrapper---5vec"},o.createElement(fd,null)),e&&(0,S.t)("community.community")))}let fu=a(20130).i,f_=a(111075).X;function fp({}){let e=(0,m1.M)(),t=!!d.eD||(0,c.ce)(),a=(0,dx.N)(`(max-width: ${oQ._C6})`),r=(0,oI.jz)(oQ.qvA)+(t?(0,oI.jz)(oQ.ngI):0),n=(0,dx.N)(`(max-width: ${r}px)`),l=(0,dx.N)(`(max-width: ${oQ.g8m})`),i=o.useRef(null),m=(0,dL.OE)((0,i5.wl)(location.pathname)),u=!1,_=o.useCallback(e=>{},[]),p=null;return m=(0,s.d4)(e=>{var t;return(null==(t=null==e?void 0:e.selectedView)?void 0:t.view)==="search"}),u=(0,s.d4)(e=>e.communityHub.showingCommunityAdminBanner),_=(0,aJ.fp)(pt.A)[1],p=(0,ou.kc)(),o.useLayoutEffect(()=>{var e;_(null==(e=i.current)?void 0:e.getBoundingClientRect())},[_]),o.createElement(o.Fragment,null,o.createElement("div",{className:"navbar--navbarContainer--4keOh",id:"cmty-consolidated-navbar","data-redesigned-navbar":!0},o.createElement("div",{className:"navbar--leftNav--ndjh7"},e&&o.createElement("div",{className:"navbar--accountAndNotificationsContainer--P-BiH"},o.createElement(f_,{hideNotifications:a})),t&&o.createElement("div",{className:"navbar--navigationChevronsContainer--RLmsc"},o.createElement(fi,null)),o.createElement(fm,{showCommunityText:!1}),l?o.createElement(pd,{showNewIcon:!0}):o.createElement("div",{className:"navbar--navCategoriesContainer--PN1Ov"},o.createElement(pk,null))),o.createElement("div",{className:"navbar--rightNav--Shg9M"},o.createElement("div",{className:"navbar--searchInputContainer--wsxXk"},o.createElement(fn,{isMobile:n})),e?o.createElement(o.Fragment,null,p&&!a&&o.createElement(fu,null)):o.createElement(fc,null))),u&&!m&&o.createElement(fs,null))}var ff=a(566083),fg=a(580857);let fE="feed_controls--feedFilterDropdown--0rv-X dropdown--selectDropdown--Lqj6J dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd";function fv({onUpdate:e,value:t,isSearch:a}){return o.createElement(pL.A5,{name:(0,S.t)("community.landing_page.dropdown_filter__creators"),onUpdate:([t])=>{e(t)},options:[function(e){let t=!e&&(0,m1.M)();return[{key:fg.Z.ALL,label:(0,S.t)("community.view_bar.all_creators")},t?{key:fg.Z.FOLLOWING,label:(0,S.t)("community.view_bar.following")}:null,{key:fg.Z.FIGMA_PARTNER,label:(0,S.t)("community.view_bar.figma_partners_only")}].filter(Boolean)}(!!a)],initialValues:[t],adtlClassName:fE})}var fh=a(251960);function fy({onUpdate:e,editorType:t,resourceType:a,allowedEditorTypes:r}){let n,l,i,s,c;return r&&1===r.length?null:o.createElement(pL.A5,{name:(0,S.t)("community.landing_page.dropdown_filter__editor"),onUpdate:([t])=>{e(t)},initialValues:[t],adtlClassName:fE,dataOnboardingKey:"community_feed_product_filter",onClick:()=>{(0,tK.sx)("editor_type_filter_clicked")},options:[(n=!0,l=!0,i=a===u5.L.BrowseResourceTypes.MIXED||a===u5.L.BrowseResourceTypes.FILES,s=!1,c=!1,(0,cz.Oh)()?r&&r.length>0&&(n=r.includes(pN.k.Editors.FIGMA),l=r.includes(pN.k.Editors.FIGJAM),i=r.includes(pN.k.Editors.SLIDES)&&i):(s=a===u5.L.BrowseResourceTypes.MIXED||a===u5.L.BrowseResourceTypes.PLUGINS,c=a===u5.L.BrowseResourceTypes.FILES),[{key:pN.k.Editors.ALL,label:(0,S.t)("community.landing_page.sort.all_products")},n?{key:pN.k.Editors.FIGMA,label:(0,S.t)("general.figma_design")}:null,s?{key:pN.k.Editors.DEV_MODE,label:(0,S.t)("community.view_bar.dev_mode")}:null,c?{key:pN.k.Editors.PROTOTYPE,label:(0,S.t)("community.view_bar.figma_prototype")}:null,l?{key:pN.k.Editors.FIGJAM,label:(0,S.t)("community.view_bar.fig_jam")}:null,i?{key:pN.k.Editors.SLIDES,label:(0,S.t)("community.view_bar.slides")}:null].filter(Boolean))]})}function fb({onUpdate:e,value:t}){return o.createElement(pL.A5,{name:(0,S.t)("community.landing_page.dropdown_filter__paid"),onUpdate:([t])=>{e(t)},adtlClassName:fE,initialValues:[t],options:[[{key:ff.C.ALL,label:(0,S.t)("community.landing_page.sort.paid_and_free")},{key:ff.C.PAID,label:(0,S.t)("community.landing_page.sort.paid")},{key:ff.C.FREE,label:(0,S.t)("community.landing_page.sort.free")}]]})}function fw({onUpdate:e,resourceType:t,isSearch:a,editorType:r}){return o.createElement(pL.A5,{name:(0,S.t)("community.landing_page.dropdown_filter__resource_type"),onUpdate:([t])=>{e(t)},initialValues:[t],adtlClassName:fE,options:[function(e,t){if(!e&&t===pN.k.Editors.DEV_MODE)return[{key:u5.L.BrowseResourceTypes.PLUGINS,label:(0,S.t)("community.view_bar.plugins")}];if(!e&&t===pN.k.Editors.PROTOTYPE||!e&&t===pN.k.Editors.SLIDES)return[{key:u5.L.BrowseResourceTypes.FILES,label:(0,S.t)("community.view_bar.files")}];let a=[{key:u5.L.BrowseResourceTypes.MIXED,label:(0,S.t)("community.view_bar.all_resources")},{key:u5.L.BrowseResourceTypes.FILES,label:(0,S.t)("community.view_bar.files")},{key:u5.L.BrowseResourceTypes.PLUGINS,label:(0,S.t)("community.view_bar.plugins")},{key:u5.L.BrowseResourceTypes.WIDGETS,label:(0,S.t)("community.view_bar.widgets")}];return e&&a.push({key:"profiles",label:(0,S.t)("community.view_bar.creators")}),a}(a,r)]})}function fT({onUpdate:e,value:t,isSearch:a,price:r}){return o.createElement(pL.A5,{name:(0,S.t)("community.curated_page.sort"),onUpdate:([t])=>e(t),initialValues:[t],options:[function(e,t){let a=[{key:pj.e.Shared.POPULAR,label:(0,S.t)("community.landing_page.sort.trending")},{key:pj.e.Shared.ALL_TIME,label:(0,S.t)("community.curated_page.popular")},{key:pj.e.Shared.PUBLISHED_AT,label:(0,S.t)("community.landing_page.sort.recent")}];return e&&(a.unshift({key:pj.e.Search.RELEVANCY,label:(0,S.t)("community.landing_page.sort.relevancy")}),t!==ff.C.FREE&&a.push({key:pj.e.Search.PRICE_DESC,label:(0,S.t)("community.landing_page.sort.price_high_to_low")},{key:pj.e.Search.PRICE_ASC,label:(0,S.t)("community.landing_page.sort.price_low_to_high")})),a}(a,r)]})}function fI({filterState:e,onUpdate:t,containerRef:a,context:r,allowedEditorTypes:n}){let{resourceType:l,editorType:i=pN.k.Editors.ALL,price:s,sortBy:c,creators:d=fg.Z.ALL}=e,m=(0,dx.N)(`(max-width: ${oQ._C6})`);return o.createElement("div",{className:"feed_controls--feedFilterControls--eiYSY","data-resource-type":l,ref:a,"data-feed-filter-context":r},o.createElement("div",{className:"feed_controls--leftSideControls--Xr-DO"},"category"===r&&o.createElement("div",{className:ef.cx.flex.itemsCenter.font14.fontMedium.$},(0,S.tx)("categories.filter_by")),o.createElement(ut.Ay,{mediaQuery:`(min-width: ${oQ.glm})`},"profiles"!==l&&o.createElement(fy,{onUpdate:e=>{let a=[{key:"editorType",value:e}];(0,cz.Oh)()||"search"===r||(e===pN.k.Editors.DEV_MODE?a.push({key:"resourceType",value:u5.L.BrowseResourceTypes.PLUGINS}):(e===pN.k.Editors.SLIDES||e===pN.k.Editors.PROTOTYPE)&&a.push({key:"resourceType",value:u5.L.BrowseResourceTypes.FILES})),"search"!==r&&e===pN.k.Editors.SLIDES&&a.push({key:"resourceType",value:u5.L.BrowseResourceTypes.FILES}),t(a),(0,tK.sx)("editor_type_filter_changed",{editor_type:e,from:i})},editorType:i,resourceType:l,allowedEditorTypes:(0,cz.Oh)()?n:void 0})),("explore"===r||"redesigned-homepage"===r||"category"===r||m)&&(i!==pN.k.Editors.SLIDES?o.createElement(fw,{onUpdate:e=>{let a=[{key:"resourceType",value:e}];i===pN.k.Editors.PROTOTYPE&&e!==u5.L.BrowseResourceTypes.FILES&&a.push({key:"editorType",value:pN.k.Editors.ALL}),t(a),(0,tK.sx)("resource_type_filter_changed",{resource_type:e,from:l})},resourceType:l,isSearch:"search"===r,editorType:i}):i===pN.k.Editors.SLIDES&&l!==u5.L.BrowseResourceTypes.FILES?(t([{key:"resourceType",value:u5.L.BrowseResourceTypes.FILES}]),null):void 0),o.createElement(fb,{onUpdate:e=>{let a=[{key:"price",value:e}];e===ff.C.FREE&&(c===pj.e.Search.PRICE_ASC||c===pj.e.Search.PRICE_DESC)&&a.push({key:"sortBy",value:pj.e.Shared.POPULAR}),t(a),(0,tK.sx)("price_filter_changed",{price:e,from:s})},value:s}),"category"!==r&&o.createElement(ut.Ay,{mediaQuery:`(min-width: ${oQ.ltq})`},o.createElement(fv,{onUpdate:e=>{t([{key:"creators",value:e}]),(0,tK.sx)("creators_filter_changed",{creators:e,from:d})},value:d,isSearch:"search"===r}))),"category"!==r&&"profiles"!==l&&o.createElement(fT,{onUpdate:e=>{t([{key:"sortBy",value:e}]),(0,tK.sx)("ranking_type_filter_changed",{ranking_type:e})},value:c,isSearch:"search"===r,price:s}))}a(218997),a(15839);var fx=a(976999);function fN(){return o.createElement("div",{className:"resource_loading_row--loadingRow--o1YwH","data-testid":"resource-loading-row"},o.createElement(fx.Qp,{className:"resource_loading_row--loadingRowImage--KGDsz",animationType:fx.JR.NO_SHIMMER}),o.createElement("div",{className:"resource_loading_row--loadingRowMeta--T19Be"},o.createElement(fx.Wi,{className:"resource_loading_row--loadingTitleText--qN-3G",animationType:fx.JR.NO_SHIMMER}),o.createElement(fx.Wi,{className:"resource_loading_row--loadingSubTitleText--26zTk",animationType:fx.JR.NO_SHIMMER})))}function fC({plugins:e,onIntersectionChange:t,isOrgTeamBrowsing:a,isLoading:r,loadingRowCount:n=10}){return o.createElement("div",{className:ef.cx.wFull.$,"data-testid":"plugin-list"},r?(0,cv.y1)(n).map(e=>o.createElement(fN,{key:e})):e.map((e,r)=>o.createElement(cq.mb,{key:`plugin-row-${e.id}`,resource:e,animationIndex:r%30,onIntersectionChange:a=>t(e,a.isIntersecting),isOrgTeamBrowsing:a,index:r})))}function fS(){return o.createElement("div",{className:ef.cx.flex.flexColumn.gap12.$,"data-testid":"resource-loading-tile"},o.createElement("div",{className:"resource_loading_tile--loadingImageWrapper--J9BDB"},o.createElement(fx.Qp,{className:"resource_loading_tile--loadingImage--yFmKa",animationType:fx.JR.NO_SHIMMER})),o.createElement("div",{className:ef.cx.flex.flexColumn.gap4.$},o.createElement(fx.Wi,{className:"resource_loading_tile--loadingTitleText--osfVq",animationType:fx.JR.NO_SHIMMER}),o.createElement(fx.Wi,{className:"resource_loading_tile--loadingSubTitleText--B4vzW",animationType:fx.JR.NO_SHIMMER})))}let fk="resource_tile_group--resourceTileGroup--gpDUh",fA="resource_tile_group--resourceTileGroupCarousel--Cy8Oc",fL="resource_tile_group--carouselCardWrapper--xwpG5";function fR({showCarousel:e,loadingTileCount:t}){return o.createElement(o.Fragment,null,(0,cv.y1)(t).map(t=>o.createElement("div",{key:t,className:ey()({[fL]:e},ef.cx.p1.$)},o.createElement(fS,{key:t}))))}function fD({resources:e,showCarousel:t,onIntersectionChange:a}){return o.createElement(o.Fragment,null,e.map((e,r)=>o.createElement("div",{key:e.id,className:ey()({[fL]:t},ef.cx.p1.$)},o.createElement(cq.fz,{resource:e,index:r,animationIndex:r%30,onIntersectionChange:t=>a(e,t.isIntersecting),subView:"communityHomepage"}))))}function fF({resources:e,maxGridDim:t,mobileMaxGridDim:a={rows:1},onIntersectionChange:r,mobileBreakpoint:n=oQ.ikM,xScrollLocked:l=!0,isLoading:i,loadingTileCount:s=6}){let c=(0,dx.N)(`(max-width: ${n})`),{rows:d,cols:m}=c&&a?a:t,u=i?s:e.length;if(!u)return null;m&&!d?d=Math.floor(u/m):d&&!m&&(m=Math.floor(u/d));let _=(m=m||1)*(d=d||1);u<_&&(d=Math.ceil(u/m),_=m*d);let p=e.slice(0,_),f=!!(c&&m&&m>1);if(l)return o.createElement("div",{className:ey()(fk,{[fA]:f}),style:{gridTemplateColumns:`repeat(${m}, 1fr)`,gridTemplateRows:`repeat(${d}, 1fr)`},"data-testid":"resource-tile-group"},i?o.createElement(fR,{showCarousel:f,loadingTileCount:_}):o.createElement(fD,{resources:p,showCarousel:f,onIntersectionChange:r}));let g=p.reduce((e,t,a)=>(Math.floor(a/m)>e.length-1&&e.push([]),e[e.length-1].push(t),e),[]);return o.createElement("div",{className:"resource_tile_group--nestedResourceTileGroup--PFO-3"},(0,cv.y1)(d).map(e=>o.createElement("div",{key:e,className:ey()(fk,{[fA]:f}),style:{gridTemplateColumns:`repeat(${m}, 1fr)`,gridTemplateRows:"1"},"data-testid":"resource-tile-group"},i?o.createElement(fR,{showCarousel:f,loadingTileCount:m}):o.createElement(fD,{resources:g[e],showCarousel:f,onIntersectionChange:r}))))}var fP=a(897088);function fM({editorType:e,resourceType:t,price:a,sortBy:r,limit:n,creators:l,category:i,tags:s},c=!0){let[d,m]=o.useState([]),[u,_]=o.useState(!1),[p,f]=o.useState(null),[g,E]=o.useState(),v=o.useRef((0,pW.nC)()),h=(0,o.useCallback)(async()=>{if(null==g?void 0:g.next_page){_(!0),f(null);try{let e=await (0,tQ.GD)(g.next_page);m(t=>[...t,...e.data.meta.resources]),E(e.data.pagination)}catch(e){console.error("Error fetching popular resources",e),f(e)}finally{_(!1)}}},[g]);return o.useEffect(()=>{let o=async()=>{_(!0),f(null);try{var o;let c=await v.current.filter({editor_type:(o={editorType:e,resourceType:t,price:a,sortBy:r,limit:n,creators:l,category:i,tags:s}).editorType,price:o.price,creators:o.creators,sort_by:o.sortBy,category:o.category,tags:o.tags}).browse(t,n??fP.b);m(c.data.meta.resources),E(c.data.pagination)}catch(e){console.error("Error fetching popular resources",e),f(e)}finally{_(!1)}};c&&o()},[t,e,a,r,n,l,i,c,s]),{resources:d,loading:u,error:p,loadMore:h,canLoadMore:v.current.isMoreToFetch(g)&&d.length>0}}let fO=()=>({sortBy:(0,pj.H)(),editorType:pN.k.Editors.ALL,price:ff.C.ALL,resourceType:u5.L.BrowseResourceTypes.MIXED});function fB({onIntersectionChange:e}){let t=(0,dx.N)(`(max-width: ${oQ.ikM})`),a=(0,dx.N)(`(max-width: ${oQ.g8m})`),[r,n]=(0,o.useState)(!0),[l,i]=(0,o.useState)(fO());(0,o.useEffect)(()=>{t&&i(fO())},[t]);let{resources:c,loadMore:d,canLoadMore:m,loading:u}=fM(l),_=(0,o.useRef)(null),p=(0,s.d4)(e=>{var t,a;return!!((null==(t=e.authedActiveCommunityProfile)?void 0:t.team_id)||(null==(a=e.authedActiveCommunityProfile)?void 0:a.org_id))});(0,o.useEffect)(()=>{r&&!u&&n(!1)},[r,u]);let f=l.resourceType===u5.L.BrowseResourceTypes.PLUGINS&&c.every(e=>"is_widget"in e&&!e.is_widget);return o.createElement("div",{className:"all_resources--allResources--vIYK6"},!t&&o.createElement(fI,{containerRef:_,filterState:l,onUpdate:e=>{let t={};e.forEach(({key:e,value:a})=>{t[e]=a}),i(e=>({...e,...t}))},context:"redesigned-homepage"}),f?o.createElement(fC,{plugins:c,onIntersectionChange:e,isOrgTeamBrowsing:p,isLoading:r}):o.createElement(fF,{resources:c,maxGridDim:a?{cols:2}:{cols:3},mobileMaxGridDim:{cols:1},onIntersectionChange:e,isLoading:r}),m&&!t&&o.createElement(dB,{onClick:e=>{e.preventDefault(),d()},isLoading:u,isMoreToFetch:m}))}var fU=a(711117),fV=a(646240);function fH({isRedesignedHomepage:e}){let t=(0,dx.N)(`(max-width: ${oQ.Ero})`),a=(0,dx.N)(`(max-width: ${oQ.ikM})`),{onSubmit:r,inSearchPath:n}=fr(),[l,i]=o.useState(""),s=(0,sJ.A)(r,400),c=o.useCallback(()=>{i("")},[]),d=!l||n||(e?a:t)?null:o.createElement("div",{className:e?"homepage_dropdown_search_input--redesignedHomepageDropdownContentsPositionWrapper--qJcZD":void 0},o.createElement(p7,{query:l,clearSearchInput:c,context:dL.PF.LANDING,width:(0,oI.jz)(oQ.eZi)}));return o.createElement("div",{className:e?"homepage_dropdown_search_input--redesignedHomepageSearchContainer--x42a- text--fontPos13--xW8hS text--_fontBase--QdLsd":"homepage_dropdown_search_input--homepageDropdownSearchContainer--OEViU"},o.createElement(pL.ms,{preview:d,className:e?"homepage_dropdown_search_input--redesignedHomepageDropdown--AsdzI dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd":"homepage_dropdown_search_input--dropdown--qY5GH dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd",disableRepositioning:!0},o.createElement(pH,{onChange:i,onSubmit:s,query:l,inSearchPath:n,inputPlaceholder:e?(0,S.t)("community.search.placeholder.search_for_a_resource"):(0,S.t)("community.search.search_everything_in_community"),context:dL.PF.LANDING,className:e?"homepage_dropdown_search_input--redesignedSearchInput--CoAYJ text--fontPos11--2LvXf text--_fontBase--QdLsd":"homepage_dropdown_search_input--searchInput--8x2Cp text--fontPos13--xW8hS text--_fontBase--QdLsd",searchIconClassName:e?"homepage_dropdown_search_input--redesignedHomepageSearchIcon--RcD8I":"homepage_dropdown_search_input--searchIcon--55Xdx",closeIconClassName:e?"homepage_dropdown_search_input--redesignedHomepageCloseIcon--8bE70":"homepage_dropdown_search_input--closeIcon--iurnp"})))}let fW="hero--pluginImg--OXkw4",fj="hero--header--PlMZA text--fontPos24--YppUD text--_fontBase--QdLsd",f$="hero--themedIcon--EfFFN";var fG=a(165690),fz=a(505045),fY=a(288495),fK=a(360957),fQ=a(945111),fq=a(261595),fX=a(353917),fJ=a(763939),fZ=a(962888),f0=a(746510),f1=a(181865),f2=a(156564),f4=a(18412),f8=a(69969),f3=a(793445);let f5={colorIllustration:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:-431.2,y:48,rotate:0},hover:{opacity:1,scale:1.15,x:-448.8,y:48,rotate:0}},transition:{delay:.05,type:"spring",bounce:.4,duration:.25},element:o.createElement(es.B,{className:"hero--colorIllustrations--SS5zw",svg:fK.A})},colorsIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:-374,y:-8,rotate:0},hover:{opacity:1,scale:1.15,x:-391.6,y:-8,rotate:0}},transition:{delay:0,type:"spring",bounce:.4,duration:.25},element:o.createElement(es.B,{className:f$,svg:fQ.A,style:{fill:(0,pr.TD)("default")}})},variableIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:-440,y:-16,rotate:0},hover:{opacity:1,scale:1.15,x:-457.6,y:-16,rotate:0}},transition:{delay:.075,type:"spring",bounce:.4,duration:.25},element:o.createElement(es.B,{className:f$,svg:f3.A,style:{fill:(0,pr.TD)("default")}})},designLibraryIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:169.4,y:-16,rotate:0},hover:{opacity:1,scale:1.15,x:187,y:-16,rotate:0}},transition:{delay:.075,type:"spring",bounce:.4,duration:.25},element:o.createElement(es.B,{className:f$,svg:f0.A,style:{fill:(0,pr.TD)("default")}})},typeIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:105.6,y:-8,rotate:0},hover:{opacity:1,scale:1.15,x:123.2,y:-8,rotate:0}},transition:{delay:0,type:"spring",bounce:.4,duration:.25},element:o.createElement(es.B,{className:f$,svg:f8.A,style:{fill:(0,pr.TD)("default")}})},componentIllustration:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:123.2,y:48,rotate:0},hover:{opacity:1,scale:1.15,x:140.8,y:48,rotate:0}},transition:{delay:.05,type:"spring",bounce:.4,duration:.25},element:o.createElement(es.B,{svg:fq.A,useOriginalSrcFills_DEPRECATED:!0,className:"hero--colorSwatches--Vz0OG"})}},f9={pluginIconTopLeft:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:-96.8,y:-24,rotate:16},hover:{opacity:1,scale:1.1,x:-114.4,y:-40,rotate:16}},transition:{delay:0,type:"spring",bounce:.4,duration:.25},element:o.createElement("img",{alt:"PluginIcon",className:fW,src:"https://static.figma.com/uploads/ebe89d33f7040c60d83a01887800a522babf7de7"})},pluginIconMiddleLeft:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:-171.6,y:-16,rotate:-16},hover:{opacity:1,scale:1.1,x:-180.4,y:-32,rotate:-16}},transition:{delay:.075,type:"spring",bounce:.4,duration:.25},element:o.createElement("img",{alt:"PluginIcon",className:fW,src:"https://static.figma.com/uploads/65c3bfafc5758245135ea68c46bf8649e08fc682"})},pluginIconBottomLeft:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:-110,y:16,rotate:-8},hover:{opacity:1,scale:1.1,x:-127.6,y:16,rotate:-8}},transition:{delay:.05,type:"spring",bounce:.4,duration:.25},element:o.createElement("img",{alt:"PluginIcon",className:fW,src:"https://static.figma.com/uploads/4c694b59552bdaf728d6bbad5c5603c08e768dde"})},pluginIconTopRight:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:393.8,y:-24,rotate:-16},hover:{opacity:1,scale:1.1,x:400.4,y:-40,rotate:-16}},transition:{delay:0,type:"spring",bounce:.4,duration:.25},element:o.createElement("img",{alt:"PluginIcon",className:fW,src:"https://static.figma.com/uploads/2a50b4b29af5a21bde6c7b4ef8cdfd97a2b16a39"})},pluginIconMiddleRight:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:448.8,y:-16,rotate:16},hover:{opacity:1,scale:1.1,x:466.4,y:-32,rotate:16}},transition:{delay:.075,type:"spring",bounce:.4,duration:.25},element:o.createElement("img",{alt:"PluginIcon",className:fW,src:"https://static.figma.com/uploads/0d28516cbda0bfcf87b214c919c6ed52f3358efb"})},pluginIconBottomRight:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:400.4,y:16,rotate:8},hover:{opacity:1,scale:1.1,x:418,y:16,rotate:8}},transition:{delay:.05,type:"spring",bounce:.4,duration:.25},element:o.createElement("img",{alt:"PluginIcon",className:fW,src:"https://static.figma.com/uploads/34cf09b757fec1181abee8d8ece8a06ee0383408"})}},f6={heartIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:48.4,y:-76,rotate:0},hover:{opacity:1,scale:1,x:48.4,y:-88,rotate:0}},transition:{delay:.075,type:"spring",bounce:.4,duration:.25},element:o.createElement(es.B,{svg:fJ.A,style:{fill:"none",stroke:(0,pr.TD)("default")}})},libraryIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:-8.8,y:-64,rotate:-8.5},hover:{opacity:1,scale:1,x:-26.4,y:-72,rotate:-8.5}},transition:{type:"spring",bounce:.4,duration:.25},element:o.createElement(es.B,{svg:fZ.A,style:{fill:"none",stroke:(0,pr.TD)("default")}})},emojiIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:96.8,y:-64,rotate:6},hover:{opacity:1,scale:1,x:114.4,y:-72,rotate:6}},transition:{delay:.05,type:"spring",bounce:.4,duration:.25},element:o.createElement(es.B,{svg:fX.A,style:{fill:"none",stroke:(0,pr.TD)("default")}})},chatIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:158.4,y:-80,rotate:0},hover:{opacity:1,scale:1,x:178.2,y:-88,rotate:0}},transition:{delay:.125,type:"spring",bounce:.4,duration:.25},element:o.createElement(es.B,{svg:fY.A,style:{fill:"none",stroke:(0,pr.TD)("default")}})},profileIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:-79.2,y:-80,rotate:0},hover:{opacity:1,scale:1,x:-96.8,y:-88,rotate:0}},transition:{delay:.125,type:"spring",bounce:.4,duration:.25},element:o.createElement(es.B,{svg:f2.A,style:{fill:"none",stroke:(0,pr.TD)("default")}})},mentionIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:-162.8,y:12,rotate:0},hover:{opacity:1,scale:1,x:-180.4,y:20,rotate:0}},transition:{delay:.075,type:"spring",bounce:.4,duration:.25},element:o.createElement(es.B,{svg:f1.A,style:{fill:"none",stroke:(0,pr.TD)("default")}})},asterikIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:-187,y:-32,rotate:0},hover:{opacity:1,scale:1,x:-215.6,y:-32,rotate:0}},transition:{delay:.15,type:"spring",bounce:.4,duration:.25},element:o.createElement(es.B,{svg:fG.A,style:{fill:"none",stroke:(0,pr.TD)("default")}})},settingsIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:237.6,y:12,rotate:0},hover:{opacity:1,scale:1,x:255.2,y:20,rotate:0}},transition:{delay:.0725,type:"spring",bounce:.4,duration:.25},element:o.createElement(es.B,{svg:f4.A,style:{fill:"none",stroke:(0,pr.TD)("default")}})},bookmarkIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:281.6,y:-32,rotate:0},hover:{opacity:1,scale:1,x:299.2,y:-32,rotate:0}},transition:{delay:.15,type:"spring",bounce:.4,duration:.25},element:o.createElement(es.B,{svg:fz.A,style:{fill:"none",stroke:(0,pr.TD)("default")}})}};function f7({elements:e,elementWrapperClassname:t,text:a,onMouseEnter:r,onMouseLeave:n,isActive:l}){return o.createElement(fU.P.span,{className:ef.cx.colorTextBrand.$,variants:{hidden:{opacity:.9},hover:{opacity:1}},initial:"hidden",animate:l?"hover":"hidden"},o.createElement("span",{className:ey()("hero--textElement--lpZt8",{"hero--highlightedTextElement--Z3Qhc":l}),onMouseEnter:r,onMouseLeave:n},a),o.createElement("div",{className:t,"aria-hidden":!0},Object.entries(e).map(([e,t])=>o.createElement(fU.P.span,{className:ef.cx.absolute.top0.left0.eventsNone.$,key:e,variants:t.variants,transition:t.transition},t.element))))}let ge=(e,t)=>{r=setTimeout(()=>{e(e=>(e+1)%6),gt(e)},t??500)},gt=e=>{r=setTimeout(()=>{e(e=>(e+1)%6),ge(e)},3e3)};function ga(){let e=(0,dx.N)(`(max-width: ${(0,oI.jz)(oQ.ikM)-1}px)`),[t,a]=o.useState(2*Math.floor(3*Math.random())),[n,l]=o.useState(null);(0,o.useEffect)(()=>(ge(a),()=>{clearTimeout(r)}),[]),(0,o.useEffect)(()=>{null!==n?(clearTimeout(r),r=void 0,a(e=>e%2==1?(e+1)%6:e)):r||ge(a,3e3)},[n]);let i=t%2==0?null:Math.ceil(t/2),s=n??i;return e?o.createElement(o.Fragment,null,o.createElement("h1",{className:fj},(0,S.tx)("community.homepage.mobile_header")),o.createElement("div",{className:"hero--subHeader--74gIe text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,S.tx)("community.homepage.mobile_subheader"))):o.createElement("h1",{className:fj},(0,S.tx)("community.homepage.header",{librariesLink:o.createElement(f7,{elements:f5,elementWrapperClassname:"hero--libraryElementsWrapper--8uOC3",text:(0,S.t)("community.homepage.header_libraries"),onMouseEnter:()=>l(1),onMouseLeave:()=>l(null),isActive:1===s}),pluginsLink:o.createElement(f7,{elements:f9,elementWrapperClassname:"hero--pluginElementsWrapper--E7QTs",text:(0,S.t)("community.homepage.header_plugins"),onMouseEnter:()=>l(2),onMouseLeave:()=>l(null),isActive:2===s}),iconSetsLink:o.createElement(f7,{elements:f6,elementWrapperClassname:"hero--iconElementWrapper--UvEtl",text:(0,S.t)("community.homepage.header_icon_sets"),onMouseEnter:()=>l(3),onMouseLeave:()=>l(null),isActive:3===s})}))}function gr(){let e=(0,fV.Xr)(pR);return o.createElement("div",{className:"hero--hero--a1ML6"},o.createElement(ga,null),o.createElement(fH,{isRedesignedHomepage:!0}),o.createElement(cK.a,{callback:(0,o.useCallback)(t=>{e(t[0].isIntersecting)},[e]),cleanupCallback:(0,o.useCallback)(()=>e(!1),[e])}))}let gn=(0,o.forwardRef)(({href:e,navigate:t,title:a,onClick:r,categoryHighlight:n},l)=>{let i=(0,dx.N)(`(max-width: ${oQ.ikM})`);return o.createElement("div",{ref:l,key:n.category,className:"homepage_categories_highlight--homepageCategoriesHighlightItemWrapper--iQwAJ"},o.createElement("div",{className:"homepage_categories_highlight--homepageCategoriesHighlightItem--peoMf",onClick:e=>{r&&r(e),t()},tabIndex:0,role:"link","aria-label":a},o.createElement("div",{className:"homepage_categories_highlight--homepageCategoryHighlightCard--25fAI"},o.createElement("div",{className:"homepage_categories_highlight--homepageCategoryHighlightCardTitleAndSubtitle--T8YwD"},o.createElement("a",{className:"homepage_categories_highlight--homepageCategoryHighlightCardTitle--9FmzL text--fontPos13--xW8hS text--_fontBase--QdLsd",href:e,onClick:e=>{e.preventDefault()}},a),o.createElement("div",{className:"homepage_categories_highlight--homepageCategoryHighlightCardSubheader--EXycZ text--fontPos11--2LvXf text--_fontBase--QdLsd"},n.text)),o.createElement("div",{className:"homepage_categories_highlight--homepageCategoryHighlightCardImageContainer--lOChl"},o.createElement("img",{alt:a,src:i&&n.mobileSrc?n.mobileSrc:n.src,className:ey()("homepage_categories_highlight--homepageCategoryHighlightCardImage--HD0cW"),"data-category":n.category})))))});function gl({categoryHighlights:e}){return o.createElement("div",{className:"homepage_categories_highlight--homepageCategoriesHighlight--XCng9"},e.map(e=>{let t=new dR.IE({categorySlug:e.category});return o.createElement(O.o3,{key:e.category,to:t.href,trackingEventName:"community_homepage_category_highlight_clicked",trackingProperties:{slug:e.category},title:py(e.category),href:t.href,categoryHighlight:e,component:gn})}))}var gi=a(171603);function go({buttonLabel:e,route:t}){return o.createElement(O.L0,{className:"homepage_section--viewAllLinks--ZxJcd text--fontPos13--xW8hS text--_fontBase--QdLsd",onClick:e=>{(0,uX.qG)(t.href,e)},href:t.href,trackingEventName:"community_homepage_section_link_clicked",trackingProperties:{slug:t.pathname}},e,o.createElement(es.B,{svg:gi.A,className:"homepage_section--chevron--alHAr"}))}function gs({header:e,subHeader:t,buttonLabel:a,route:r,content:n}){return o.createElement("div",{className:ef.cx.wFull.$},o.createElement("div",{className:ef.cx.alignLeft.pb16.$},o.createElement("h3",{className:ef.cx.fontMedium.font15.lh24.$},e),o.createElement("div",{className:"homepage_section--subheaderAndLink---Rv7r"},t&&o.createElement("div",{className:ef.cx.font13.colorTextSecondary.lh24.pt4.$},t),a&&r&&o.createElement(go,{buttonLabel:a,route:r}))),n)}let gc=(0,nL.Fu)(i9.E_);function gd(){let e=(0,s.wA)(),t=(0,aJ.md)(gc);return(null==t?void 0:t.status)!=="loaded"||(null==t?void 0:t.status)==="loaded"&&(null==t?void 0:t.data)?null:o.createElement(O.fu,{name:"cmty_slides_promo_banner"},o.createElement("div",{className:"slides_promo_banner--banner--C7dcs","data-editor-theme":"piper"},o.createElement("div",{className:"slides_promo_banner--iconContainer--HC1lS"},o.createElement(ax.oS,{type:ax.y1.SLIDES,size:ax.LE.MEDIUM})),o.createElement("div",{className:"slides_promo_banner--description--DybQR text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,S.tx)("community.homepage.slides_promo_banner")),o.createElement(O.L0,{name:"slides_promo_banner_cta",className:"slides_promo_banner--ctaButton--g9W36 text--fontPos11--2LvXf text--_fontBase--QdLsd",href:"https://www.figma.com/slides/",target:"_blank"},(0,S.tx)("community.learn_more")),o.createElement(e_.Jn,{onClick:()=>{e(P.b({[i9.E_]:!0}))},className:"slides_promo_banner--dismissButton--8RidG","aria-label":(0,S.t)("banner.shared.close_banner")})))}let gm=e=>`${e.id}---${(0,cG.Vm)(e)}`,gu=e=>{let[t,a]=e.split("---");return{id:t,type:a}};function g_({debounceWaitInMs:e=1e3,extraProperties:t={}}={}){let{name:a=t3.e0.COMMUNITY_HUB,properties:r}=(0,O.j6)(),n=(0,o.useRef)([]),l=(0,o.useRef)(new Set),i=(0,o.useCallback)(e=>{if(0===n.current.length)return;let l=[],i=[];n.current.forEach(e=>{let{id:t,type:a}=gu(e);l.push(t),i.push(a)}),(0,tK.sx)("hub_impressed_resources",{impressedItems:l,impressedItemTypes:i,trackingContext:a,...r,...t},{sendAsBeacon:e}),n.current=[]},[t,a,r]),s=(0,o.useMemo)(()=>(0,ei.s)(i,e),[e,i]);return(0,o.useEffect)(()=>s.flush,[s]),(0,o.useEffect)(()=>{let e=()=>{"hidden"===document.visibilityState&&i(!0)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[i]),{trackResourceImpression:(0,o.useCallback)(e=>{let t=gm(e);l.current.has(t)||(l.current.add(t),n.current.push(t),s())},[s]),flushAndResetResourceImpressions:(0,o.useCallback)(()=>{s.flush(),l.current.clear()},[s])}}function gp(){let e=(0,dx.N)(`(max-width: ${oQ.g8m})`)?{rows:3,cols:2}:{rows:2,cols:3},{trackResourceImpression:t}=g_(),{resources:a,loading:r}=function({limit:e}={limit:fP.b}){let[t,a]=(0,o.useState)([]),[r,n]=(0,o.useState)(!1),[l,i]=(0,o.useState)(null),s=(0,o.useRef)((0,pW.nC)());return(0,o.useEffect)(()=>{n(!0),i(null),s.current.filter({editor_type:pN.k.Editors.SLIDES,sort_by:(0,pj.H)()}).browse(u5.L.BrowseResourceTypes.FILES,e).then(e=>{a(e.data.meta.resources)}).catch(e=>{console.error("Error fetching popular slide templates",e),i(e)}).finally(()=>n(!1))},[e]),{resources:t,loading:r,error:l}}(),{resources:n,loading:l}=function({limit:e}={limit:fP.b}){let[t,a]=(0,o.useState)([]),[r,n]=(0,o.useState)(!1),[l,i]=(0,o.useState)(null),s=(0,o.useRef)((0,pW.nC)());return(0,o.useEffect)(()=>{n(!0),i(null),s.current.filter({editor_type:pN.k.Editors.FIGMA,sort_by:(0,pj.H)()}).browse(u5.L.BrowseResourceTypes.FILES,e).then(e=>{a(e.data.meta.resources)}).catch(e=>{console.error("Error fetching popular figma files",e),i(e)}).finally(()=>n(!1))},[e]),{resources:t,loading:r,error:l}}(),{resources:i,loading:s}=function({limit:e}={limit:fP.N}){let[t,a]=(0,o.useState)([]),[r,n]=(0,o.useState)(!1),[l,i]=(0,o.useState)(null),s=(0,o.useRef)((0,pW.nC)());return(0,o.useEffect)(()=>{n(!0),i(null),s.current.filter({category:dL.LJ.designTools,sort_by:(0,pj.H)()}).browse(u5.L.BrowseResourceTypes.PLUGINS,e).then(e=>{a(e.data.meta.resources)}).catch(e=>{console.error("Error fetching popular plugins",e),i(e)}).finally(()=>n(!1))},[e]),{resources:t,loading:r,error:l}}(),{resources:c,loading:d}=function({limit:e}={limit:fP.b}){let[t,a]=(0,o.useState)([]),[r,n]=(0,o.useState)(!1),[l,i]=(0,o.useState)(null),s=(0,o.useRef)((0,pW.nC)());return(0,o.useEffect)(()=>{n(!0),i(null),s.current.filter({editor_type:pN.k.Editors.FIGJAM,sort_by:(0,pj.H)()}).browse(u5.L.BrowseResourceTypes.FILES,e).then(e=>{a(e.data.meta.resources)}).catch(e=>{console.error("Error fetching popular figjam files",e),i(e)}).finally(()=>n(!1))},[e]),{resources:t,loading:r,error:l}}(),{resources:m,loading:u}=function({limit:e}={limit:fP.b}){let[t,a]=(0,o.useState)([]),[r,n]=(0,o.useState)(!1),[l,i]=(0,o.useState)(null),s=(0,o.useRef)((0,pW.nC)());return(0,o.useEffect)(()=>{n(!0),i(null),s.current.filter({category:dL.LJ.whiteboarding,sort_by:(0,pj.H)()}).browse(u5.L.BrowseResourceTypes.WIDGETS,e).then(e=>{a(e.data.meta.resources)}).catch(e=>{console.error("Error fetching popular widgets",e),i(e)}).finally(()=>n(!1))},[e]),{resources:t,loading:r,error:l}}(),{slideTemplatesRoute:p,designResourcesRoute:f,pluginsRoute:g,figjamAssetsRoute:E,widgetsRoute:v}=(0,o.useMemo)(()=>({slideTemplatesRoute:new dR.IE({categorySlug:dL.LJ.presentations}),designResourcesRoute:new dR.IE({categorySlug:dL.LJ.designTemplates}),pluginsRoute:new dR.IE({categorySlug:dL.LJ.designTools},{resource_type:"plugins"}),figjamAssetsRoute:new dR.IE({categorySlug:dL.LJ.whiteboarding}),widgetsRoute:new dR.IE({categorySlug:dL.LJ.whiteboarding},{resource_type:u5.L.BrowseResourceTypes.WIDGETS})}),[]),h=(0,o.useCallback)((e,a)=>{a&&t(e)},[t]);return o.createElement("div",{className:"homepage--homepageContainer--q0JuX"},o.createElement("div",{className:"homepage--homepageContent--XDBs9"},o.createElement(gr,null),(0,_.kc)().piper_cmty_home_banner&&o.createElement(gd,null),o.createElement("div",{className:"homepage--homepageSectionsContainer--rXSN9"},o.createElement(gs,{header:(0,S.t)("community.homepage.slides_section.header"),subHeader:(0,S.t)("community.homepage.slides_section.sub_header"),buttonLabel:(0,S.t)("community.homepage.slides_section.browse_all"),route:p,content:o.createElement(fF,{resources:a,maxGridDim:e,onIntersectionChange:h,isLoading:r,loadingTileCount:6})}),o.createElement(gs,{header:(0,S.t)("community.homepage.figma_section.header"),subHeader:(0,S.t)("community.homepage.figma_section.sub_header"),buttonLabel:(0,S.t)("community.homepage.figma_section.browse_all"),route:f,content:o.createElement(fF,{resources:n,maxGridDim:e,onIntersectionChange:h,isLoading:l,loadingTileCount:6})}),o.createElement(gs,{header:(0,S.t)("community.view_bar.plugins"),subHeader:(0,S.t)("community.homepage.plugins_section.sub_header"),buttonLabel:(0,S.t)("community.homepage.plugins_section.browse_all"),route:g,content:o.createElement(fC,{plugins:i,onIntersectionChange:h,isOrgTeamBrowsing:!1,isLoading:s,loadingRowCount:10})}),o.createElement(gs,{header:(0,S.t)("community.homepage.figjam_section.header"),subHeader:(0,S.t)("community.homepage.figjam_section.sub_header"),buttonLabel:(0,S.t)("community.homepage.figjam_section.browse_all"),route:E,content:o.createElement(fF,{resources:c,maxGridDim:e,onIntersectionChange:h,isLoading:d,loadingTileCount:6})}),o.createElement(gs,{header:(0,S.t)("community.view_bar.widgets"),subHeader:(0,S.t)("community.homepage.widgets.sub_header"),buttonLabel:(0,S.t)("community.homepage.widgets.browse_all"),route:v,content:o.createElement(fF,{resources:m,maxGridDim:e,onIntersectionChange:h,isLoading:u,loadingTileCount:6})}),o.createElement(gs,{header:(0,S.t)("community.homepage.categories_section.header"),subHeader:(0,S.t)("community.homepage.categories_section.sub_header"),content:o.createElement(gl,{categoryHighlights:[{category:dL.LJ.designTemplates,src:"https://static.figma.com/uploads/f35144ac6be1301b0c300fdb5ba0761f85d610da",mobileSrc:"https://static.figma.com/uploads/d09077ccb81fdbb9d927f28eab6d6aff62def241",text:(0,S.t)("categories.homepage_highlight.design_templates")},{category:dL.LJ.uiKits,src:"https://static.figma.com/uploads/6b7af7165268ef5a4d90fc48f1a9d311bb52780a",mobileSrc:"https://static.figma.com/uploads/bbe5c1f9cc2c99dce19c64a5c3667bac836def1d",text:(0,S.t)("categories.homepage_highlight.ui_kits")},{category:dL.LJ.icons,src:"https://static.figma.com/uploads/12cea3d845a2aebb7027af6890160caeb7e4ce9f",mobileSrc:"https://static.figma.com/uploads/478f606904a2341a2b01fb2ef3cafb9f63b29f79",text:(0,S.t)("categories.homepage_highlight.icons")},{category:dL.LJ.designTools,src:"https://static.figma.com/uploads/404bbfd2c09daf145970196f3d762807fd711299",text:(0,S.t)("categories.homepage_highlight.design_tools")},{category:dL.LJ.visualAssets,src:"https://static.figma.com/uploads/8857bb67fa108380ce502139054754c89feb9f3e",mobileSrc:"https://static.figma.com/uploads/3a887f58127d5e03c61c7884b9fce47ae6c6c16b",text:(0,S.t)("categories.homepage_highlight.visual_assets")},{category:dL.LJ.whiteboarding,src:"https://static.figma.com/uploads/e1915a29a858e7c0d717471cf0108aeba02c7dbe",mobileSrc:"https://static.figma.com/uploads/bfeb514427f6279d7e6b4902a38fd7f576b394e4",text:(0,S.t)("categories.homepage_highlight.whiteboarding")}]})}),o.createElement(gs,{header:(0,S.t)("community.view_bar.all_resources"),content:o.createElement(fB,{onIntersectionChange:h})}),o.createElement("div",{className:ef.cx.wFull.$},o.createElement(dM,null)))))}var gf=a(746058),gg=a(291129),gE=a(336599),gv=a(163056);let gh=[{img:"https://static.figma.com/uploads/49e43aec887df7422ff9643d11465bcdeded548e",color:dU.WGG},{img:"https://static.figma.com/uploads/c00f8b3e0cd9a66eb8c4ee4e6d307fff82c9ab27",color:dU.WGG},{img:"https://static.figma.com/uploads/3f772c66c1cddf1d0b6c5f8f41395bcafd135566",color:dU.WGG},{img:"https://static.figma.com/uploads/960d3a00ab8d8c4db2f27b7814c911ae974c770b",color:dU.BYv},{img:"https://static.figma.com/uploads/cda2753116908ec0abf57b611934479cebbcdbeb",color:dU.BYv},{img:"https://static.figma.com/uploads/37f4db88a8104a239f3d761763f8d7e0826d7765",color:dU.BYv}];function gy({profileId:e,profile:t}){let a=(0,s.d4)(e=>e.loadingState),[r,n]=o.useState((0,mu.g)()),l=o.useRef(null),i=(0,s.wA)(),c=(0,s.d4)(e=>(0,ou.jG)(t,e)),d=(0,ou.si)(t),m=(0,_.kc)().cmty_deprecate_browse_as_admin?d:c,u=fo.Ai.loadingKeyForPayload({profileId:e}),p=(0,gE.VP)(a,u),f=t=>{null!=t&&i(fo.Ai({profileId:e,file:t,onSuccessCallback:g}))},g=()=>{n((0,mu.g)())},E=async()=>{var e;try{let t=null==(e=l.current)?void 0:e.files;if(!t||0===t.length||!t[0])throw Error("File not found");let a=t[0];(0,ou.YU)(a);let r=await (0,m3.l8)(URL.createObjectURL(a));if(r.width>ou.M0||r.height>ou.Zs)throw Error((0,S.t)("community.profiles.cover_image_must_be_less_than_dimensions",{PROFILE_COVER_IMAGE_MAX_WIDTH:ou.M0,PROFILE_COVER_IMAGE_MAX_HEIGHT:ou.Zs}));if(r.width<ou.gZ||r.height<ou.xj)throw Error((0,S.t)("community.profiles.cover_image_must_be_at_least_dimensions",{PROFILE_COVER_IMAGE_MIN_WIDTH:ou.gZ,PROFILE_COVER_IMAGE_MIN_HEIGHT:ou.xj}));f(a)}catch(e){i(C.s.error(e.message))}l.current&&(l.current.value="")};return o.createElement("div",{className:"profile_header--profileHeaderContainer--C-0mY",key:null==t?void 0:t.cover_image_path,style:{backgroundColor:dU.Bj4,...(null==t?void 0:t.redirect_cover_image_url)?{backgroundImage:`url(${t.redirect_cover_image_url}?${r})`}:function(e){if(null==e||!e.id)return;let t=gh[parseInt(e.id.length>=4?e.id.slice(e.id.length-4):"0")%gh.length];return{backgroundImage:`url(${t.img})`,backgroundColor:t.color}}(t)}},o.createElement("div",{className:"profile_header--profileHeaderAvatarContainer--1REx-"},o.createElement(eV.Ro,{entity:{...t,img_url:(null==t?void 0:t.img_urls["500_500"])||(null==t?void 0:t.img_url)||void 0},size:96,className:"profile_header--avatarBackground--5XTWL"})),m&&o.createElement(o.Fragment,null,o.createElement("input",{type:"file",accept:"image/*",ref:l,onChange:E,style:{display:"none"}}),o.createElement(es.B,{svg:gv.A,className:"profile_header--uploadIcon--FFtoL",onClick:()=>{var e;null==(e=l.current)||e.click()}}),p&&o.createElement(tc.qc,null)))}gy.displayName="ProfileHeader";var gb=a(183297),gw=a(107897),gT=a(153234),gI=a(908968);let gx=/(https?:\/\/)?(www\.)?figma.com\/@/;function gN(e){return o.createElement(gw.A,{options:{target:{url:"_blank"},attributes:{rel:"noopener nofollow ugc",onMouseDown:e=>{e.preventDefault(),e.stopPropagation()}},className:"formatted_expanding_textarea--blueLink--GWaek blue_link--blueLink--9rlnd",format:e=>e.replace(gx,"@")}},e)}class gC extends gT.uA{constructor(e){super(e),this.onChange=e=>{this.setState({value:e.target.value})},this.onMouseDown=e=>{this.props.readOnly||e.preventDefault(),this.setState({isEditing:!0})},this.onFocus=()=>{this.state.isEditing||this.setState({isEditing:!0})},this.onSubmit=e=>{this.props.submit&&this.props.submit(e)},this.onBlur=()=>{this.setState({isEditing:!1})},this.state={value:this.props.value,isEditing:!1}}componentDidUpdate(e){this.props.value!==e.value&&this.setState({value:this.props.value})}renderFormattedValue(){return o.createElement("div",{dir:"auto",className:"formatted_expanding_textarea--value--XJ2Gh"},this.props.formatter?this.props.formatter(this.state.value):this.state.value)}renderPlaceholder(){return o.createElement("div",{className:"formatted_expanding_textarea--placeholder--JJ8AZ"},this.props.readOnly?"":this.props.placeholder)}render(){let e=!this.props.readOnly&&this.state.isEditing,t=["formatted_expanding_textarea--container--3NuYC text--fontPos13--xW8hS text--_fontBase--QdLsd",e?"formatted_expanding_textarea--editMode--wvP9s":"formatted_expanding_textarea--viewMode--GHMnM",this.props.readOnly?"formatted_expanding_textarea--readOnly--w19iZ":"formatted_expanding_textarea--canEdit--UVjHq",this.props.className||""].join(" ");return o.createElement("div",{className:t,onMouseDown:this.onMouseDown,onFocus:this.onFocus,tabIndex:0},!e&&(this.state.value?this.renderFormattedValue():this.renderPlaceholder()),e&&o.createElement(gI.v,{maxLength:this.props.maxLength||1e4,onChange:this.onChange,value:this.state.value,placeholder:this.props.placeholder,submit:this.onSubmit,onBlur:this.onBlur,selectOnMount:!0,className:"formatted_expanding_textarea--expandingTextarea--LLtsJ"}))}}gC.displayName="FormattedExpandingTextarea";var gS=a(752207),gk=a(361656),gA=a(370855),gL=a(709595),gR=a(410424),gD=a(941381),gF=a(301400),gP=a(93623),gM=a(492330),gO=a(354438),gB=a(746738);function gU(){return o.createElement(o.Fragment,null,o.createElement("div",{className:"monetization_metrics_tab_onboarding_modal--title--IfgQI text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,S.t)("community.seller.profiles.check_out_your_stats")),o.createElement("div",{className:"monetization_metrics_tab_onboarding_modal--description--2j8hj"},(0,S.t)("community.seller.profiles.added_some_metrics")))}let gV="metrics_tab_onboarding_key",gH="community_hub_view_bar--stickyHeaderIsSticky--jlnEf";class gW extends o.PureComponent{render(){return o.createElement("div",{className:`community_hub_view_bar--viewBar--T8-MS ${this.props.className||""}`},this.props.children)}}let gj=(0,s.Ng)(e=>({user:e.user||null}))(gW);class g$ extends o.PureComponent{constructor(){super(...arguments),this.headerContentRef=o.createRef(),this.onIntersectionChange=e=>{this.node&&(e.isIntersecting?this.node.classList.remove(gH):e.boundingClientRect.y<window.innerHeight&&this.node.classList.add(gH))}}render(){return o.createElement("div",{className:["community_hub_view_bar--container--PBrf3",this.props.user?"community_hub_view_bar--viewBarSignedInSticky--swRMi":"community_hub_view_bar--viewBarSignedOutSticky--fpGkz"].join(" "),ref:e=>this.node=e},o.createElement(r4.a,{onIntersectionChange:this.onIntersectionChange,className:this.props.user?"community_hub_view_bar--scrollSentinelSignedIn--u73PI":"community_hub_view_bar--scrollSentinelSignedOut--9xL9d"}),o.createElement(gj,null,o.createElement("div",{ref:this.headerContentRef},this.props.children)))}}var gG=a(402609),gz=a(147829),gY=a(746806),gK=a(63666);let gQ=(0,nL.r1)(i9.e9);function gq({onboardingKey:e}){let t=(0,aJ.md)(gQ),a=(0,nk.e)({overlay:nP.O9D,priority:nR.N.SECONDARY_MODAL},[t]);return(0,u.h)(()=>{a.show({canShow:e=>!e})}),(0,fh.E)(a.uniqueId,"profile-metrics-tab-clicked",()=>{a.isShowing&&a.complete()}),o.createElement(gz.M,{isShowing:a.isShowing,userFlagOnShow:i9.e9},o.createElement(O.fu,{name:"Community monetization creator dashboard onboarding"},o.createElement(gK.NJ,{targetKey:e,width:300,topPadding:16,shouldCenterArrow:gY.EL.FALLBACK,dismissModal:a.complete},o.createElement(gU,null))))}var gX=a(677664),gJ=a(320741);let gZ=(0,rP.nF)(async(e,t,{loadingKey:a})=>{var r;try{let n=tQ.Ay.post("/api/community/seller/stripe_dashboard");(0,gJ.N)(n,e,a);let l=await n;if(!(null==(r=null==l?void 0:l.data)?void 0:r.meta)){null==t||t.callback(!1);return}let i=l.data.meta;e.dispatch((0,gX.RK)({rawInput:i})),setTimeout(()=>{null==t||t.callback(!0)},1e3)}catch(e){null==t||t.callback(!1)}});var g0=a(583894),g1=a(607121),g2=a(596578),g4=a(139387);let g8=(0,eU.Ju)(function(){let e=(0,s.wA)(),t=(0,$.iZ)(),[a,r]=o.useState([]),[n,l]=o.useState(!0),[i,c]=o.useState(!0),[d,m]=o.useState(!1),[_,p]=o.useState(!1),g=o.useRef(null);(0,u.h)(()=>{g2.C.getCmtyCreatorPayoutStatements({userId:null==t?void 0:t.id}).then(({data:e})=>{l(!1),r(e.meta)}).catch(()=>{e(ec.F.enqueue({type:"get-payout-statements-error",message:(0,S.t)("community.seller.payout_statement_error"),error:!0}))})});let E=e=>new Date(e.year,e.month-1).toLocaleDateString(void 0,{year:"numeric",month:"long"}),v="creator_payout_statements_modal--scrollContainer--8j6P4";return _&&(i||(v+=" creator_payout_statements_modal--topBorder--OHBCp"),d||(v+=" creator_payout_statements_modal--bottomBorder--tNtIc")),o.createElement(ej.Rw,{title:(0,S.t)("community.seller.community_payout_statements"),titleClassName:"creator_payout_statements_modal--title--t9wed",confirmText:(0,S.t)(0===a.length?"general.got_it":"general.done"),onConfirm:f.lQ,hideConfirmationTitle:!0,hideCancel:!0},n?o.createElement("div",{className:"creator_payout_statements_modal--loadingSpinner--HMTTZ"},o.createElement(tc.kt,null)):o.createElement("div",null,0===a.length&&o.createElement("div",null,(0,S.tx)("community.seller.no_payout_statements_yet")),a.length>0&&o.createElement(o.Fragment,null,o.createElement("div",null,(0,S.tx)("community.seller.click_to_download_statements")),o.createElement(ep.P,{className:v,ref:g,onCanScrollChange:e=>{p(e)},onScroll:(e,t)=>{c(0===e),m(e+t.trackHeight>=t.scrollHeight)}},a.map(e=>o.createElement("a",{className:"creator_payout_statements_modal--payoutStatementRow--4fDH3",key:`payout-statement-${e.year}-${e.month}`,href:e.signed_s3_url,download:`payout_statement_${e.year}_${e.month}.csv`},o.createElement(es.B,{svg:g4.A}),E(e)))))))},"CreatorPayoutStatementsModal");var g3=a(647079);let g5="profile_resources_grid--tabContainer--UsmoU",g9="profile_resources_grid--tabLink--8x9Of text--fontPos14--OL9Hp text--_fontBase--QdLsd",g6="profile_resources_grid--tabBadge--l97Nx",g7="profile_resources_grid--labelBadgeContainer--gc9j0",Ee="profile_resources_grid--selected--6CtGL",Et="profile_resources_grid--newBadge--LOtSf",Ea="profile_resources_grid--profileData--yzCa5 text--fontPos13--xW8hS text--_fontBase--QdLsd",Er="profile_resources_grid--profileDataReadOnly--Juje2 profile_resources_grid--profileData--yzCa5 text--fontPos13--xW8hS text--_fontBase--QdLsd",En="profile_resources_grid--followsData--WkXSx",El="profile_resources_grid--followsDataClickable--PHNwr",Ei="profile_resources_grid--followsDataCount--MoS2I",Eo="profile_resources_grid--loadingContainer--hsPEQ",Es="profile_resources_grid--loadingMoreContainer--jp4W1 profile_resources_grid--loadingContainer--hsPEQ",Ec="profile_resources_grid--profileResourcesGridOuterContainer--ynOxv",Ed="profile_resources_grid--profileMetricsStatsOuterContainer--FAXLb",Em="profile_resources_grid--profileMetricsTabLoadingButtonContent--lkd-l",Eu="profile_resources_grid--profileMetricsTabLoadingButton--6tsqO",E_="profile_resources_grid--profileResourcesGridAndDataContainer--2gQaO",Ep="profile_resources_grid--emptyStateContainer--EJug9",Ef="profile_resources_grid--emptyStateHeader--c9srx text--fontPos14--OL9Hp text--_fontBase--QdLsd",Eg="profile_resources_grid--emptyStateText--oEJHa",EE="profile_resources_grid--emptyStateMetricLabel--XqzzA",Ev="profile_resources_grid--bannerContainer--eb6mO",Eh="profile_resources_grid--stripeDashboardButtonContainer--1DAQE",Ey="profile_resources_grid--metricContainer--SuhZ3",Eb="profile_resources_grid--creatorLink--Rmyz- text--fontPos13--xW8hS text--_fontBase--QdLsd",Ew="profile_resources_grid--lockIcon--4VJCL",ET="profile_metrics_stats--divider--U2a8K";var EI=a(419902);let Ex=(0,oI.jz)(oQ.dxy);function EN({tooltipText:e}){return o.createElement(ox.z,{query:`(min-width: ${Ex}px)`},o.createElement("span",{className:"profile_metrics_stats--infoTooltipContainer---MeEH","data-tooltip-type":eB.Ib.TEXT,"data-tooltip":e,"data-tooltip-max-width":"250"},o.createElement(es.B,{svg:EI.A,className:"profile_metrics_stats--infoTooltip--lsZkn"})))}function EC({valueClassName:e,value:t,labelClassName:a,label:r,children:n}){return o.createElement("div",{className:Ey},o.createElement("div",{className:e},t),o.createElement("div",{className:"profile_metrics_stats--metricLabelContainer--24AJ-"},o.createElement("span",{className:a},r),n))}function ES(){return o.createElement("div",{className:Ey},o.createElement("div",{className:"profile_resources_grid--emptyStateMetric--ktaw6"}),o.createElement("div",{className:EE}))}function Ek({children:e}){return o.createElement("div",{className:Ed},o.createElement(ES,null),o.createElement("div",{className:ET}),o.createElement(ES,null),o.createElement("div",{className:ET}),o.createElement(ES,null),e)}function EA({totalViewCount:e,metricValueStyle:t,metricLabelStyle:a,totalPurchases:r,totalEarned:n,children:l}){return o.createElement("div",{className:Ed},o.createElement(EC,{valueClassName:t,value:e,labelClassName:a,label:(0,S.t)("community.seller.total_views")}),o.createElement("div",{className:ET}),o.createElement(EC,{valueClassName:t,value:r,labelClassName:a,label:(0,S.t)("community.seller.total_purchases")},o.createElement(EN,{tooltipText:(0,S.t)("community.seller.total_purchases_includes")})),o.createElement("div",{className:ET}),o.createElement(EC,{valueClassName:t,value:n,labelClassName:a,label:(0,S.t)("community.seller.total_earned")},o.createElement(EN,{tooltipText:(0,S.t)("community.seller.all_sales_before_figmas_fees")})),l)}let EL="resource_stat_row--rowContainer--rapbF",ER="resource_stat_row--resourceMetadataContainer--bdvI3",ED="resource_stat_row--allStatContainer--vXmae",EF="resource_stat_row--statContainer--gp6KZ",EP="resource_stat_row--statValue--69Rff text--fontPos24--YppUD text--_fontBase--QdLsd",EM="resource_stat_row--statLabel--bgvwH text--fontPos13--xW8hS text--_fontBase--QdLsd",EO="resource_stat_row--verticalDivider--Whn5d",EB="resource_stat_row--textMetadataContainer--oQv9J",EU=(0,oI.jz)(oQ.ZI8);function EV({resource:e}){return(0,cG.Qo)(e)?o.createElement(cq.Cv,{resource:e,isMetaHidden:!0}):"plugin"===(0,cG.Vm)(e)?o.createElement(cq.cS,{resource:e,isMetaHidden:!0}):o.createElement(cq.bN,{resource:e,isMetaHidden:!0})}function EH({resource:e}){let{name:t,created_at:a}=(0,cG.qD)(e),r=new Date(a).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}),n=e.monetized_resource_metadata?(0,mn.bV)(e.monetized_resource_metadata):"",l=`/community/${(0,cG.ss)(e)}/${e.id}`;return o.createElement("div",{className:ER},o.createElement("div",{className:"resource_stat_row--thumbnailWrapper--M0vtN"},o.createElement(EV,{resource:e})),o.createElement(ox.z,{query:`(min-width: ${EU}px)`},o.createElement("div",{className:EB},o.createElement("div",null,o.createElement(uX.A6,{to:l,className:"resource_stat_row--resourceName--LFWUk text--fontPos14--OL9Hp text--_fontBase--QdLsd"},t),o.createElement("div",{className:"resource_stat_row--publishDate--oDkDH text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,S.t)("community.seller.last_updated_on",{date:r}))),o.createElement("div",{className:"resource_stat_row--price--1YYVn text--fontPos14--OL9Hp text--_fontBase--QdLsd"},n))))}function EW({value:e,label:t}){return o.createElement("div",{className:EF},o.createElement("span",{className:EP},e),o.createElement("span",{className:EM},t))}function Ej(){return o.createElement("div",{className:EF},o.createElement("span",{className:EP},o.createElement("div",{className:"profile_resources_grid--emptyStateStatsMetric--qs3QD"})),o.createElement("span",{className:EM},o.createElement("div",{className:EE})))}function E$(){return o.createElement("div",{className:ER},o.createElement("div",{className:"resource_stat_row--emptyThumbnailWrapper--NNO1Y resource_stat_row--thumbnailWrapper--M0vtN"},o.createElement(tc.kt,null)),o.createElement(ox.z,{query:`(min-width: ${EU}px)`},o.createElement("div",{className:EB},o.createElement("div",null,o.createElement("div",{className:"resource_stat_row--emptyResourceName--gZCwX"}),o.createElement("div",{className:"resource_stat_row--emptyPublishDate--WVyqw"})),o.createElement("div",{className:"resource_stat_row--emptyPrice--HlOMG"}))))}function EG({resource:e}){return o.createElement("div",{className:EL},o.createElement(E$,null),o.createElement("div",{className:ED},o.createElement(Ej,null),o.createElement("div",{className:EO}),o.createElement(Ej,null),o.createElement("div",{className:EO}),o.createElement(Ej,null),o.createElement("div",{className:EO}),o.createElement(Ej,null)))}function Ez({resource:e}){var t;let a=(0,s.wA)(),{id:r,is_subscription:n}=e.monetized_resource_metadata,l=(0,rr.Rs)(rl.aom,{monetizedResourceMetadataId:r}),i=new Y.vr("usd");if("loading"===l.status)return o.createElement(EG,{resource:e});if("loaded"!==l.status||(null==(t=l.errors)?void 0:t.length))return a(ec.F.enqueue({message:(0,S.t)("community.actions.unable_to_load_stats_for_a_resource"),error:!0})),o.createElement(EG,{resource:e});{let t=l.data.communityM10nResourceStat,a={monetized_resource_metadata_id:null==t?void 0:t.monetizedResourceMetadataId,all_time_total_earned:parseInt((null==t?void 0:t.allTimeTotalEarned)||"0"),monthly_total_earned:parseInt((null==t?void 0:t.monthlyTotalEarned)||"0"),num_purchases:parseInt((null==t?void 0:t.numPurchases)||"0")};return o.createElement("div",{className:EL},o.createElement(EH,{resource:e}),o.createElement("div",{className:ED},o.createElement(EW,{label:(0,S.t)("community.seller.views_label",{num:e.view_count}),value:e.view_count.toLocaleString()}),o.createElement("div",{className:EO}),n?o.createElement(EW,{label:(0,S.t)("community.seller.subscribers_label",{num:a.num_purchases}),value:a.num_purchases.toLocaleString()}):o.createElement(EW,{label:(0,S.t)("community.seller.purchases_label",{num:a.num_purchases}),value:a.num_purchases.toLocaleString()}),o.createElement("div",{className:EO}),o.createElement(EW,{label:(0,S.t)("community.seller.total_earned"),value:i.formatMoney(a.all_time_total_earned)}),o.createElement("div",{className:EO}),o.createElement(EW,{label:(0,S.t)("community.seller.earned_this_month"),value:i.formatMoney(a.monthly_total_earned)})))}}function EY({paidResources:e}){return(0,_.kc)().cmty_m10n_turn_creator_dash_off?o.createElement(o.Fragment,null):o.createElement("div",{className:"resource_stats_list--resourceStatsListContainer--3Xmb3"},o.createElement("p",{className:"resource_stats_list--resourceCount--SHJGY text--fontPos14--OL9Hp text--_fontBase--QdLsd"},(0,S.tx)("community.seller.resources_for_sale",{numResources:e.length})),e.map((e,t,a)=>o.createElement("div",{key:e.id,className:"resource_stats_list--resourceStatContainer--GxfxK"},o.createElement(Ez,{resource:(0,cY.Ch)(e)}),t<a.length-1&&o.createElement("div",{key:`${e.id}-divider`,className:"resource_stats_list--divider--F4HpT"}))))}function EK(){return o.createElement("svg",{width:"274",height:"133",viewBox:"0 0 274 133",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M124.179 65.3591C125.935 65.3591 127.359 63.9355 127.359 62.1795C127.359 60.4235 125.935 59 124.179 59C122.423 59 121 60.4235 121 62.1795C121 63.9355 122.423 65.3591 124.179 65.3591Z",fill:"var(--color-icon-disabled, #D9D9D9)"}),o.createElement("path",{d:"M149.861 62.1795C149.861 63.9355 148.437 65.3591 146.681 65.3591C144.925 65.3591 143.502 63.9355 143.502 62.1795C143.502 60.4235 144.925 59 146.681 59C148.437 59 149.861 60.4235 149.861 62.1795Z",fill:"var(--color-icon-disabled, #D9D9D9)"}),o.createElement("path",{d:"M123.092 73.4119V71.9119H120.092V73.4119C120.092 81.9723 127.032 88.9119 135.592 88.9119C144.152 88.9119 151.092 81.9723 151.092 73.4119V71.9119H148.092V73.4119C148.092 80.3154 142.496 85.9119 135.592 85.9119C128.688 85.9119 123.092 80.3154 123.092 73.4119Z",fill:"var(--color-icon-disabled, #D9D9D9)"}),o.createElement("path",{d:"M232.862 51.8912L214.45 64.9049L240.999 74.0556L209.704 95.1483L208.027 92.6606L234.332 74.931L207.938 65.8337L231.13 49.4413L232.862 51.8912Z",fill:"var(--color-icon-disabled, #D9D9D9)"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M82.2828 0H148.05L185.283 38.0308V47.1645L188.993 45.3563L196.545 23.4452L218.456 30.9974L239.307 20.8359L249.468 41.6862L271.414 49.2505L263.85 71.1971L274 92.0236L253.173 102.174L245.609 124.12L223.663 116.556L202.812 126.717L192.651 105.867L185.283 103.327V133H82.2828V109.541L31.3574 128.076C27.4651 129.493 23.1613 127.486 21.7446 123.593L16.9646 110.46C16.4165 108.954 17.1953 107.612 18.0665 106.887C18.9369 106.163 20.3041 105.686 21.6406 106.175C24.3362 107.162 27.171 107.252 29.8132 106.29C36.5897 103.824 40.064 94.9827 36.8557 86.168C33.6474 77.3533 25.303 72.8139 18.5265 75.2803C15.8843 76.242 13.7706 78.1332 12.3398 80.6217C11.6304 81.8554 10.2763 82.3687 9.14412 82.3734C8.01076 82.3782 6.55152 81.8507 6.00341 80.3447L1.22339 67.2118C-0.193304 63.3194 1.8136 59.0156 5.70593 57.5989L18.1219 53.0799C18.1237 53.0772 18.1258 53.0738 18.1282 53.0695C18.1529 53.0257 18.1896 52.9235 18.1889 52.7663C18.1882 52.6115 18.1509 52.4593 18.0918 52.3414C18.0341 52.2263 17.9741 52.1774 17.9418 52.1588C14.9078 50.4143 12.5056 47.7738 11.2767 44.3974C8.07639 35.6046 14.0889 25.815 23.9574 22.2231C33.8259 18.6313 44.7244 22.2658 47.9247 31.0587C49.1536 34.435 49.0107 38.0019 47.8079 41.2884C47.7951 41.3234 47.7805 41.3994 47.8104 41.5248C47.8409 41.653 47.9101 41.7936 48.0091 41.9127C48.1096 42.0335 48.2035 42.0882 48.2505 42.1059C48.2551 42.1076 48.2589 42.1089 48.262 42.1098L62.0875 37.0777C65.9798 35.661 70.2836 37.6679 71.7003 41.5603L82.2828 70.6354V0ZM182.283 40.1429V48.6266V56.5V76.5V98V102.293V130H85.2828V108.449V107C85.2828 107 85.2828 102.5 85.2828 98.5V78.8779V3H145.919V40.1429H182.283ZM185.283 50.5018V100.154L194.803 103.435L204.195 122.706L223.466 113.314L243.75 120.306L250.742 100.021L269.989 90.6411L260.609 71.3943L267.601 51.1092L247.316 44.1175L237.924 24.847L218.654 34.2385L198.404 27.2591L191.424 47.5087L185.283 50.5018ZM68.8813 42.5863L82.2828 79.4069V106.348L30.3314 125.257C27.996 126.107 25.4137 124.903 24.5637 122.567L19.7881 109.447C19.789 109.443 19.7903 109.44 19.792 109.435C19.8097 109.388 19.8644 109.294 19.9852 109.194C20.1043 109.095 20.2449 109.025 20.3731 108.995C20.4985 108.965 20.5745 108.98 20.6095 108.992C23.896 110.195 27.4629 110.338 30.8392 109.109C39.6321 105.909 43.2666 95.0105 39.6748 85.1419C36.0829 75.2734 26.2933 69.2609 17.5005 72.4613C14.1241 73.6901 11.4836 76.0923 9.7391 79.1263C9.72052 79.1586 9.67163 79.2186 9.55647 79.2764C9.43858 79.3354 9.28639 79.3728 9.13155 79.3734C8.97443 79.3741 8.87215 79.3374 8.82842 79.3127C8.82414 79.3103 8.82071 79.3082 8.81802 79.3064L4.04247 66.1857C3.19245 63.8503 4.39659 61.268 6.73199 60.418L19.1602 55.8945C20.6662 55.3464 21.1936 53.8871 21.1889 52.7538C21.1841 51.6216 20.6709 50.2675 19.4371 49.5581C16.9487 48.1273 15.0575 46.0135 14.0958 43.3714C11.6294 36.5949 16.1688 28.2505 24.9835 25.0422C33.7981 21.8339 42.6392 25.3082 45.1057 32.0847C46.0673 34.7269 45.9772 37.5617 44.9907 40.2573C44.5015 41.5938 44.9788 42.961 45.7029 43.8314C46.4278 44.7026 47.7698 45.4814 49.2758 44.9333L63.1136 39.8968C65.449 39.0468 68.0312 40.2509 68.8813 42.5863ZM148.919 5.17631L180.215 37.1429H148.919V5.17631Z",fill:"var(--color-icon-disabled, #D9D9D9)"}))}function EQ({paidResources:e,primaryUserId:t}){let a=(0,s.wA)(),r=(0,$.iZ)(),[n,l]=o.useState(!1),[i,c]=o.useState(!1),d=(0,rr.Rs)(rl.wW7,{userId:t}),m=()=>{c(!0),a((0,R.to)({type:g1.s,data:{setupStripeCallback:e=>{l(!1),c(!1),e||a(C.s.error((0,S.t)("community.seller.unable_to_launch_stripe_onboarding_please_check_your_details")))}}}))},u=()=>{l(!0),(0,eP.Cu)({user_id:r.id},"stripe_dasbhboard_link_clicked"),a(gZ({callback:e=>{l(!1),e||a(C.s.error((0,S.t)("community.seller.unable_to_open_stripe_dashboard")))}}))};function p(){return(null==r?void 0:r.stripe_account_status)===g0.P5.ENABLED||(null==r?void 0:r.stripe_account_status)===g0.P5.DISABLED?o.createElement("div",{className:Eh},o.createElement("button",{className:"profile_resources_grid--stripeDashboardButton--LHyS8 profile_resources_grid--stripeSetupButton--HNei8 profile_resources_grid--stripeSetupButtonDisabled--EUiQo text--fontPos13--xW8hS text--_fontBase--QdLsd",onClick:u},o.createElement("div",{className:Em},n&&o.createElement("div",{className:Eu},o.createElement(tc.kt,{shouldMatchTextColor:!0})),(0,S.tx)("community.seller.view_stripe_dashboard"))),o.createElement("button",{className:"profile_resources_grid--blueLink--WjRaq blue_link--blueLink--9rlnd",onClick:()=>{a((0,R.to)({type:g8,data:{}}))}},(0,S.tx)("community.seller.view_payout_statements"))):o.createElement("div",{className:Eh},o.createElement("button",{className:"profile_resources_grid--stripeSetupButton--HNei8 profile_resources_grid--stripeSetupButtonDisabled--EUiQo text--fontPos13--xW8hS text--_fontBase--QdLsd",disabled:n,onClick:m},o.createElement("div",{className:Em},n&&o.createElement("div",{className:Eu},o.createElement(tc.kt,{shouldMatchTextColor:!0})),o.createElement("div",null,f))),o.createElement("div",{className:"profile_resources_grid--creatorAgreement--seV1h text--fontPos11--2LvXf text--_fontBase--QdLsd"},g))}let f=(0,S.tx)("community.seller.set_up_stripe"),g=(0,S.tx)("community.seller.agree_to_figma_terms_of_service",{link:g3.Hl});n?f=(0,S.tx)("community.seller.stripe_loading_text"):(null==r?void 0:r.stripe_account_status)===g0.P5.STARTED_ONBOARDING&&(f=(0,S.tx)("community.seller.finish_stripe_setup_button"));let E="profile_resources_grid--metricValue--w627p text--fontPos48--H177Q text--_fontBase--QdLsd",v="profile_resources_grid--metricLabel--1bOis text--fontPos13--xW8hS text--_fontBase--QdLsd",h=(0,S.tx)("community.seller.resource_metrics_coming_soon"),y=(0,S.tx)("community.seller.working_on_bringing_you_more_in_depth_metrics");(null==r?void 0:r.stripe_account_status)!==g0.P5.ENABLED&&(E="profile_resources_grid--metricValueDisabled--mYlXF profile_resources_grid--metricValue--w627p text--fontPos48--H177Q text--_fontBase--QdLsd",v="profile_resources_grid--metricLabelDisabled--dTvu- profile_resources_grid--metricLabel--1bOis text--fontPos13--xW8hS text--_fontBase--QdLsd");let b=e.length>0,w=e.reduce((e,t)=>e+t.view_count,0);return h=(0,S.tx)("community.seller.youre_all_set_up_to_sell_on_community"),y=(0,S.tx)("community.seller.to_publish_your_first_resource"),(null==r?void 0:r.stripe_account_status)!==g0.P5.ENABLED&&(h=(0,S.tx)("community.seller.resources_youre_selling_will_appear_here"),y=(0,S.tx)("community.seller.well_show_you_stripe_metrics")),o.createElement("div",{className:"profile_resources_grid--profileMetricsTabOuterContainer--d-PPR"},o.createElement("div",{className:"profile_resources_grid--stripeBannerContainer--xRX1g"},o.createElement(cj.S,{isFirstTimeLoading:i})),(()=>{var e,t;let r=o.createElement(Ek,null,o.createElement(p,null));if((0,_.kc)().cmty_m10n_turn_creator_dash_off||"loading"===d.status)return r;if("loaded"!==d.status||(null==(e=d.errors)?void 0:e.length))return a(ec.F.enqueue({message:(0,S.t)("community.actions.unable_to_load_creator_stats"),error:!0})),r;{let e=null==(t=d.data.userMonetizationMetadata)?void 0:t.stripeCmtyCreatorStatsMeta,a={num_purchases:(null==e?void 0:e.numPurchases)||(null==e?void 0:e.num_purchases)||0,all_time_total_earned:(null==e?void 0:e.allTimeTotalEarned)||(null==e?void 0:e.all_time_total_earned)||0};return o.createElement(EA,{totalViewCount:w,metricValueStyle:E,metricLabelStyle:v,totalPurchases:a[g0.VU.NUM_PURCHASES],totalEarned:(0,mn.up)(a[g0.VU.ALL_TIME_TOTAL_EARNED])},o.createElement(p,null))}})(),o.createElement("div",{className:"profile_resources_grid--divider--GZynB"}),b?o.createElement(EY,{paidResources:e}):o.createElement("div",{className:Ep},o.createElement("div",{className:"profile_resources_grid--profileMetricsStatsEmptyStateIcon--DvLAr"},o.createElement(EK,null)),o.createElement("div",{className:Ef},h),o.createElement("div",{className:Eg},y)))}var Eq=a(239671),EX=a(217288);let EJ=(0,nL.r1)(i9.cX);function EZ({profile:e}){let[t,a]=o.useState(!1),r=(0,aJ.md)(EJ),n=(0,s.wA)();if(t||r.data)return o.createElement(o.Fragment,null);let l=o.createElement("div",null,(0,S.tx)("community.profile.creator_banner.you_can_now_add_image_and_video_previews"),o.createElement(O.L0,{href:"https://help.figma.com/hc/en-us/articles/22166943560983-Grow-your-audience-on-Community#mediapreviews",trackingProperties:{profileId:e.id},target:"_blank"},(0,S.tx)("community.learn_more"))),i={id:_0.om.CommunityResourceCreatorBanner,bannerType:_0.x1.INFO,icon:EX.A,iconSize:"large",mainText:(0,S.t)("community.profile.creator_banner.lets_spruce_things_up"),description:l,dismissible:!0,positionStatic:!0};return o.createElement(O.fu,{name:"Profile Creator Upsell Banner",properties:{name:"profile_creator_upsell_banner",profileId:e.id}},o.createElement(_Z.C,{content:i,editorType:Eq.nT.Design,onDismiss:()=>{n(P.b({[i9.cX]:!0})),a(!0),(0,tK.sx)("cmty_profile_creator_upsell_banner_dismissed",{profileId:e.id})}}))}var E0=a(560718),E1=a(688734),E2=a(350913),E4=(e=>(e.COPY_LINK="Copy profile link",e.RESTRICT_USER="Restrict user",e.UNRESTRICT_USER="Unrestrict user",e))(E4||{});let E8=e=>{switch(e){case"Copy profile link":return(0,S.t)("community.profiles.copy_profile_link");case"Restrict user":return(0,S.t)("community.profiles.restrict_user");case"Unrestrict user":return(0,S.t)("community.profiles.unrestrict_user");default:return""}};function E3(){let e=(0,s.wA)(),t=(0,$.iZ)(),a=(0,s.d4)(e=>{var t,a;return null==(a=null==(t=e.dropdownShown)?void 0:t.data)?void 0:a.profile}),r=(0,s.d4)(e=>{var t,a;return null==(a=null==(t=e.dropdownShown)?void 0:t.data)?void 0:a.targetRect});if(!a)return o.createElement(o.Fragment,null);let n=a.is_restricted_by_current_user,l=()=>{e(lu.lW({stringToCopy:`${window.location.origin}${(0,E2.bL)(a.profile_handle)}`}))},i=a=>{e(fo._8({blockedProfileId:a,profileId:(null==t?void 0:t.community_profile_id)||"",onSuccess:()=>{e(ec.F.enqueue({message:"Restricted this user's comments",type:"profile-restricted-change",button:{text:"Undo",action:()=>{m(a)}}})),(0,tK.sx)("comment_profile_restricted",{restricted_by_profile_id:null==t?void 0:t.community_profile_id,restricted_profile_id:a,entry_point:"profile_page"})}}))},c=()=>{e((0,R.to)({type:E1.H,data:{onBlock:()=>i(a.id),confirmationTitle:`Restrict ${a.name}?`,confirmButtonText:"Restrict"}}))},d=a=>{e(fo._8({blockedProfileId:a,profileId:(null==t?void 0:t.community_profile_id)||"",onSuccess:()=>{e(ec.F.enqueue({message:"Restricted this user's comments",type:"profile-restricted-change",button:{text:"Undo",action:()=>{m(a)}}})),(0,tK.sx)("comment_profile_restricted",{restricted_by_profile_id:null==t?void 0:t.community_profile_id,restricted_profile_id:a,entry_point:"profile_page"})}}))},m=a=>{e(fo.dL({blockedProfileId:a,profileId:(null==t?void 0:t.community_profile_id)||"",onSuccess:()=>{e(ec.F.enqueue({message:"Unrestricted this user's comments",type:"profile-restricted-change",button:{text:"Undo",action:()=>{d(a)}}})),(0,tK.sx)("comment_profile_unrestricted",{unrestricted_by_profile_id:null==t?void 0:t.community_profile_id,unrestricted_profile_id:a,entry_point:"profile_page"})}}))},u=[{displayText:E8("Copy profile link")}];return((null==t?void 0:t.community_profile_id)&&a.entity_type===c1.o1.USER&&(n?u.push({displayText:E8("Unrestrict user")}):u.push({displayText:E8("Restrict user")})),r)?o.createElement(nq.j,{dispatch:e,items:u,showPoint:!0,parentRect:r,onSelectItem:(e,t)=>{"Copy profile link"===e.displayText?l():"Restrict user"===e.displayText?c():"Unrestrict user"===e.displayText&&m(a.id)},minWidth:96}):null}E3.displayName="ProfileMoreActionsDropdown";var E5=a(728859);function E9(e){let t=(0,rE.Um)(),a=o.useRef(null),r=!!(t&&t.type===E0.N9),n=(0,s.wA)(),l=o.useCallback(()=>{n(A.oB())},[n]);return o.useEffect(()=>(window.addEventListener("scroll",l,!1),()=>{window.removeEventListener("scroll",l,!1)}),[l]),o.createElement("div",null,o.createElement(ro.K0,{svg:E5.A,ref:a,onClick:r=>{r.stopPropagation();let i=a.current;t?l():i&&n(A.j7({type:E0.N9,data:{profile:e.profile,targetRect:i.getBoundingClientRect()}}))},className:r?"profile_more_actions_button--iconButtonSelected--d85bU profile_more_actions_button--iconButton--RVCRS raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6":"profile_more_actions_button--iconButton--RVCRS raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6","data-tooltip-type":eB.Ib.TEXT,"data-tooltip":(0,S.t)("community.profiles.profile_actions")}),r&&o.createElement(E3,null))}E9.displayName="ProfileMoreActionsButton";var E6=a(708389);let E7=new class{constructor(){this.CommunityResourceSavesSchemaValidator=(0,dE.ch)(),this.getCommunityResourceSaves=e=>this.CommunityResourceSavesSchemaValidator.validate(({xr:t})=>t.getPaginated("/api/resource_saves",dE.td.toAPIParameters(e))),this.CommunityUserResourceInstallsSchemaValidator=(0,dE.ch)(),this.getCommunityUserResourceInstalls=e=>this.CommunityUserResourceInstallsSchemaValidator.validate(({xr:t})=>t.getPaginated("/api/resources/installed/user",dE.td.toAPIParameters(e))),this.ProfileHasLikesSchemaValidator=(0,dE.vh)(),this.profileHasLikes=()=>this.ProfileHasLikesSchemaValidator.validate(async({xr:e})=>await e.get("/api/profile/has_likes"))}},ve=E6.f.byProperty("saved_at",E6.f.BY_DATETIME);function vt(){let[e,t]=o.useState([]),[a,r]=o.useState([]),[n,l]=o.useState([]),[i,s]=o.useState([]),[c,d]=o.useState(void 0),[m,_]=o.useState(void 0),[p,f]=o.useState(!1),[g,E]=o.useState(!1),v=i=>{Promise.all([h(i),y(i)]).then(([o,c])=>{let d=(null==o?void 0:o.meta.hub_files)||[],m=(null==c?void 0:c.meta.plugins)||[],u=(null==c?void 0:c.meta.widgets)||[],_=e,p=a,f=n;(null==i?void 0:i.reset)&&(_=[],p=[],f=[]);let{mergedResults:g,unmergedResultsList:[E,v,h]}=(0,gb.n0)([[..._,...d],[...p,...m],[...f,...u]],ve);(null==i?void 0:i.reset)?s(g):s(e=>[...e,...g]),t(E),r(v),l(h)})},h=e=>{let t=c;if((null==e?void 0:e.reset)&&(t=void 0),null!==t&&!p)return f(!0),E7.getCommunityResourceSaves({cursor:t,pageSize:30}).then(e=>(d(e.data.pagination.nextPage),e.data)).finally(()=>{f(!1)})},y=e=>{let t=m;if((null==e?void 0:e.reset)&&(t=void 0),null!==t&&!g)return E(!0),E7.getCommunityUserResourceInstalls({cursor:t,pageSize:30}).then(e=>(_(e.data.pagination.nextPage),e.data)).finally(()=>{E(!1)})};(0,u.h)(()=>{v()});let b=p||g;return o.createElement(o.Fragment,null,o.createElement("div",{className:Eo},o.createElement("div",{className:Ec},b||0!==i.length?o.createElement(c0,{adtlClassName:cZ("profile"),resources:i,viewContext:"ProfileSavesView",showMoreCallback:v}):o.createElement("div",{className:"profile_resources_grid--emptySavesTabContainer--4oQx-"},o.createElement(vr,null)),o.createElement("div",{className:Es},b&&o.createElement(tc.kt,null)))))}function va(){return o.createElement("svg",{width:"86",height:"126",viewBox:"0 0 86 126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M46.1772 97.1417L43 94.6L39.8228 97.1417L38.5735 95.58L43 92.0388L47.4266 95.58L46.1772 97.1417ZM36.6457 99.6835L35.3963 98.1217L29.042 103.205L30.2914 104.767L36.6457 99.6835ZM27.1142 107.309L25.8648 105.747L19.5105 110.83L20.7599 112.392L27.1142 107.309ZM17.5827 114.934L16.3333 113.372L9.97901 118.456L11.2284 120.017L17.5827 114.934ZM8.05125 122.559L6.80185 120.997L3.62469 123.539C2.96993 124.063 2 123.597 2 122.758V118.933H0V122.758C0 125.274 2.90979 126.672 4.87408 125.101L8.05125 122.559ZM0 115.108H2V107.457H0V115.108ZM0 103.632H2V95.9812H0V103.632ZM0 92.156H2V84.5054H0V92.156ZM0 80.6801H2V73.0296H0V80.6801ZM0 69.2043H2V61.5538H0V69.2043ZM0 57.7285H2V50.078H0V57.7285ZM0 46.2527H2V38.6022H0V46.2527ZM0 34.7769H2V27.1263H0V34.7769ZM0 23.3011H2V15.6505H0V23.3011ZM0 11.8253H2V8C2 6.90362 2.29224 5.88157 2.80175 5.00098L1.07063 3.99936C0.389718 5.1762 0 6.54259 0 8V11.8253ZM3.99936 1.07063L5.00097 2.80175C5.88157 2.29224 6.90362 2 8 2H11.8889V0H8C6.54259 0 5.1762 0.389719 3.99936 1.07063ZM15.7778 0V2H23.5556V0H15.7778ZM27.4444 0V2H35.2222V0H27.4444ZM39.1111 0H46.8889V2H39.1111V0ZM50.7778 0V2H58.5556V0H50.7778ZM62.4444 0V2H70.2222V0H62.4444ZM74.1111 0V2H78C79.0964 2 80.1184 2.29224 80.999 2.80175L82.0006 1.07063C80.8238 0.389718 79.4574 0 78 0H74.1111ZM84.9294 3.99936L83.1983 5.00097C83.7078 5.88157 84 6.90362 84 8V11.8253H86V8C86 6.54259 85.6103 5.1762 84.9294 3.99936ZM86 15.6505H84V23.3011H86V15.6505ZM86 27.1264H84V34.7769H86V27.1264ZM86 38.6022H84V46.2527H86V38.6022ZM86 50.078H84V57.7285H86V50.078ZM86 61.5538H84V69.2043H86V61.5538ZM86 73.0296H84V80.6802H86V73.0296ZM86 84.5054H84V92.156H86V84.5054ZM86 95.9812H84V103.632H86V95.9812ZM86 107.457H84V115.108H86V107.457ZM86 118.933H84V122.758C84 123.597 83.0301 124.063 82.3753 123.539L79.1981 120.997L77.9488 122.559L81.1259 125.101C83.0902 126.672 86 125.274 86 122.758V118.933ZM74.7716 120.017L76.021 118.456L69.6667 113.372L68.4173 114.934L74.7716 120.017ZM65.2401 112.392L66.4895 110.83L60.1352 105.747L58.8858 107.309L65.2401 112.392ZM55.7086 104.767L56.958 103.205L50.6037 98.1217L49.3543 99.6835L55.7086 104.767Z",fill:"var(--color-icon-tertiary, $figmaFGBlack3Opaque)"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M42 49V60H44V49H55V47H44V36H42V47H31V49H42Z",fill:"var(--color-icon-tertiary, $figmaFGBlack3Opaque)"}))}function vr(){return o.createElement("div",{className:ef.cx.flex.itemsCenter.flexColumn.gap16.$},o.createElement(va,null),o.createElement("div",{className:ef.cx.flex.flexColumn.gap8.alignCenter.$},o.createElement("h2",{className:ef.cx.font14.fontMedium.$},(0,S.tx)("community.saves.no_saves_title")),o.createElement("p",{className:ef.cx.font11.$},(0,S.tx)("community.saves.no_saves_subtitle"))),o.createElement(I.nR,{target:"_blank",onClick:()=>{m.Ay.push("/community")}},(0,S.tx)("community.explore_resources")))}var vn=a(348425),vl=a(727475),vi=a(26096),vo=a(327115);class vs extends o.Component{constructor(){super(...arguments),this.getProfileLink=()=>{if(this.props.profile&&this.props.profile.profile_handle)return`figma.com/@${this.props.profile.profile_handle}`;let e=this.props.profile.id;return`figma.com/profile/${e}`},this.getProfileLinkText=()=>{let e=this.getProfileLink(),t=o.createElement(I.N_,{href:`https://${e}`,className:vl.nf,trusted:!0},e);return this.props.profile.primary_user_id?(0,S.tx)("community.profiles.your_profile_is_visible_to_the_public_at",{link:t}):this.props.profile.entity_type===c1.o1.TEAM?(0,S.tx)("community.profiles.your_teams_profile_is_visible_to_the_public_at",{link:t}):this.props.profile.entity_type===c1.o1.ORG?(0,S.tx)("community.profiles.your_organizations_profile_is_visible_to_the_public_at",{link:t}):void 0}}render(){return this.props.profile?o.createElement("div",{className:this.props.className||""},o.createElement("div",{className:vl.cI},o.createElement(vn.t,{svg:vi.A,fallbackSvg:vo.A,useOriginalSrcFills_DEPRECATED:!0,className:vl.q3}),o.createElement("span",{className:vl._M},this.getProfileLinkText()))):null}}vs.displayName="PublicProfileBanner";var vc=a(157285),vd=a(754961),vm=a(573812);let vu=(0,oI.jz)(oQ.d8i),v_=(0,oI.jz)(oQ.wOr);function vp(e){let{canEdit:t,canSellOnCommunity:a}=e,r=(0,$.iZ)(),n=o.useCallback(()=>{if(r)return(0,gL.tx)(r)},[r]);return r&&t?o.createElement(o.Fragment,null,a?o.createElement("div",{role:"link",tabIndex:0,onClick:n,className:Eb},(0,S.tx)("community.profiles.contact_creator_support")):o.createElement("div",{className:"profile_resources_grid--sellOnCommunity--7r6cV"},o.createElement(I.CY,{href:"https://www.figma.com/community-creators",className:Eb,target:"_blank",trusted:!0},(0,S.tx)("community.profiles.interested_in_selling_your_resources")))):o.createElement(o.Fragment,null)}function vf(e){let{updateProfile:t,canEdit:a,isViewingCurrentUserProfile:r,showFollowsModal:n}=e,l=(0,gA.t)(e.profile.id),i=(0,ou.si)(l),s=(0,_.kc)().cmty_deprecate_browse_as_admin?i:a;return l?o.createElement(vg,{profile:l,canEdit:s,updateProfile:t,isViewingCurrentUserProfile:r,showFollowsModal:n}):o.createElement(o.Fragment,null)}function vg(e){let{profile:t,canEdit:a,updateProfile:r,isViewingCurrentUserProfile:n}=e,l=e.profile.name,i=t.profile_handle||null,s=e=>a=>{e in t&&t[e]!==a&&r({[e]:a})},c=(a||t.description)&&o.createElement(gC,{value:t.description||"",placeholder:(0,S.t)("community.profiles.add_a_description"),className:a?Ea:Er,submit:s("description"),formatter:gN,readOnly:!a,maxLength:160}),d=(a||t.location)&&o.createElement(gC,{value:t.location||"",placeholder:(0,S.t)("community.profiles.add_a_location"),className:a?Ea:Er,submit:s("location"),readOnly:!a,maxLength:30}),m=(a||t.website)&&o.createElement(gC,{value:t.website||"",placeholder:(0,S.t)("community.profiles.add_website_url"),className:a?Ea:Er,submit:s("website"),formatter:gN,readOnly:!a,maxLength:100}),u=(a||t.twitter)&&o.createElement(gC,{value:t.twitter||"",placeholder:(0,S.t)("community.profiles.add_x_handle"),className:a?Ea:Er,submit:s("twitter"),formatter:e=>cG.HD.test(e)?gN(`https://twitter.com/${e}`):gN(e),readOnly:!a,maxLength:100}),_=(a||t.instagram)&&o.createElement(gC,{value:t.instagram||"",placeholder:(0,S.t)("community.profiles.add_instagram_handle"),className:a?Ea:Er,submit:s("instagram"),formatter:e=>cG.Co.test(e)?gN(`https://www.instagram.com/${e}`):gN(e),readOnly:!a,maxLength:100}),p=o.createElement(gB.W,{profile:t,followClassName:"profile_resources_grid--followButton--iTOYw text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",followingClassName:"profile_resources_grid--followingButton--1oSba profile_resources_grid--followButton--iTOYw text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L text--fontPos11--2LvXf text--_fontBase--QdLsd",unfollowClassName:"profile_resources_grid--unfollowButton--MmYUn profile_resources_grid--followingButton--1oSba profile_resources_grid--followButton--iTOYw text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L text--fontPos11--2LvXf text--_fontBase--QdLsd",trackingProperties:{viewingProfileId:t.id}}),f=(0,d8.$M)(t.follower_count),g=(0,d8.$M)(t.following_count),E=o.createElement("div",{className:"profile_resources_grid--followsDataContainer--TnbJI"},o.createElement("div",{className:ey()(En,{[El]:!0}),onClick:()=>e.showFollowsModal(ee.g3.FOLLOWERS)},(0,S.tx)("community.profiles.follower_count",{followerCount:f,formattedFollowerCount:o.createElement("span",{className:Ei},f)})),t.primary_user_id&&o.createElement("div",{className:ey()(En,{[El]:!0}),onClick:()=>e.showFollowsModal(ee.g3.FOLLOWING)},(0,S.tx)("community.profiles.following_count",{followingCount:o.createElement("span",{className:Ei},g)}))),v=o.createElement("div",{className:"profile_resources_grid--profileDataHandleAndFollow--6kpYs"},o.createElement("div",{className:"profile_resources_grid--profileDataHandle--DB20D"},"@",i),t.current_user_is_followed&&o.createElement(ul.v_,null)),h=o.createElement(E9,{profile:t}),y=n?null:o.createElement("div",{className:"profile_resources_grid--followMoreActionsContainer--uQNdm"},p,h),b=o.createElement(vp,{canEdit:a,canSellOnCommunity:(0,cG.kf)(t)});return o.createElement("div",null,o.createElement("h1",{className:"profile_resources_grid--profileDataName--xw46b text--fontPos24Whyte--gYiFz text--_fontBaseWhyte--efAjI"},o.createElement(gS.G,{truncate:"end",text:l,className:"profile_resources_grid--profileNameText--WdY6t"}),o.createElement(gk.l,{profile:t,tooltip:!0})),i&&v,y,c,E,d,m,u,_,b)}(e=>{let t={resources:null,loading:!1};class a extends o.Component{constructor(e){super(e),this.isLoading=()=>{let e=this.props.tab===ee.g3.LIKES&&null===this.state.likedResourcesState.resources&&this.state.likedResourcesState.loading;return null===this.props.resources||e},this.redirectToLanding=()=>{m.Ay.push("/community")},this.filterPaidResources=e=>!!e.monetized_resource_metadata,this.state={likedResourcesState:t,didFetchFail:!1,isLoadingStripe:!1}}componentDidUpdate(e){e.tab===this.props.tab||this.props.tab!==ee.g3.LIKES||null!==this.state.likedResourcesState.resources||this.state.likedResourcesState.loading||this.fetchNextLikedResources(),this.props.tab===ee.g3.SAVES&&this.props.authedActiveCommunityProfileId!==this.props.profile.id&&this.props.dispatch(A.$T({...this.props.currentSelectedView,profileTab:ee.g3.RESOURCES}))}componentDidMount(){this.props.tab!==ee.g3.LIKES||null!==this.state.likedResourcesState.resources||this.state.likedResourcesState.loading||this.fetchNextLikedResources()}async fetchNextLikedResources(){if((0,gb.u9)(this.state.likedResourcesState)){this.setState({likedResourcesState:{...this.state.likedResourcesState,loading:!0},didFetchFail:!1});try{let e=await (0,gb.En)(`/api/profile/${this.props.profile.id}/likes`,gb.vs,this.state.likedResourcesState,gb.AS),t=[],a=[],r=[];e.resources.forEach(e=>{e.type===cY.vt.HUB_FILE?t.push(e):e.type===cY.vt.PLUGIN?a.push(e):e.type===cY.vt.WIDGET&&r.push(e)}),this.props.dispatch(gR.D3(t)),this.props.dispatch(gD.Vx(a)),this.props.dispatch(gD.uV(r)),this.setState({likedResourcesState:{resources:[...this.state.likedResourcesState.resources||[],...e.resources],loading:!1,pagination:e.pagination},didFetchFail:!1})}catch{this.setState({didFetchFail:!0}),this.props.dispatch(C.s.error((0,S.t)("community.error.an_error_has_occurred_please_refresh_the_page_and_try_again")))}}}renderEmptyState(){let e,t,a,r;return this.props.tab===ee.g3.LIKES?(e=(0,S.t)("community.profiles.nothing_liked_yet"),t=(0,S.t)("community.profiles.see_whats_being_created_in_figma"),a=o.createElement(I.nR,{target:"_blank",onClick:this.redirectToLanding},(0,S.tx)("community.landing_page.explore")),r=vc.A):(e=(0,S.t)("community.profiles.nothing_published_yet"),t=(0,S.t)("community.profiles.see_whats_being_created_in_figma"),a=o.createElement(I.nR,{target:"_blank",onClick:this.redirectToLanding},(0,S.tx)("community.profiles.explore")),r=vd.A),o.createElement("div",{className:Ep},o.createElement(es.B,{svg:r,useOriginalSrcFills_DEPRECATED:!0}),o.createElement("div",{className:Ef},e),o.createElement("div",{className:Eg},t),a)}render(){let e=[ee.g3.RESOURCES,ee.g3.FOLLOWERS,ee.g3.FOLLOWING,ee.g3.METRICS].includes(this.props.tab)?this.props.resources:this.state.likedResourcesState.resources||[],t=((0,_.kc)().cmty_rdp_creator_nudge_email||(0,_.kc)().cmty_rdp_creator_modal)&&this.props.authedActiveCommunityProfileId===this.props.profile.id;return this.props.tab===ee.g3.METRICS?o.createElement(N.x,{isLoading:this.isLoading(),className:Eo},()=>((0,el.B1)(e),o.createElement(EQ,{paidResources:e.filter(this.filterPaidResources),primaryUserId:this.props.profile.primary_user_id}))):this.props.tab===ee.g3.SAVES?o.createElement(vt,null):o.createElement(N.x,{isLoading:this.isLoading(),className:Eo},()=>((0,el.B1)(e),e.length>0)?o.createElement("div",{className:Ec},t&&o.createElement("div",{className:"profile_resources_grid--profileResourcesGridBanner--6L4qI"},o.createElement(EZ,{profile:this.props.profile})),o.createElement(c0,{adtlClassName:cZ("profile"),resources:e,viewContext:t3.e0.COMMUNITY_HUB_PROFILE,showMoreCallback:()=>{this.props.tab===ee.g3.LIKES&&this.fetchNextLikedResources()}}),this.props.tab===ee.g3.LIKES&&(0,gb.u9)(this.state.likedResourcesState)&&!this.state.didFetchFail&&o.createElement("div",{className:Es},o.createElement(tc.kt,null))):this.renderEmptyState())}}a.displayName="PublicProfileResourcesGrid",e.ConnectedPublicProfileResourcesGrid=(0,s.Ng)((e,t)=>{var a;let r=t.profile;return{currentUser:e.user||null,isWithinProfileScope:(0,ou.E1)(r,e),currentOrgId:e.currentUserOrgId||null,authedActiveCommunityProfileId:(null==(a=e.authedActiveCommunityProfile)?void 0:a.id)||null,currentSelectedView:e.selectedView}})(a);let r=e=>{let t=e.current_hub_file_version_id?e.current_hub_file_version_id:e.current_plugin_version_id||"";return e.versions[t].created_at},n=lI.M4.Query({fetch:async e=>{let{profileId:t}=e,[a,r,n,l,i]=await Promise.all([gF.H.getProfile({profileId:t}),gP.V.getProfile({profileId:t,currentOrgId:void 0}),gM.U.getProfile({profileId:t,currentOrgId:void 0}),(0,pG.UM)(t),(0,pG.Jr)(t)]);return{hubFiles:a.data.meta,pluginsAndWidgets:[...r.data.meta,...n.data.meta,...l,...i]}},output:e=>{let{profileId:t,currentOrgId:a}=e.args,n=(0,ml.$2)((0,ml.i8)(e.data.pluginsAndWidgets),a),l=Object.values((0,ml.xK)(n,t)),i=(0,m5.uj)(e.data.hubFiles,t);return(0,a2.GK)([...i,...l],r)}});e.PublicProfileResourcesGrid=function(t){let a=(0,rv.dq)(),[r]=(0,lI.IT)(n({profileId:t.profile.id,currentOrgId:a}));return o.createElement(e.ConnectedPublicProfileResourcesGrid,{...t,resources:r.data})}})(l||(l={}));let vE=l.PublicProfileResourcesGrid;(e=>{class t extends o.Component{constructor(){super(...arguments),this.updateProfile=e=>{this.props.dispatch(fo.aP({profileId:this.props.profileId,...e}))},this.onFilesPluginsTabClick=()=>{var e;(0,tK.sx)("Profile Resources Tab Clicked",{tabName:"resources",profileId:this.props.profileId,viewingUserId:null==(e=this.props.currentUser)?void 0:e.id}),this.props.dispatch(A.$T({...this.props.currentSelectedView,profileTab:ee.g3.RESOURCES}))},this.onMetricsTabClick=()=>{var e;(0,tK.sx)("Profile Resources Tab Clicked",{tabName:"metrics",profileId:this.props.profileId,viewingUserId:null==(e=this.props.currentUser)?void 0:e.id}),(0,nz.YQ)({id:"profile-metrics-tab-clicked"}),this.props.dispatch(A.$T({...this.props.currentSelectedView,profileTab:ee.g3.METRICS}))},this.onSavesTabClick=()=>{var e;(0,nz.YQ)({id:"cmty-profile-saves"}),(0,tK.sx)("Profile Resources Tab Clicked",{tabName:ee.g3.SAVES,profileId:this.props.profileId,viewingUserId:null==(e=this.props.currentUser)?void 0:e.id}),this.props.dispatch(A.$T({...this.props.currentSelectedView,profileTab:ee.g3.SAVES}))},this.showFollowsModal=e=>{this.props.dispatch(A.$T({...this.props.currentSelectedView,profileTab:e}))}}render(){let e=o.createElement(vE,{...this.props,tab:this.props.profileTab}),t=this.props.profile.primary_user_id&&this.props.authedActiveCommunityProfileId===this.props.profile.id?o.createElement(o.Fragment,null,o.createElement("button",{className:ey()(g9,g6,{[Ee]:this.props.profileTab===ee.g3.SAVES}),onClick:this.onSavesTabClick,tabIndex:0,"data-onboarding-key":"cmty-profile-save-tab"},(0,S.tx)("community.profiles.saved"),o.createElement(es.B,{svg:vm.A,className:Ew,"data-tooltip-type":eB.Ib.TEXT,"data-tooltip":(0,S.t)("community.only_visible_to_you")}))):o.createElement(o.Fragment,null),a=o.createElement("div",{className:"profile_resources_grid--profileDataContainer--e4QVX text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement(vf,{profile:this.props.profile,canEdit:this.props.canEdit,updateProfile:this.updateProfile,isViewingCurrentUserProfile:this.props.authedActiveCommunityProfileId===this.props.profile.id,showFollowsModal:this.showFollowsModal}),this.props.isWithinProfileScope&&this.props.communityStatusOnProfile!==m3.Cw.ADMIN_IN_DIFFERENT_WORKSPACE&&o.createElement(ox.z,{query:`(min-width: ${v_}px)`},o.createElement(vs,{profile:this.props.profile,className:Ev})),!this.props.isWithinProfileScope&&o.createElement(gO.H,{profile:this.props.profile,className:Ev})),r=(()=>{var e;return!!(this.props.isWithinProfileScope&&(0,cG.af)(this.props.currentUser))||!!(0,_.kc)().cmty_expand_extension_m10n&&!!(null==(e=this.props.profile.associated_users)?void 0:e.find(e=>{var t;return e.user_id===(null==(t=this.props.currentUser)?void 0:t.id)&&!0===e.is_primary_user}))})(),n=o.createElement(g$,{user:this.props.currentUser},o.createElement("div",{className:g5},o.createElement("div",{className:ey()(g9,g6,{[Ee]:this.props.profileTab===ee.g3.RESOURCES}),onClick:this.onFilesPluginsTabClick,role:"button",tabIndex:0},(0,S.tx)("community.profiles.resources")),t,r&&o.createElement(O.fu,{name:t3.e0.COMMUNITY_PROFILE_METRICS_TAB},o.createElement("div",{className:g7},o.createElement("div",{className:ey()(g9,g6,Et,{[Ee]:this.props.profileTab===ee.g3.METRICS}),onClick:this.onMetricsTabClick,role:"button",tabIndex:0},(0,S.tx)("community.seller.profiles.metrics"),o.createElement(es.B,{svg:vm.A,className:Ew,"data-tooltip-type":eB.Ib.TEXT,"data-tooltip":(0,S.t)("community.only_visible_to_you")})))))),l=o.createElement("div",{className:g5},o.createElement("div",{className:ey()(g9,g6,{[Ee]:this.props.profileTab===ee.g3.RESOURCES}),onClick:this.onFilesPluginsTabClick,role:"button",tabIndex:0},(0,S.tx)("community.profiles.resources")),t,r&&o.createElement(O.fu,{name:t3.e0.COMMUNITY_PROFILE_METRICS_TAB},o.createElement(gG.p,null,o.createElement(gq,{onboardingKey:gV})),o.createElement("div",{className:g7},o.createElement("div",{className:ey()(g9,g6,Et,{[Ee]:this.props.profileTab===ee.g3.METRICS}),onClick:this.onMetricsTabClick,role:"button",tabIndex:0},o.createElement("span",{"data-onboarding-key":gV},(0,S.tx)("community.seller.profiles.metrics")),o.createElement(es.B,{svg:vm.A,className:Ew})))));return o.createElement(o.Fragment,null,o.createElement(ox.z,{query:`(min-width: ${vu}px)`},l,o.createElement("div",{className:E_},a,e)),o.createElement(ox.z,{query:`(max-width: ${vu-1}px)`},o.createElement("div",{className:E_},a,n,e)))}}t.displayName="PublicProfileResourcesGridAndData",e.ConnectedPublicProfileResourcesGridAndData=(0,s.Ng)((e,t)=>{var a,r;let n=t.profile,l=ee.g3.RESOURCES,i=!1;if("selectedView"in e){let t=null==(a=e.selectedView)?void 0:a.profileTab;i=(0,ou.E1)(n,e),t&&(t!==ee.g3.METRICS||i)&&(l=t)}return{currentUser:"user"in e?e.user:null,canEdit:(0,ou.jG)(n,e),isWithinProfileScope:i,currentSelectedView:"selectedView"in e?e.selectedView:null,profileTab:l,communityStatusOnProfile:(0,m3.kJ)(e,n),authedActiveCommunityProfileId:"authedActiveCommunityProfile"in e?(null==(r=e.authedActiveCommunityProfile)?void 0:r.id)??null:null}})(t)})(i||(i={}));let vv=i.ConnectedPublicProfileResourcesGridAndData;class vh extends o.Component{constructor(e){super(e)}componentDidMount(){null!=this.props.currentProfile&&this.onProfileLoad()}componentDidUpdate(e){var t,a,r;null==e.currentProfile&&null!=this.props.currentProfile&&this.onProfileLoad();{let n=null==(t=e.currentSelectedView)?void 0:t.profileTab,l=null==(a=this.props.currentSelectedView)?void 0:a.profileTab,i=this.isFollowsListModalTab(n)?n:null,o=this.isFollowsListModalTab(l)?l:null;this.props.currentProfile&&i!==o&&o?this.props.dispatch((0,R.to)({type:gg.w,data:{currentSelectedView:this.props.currentSelectedView,profile:this.props.currentProfile,currentUserProfileId:(null==(r=this.props.currentUser)?void 0:r.community_profile_id)||null,authedActiveCommunityProfileId:this.props.authedActiveCommunityProfileId,dispatch:this.props.dispatch}})):!o&&i&&this.props.dispatch(R.Ce())}}isFollowsListModalTab(e){return[ee.g3.FOLLOWERS,ee.g3.FOLLOWING].includes(e)}onProfileLoad(){var e,t;if(this.props.currentProfile){if(!this.props.currentProfile.public_at)return this.props.on404Redirect();this.isFollowsListModalTab(null==(e=this.props.currentSelectedView)?void 0:e.profileTab)&&this.props.dispatch((0,R.to)({type:gg.w,data:{currentSelectedView:this.props.currentSelectedView,profile:this.props.currentProfile,currentUserProfileId:(null==(t=this.props.currentUser)?void 0:t.community_profile_id)||null,authedActiveCommunityProfileId:this.props.authedActiveCommunityProfileId,dispatch:this.props.dispatch}}))}}render(){return o.createElement(N.x,{className:"community_hub_public_profile--loadingContainer--GUi6s",isLoading:!this.props.currentProfile},()=>{let e=this.props.currentProfile;return o.createElement(O.fu,{name:t3.e0.COMMUNITY_HUB_PROFILE,properties:{handle:e.profile_handle,profileId:e.id}},o.createElement("div",{className:this.props.currentUser?"community_hub_public_profile--signedInProfileContainer--8jWX9":"community_hub_public_profile--signedOutProfileContainer--nIxAf"},o.createElement("div",null,o.createElement(gy,{profileId:e.id,profile:e}),o.createElement(vv,{profileId:e.id,profile:e})),(0,cz.o5)()()&&!(0,d.y3)()&&o.createElement("div",{className:"community_hub_public_profile--footerContainer--L38Gh"},o.createElement(dM,null)),o.createElement(mp.Ay,null)))})}}vh.displayName="CommunityHubProfile";let vy=(0,s.Ng)(e=>{var t;return{currentUser:"user"in e?e.user:null,currentSelectedView:"selectedView"in e?e.selectedView:null,loadingState:e.loadingState??{},authedActiveCommunityProfileId:"authedActiveCommunityProfile"in e?(null==(t=e.authedActiveCommunityProfile)?void 0:t.id)??null:null}})(vh),vb=lI.M4.Query({fetch:async e=>(await gf.s.getHandle({handle:e})).data.meta});function vw(){var e;let{handle:t}=(0,cD.g)(),[a]=(0,lI.IT)(vb(t)),r=(0,s.wA)(),n=o.useCallback(()=>{m.Ay.redirect("/404")},[]);return o.useEffect(()=>{"errors"===a.status&&(404===a.errors.status&&n(),r(C.s.error((0,S.t)("community.actions.error_fetching_profile_information"))))},[r,n,a]),o.createElement(vy,{currentProfile:(null==(e=a.data)?void 0:e.profile)??null,on404Redirect:n})}var vT=a(30970),vI=a(843540);let vx=a(699651).u;var vN=a(84336),vC=a(592597);let vS=lI.M4.Query({fetch:async({apiResourceType:e,id:t})=>{switch(e){case"file":return(await gF.H.getVersions({id:t})).data.meta;case"plugin":return(await gP.V.getVersions({pluginId:t})).data.meta.plugin;case"widget":return(await gM.U.getVersions({widgetId:t})).data.meta.plugin;default:(0,el.xb)(e,`Unknown resource type: ${e}`)}},output:({data:e,args:{apiResourceType:t}})=>"plugin"===t||"widget"===t?(0,pG.I$)(e):e}),vk=(0,rP.nF)((e,{pluginId:t,isWidget:a})=>tQ.Ay.post(`/api/${a?"widgets":"plugins"}/${t}/view`,{pluginId:t}));var vA=a(941448);function vL({category:e,rdpImpressionId:t}){let a=(0,dx.N)(`(max-width: ${oQ._C6})`),{parent_category:r}=e||{parent_category:null},n=(0,d4.S)(null==r?void 0:r.url_slug,dL.LJ),l=(0,d4.S)(e.url_slug,dL.LJ),i=!!t,s=[r&&n&&{text:null==r?void 0:r.title,linkProps:{to:new dR.IE({categorySlug:n}).to,trackingEventName:"cmty_breadcrumbs_category",trackingProperties:{name:"category_breadcrumb_clicked",category_slug:n,category_text:r.title,rdpImpressionId:t,is_mobile:a}}},l&&{text:(0,S.Yd)(e.i18n_meta.title,e.title),linkProps:{to:new dR.IE({categorySlug:l}).to,trackingEventName:"cmty_breadcrumbs_category",trackingProperties:{name:"category_breadcrumb_clicked",category_slug:l,category_text:e.title,rdpImpressionId:t,is_mobile:a}}}].filter(Boolean);return o.createElement(dS,{breadcrumbs:s,surface:i?"resource_page":"category"})}var vR=a(323434);let vD="mobile_media_carousel--carouselItem--k7rAE",vF=(e,t)=>Math.abs(e)*t,vP=(e,t)=>{let a=[];return e===t[0]-1||e===t[1]+1?a.push("scale(0.6)"):e===t[0]-2||e===t[1]+2?a.push("scale(0.4)"):(e===t[0]-3||e===t[1]+3)&&a.push("scale(0)"),a},vM={enter:e=>({x:e>0?300:-300,opacity:0}),center:{zIndex:1,x:0,opacity:1},exit:e=>({zIndex:0,x:e<0?300:-300,opacity:0})};function vO({resource:e}){let t=(0,mf.J)(),[a,r]=o.useState(0),[n,l]=o.useState(0),i=(0,cG.z$)(e),s=(0,cG.N6)(e),c=s.length>1,d=s[a],[m,u]=(0,o.useState)([0,2]),[_,p]=(0,o.useState)(0);if(!c||!d)return o.createElement(vB,{resource:e,selectedMedium:d});let[f,g]=(0,_V.P)(d),E=e=>{let t=(0,cv.qE)(a+e,0,s.length-1);r(t),t>m[1]?(u(e=>[e[0]+1,e[1]+1]),p(_-10)):t<m[0]&&(u(e=>[e[0]-1,e[1]-1]),p(_+10))};return o.createElement(O.fu,{name:t3.e0.COMMUNITY_MOBILE_RDP_CAROUSEL,properties:{resource_type:(0,cG.Vm)(e),resource_id:e.id,searchSessionId:t}},o.createElement("div",{className:"mobile_media_carousel--mobileMediaCarousel--AIpoz",onMouseDown:e=>{e.stopPropagation(),e.preventDefault()},role:"grid",tabIndex:0},o.createElement(vR.N,{mode:"popLayout",initial:!1,custom:n},o.createElement(fU.P.div,{key:a,custom:n,variants:vM,initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.05}},whileDrag:{cursor:"grabbing"},drag:"x",dragDirectionLock:!0,dragConstraints:{left:0,right:0},dragElastic:.5,onDragEnd:(r,{offset:n,velocity:i})=>{let o=vF(n.x,i.x);o<-500?(E(1),l(1),(0,tK.sx)("community_mobile_rdp",{name:"mobile_rdp_carousel_swipe",community_resource_id:e.id,resource_type:(0,cG.Vm)(e),selectedIndex:a,searchSessionId:t})):o>500&&(E(-1),l(-1),(0,tK.sx)("community_mobile_rdp",{name:"mobile_rdp_carousel_swipe",community_resource_id:e.id,resource_type:(0,cG.Vm)(e),selectedIndex:a,searchSessionId:t}))}},o.createElement("div",{className:vD},"video"===d.type?o.createElement(_H.A,{src:(0,_V.Mf)(d,e),fallbackSrc:d.url,useHLS:!0,autoPlay:!0,muted:!0,onEnded:()=>{(0,tK.sx)("community_mobile_rdp",{name:"mobile_rdp_video_ended",community_resource_id:e.id,resource_type:(0,cG.Vm)(e),searchSessionId:t})}}):o.createElement(_V.F5,{thumbnailUrl:f,resourceId:e.id,altText:(0,cG.qD)(e).name+" preview",thumbnailContext:dw.O7.DETAIL,resizedThumbnailUrls:g,resourceHeroType:i,isMobileCarousel:!0})))),o.createElement("div",{className:"mobile_media_carousel--carouselIndicator--etWE0",style:{transform:`translateX(${-_}px)`}},(0,cv.y1)(s.length).filter(e=>e<=m[1]+3&&e>=m[0]-3).map(e=>{let t=[`translateX(${_}px)`,...vP(e,m)].join(" ");return o.createElement("div",{key:e,className:ey()("mobile_media_carousel--carouselDot--kqCx2",{"mobile_media_carousel--activeCarouselDot--dBLJE":e===a}),style:{transform:t}})}))))}function vB({resource:e,selectedMedium:t}){let a=(0,mf.J)();if(t&&"video"===t.type)return o.createElement("div",{className:vD},o.createElement(_H.A,{src:(0,_V.Mf)(t,e),fallbackSrc:t.url,useHLS:!0,autoPlay:!0,muted:!0,onEnded:()=>{(0,tK.sx)("community_mobile_rdp",{name:"mobile_rdp_video_ended",community_resource_id:e.id,resource_type:(0,cG.Vm)(e),searchSessionId:a})}}));let r=(0,cY.U)(e)?e.resized_thumbnail_urls:void 0;return o.createElement("div",{className:vD},o.createElement(_V.F5,{thumbnailUrl:e.thumbnail_url||"",resourceId:e.id,altText:(0,cG.qD)(e).name+" preview",thumbnailContext:dw.O7.DETAIL,resourceHeroType:(0,cG.z$)(e),resizedThumbnailUrls:r,isMobileCarousel:!0}))}var vU=a(520607);let vV=(0,nL.r1)(i9.Xt);function vH(){let e=(0,aJ.md)(vV),t=(0,$.iZ)(),a=(0,s.d4)(e=>e.authedActiveCommunityProfile),r=(0,dx.N)(`(max-width: ${ua.YW-1}px)`),{show:n,isShowing:l,complete:i}=(0,nk.e)({overlay:nP.cJy,priority:nR.N.DEFAULT_MODAL},[e]);return(0,u.h)(()=>{!r&&a&&a.has_published&&n({canShow:e=>!e})}),o.createElement(vU._l,{isShowing:l,title:(0,S.tx)("community.modal.creator_carousel_nux.add_image_and_video_previews"),description:(0,S.tx)("community.modal.creator_carousel_nux.drive_eyeballs_and_engagement"),media:o.createElement(vU.B$,{width:400,src:"https://static.figma.com/uploads/02d9c70dd6cacb66d38819ec23ce6f1b6202e13d",alt:"An illustration of a carousel of images and videos",aspectRatio:.82}),primaryCta:{type:"link",label:(0,S.tx)("community.modal.creator_carousel_nux.update_my_resources"),href:`/@${null==a?void 0:a.profile_handle}`,ctaTrackingDescriptor:ew.c.UPDATE_MY_RESOURCES,trackingProperties:{userId:null==t?void 0:t.id}},secondaryCta:{type:"link",label:(0,S.tx)("community.learn_more"),href:"https://help.figma.com/hc/en-us/articles/22166943560983-Grow-your-audience-on-Community#mediapreviews",ctaTrackingDescriptor:ew.c.LEARN_MORE,trackingProperties:{userId:null==t?void 0:t.id,profileId:null==a?void 0:a.id}},trackingContextName:"community_creator_carousel_media_nux",userFlagOnShow:i9.Xt,clickOutsideToHide:!0,onClose:i,closeButtonColor:"dark"})}function vW({resource:e}){return(0,m3.RB)(e)?null:o.createElement(o.Fragment,null,o.createElement(gG.p,{featureFlag:"cmty_rdp_creator_modal"},o.createElement(vH,null)))}function vj({resource:e,hasScrolled:t}){let a=o.createElement(_k,{resource:e});return o.createElement(_b,{CTAButton:a,resource:e,hasScrolled:t})}function v$({resource:e,rdpImpressionId:t,category:a}){let[r,n]=o.useState(!1),l=(0,_z.C)(e),i=(0,cG.z$)(e),s=(0,cz.kk)();return o.createElement("div",{className:"two_column_resource_page--autoLayoutContainer--odI-S"},s()&&a&&o.createElement(vL,{category:a,rdpImpressionId:t}),o.createElement(eg.Y,{width:"100%",direction:"horizontal",height:"hug-contents",verticalAlignItems:"center",horizontalAlignItems:"center",spacing:"auto"},o.createElement("div",{className:_Q},o.createElement(vG,{resource:e,hasScrolled:r})),o.createElement("div",{className:i!==ur.Z4.THUMBNAIL||l?_q:_X},o.createElement(_$,{resource:e,is16to9AspectRatio:l}),o.createElement(r4.a,{className:"two_column_resource_page--scrollSentinel--B3rnT",onIntersectionChange:e=>n(!e.isIntersecting)}))))}function vG({resource:e,hasScrolled:t}){return o.createElement("div",{className:ef.cx.relative.$},o.createElement(vj,{hasScrolled:t,resource:e}))}function vz({resource:e,rdpImpressionId:t,category:a}){return o.createElement(o.Fragment,null,o.createElement(vW,{resource:e}),o.createElement(vx,{resource:e}),o.createElement(v$,{resource:e,rdpImpressionId:t,category:a}),o.createElement(_g,{resource:e,rdpImpressionId:t}))}function vY({resource:e,rdpImpressionId:t,isMobileSize:a,category:r}){let[n,l]=o.useState(!1),i=(0,cz.kk)();return o.createElement(o.Fragment,null,r&&i()&&o.createElement(vL,{category:r,rdpImpressionId:t}),o.createElement(vO,{resource:e}),o.createElement(_T,{resource:e,hasScrolled:n}),o.createElement("div",{className:"resource_page--mobileScrollSentinelContainer--AkI9N"},o.createElement(r4.a,{className:"resource_page--scrollSentinel--yWuQV",onIntersectionChange:e=>l(!e.isIntersecting)})),o.createElement(_g,{resource:e,rdpImpressionId:t,isMobileSize:a}))}function vK(){let[{apiResourceType:e,resourceId:t},a]=o.useState({apiResourceType:(0,cG.eD)()[0],resourceId:(0,cG.eD)()[1]}),r=(0,s.wA)(),n=(0,dx.N)(`(max-width: ${ua.YW-1}px)`),l=(0,cz.o5)();o.useEffect(()=>{let e=m.Ay.listen(()=>{let[e,t]=(0,cG.eD)();d7.S.hasOwnProperty(e)&&(a(a=>a.apiResourceType===e&&a.resourceId===t?a:{apiResourceType:e,resourceId:t}),setTimeout(()=>window.scrollTo(0,0),100))});return()=>{e(),document.body.removeAttribute("data-hide")}},[]);let[i]=(0,p.IT)(vS({apiResourceType:e,id:t})),c=i.data,u=!!(null==c?void 0:c.category_slug),[_]=(0,p.IT)((0,vC.Zp)({categorySlug:(null==c?void 0:c.category_slug)??""}),{enabled:u}),f=_.data??void 0;o.useEffect(()=>{e&&t&&c&&((0,cY.U)(c)?r((0,gR.Sb)({hubFiles:[c],src:"resourcePage"})):r((0,vN.Qi)({publishedPlugins:[c],src:"resourcePage"})),document.title=(0,cG.qD)(c).name+"\xa0| Figma",document.body.removeAttribute("data-hide"))},[e,t,r,c]);let g=o.useRef(null),E=o.useCallback(()=>{g.current&&g.current.scrollIntoView({behavior:"smooth"})},[g]);if(o.useEffect(()=>{c&&r((0,cY.U)(c)?(0,gR.vr)({hubFileId:c.id}):vk({pluginId:c.id,isWidget:(0,cY.xQ)(c)}))},[r,c]),!c)return o.createElement(o.Fragment,null);let v=(0,vA.Ay)(c),h=(0,mu.g)();return o.createElement("div",{className:"resource_page--resourcePage--n6Aio text--fontPos14--OL9Hp text--_fontBase--QdLsd"},o.createElement(O.fu,{name:v.name,properties:v.properties},o.createElement(m4.H.Provider,{value:{onScrollToRatings:E,externalCommentScrollRef:g}},o.createElement(ut.Ay,{mediaQuery:`(min-width: ${ua.EX}px)`},o.createElement(vz,{resource:c,rdpImpressionId:h,category:f})),o.createElement(ut.Ay,{mediaQuery:`(min-width: ${ua.YW}px) and (max-width: ${ua.EX-1}px)`},o.createElement(vz,{resource:c,rdpImpressionId:h,category:f})),o.createElement(ut.Ay,{mediaQuery:`(max-width: ${ua.YW-1}px)`},o.createElement(vY,{resource:c,rdpImpressionId:h,category:f,isMobileSize:n}))),l()&&!(0,d.y3)()&&o.createElement("div",{className:"resource_page--footerContainer--bAm54"},o.createElement(dM,null))))}function vQ(e){return o.useEffect(()=>{vT.X.initialRenderDurationMs=Math.round(window.performance.now()-vT.X.domContentLoadedMs),vT.X.timeToLoadMs=Math.round(performance.now()),vT.X.report(tK.sx),(0,eP.qD)({name:"Community Hub"})},[]),o.createElement(s.Kq,{store:e.store},o.createElement("div",{"data-testid":"community-app",className:"community_app--communityApp--kXC00"},o.createElement(fp,null),o.createElement(cD.dO,null,o.createElement(cD.qh,{path:"/community/templates/:urlSlug"},o.createElement(_9,null)),o.createElement(cD.qh,{path:"/community/collections/:urlSlug"},o.createElement(_9,null)),o.createElement(cD.qh,{path:"/community/collections/"},o.createElement(dK,null)),o.createElement(cD.qh,{path:"/community/file/*"},o.createElement(pe,null),o.createElement(vK,null)),o.createElement(cD.qh,{path:"/community/plugin/*"},o.createElement(pe,null),o.createElement(vK,null)),o.createElement(cD.qh,{path:"/community/widget/*"},o.createElement(pe,null),o.createElement(vK,null)),o.createElement(cD.qh,{path:"/community/tag/"},o.createElement(e.FeedView,null)),o.createElement(cD.qh,{path:"/community/search"},o.createElement(pe,null),o.createElement(e.FeedView,null)),o.createElement(cD.qh,{path:dL.bV},o.createElement(e.FeedView,null)),o.createElement(cD.qh,{path:"/community*"},o.createElement(cD.rd,{to:"/community",from:"/community*"}),o.createElement(_7,null),o.createElement(gp,null)),o.createElement(cD.qh,{path:"/@:handle"},o.createElement(vw,null))),o.createElement(cW,null),!1,o.createElement(mp.Ay,null)))}function vq({category:e,showTags:t=!1}){let a=(0,d4.S)(e.url_slug,dL.LJ);if(!a||e.selected_tag)return null;let r=t?e.tags.map(e=>({to:new dR.IE({categorySlug:a}).href+`/${e.url_slug}`,title:e.text,translatedTitle:(0,S.Yd)(e.i18n_meta.text,e.text),urlSlug:e.text})):e.child_categories?e.child_categories.filter(e=>(0,d4.N)(e.url_slug,dL.LJ)&&"other"!==e.title.toLowerCase()).map(e=>({to:new dR.IE({categorySlug:e.url_slug}).href,title:e.title,translatedTitle:(0,S.Yd)(e.i18n_meta.title,e.title),urlSlug:e.url_slug})):[];return 0===r.length?null:o.createElement("div",{className:"category_links_container--subcategoriesContainer--6e1tK"},r.map(({to:e,title:a,translatedTitle:r,urlSlug:n})=>o.createElement(O.o3,{key:e,trackingEventName:"cmty_category",trackingProperties:{name:t?"tag_link_clicked":"subcategory_link_clicked",category_slug:n,text:a,to:e},to:e,className:"category_links_container--subcategory--Wzmn3 text--fontPos13--xW8hS text--_fontBase--QdLsd"},r)))}vT.X.domContentLoadedMs=Math.round(window.performance.now());var vX=a(890710);function vJ({categorySlug:e,category:t,isTagsEnabled:a,isFeedPage:r=!1}){let n=(0,dx.N)(`(max-width: ${oQ._C6})`),{parent_category:l}=t||{parent_category:null},i=(0,d4.S)(null==l?void 0:l.url_slug,dL.LJ),s=(0,cz.kk)(),c=(r||!s())&&l&&i;return t?o.createElement("div",{className:"category_banner--categoryBannerRedesign--Ri6Fg"},o.createElement("div",{className:ey()("category_banner--headerContainer--Wysim",{"category_banner--breadcrumbsPadding--o8hp4":s()})},s()&&o.createElement(vL,{category:t}),o.createElement("div",{className:ey()("category_banner--categoryHeaderRedesign--NN5On text--fontPos24Whyte--gYiFz text--_fontBaseWhyte--efAjI",{[ef.cx.flexColumn.$]:n})},c&&o.createElement(o.Fragment,null,o.createElement(O.o3,{to:new dR.IE({categorySlug:i}).to,trackingEventName:"cmty_category",trackingProperties:{name:"category_breadcrumb_clicked",category_slug:l.url_slug,from_category_slug:e,is_mobile:n},className:"category_banner--categoryBannerParent--bx7AV"},n?o.createElement("div",{className:"category_banner--mobileBackButton--hZ3hI"},o.createElement(es.B,{svg:vX.A,style:{fill:(0,pr.TD)("default")}})):(0,S.Yd)(l.i18n_meta.title,l.title)),!n&&o.createElement(es.B,{svg:gi.A,style:{fill:(0,pr.TD)("default")}})),o.createElement("h1",null,function(e){let t=e.selected_tag,a=(null==t?void 0:t.i18n_meta.h1_title)||e.i18n_meta.title,r=(null==t?void 0:t.h1_title)||e.title;return(0,S.Yd)(a,r)}(t))),o.createElement("p",{className:"category_banner--categoryDescriptionRedesign--chvSi text--fontPos13--xW8hS text--_fontBase--QdLsd"},function(e){let t=e.selected_tag,a=(null==t?void 0:t.i18n_meta.description)||e.i18n_meta.description,r=(null==t?void 0:t.description)||e.description;return(0,S.Yd)(a,r)}(t))),o.createElement(vq,{category:t,showTags:a&&!!l}),(0,_.kc)().piper_cmty_home_banner&&e===dL.LJ.presentations&&o.createElement("div",{className:"category_banner--categorySlidesPromoBanner--itNB4"},o.createElement(gd,null))):null}function vZ({category:e}){return e&&e.extended_description?o.createElement("div",{className:"category_extended_description--extendedDescriptionContainer--TTPGo"},o.createElement("div",{className:"category_extended_description--title--hucIj text--fontPos24--YppUD text--_fontBase--QdLsd"},(0,S.tx)("categories.about")),o.createElement("p",{className:"category_extended_description--extendedDescription--KngAg text--fontPos13--xW8hS text--_fontBase--QdLsd"},function(e){let t=e.selected_tag,a=(null==t?void 0:t.i18n_meta.extended_description)||e.i18n_meta.extended_description,r=(null==t?void 0:t.extended_description)||e.extended_description;return(0,S.Yd)(a,r)}(e))):null}var v0=a(927092),v1=a(117688),v2=a(236705),v4=a(83958);let v8={files:v1.A,plugins:v2.A,widgets:v4.A,profiles:v0.A,mixed:vd.A};function v3(e){if(e.isError)return null;let t=o.createElement("span",{className:"empty_search_state--bold--s4eFD"},e.query);switch(e.resourceType){case u5.L.SearchResourceTypes.FILES:if(e.view.price===ff.C.FREE)return(0,S.tx)("community.search.empty_state_hub_files_free",{query:t});if(e.view.price===ff.C.PAID)return(0,S.tx)("community.search.empty_state_hub_files_paid",{query:t});return(0,S.tx)("community.search.empty_state_hub_files",{query:t});case u5.L.SearchResourceTypes.PLUGINS:if(e.view.price===ff.C.FREE)return(0,S.tx)("community.search.empty_state_public_plugins_free",{query:t});if(e.view.price===ff.C.PAID)return(0,S.tx)("community.search.empty_state_public_plugins_paid",{query:t});return(0,S.tx)("community.search.empty_state_public_plugins",{query:t});case u5.L.SearchResourceTypes.WIDGETS:if(e.view.price===ff.C.FREE)return(0,S.tx)("community.search.empty_state_public_widgets_free",{query:t});if(e.view.price===ff.C.PAID)return(0,S.tx)("community.search.empty_state_public_widgets_paid",{query:t});return(0,S.tx)("community.search.empty_state_public_widgets",{query:t});case u5.L.SearchResourceTypes.PROFILES:return(0,S.tx)("community.search.empty_state_creators",{query:t});case u5.L.SearchResourceTypes.MIXED:default:if(e.view.price===ff.C.FREE)return(0,S.tx)("community.search.no_resources_matching_free",{query:t});if(e.view.price===ff.C.PAID)return(0,S.tx)("community.search.no_resources_matching_paid",{query:t});return(0,S.tx)("community.search.no_resources_matching",{query:t})}}function v5(e){return o.createElement("div",{className:"empty_search_state--emptyState--2TAUS search_results_view--emptyState--HtHm1 tiles_view--emptyState--jfzsE text--fontPos11--2LvXf text--_fontBase--QdLsd"},o.createElement(es.B,{className:"empty_search_state--emptyStateIllustrations--BnydB search_results_view--emptyStateIllustrations--CN9Y8",svg:v8[e.resourceType],useOriginalSrcFills_DEPRECATED:!0}),o.createElement("div",{className:"empty_search_state--emptyStateTextWrapper--n2j3d search_results_view--emptyStateTextWrapper--zg-Cu"},o.createElement("div",{className:"empty_search_state--emptyStateText--Bv9hN search_results_view--emptyStateText---YT8b ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},o.createElement(v3,{...e}))))}var v9=a(62589);function v6(){var e;let t;let a=(0,cz.YQ)()(),{categorySlug:r,tagSlug:n}=(0,v9.Rd)(dR.IE),l=(0,v9.vA)(dR.IE),i=(0,o.useMemo)(()=>(r===dL.LJ.presentations&&void 0===l.resource_type&&(l.editor_type=pN.k.Editors.SLIDES,l.resource_type=u5.L.BrowseResourceTypes.FILES),{resourceType:l.resource_type??u5.L.BrowseResourceTypes.MIXED,editorType:l.editor_type??pN.k.Editors.ALL,price:l.price??ff.C.ALL,sortBy:l.sort_by??(0,pj.H)()}),[l,r]),{trackResourceImpression:c,flushAndResetResourceImpressions:u}=g_({extraProperties:{sort:l.sort_by,resourceType:l.resource_type}}),[_,p]=(0,o.useState)(!0),[f,g]=(0,o.useState)(!1),E=(0,cz.o5)(),v=(0,dx.N)(`(max-width: ${oQ.d8i})`),h=(0,dx.N)(`(max-width: ${oQ.g8m})`),[y]=(0,lI.IT)((0,vC.Zp)({categorySlug:r,tagSlug:n})),[b]=(0,lI.IT)((0,vC.R5)(r));o.useEffect(()=>{u()},[r,u]);let w="loaded"!==y.status?null:y.data,T="loaded"!==b.status?null:b.data,{resources:I,loadMore:x,canLoadMore:N,loading:C}=fM((e=null==w?void 0:w.editor_types[0],{...i,category:r,tags:n,editorType:e||i.editorType,limit:48}),"loaded"===y.status),S=(0,o.useMemo)(()=>{let e=new Set;return T&&T.shelf_content.forEach(t=>{e.add(t.id)}),e},[T]),k=(0,o.useMemo)(()=>I.filter(e=>!S.has(e.id)),[I,S]),A=(0,o.useMemo)(()=>T?(0,cG.o7)(T.shelf_content,{editor_type:i.editorType,price:i.price,resourceType:i.resourceType}):[],[T,i.editorType,i.price,i.resourceType]),L=(0,o.useMemo)(()=>[...A,...k],[A,k]),R=(0,o.useRef)(null),D=(0,s.d4)(e=>{var t,a;return!!((null==(t=e.authedActiveCommunityProfile)?void 0:t.team_id)||(null==(a=e.authedActiveCommunityProfile)?void 0:a.org_id))});(0,o.useEffect)(()=>{C||(_&&p(!1),g(!1))},[_,C]);let F=null==w?void 0:w.meta_title;if((0,o.useEffect)(()=>{F&&(document.title=F)},[F]),!w)return null;if(_&&(C||"loading"===y.status||"loading"===b.status))return o.createElement("div",{className:ef.cx.p10.$},o.createElement(dT.y$,null));let P=!C&&0===L.length,M=C&&!f,O=i.resourceType===u5.L.BrowseResourceTypes.PLUGINS&&(M||L.every(cY.I0));return t=P?o.createElement(v5,{resourceType:i.resourceType,query:r,view:i}):O?o.createElement(fC,{plugins:L,onIntersectionChange:(e,t)=>{t&&c(e)},isOrgTeamBrowsing:D,isLoading:M}):o.createElement(fF,{resources:L,maxGridDim:{cols:h?2:v?3:4},mobileMaxGridDim:{cols:1},onIntersectionChange:(e,t)=>{t&&c(e)},isLoading:M,loadingTileCount:8}),o.createElement(o.Fragment,null,o.createElement(vJ,{category:w,categorySlug:r,isTagsEnabled:a}),o.createElement("div",{className:"category_page--feedContainer--9f3SB text--fontPos15--IR8IB text--_fontBase--QdLsd"},o.createElement(fI,{allowedEditorTypes:w.editor_types,containerRef:R,filterState:i,onUpdate:e=>{let t={};e.forEach(({key:e,value:a})=>{t[e]=a});let a={...i,...t};w.editor_types[0]&&(a.editorType=w.editor_types[0]),m.Ay.replace(new dR.IE({categorySlug:r,tagSlug:n},{resource_type:a.resourceType,editor_type:a.editorType,price:a.price}).href)},context:"category"}),o.createElement("div",{className:"category_page--feed--j1AWz text--fontPos13--xW8hS text--_fontBase--QdLsd"},t,N&&o.createElement(dB,{onClick:e=>{e.preventDefault(),x(),g(!0)},isLoading:f,isMoreToFetch:N}),o.createElement(vZ,{category:w}),E()&&!(0,d.y3)()&&o.createElement("div",{className:"category_page--footerContainer--RNpoP"},o.createElement(dM,null)))))}function v7(){let{categorySlug:e}=(0,v9.Rd)(dR.IE);return o.createElement(O.fu,{name:t3.e0.COMMUNITY_HUB_CATEGORY,properties:{category:e}},o.createElement(v6,null))}a(157663);let he={All:({active:e})=>o.createElement("svg",{width:"19",height:"19",viewBox:"-1 -1 21 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e?o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 6V2H6V6H2ZM0 1C0 0.447715 0.447715 0 1 0H7C7.55228 0 8 0.447715 8 1V7C8 7.55228 7.55228 8 7 8H1C0.447715 8 0 7.55228 0 7V1ZM2 17V13H6V17H2ZM0 12C0 11.4477 0.447715 11 1 11H7C7.55228 11 8 11.4477 8 12V18C8 18.5523 7.55228 19 7 19H1C0.447715 19 0 18.5523 0 18V12ZM13 13V17H17V13H13ZM12 11C11.4477 11 11 11.4477 11 12V18C11 18.5523 11.4477 19 12 19H18C18.5523 19 19 18.5523 19 18V12C19 11.4477 18.5523 11 18 11H12ZM12 0C11.4477 0 11 0.447715 11 1V7C11 7.55228 11.4477 8 12 8H18C18.5523 8 19 7.55228 19 7V1C19 0.447715 18.5523 0 18 0H12Z",fill:"var(--color-icon-selected, #0D99FF)"}):o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 6V2H6V6H2ZM0 1C0 0.447715 0.447715 0 1 0H7C7.55228 0 8 0.447715 8 1V7C8 7.55228 7.55228 8 7 8H1C0.447715 8 0 7.55228 0 7V1ZM2 17V13H6V17H2ZM0 12C0 11.4477 0.447715 11 1 11H7C7.55228 11 8 11.4477 8 12V18C8 18.5523 7.55228 19 7 19H1C0.447715 19 0 18.5523 0 18V12ZM13 13V17H17V13H13ZM12 11C11.4477 11 11 11.4477 11 12V18C11 18.5523 11.4477 19 12 19H18C18.5523 19 19 18.5523 19 18V12C19 11.4477 18.5523 11 18 11H12ZM13 6V2H17V6H13ZM11 1C11 0.447715 11.4477 0 12 0H18C18.5523 0 19 0.447715 19 1V7C19 7.55228 18.5523 8 18 8H12C11.4477 8 11 7.55228 11 7V1Z",fill:"var(--color-icon, rgba(0, 0, 0, 0.8))"})),Files:e=>o.createElement("svg",{width:"18",height:"23",viewBox:"0 0 18 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M-0.000976562 0.00390625H11.4132L17.999 6.58969V22.0039H-0.000976562V0.00390625ZM1.99902 2.00391V20.0039H15.999V8.00391H9.99902V2.00391H1.99902ZM11.999 3.41812L14.5848 6.00391H11.999V3.41812Z",fill:"var(--color-icon, rgba(0, 0, 0, 0.8))"})),Plugins:e=>o.createElement("svg",{width:"18",height:"24",viewBox:"0 0 18 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 2C7.12831 2 6 3.10615 6 4.29412C6 4.80364 6.18423 5.32346 6.52975 5.77907C6.86869 6.22599 6.8635 6.76903 6.69667 7.1662C6.52648 7.57138 6.10414 8 5.46502 8H1.99902V21.9961H16V19.6417C15.4694 19.8705 14.8924 20 14.2942 20C11.6161 20 10 17.5466 10 15C10 12.4534 11.6161 10 14.2942 10C14.8924 10 15.4694 10.1295 16 10.3583V8H12.535C11.8959 8 11.4735 7.57138 11.3033 7.1662C11.1365 6.76903 11.1313 6.22599 11.4703 5.77907C11.8158 5.32346 12 4.80364 12 4.29412C12 3.10615 10.8717 2 9 2ZM4 4.29412C4 1.61609 6.45341 0 9 0C11.5466 0 14 1.61609 14 4.29412C14 4.89237 13.8705 5.46938 13.6417 6H16.125C17.1605 6 18 6.83947 18 7.875V11.465C18 12.1041 17.5714 12.5264 17.1662 12.6966C16.769 12.8635 16.226 12.8687 15.7791 12.5297C15.3235 12.1842 14.8037 12 14.2942 12C13.1062 12 12 13.1283 12 15C12 16.8717 13.1062 18 14.2942 18C14.8037 18 15.3235 17.8158 15.7791 17.4703C16.226 17.1313 16.769 17.1365 17.1662 17.3034C17.5714 17.4736 18 17.8959 18 18.535V22.1211C18 23.1566 17.1605 23.9961 16.125 23.9961H1.87402C0.838488 23.9961 -0.000976562 23.1566 -0.000976562 22.1211V7.875C-0.000976562 6.83947 0.838488 6 1.87402 6H4.35834C4.12951 5.46938 4 4.89237 4 4.29412Z",fill:"var(--color-icon, rgba(0, 0, 0, 0.8))"})),Widgets:e=>o.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.41421 10.5854L3.5146 8.485V5.51451V3.51451H5.5146H8.48509L10.5854 1.41421L11.9996 0L13.4138 1.41421L15.5141 3.51451H18.4846H20.4846V5.51451V8.485L22.585 10.5854L23.9992 11.9996L22.585 13.4138L20.4846 15.5142V18.4845V20.4845H18.4846H15.5143L13.4138 22.585L11.9996 23.9992L10.5854 22.585L8.48491 20.4845H5.5146H3.5146V18.4845V15.5142L1.41421 13.4138L0 11.9996L1.41421 10.5854ZM5.5146 8.485V5.51451H8.48509H9.31352L9.8993 4.92872L11.9996 2.82843L14.0999 4.92872L14.6857 5.51451H15.5141H18.4846V8.485V9.31343L19.0704 9.89921L21.1708 11.9996L19.0704 14.1L18.4846 14.6858V15.5142V18.4845H15.5143H14.6859L14.1001 19.0703L11.9996 21.1708L9.89912 19.0703L9.31334 18.4845H8.48491H5.5146V15.5142V14.6858L4.92882 14.1L2.82843 11.9996L4.92882 9.89921L5.5146 9.31343V8.485ZM13.2526 8.65802L13.9111 7.90544L12.4059 6.58843L11.7474 7.34101L8.24742 11.341L6.79623 12.9995H9H12.7962L10.7474 15.341L10.0889 16.0936L11.5941 17.4106L12.2526 16.658L15.7526 12.658L17.2038 10.9995H15H11.2038L13.2526 8.65802Z",fill:"var(--color-icon, rgba(0, 0, 0, 0.8))"})),Union:e=>o.createElement("svg",{width:"20",height:"24",viewBox:"0 0 20 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 6C14 8.20914 12.2091 10 10 10C7.79086 10 6 8.20914 6 6C6 3.79086 7.79086 2 10 2C12.2091 2 14 3.79086 14 6ZM16 6C16 9.31371 13.3137 12 10 12C6.68629 12 4 9.31371 4 6C4 2.68629 6.68629 0 10 0C13.3137 0 16 2.68629 16 6ZM2.25203 22C3.14012 18.5495 6.27232 16 10 16C13.7277 16 16.8599 18.5495 17.748 22H2.25203ZM10 14C14.8379 14 18.8734 17.4355 19.8 22C19.9311 22.6462 20 23.3151 20 24H18H2H0C0 23.3151 0.0688605 22.6462 0.200036 22C1.12658 17.4355 5.16208 14 10 14Z",fill:"var(--color-icon, rgba(0, 0, 0, 0.8))"}))};var ht=a(178466);function ha(e){var t,a;let r=null==(t=(0,ht.Gq)())?void 0:t.getPrimaryLocale(!1);if(r&&["ja","fr","de"].includes(r)){let t=null==(a=(0,ht.Gq)())?void 0:a.getDictionary(r),n=null==t?void 0:t.getDynamicString(e.i18n_meta.title),l=null==t?void 0:t.getDynamicString(e.i18n_meta.description);if(e.title&&!n||e.description&&!l)return!1}return!0}var hr=a(28567);let hn="tag_and_search_header--tagOrSearchHeaderContainer--i-UIA text--fontPos16--oMC-G text--_fontBase--QdLsd",hl="tag_and_search_header--tagOrSearchHeaderInnerWrapper--Pb-dS",hi=(e,t)=>e.resourceType===u5.L.SearchResourceTypes.MIXED?(0,S.tx)("community.landing_page.query_header__mixed",{query:t}):e.resourceType===u5.L.SearchResourceTypes.PLUGINS?(0,S.tx)("community.landing_page.query_header__plugins",{query:t}):e.resourceType===u5.L.SearchResourceTypes.FILES?(0,S.tx)("community.landing_page.query_header__files",{query:t}):e.resourceType===u5.L.SearchResourceTypes.WIDGETS?(0,S.tx)("community.landing_page.query_header__widgets",{query:t}):e.resourceType===u5.L.SearchResourceTypes.PROFILES?(0,S.tx)("community.landing_page.query_header__profiles",{query:t}):(0,S.tx)("community.landing_page.query_header",{query:t});function ho({tags:e,view:t}){let a=hi(t,e.map(e=>o.createElement("strong",{key:e},"#",e)));return o.createElement("div",{className:hn},o.createElement("h1",{className:hl},a))}function hs({query:e,view:t,error:a}){return o.createElement("div",{className:ey()({[hn]:!0,"tag_and_search_header--mobileSearchHeaderContainer--gWJWx":g.Ay.mobile})},o.createElement("h1",{className:hl},a?(0,S.tx)("community.error.could_not_complete_search",{error:o.createElement("strong",null,a)}):hi(t,o.createElement("strong",null,e))))}let hc={resourceType:"resourceType",editorType:"editor_type",price:"price",creators:"creators",sortBy:"sort_by"},hd=e=>({resourceType:e.resourceType,editorType:e.editor_type,price:e.price,creators:e.creators,sortBy:e.sort_by}),hm=(e,t)=>{let a=t.getBoundingClientRect(),r=t.closest(`.${cX.pz}`).getBoundingClientRect();e.style.width=a.width+"px",e.style.height=a.height+"px",e.style.top=a.y-r.y+"px"};function hu({view:e,resourceCounts:t}){(0,_.kc)().statsig_aa_flag_web_cmtysidebar;let a=[he.All,he.Files,he.Plugins,he.Widgets,he.Union],r=o.useRef(null);o.useEffect(()=>{if(r.current&&e.resourceType){let e=r.current.parentNode.querySelector(`.${cX.vu}`);hm(r.current,e)}},[e.resourceType]);let n=[[u5.L.BrowseResourceTypes.MIXED,(0,S.t)("community.view_bar.all")],[u5.L.BrowseResourceTypes.FILES,(0,S.t)("community.view_bar.files_and_templates")],[u5.L.BrowseResourceTypes.PLUGINS,(0,S.t)("community.view_bar.plugins")],[u5.L.BrowseResourceTypes.WIDGETS,(0,S.t)("community.view_bar.widgets")]];return"string"==typeof e.query&&n.push(["profiles",(0,S.t)("community.view_bar.creators")]),o.createElement("div",{className:cX.pz},o.createElement("div",{className:cX.w,ref:r}),o.createElement("ul",null,n.map(([r,n],l)=>{let i=(0,i5.MU)({...(0,i5.wl)(),resourceType:r}),s=a[l],c="query"in e?o.createElement("span",{className:cX.fw},t[r]??0):null;return o.createElement("a",{key:r,href:i,onClick:t=>{t.preventDefault(),m.Ay.push(i),(0,tK.sx)("resource_type_filter_changed",{resource_type:r,from:e.resourceType})}},o.createElement("li",{className:e.resourceType===r?cX.vu:""},o.createElement(s,{active:e.resourceType===r}),o.createElement("span",{className:cX.rt},n),c))})))}let h_={files:0,plugins:0,widgets:0,mixed:0,profiles:0},hp=function(){let e=[],t={};return{push:(a,r)=>{let n=a.pathname+a.search,l=t[n];if(l||e.push(n),t[n]={...l||{},state:r},e.length>10){let a=e.shift();delete t[a]}},get:e=>{let a=t[e.pathname+e.search];if(a)return a}}}();function hf({onClick:e,isLoading:t,isMoreToFetch:a}){let r=(0,cz.o5)();return t?o.createElement("div",{className:cX.V3},o.createElement(dT.y$,null)):r()?o.createElement(dB,{onClick:e,isLoading:!1,isMoreToFetch:a}):null}class hg extends o.Component{constructor(e){super(e),this.feedAppWrapper=null,this.hasLoadedFirstTimeForView=!1,this.impressedResourcesForView=new Set,this.impressedResourcesLoggingBuffer=[],this.state={resources:[],resourceCounts:h_,searchResponse:void 0,searchError:void 0,shelves:void 0,pagination:void 0,profiles:[],isActivelyLoadingRequest:!1,category:void 0},this.feedContentRef=o.createRef(),this.filterControlsRef=o.createRef(),(0,i5.QN)(this.props.view)||(document.title=(0,cG.vC)(this.props.view)),this.sendResourceImpressions=(0,ei.s)(()=>{if(0===this.impressedResourcesLoggingBuffer.length)return;let{view:e}=this.props,{trackingContext:t,properties:a}=this.getTrackingProps();(0,tK.sx)("hub_impressed_resources",{impressedItems:this.impressedResourcesLoggingBuffer.map(({id:e})=>e),impressedItemTypes:this.impressedResourcesLoggingBuffer.map(({type:e})=>e),sort:e.sort_by,resourceType:e.resourceType,trackingContext:t,...a}),this.impressedResourcesLoggingBuffer=[]},1e3)}componentDidMount(){this.queryWithParamsAndUpdateState(void 0),(0,dL.OE)(this.props.view)&&this.props.dispatch(pD.Dy({entryPoint:"community"}))}showFeedAsTable(){var e,t;return(null==(e=this.props.view)?void 0:e.resourceType)===u5.L.BrowseResourceTypes.PLUGINS||(null==(t=this.props.view)?void 0:t.resourceType)===u5.L.SearchResourceTypes.PROFILES}componentDidUpdate(e,t){var a,r,n;(0,s.bN)(this.props.view,e.view)?hp.push(this.props.location,this.state):(this.hasLoadedFirstTimeForView=!1,this.queryWithParamsAndUpdateState(e.view),(0,i5.QN)(this.props.view)||(document.title=(0,cG.vC)(this.props.view)),this.sendAndResetResourceImpressions()),(null==(a=this.state.category)?void 0:a.meta_title)!==(null==(r=t.category)?void 0:r.meta_title)&&(document.title=(0,cG.vC)(this.props.view,null==(n=this.state.category)?void 0:n.meta_title))}componentWillUnmount(){(0,dL.OE)(this.props.view)&&this.props.dispatch(pD.ky()),this.sendAndResetResourceImpressions()}isMoreToFetch(){return!this.hasLoadedFirstTimeForView||(0,pW.nC)().filter(this.props.view).isMoreToFetch(this.state.pagination)}parseSearchResponse([e,t]){var a;let r;let n=e.map(e=>{let t=e.model;return"is_widget"in t?(t.is_widget,(0,pG.I$)(t)):t}),l={files:[],plugins:[],widgets:[],mixed:n};n.forEach(e=>{"is_widget"in e?e.is_widget?l.widgets.push(e):l.plugins.push(e):l.files.push(e)}),r=this.props.view.resourceType===u5.L.SearchResourceTypes.PROFILES?t:l[(null==(a=this.props.view)?void 0:a.resourceType)??u5.L.BrowseResourceTypes.MIXED];let i=Object.keys(l).reduce((e,t)=>(e[t]=l[t].length,e),{});return i.profiles=t.length,{resources:r,resourceCounts:i}}asyncFetchAdditionalSearchResources(){let{dispatch:e,view:t,searchSessionId:a}=this.props;Promise.all([e((0,pW.nC)().filter(t).searchResources({resourceType:"files"})),e((0,pW.nC)().filter(t).searchResources({resourceType:"plugins"})),e((0,pW.nC)().filter(t).searchResources({resourceType:"widgets"}))]).then(([e,r,n])=>{if(!this.state.searchResponse)return;let l=[...e.data.meta.results,...r.data.meta.results,...n.data.meta.results],i=this.state.searchResponse[0].reduce((e,t)=>(e[t.model.id]=!0,e),{});l=l.filter(e=>!i[e.model.id]).sort((e,t)=>e.score>t.score?-1:1),this.state.searchResponse[0]=[...this.state.searchResponse[0],...l];let{resources:o,resourceCounts:s}=this.parseSearchResponse(this.state.searchResponse),c=r.data.meta.results.filter(e=>{let t=e.model.roles;return void 0!==t&&t.is_public}).length,d=n.data.meta.results.filter(e=>{let t=e.model.roles;return void 0!==t&&t.is_public}).length;(0,tK.sx)("search_query_result",{query:t.query,responseCounts:this.state.searchResponse[0].length,scope:"community",entry_point:"community",context:"searchView",searchSessionId:a,files:s.files,private_plugins:s.plugins-c,private_widgets:s.widgets-d,public_plugins:c,public_widgets:d,projects:0,teams:0,users:0}),this.setState({searchResponse:[this.state.searchResponse[0],this.state.searchResponse[1]],resources:o,resourceCounts:s})}).catch(()=>{})}querySearch(){var e;let{view:t,dispatch:a}=this.props;return null==(e=this.feedAppWrapper)||e.setAttribute("data-hide","true"),a((0,pW.nC)().filter(t).searchResourcesAndProfiles({resourceType:"mixed"})).then(e=>{let t=[e[0].data.meta.results,e[1].data.meta.results],{resources:a,resourceCounts:r}=this.parseSearchResponse(t);this.asyncFetchAdditionalSearchResources(),this.setState({searchResponse:t,searchError:void 0,resources:a,resourceCounts:r},()=>{var e;null==(e=this.feedAppWrapper)||e.removeAttribute("data-hide")})}).catch(e=>{(0,dL.OE)(this.props.view)&&this.setState({searchError:e.message||(0,S.t)("community.error.search_request_failed"),resources:[]})})}queryBrowse(){var e,t,a;let r;let{view:n,isFooterEnabled:l}=this.props,i=(0,pW.nC)().filter(n),o=n.category,s=Promise.resolve(this.state.shelves),c=Promise.resolve(this.state.category),d=this.hasLoadedFirstTimeForView&&(null==(e=this.state.pagination)?void 0:e.next_page);if(d)r=(0,tQ.k9)(null==(t=this.state.pagination)?void 0:t.next_page);else{null==(a=this.feedAppWrapper)||a.setAttribute("data-hide","true");let e=l()?48:void 0;r=i.browse(n.resourceType,e);let t=o?{shelfType:cY.cS.CATEGORY_PAGE,categorySlug:o}:void 0;s=!this.state.shelves||o?dI.A.getCommunityShelves(t).then(e=>e.data.meta):s,c=o?hr.c.getCategoryBySlug({slug:o}).then(e=>e.data.meta):c}return Promise.all([r,s,c]).then(e=>{let[t,a,r]=e;a&&a.length>0&&(0,eP.qD)({name:"community-landing-shelves-loaded"});let n=(a??[]).filter(ha);if(!t)throw Error("Error handling response");let{data:l}=t,{meta:i,pagination:o}=l,{resources:s}=i;this.setState({resources:d?[...this.state.resources,...s]:s,shelves:n,pagination:o,searchError:void 0,category:r},()=>{var e;null==(e=this.feedAppWrapper)||e.removeAttribute("data-hide")})}).catch(e=>{(0,tS.$D)(w.e.COMMUNITY,e)})}shouldSearch(e,t){return!(0,dL.OE)(e)||e.resourceType===t.resourceType||(0,i5.Mc)({...e,resourceType:"profiles"})!==(0,i5.Mc)({...t,resourceType:"profiles"})}async queryWithParamsAndUpdateState(e){var t,a;if(!this.props.view||this.state.isActivelyLoadingRequest||!this.isMoreToFetch())return;if(!(this.hasLoadedFirstTimeForView&&(null==(t=this.state.pagination)?void 0:t.next_page))){let e=hp.get(this.props.location);if(e){this.setState(e.state),null==(a=this.feedAppWrapper)||a.removeAttribute("data-hide"),this.hasLoadedFirstTimeForView=!0;return}}this.setState({isActivelyLoadingRequest:!0});let r=(0,dL.OE)(this.props.view);try{r?e&&!this.shouldSearch(e,this.props.view)&&this.state.searchResponse?this.setState({resources:this.parseSearchResponse(this.state.searchResponse).resources,searchError:void 0}):await this.querySearch():await this.queryBrowse(),this.hasLoadedFirstTimeForView=!0}catch(e){}this.setState({isActivelyLoadingRequest:!1})}resetScrollPosition(){var e;let t=((null==(e=this.feedContentRef.current)?void 0:e.getBoundingClientRect().top)||0)-(this.filterControlsRef.current?this.filterControlsRef.current.getBoundingClientRect().top+this.filterControlsRef.current.getBoundingClientRect().height:0);t<0&&window.scrollTo({top:window.scrollY+t,behavior:"smooth"})}addResourceImpression(e){let t=e.id,a=(0,cG.Vm)(e),r=`${t}-${a}`;this.impressedResourcesForView.has(r)||(this.impressedResourcesForView.add(r),this.impressedResourcesLoggingBuffer.push({id:e.id,type:(0,cG.Vm)(e)}),this.sendResourceImpressions())}sendAndResetResourceImpressions(){this.sendResourceImpressions.flush(),this.impressedResourcesForView.clear()}getTrackingProps(){let{view:e}=this.props,t=e.category,a=e.tags,r=!!(null==a?void 0:a.length),n=e.query;return"string"==typeof n?{trackingContext:t3.e0.COMMUNITY_HUB_SEARCH,properties:{searchQuery:n}}:t?{trackingContext:t3.e0.COMMUNITY_HUB_CATEGORY,properties:{category:t}}:r?{trackingContext:t3.e0.COMMUNITY_HUB_TAG,properties:{tags:a.join(",")}}:{trackingContext:t3.e0.COMMUNITY_HUB,properties:{}}}getShelfContentIds(){let e=this.state.shelves||[],t=new Set;return e.forEach(e=>{e.shelf_content.forEach(e=>{t.add(e.id)})}),t}render(){let{view:e,isFooterEnabled:t,isTagsFilteringEnabled:a}=this.props,{category:r}=this.state;if(!e)return o.createElement(o.Fragment,null);let n=e.category,l=(0,d4.S)(n,dL.LJ),i=!!n,s=this.getShelfContentIds(),c=this.state.resources.filter(e=>!("id"in e&&s.has(e.id))),u=this.state.shelves&&this.state.shelves.length>0&&4===this.state.shelves[0].shelf_content.length?(0,cG.o7)(this.state.shelves[0].shelf_content,e):[],_=e.tags,p=!!(null==_?void 0:_.length),g=e.query,E="string"==typeof g,{resourceType:v}=e,h=(i||p||E)&&this.hasLoadedFirstTimeForView&&0===this.state.resources.length&&0===u.length,y="";h&&(y=n||g||_.join(", ")||"");let{trackingContext:b,properties:w}=this.getTrackingProps();return o.createElement(O.fu,{name:b,properties:w},o.createElement(cj.S,null),o.createElement("div",{ref:e=>this.feedAppWrapper=e},l?o.createElement(vJ,{category:r,categorySlug:l,isTagsEnabled:!!a,isFeedPage:!0}):null,p&&o.createElement(ho,{tags:_,view:e}),(0,dL.OE)(e)&&o.createElement(hs,{query:e.query,view:e,error:this.state.searchError}),o.createElement("div",{className:ey()(cX.IB,{[cX.j4]:i})},!i&&o.createElement(hu,{view:e,resourceCounts:this.state.resourceCounts}),o.createElement("div",{className:ey()(cX.hm,{[cX.u8]:i})},o.createElement(fI,{containerRef:this.filterControlsRef,filterState:hd(e),allowedEditorTypes:r?r.editor_types:void 0,onUpdate:e=>{let t={};e.forEach(({key:e,value:a})=>{t[hc[e]]=a}),m.Ay.replace((0,i5.MU)({...(0,i5.wl)(),...t})),this.resetScrollPosition()},context:(0,dL.OE)(e)?"search":"category"}),o.createElement("div",{ref:this.feedContentRef},h?o.createElement(v5,{resourceType:v,query:y,view:e,isError:!!this.state.searchError}):o.createElement("div",{className:cX.E9},o.createElement(c0,{onIntersectionChange:(e,t)=>{t.isIntersecting&&this.addResourceImpression(e)},adtlClassName:cZ(this.showFeedAsTable()?"rows":i?"normal":"compact"),resources:i?[...u,...c]:this.state.resources,showAsTable:this.showFeedAsTable(),showMoreCallback:t()?f.lQ:()=>this.queryWithParamsAndUpdateState(),viewContext:"communityFeed"}))),t()?o.createElement(hf,{onClick:e=>{e.preventDefault(),this.queryWithParamsAndUpdateState()},isLoading:this.state.isActivelyLoadingRequest,isMoreToFetch:this.isMoreToFetch()}):this.state.isActivelyLoadingRequest&&o.createElement(dT.y$,null),i&&o.createElement(vZ,{category:r}),t()&&!(0,d.y3)()&&o.createElement("div",{className:cX.xQ},o.createElement(dM,null))))))}}function hE(){let e;let t=(0,cD.zy)(),a=(0,i5.UH)(),r=a&&(0,i5.QN)(a),n=(0,cz.bk)();e=r&&n?v7:hg;let l=(0,s.wA)(),i=(0,cz.o5)(),c=(0,mf.J)();return a?o.createElement("div",null,o.createElement(e,{view:a,location:t,dispatch:l,searchSessionId:c,isFooterEnabled:i})):(console.warn("This should never happen: ReactRouterFeedView called without a view."),null)}hg.displayName="FeedPage";let hv=(0,s.Ng)(null,e=>({dispatch:e}))(()=>{let e=(0,s.Pj)();return o.createElement(vQ,{store:e,FeedView:hE})});function hh(e){return"communityHub"!==e.view||"plugin"===e.subView||"widget"===e.subView||"hubFile"===e.subView||"landing"===e.subView||"searchAndBrowse"===e.subView||"handle"===e.subView?{content:o.createElement(hv,null),key:"searchAndBrowse"}:"hubFileEmbed"===e.subView||"monetizationRedirectView"===e.subView?{content:null,key:void 0}:(0,el.xb)(e)}function hy(e){return o.createElement("div",{className:"community_layout--communityPageViewContainer--aBk-9"},e.children,o.createElement(vI.Ay,null))}var hb=a(763223),hw=a(945020),hT=a(668526),hI=a(324666),hx=a(896026),hN=a(260302),hC=a(94503),hS=(e=>(e.NEW_SLIDES_FILE="NEW_SLIDES_FILE",e))(hS||{});function hk(e){let t=(0,hC.$)(z._Y.SLIDES,e.from,"toolbar_slides_created"),a=(0,M.Yz)()(!!e.isTeamLocked),r=!!e.disabled||a;return o.createElement(sm.K,{action:function(e,t){let a=t?hN.NY:hN.k3,r=t?hN.ts:hN.sI,n=t?(0,S.t)("locked_team.label.tooltip"):void 0,l=t?eB.Ib.TEXT:void 0;return{kind:sm.A.ICON_TEXT_BUTTON,key:"NEW_SLIDES_FILE",displayText:(0,S.t)("file_browser.tool_bar.new_slide_deck"),onClick:t?f.lQ:e,icon:sy.A,styleClass:a,svgStyleClass:r,dataTestId:"new-slides-file-button",editorThemeMode:"piper","data-tooltip":n,"data-tooltip-type":l}}(t,r)})}function hA(e){let t=(0,hC.$)(z._Y.SLIDES,e.from,"toolbar_slides_created"),a=(0,M.Yz)()(!!e.isTeamLocked),r=!!e.disabled||a,n=r?(0,S.t)("locked_team.label.tooltip"):void 0,l=r?eB.Ib.TEXT:void 0,i=r?f.lQ:t;return{disabled:r,onClick:i,dataTooltip:n,dataTooltipType:l,displayText:(0,S.t)("file_browser.tool_bar.new_slide_deck"),dataTestId:"new-slides-file-button",editorThemeMode:"piper",key:"NEW_SLIDES_FILE",listOptionType:hx.R.SLIDES}}var hL=a(261076),hR=a(729064),hD=a(569172),hF=a(103271);let hP=new class{markFeedVisited(e){return tQ.Ay.post(`/api/feed_visited/${e.currentOrgId}`)}};var hM=a(679736),hO=a(118143),hB=a(563288),hU=a(919960),hV=a(52678),hH=a(934480),hW=a(671072),hj=a(654034),h$=a(416822),hG=a(988771),hz=a(400333),hY=a(527429),hK=a(126674),hQ=a(160156),hq=a(339617),hX=a(531398),hJ=a(430811);let hZ="feed_tile--commentPillText--goQ26",h0="feed_tile--feedPostHoverContainerSelectable--rhPI9";var h1=a(122975);function h2(e){var t,a;let r=(0,s.wA)(),n=o.useRef(null),[l,i]=(0,cE.M)(),[c,d]=(0,cE.M)(),{requestToOpenPostByFeedIdx:m}=e,u=o.useCallback((t,a)=>{null==t||t.stopPropagation();let n=e.itemIdx+1;(0,tK.sx)("Team Feed Tile Clicked",{postUuid:e.post.publicUuid,feedRank:n}),r((0,R.to)({type:hV.K,data:{postUuid:e.post.publicUuid,initialPreloadedPost:e.post,feedIdx:e.feedIdx,requestToOpenPostByFeedIdx:m,autofocusCommentInput:null==a?void 0:a.autofocusCommentInput,selectedContentIdx:null==a?void 0:a.selectedContentIdx,onSetSelectedContentIdx:null==a?void 0:a.onSetSelectedContentIdx}}))},[e.itemIdx,e.post,r,e.feedIdx,m]),_=o.useCallback(()=>{r((0,R.to)({type:(0,hM.t1)(),data:{preloadedFeedPost:e.post,entryPoint:hM.M2.FEED}}))},[r,e.post]),{refSetter:p}=function(e){let t=o.useRef(null),a=o.useRef(e);a.current=e;let r=o.useMemo(()=>new ResizeObserver(()=>{a.current(t.current)}),[]);return o.useEffect(()=>()=>{r.disconnect()},[r]),{refSetter:o.useCallback(e=>{null!==t.current&&r.unobserve(t.current),t.current=e,null!==t.current&&r.observe(t.current)},[r])}}(e.virtualRowItem.measureRef),f={position:"absolute",top:e.virtualRowItem.start,left:0,right:0},g=(null==(t=e.feedListRef.current)?void 0:t.getBoundingClientRect().left)??0,E=Math.max(0,((null==(a=n.current)?void 0:a.getBoundingClientRect().left)??0)-g),v=o.createElement("div",{className:"feed_tile--caughtUpContainer--5uyiy"},o.createElement("div",{className:"feed_tile--caughtUpTitle--PVabL"},(0,S.t)("fig_feed.youre_all_caught_up")),o.createElement("div",{className:"feed_tile--caughtUpSubtitle--j2qKn"},(0,S.t)("fig_feed.come_back_later_for_more_posts")));return o.createElement("div",{className:"feed_tile--postContainer--jD-OA",ref:e=>{p(e),e&&(n.current=e,l(e))},style:f},o.createElement("div",{className:"feed_tile--hoverExtension--aYeAh",ref:c}),o.createElement("div",{className:"feed_tile--tileContainer---NbBK"},o.createElement(h4,{feedPost:e.post,feedIdx:e.feedIdx,onTileMouseDown:u,onEditClick:_,horizontalMargin:E,isHovered:i||d}),e.mostRecentUnviewed&&v))}function h4(e){let t=parseInt(e.feedPost.numComments,10),a=(0,hj.o8)(e.feedPost.descriptionMeta),r=[...new Map(e.feedPost.comments.map(e=>[e.user.id,e.user])).values()],n=o.createElement("div",{className:"feed_tile--commentPill--ZWfdc feed_reactions_section--reactionPill--qE8nJ reactions--reaction--BGfYE text--fontPos11--2LvXf text--_fontBase--QdLsd",onMouseDown:t=>e.onTileMouseDown(t,{autofocusCommentInput:!0}),role:"button",tabIndex:0},t>0?o.createElement(o.Fragment,null,o.createElement(hW.u,{users:r,totalNum:r.length,numAvatarsToDisplay:4}),o.createElement("div",{className:hZ},(0,S.tx)("fig_feed.num_comments",{numComments:t}))):o.createElement("div",{className:hZ},(0,S.tx)("fig_feed.add_comment"))),[l,i]=o.useState(!1),s=o.useRef(null);o.useEffect(()=>{let e=s.current;e&&i(e.scrollHeight>e.offsetHeight)},[]);let c=(0,hB.e3)(e.feedPost),d=o.useMemo(()=>{var e,t;return a.length>0&&(a[0].t=null==(e=a[0].t)?void 0:e.trimStart(),a[a.length-1].t=null==(t=a[a.length-1].t)?void 0:t.trimEnd()),a},[a]),m=(0,h$.q)(),u=o.useCallback((e=[],t)=>e?e.map((e,a)=>{var r,n;let l=(e.user_annotated?e.user_annotated.handle:e.t)||"",i=(0,ch.F)(l),s=null,c=e.link&&(0,hz.xT)(e.link);if(e.user_annotated&&i)s=o.createElement("span",{onMouseDown:e=>e.stopPropagation(),role:"link",tabIndex:0},o.createElement(hz.E4,{href:`/files${m}/user/${e.user_id}`,userId:e.user_annotated.id,handle:i,imgUrl:e.user_annotated.img_url}));else if(c&&i&&(0,hY.$)(c))s=o.createElement("span",{onMouseDown:e=>e.stopPropagation(),role:"link",tabIndex:0},o.createElement(hz.Rk,{text:i,hyperlink:c}));else{let e=(0,hH.x6)((null==i?void 0:i.replace(/\n\s*\n/g,"\n").split("\n").join(" "))||"");s=o.createElement("span",null,e)}return o.createElement(o.Fragment,{key:`${t}-${a}`},s,(null==(r=e.children)?void 0:r.length)&&(null==(n=e.styles)?void 0:n.length)&&e.children.map((r,n)=>o.createElement(o.Fragment,{key:`${t}-${a}-${n}`}," ",e.styles.includes("ol")?`${n+1}. `:"\u2022 ",u(r.children,`${t}-${a}-${n}`)," ")))}):[o.createElement(o.Fragment,null)],[m]),_=o.useMemo(()=>u(d,e.feedPost.id),[d,u,e.feedPost.id]),{onTileMouseDown:p}=e,f=o.useMemo(()=>o.createElement("div",{className:"feed_tile--postDescriptionContainer--xP5Fz",onMouseDown:p,role:"button",tabIndex:0},o.createElement("div",{className:"feed_tile--postTitle--DY-Hh"},e.feedPost.title),o.createElement("div",{className:"feed_tile--postDescription--PiaCx","data-testid":"feed-post-description",ref:s},o.createElement("div",{className:ey()("feed_tile--postDescriptionMessage--6ThT1 comment_message--commentMessage--kZCzD","feed_tile--collapsed--ruER6",l&&"feed_tile--hasShowMore--6Nm-e")},_),l&&o.createElement("div",{onMouseDown:e=>{e.stopPropagation(),p()},className:"feed_tile--viewMore--o-NxF",role:"button",tabIndex:0},o.createElement("div",{className:"feed_tile--viewMoreEllipsis--k1nCe"},"..."),o.createElement("div",{className:"feed_tile--viewMoreText--WpL2K"},(0,S.t)("fig_feed.see_more"))))),[l,s,e.feedPost,p,_]),g=(0,hK.DG)(e.feedPost.publicUuid,hK.dy.TILE),E=(0,rE.Um)(),v=e.isHovered||(null==E?void 0:E.type)===(0,hJ.j8)(hJ.Hx.USER,e.feedPost.publicUuid,hK.Zp.TILE);return o.createElement(o.Fragment,null,o.createElement("div",{className:"feed_tile--topRowUGC--oWJxs"},o.createElement("div",{className:"feed_tile--avatarFloat--h-EFM"},o.createElement(hq.A,{user:e.feedPost.creator,size:ed.Pf.LARGE,noHandle:!0})),o.createElement(hq.B,{user:e.feedPost.creator,date:e.feedPost.createdAt,onTileMouseDown:e.onTileMouseDown,containerInfo:c,noAvatar:!0}),o.createElement("div",{className:ef.cx.flex.flexRow.$},o.createElement(hJ.Wu,{hideTarget:!v,feedPost:e.feedPost,source:hK.Zp.TILE,onEditClick:e.onEditClick}),v&&o.createElement(ro.K0,{"data-tooltip-type":eB.Ib.TEXT,"data-tooltip":(0,S.t)("fig_feed.copy_link_to_post"),onClick:g},o.createElement(re.In,{icon:"hyperlink-32"})))),f,o.createElement(h8,{feedPost:e.feedPost,feedIdx:e.feedIdx,backgroundColor:e.feedPost.backgroundColor,onTileMouseDown:e.onTileMouseDown,horizontalMargin:e.horizontalMargin}),o.createElement("div",{className:"feed_tile--bottomRow--CTXwC"},o.createElement(hX.Q$,{type:hX.Us.FULL,source:hX.zY.TILE_POST,postUuid:e.feedPost.publicUuid,postId:e.feedPost.id,feedReactions:e.feedPost.reactions,prependToList:[n]})))}function h8(e){let t=o.useRef(null),a=e.feedPost.content.map(e=>JSON.parse(e)),[r,n]=o.useState(!1),[l,i]=o.useState(!1),[s,c]=o.useState(0);o.useEffect(()=>{0!==s&&hG.Y.markFeedViewed({publicUuid:e.feedPost.publicUuid})},[s,e.feedPost.publicUuid]);let d=(0,hX.mz)({type:"post",id:e.feedPost.publicUuid},hX.zY.TILE_CONTENT),m=a.length>1,u=ey()(m?"feed_tile--feedPostHoverContainerWithThumbnails--pAnNB feed_tile--feedPostHoverContainer--238j6":"feed_tile--feedPostHoverContainer--238j6",!(r||l||d)&&"feed_tile--hidden--9bafI"),_={selectedContentIdx:s,onSetSelectedContentIdx:c},{fileData:p,fileIcon:f,fileLoaded:g,openFile:E}=(0,hK.rS)(e.feedPost.publicUuid,a,e.feedPost.fileKey);return o.createElement("div",{ref:e=>{e&&(t.current=e)},className:ey()("feed_tile--fullHeightContentSection--qE0UO feed_tile--contentSection--1-urk",m&&"feed_tile--fullHeightContentSection_WithThumbnails--l-If7")},o.createElement(hQ.xT,{contentItems:a,staticContent:!0,selectedContentIdx:s,setSelectedContentIdx:c,pageBackgroundColor:e.backgroundColor||void 0,onSelectedTileMouseDown:t=>e.onTileMouseDown(t,_),feedPostUuid:e.feedPost.publicUuid,feedPostIdx:e.feedIdx,source:hK.Zp.TILE,onContentHover:e=>n(e)}),g&&o.createElement("button",{className:ey()(u,h0,"feed_tile--hoverTopLeft--zVWFQ"),onClick:E,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1)},o.createElement(ax.oS,{type:f,size:ax.LE.SMALL}),o.createElement("div",null,p.name)),o.createElement("button",{className:ey()(u,h0,"feed_tile--hoverTopRight---lyoe"),onMouseDown:t=>e.onTileMouseDown(t,_),onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1)},o.createElement(es.B,{svg:h1.A})))}let h3=(0,iJ.eU)(!0),h5=(0,iJ.eU)(!1);function h9(e){var t,a;let r=(0,s.wA)(),n=o.useRef(null),l=(0,$.iZ)(),i=(0,s.d4)(e=>e.teamFeedRefreshNonce),{setHasLoaded:c}=e,[d,m]=o.useState(null),u=(0,ry._6)(),_="teamFeed"===u.view,p="user"===u.view;o.useEffect(()=>{_&&(hP.markFeedVisited({currentOrgId:e.currentOrgId}).then(e=>{m(e.data.meta?new Date(e.data.meta):null)}),r(P.b({has_visited_feed:!0})))},[e.currentOrgId,i,r,_]);let f=!!(e.selectedContainer&&e.selectedContainer.id&&e.selectedContainer.type),g=(0,rr.Rs)(rl.KhA,{orgId:e.currentOrgId,firstPageSize:50,feedFilter:JSON.stringify({creator_id:(null==(t=e.selectedUser)?void 0:t.id)??null,container_type:f?(0,hB.FD)(e.selectedContainer.type):null,container_id:f?e.selectedContainer.id:null}),refreshNonce:i}),E=(0,li.ZC)(i);E&&E!==i&&n.current&&(n.current.scrollTop=0),o.useEffect(()=>{"errors"===g.status&&r(ec.F.enqueue({message:(0,S.t)("general.an_error_occurred"),error:!0}))},[r,g.status]);let v=o.useMemo(()=>"loaded"===g.status?{isLoadingNextPage:g.data.feedPosts.isLoadingNextPage,hasNextPage:g.data.feedPosts.hasNextPage,loadNext:g.data.feedPosts.loadNext}:null,[g]),h=o.useMemo(()=>"loaded"===g.status?{...g,data:g.data.feedPosts.filter(t=>!!t.feedPost&&(e.selectedTabKey!==hF.S8.ForYou||t.forYou))}:g,[g,e.selectedTabKey]),y="loaded"===h.status&&"loaded"===g.status;o.useEffect(()=>{null==c||c(y)},[y,c]);let b=o.useCallback(()=>512,[]),w=h.data?h.data.length:0,T=(0,hR.z)({size:w,parentRef:n,estimateSize:b,overscan:15,paddingStart:0}),I=o.useRef(0);o.useEffect(()=>{var e;I.current=(null==(e=h.data)?void 0:e.length)??0},[y,null==(a=h.data)?void 0:a.length]),o.useEffect(()=>{var t,a,r;y&&(0,tK.sx)("Team Feed Posts Rendered",{tab:e.selectedTabKey,selectedContainerId:null==(t=e.selectedContainer)?void 0:t.id,selectedContainerType:null==(a=e.selectedContainer)?void 0:a.type,selectedUserId:null==(r=e.selectedUser)?void 0:r.id,numPosts:I.current,view:u.view},{forwardToDatadog:!0})},[e.selectedTabKey,e.selectedContainer,e.selectedUser,I,y,u.view]);let[x,N]=o.useState(!1),[C,k]=o.useState(null),A=(0,fV.Xr)(h5),L=o.useCallback((e,t)=>{e>0&&!x&&((0,tK.sx)("Team Feed User Scrolled Down"),N(!0));let a=w/50,r=e+t.trackHeight,n=t.scrollHeight;1-(n-r)/(n/a)>=.5&&v&&!v.isLoadingNextPage&&v.hasNextPage()&&v.loadNext(50),k(t)},[x,v,w]);o.useEffect(()=>{if(!C)return;let{scrollTop:e}=C;e>=72?A(!0):A(!1)},[C,A]);let D=o.useMemo(()=>{let e={};return h.data&&h.data.forEach((t,a)=>{e[t.publicUuid]=a}),e},[h]),[F,M]=o.useState(void 0),O=o.useCallback(e=>{M(e)},[]);o.useEffect(()=>{if(void 0===F||(M(void 0),F<0)||(F>=.5*w&&v&&v.loadNext(50),F>=w))return;let e=h.data[F];r(R.hm({type:hV.K.type,data:{postUuid:e.publicUuid,initialPreloadedPost:e.feedPost,feedIdx:F,requestToOpenPostByFeedIdx:O}}))},[F,r,h,O,v,w]);let B=o.useMemo(()=>{var e;if(!d||!h.data)return null;let t=0,a=h.data.length-1,r=-1,n=0;for(;t<=a;){let e=Math.floor((t+a)/2);if(new Date(h.data[e].createdAt)>d?(r=e,t=e+1):a=e-1,(n+=1)>50)break}for(;r>=0&&l&&(null==(e=h.data[r].feedPost)?void 0:e.creator.id)===l.id;)r-=1;return r},[d,h.data,l]),U=y&&h.data&&0===h.data.length&&e.selectedTabKey===hF.S8.All&&(e.selectedUser||e.selectedContainer);return o.createElement(ep.P,{scrollContainerRef:n,className:"feed_list_view--scrollContainer--84INP main_feed_view--scrollContainer--BunJg",innerClassName:ey()("feed_list_view--scrollContainerInner--8Le-r",p&&"feed_list_view--scrollContainerInnerProfile--izApr"),onScroll:L},o.createElement("div",{className:"feed_list_view--feedListContainer--2BMds"},e.scrollHeaders,U?o.createElement("div",{className:"feed_list_view--noPostsFound--COpgM"},o.createElement("div",{className:ef.cx.fontMedium.$},(0,S.tx)("fig_feed.no_posts_found_title")),o.createElement("div",{className:ef.cx.colorTextSecondary.$},(0,S.tx)("fig_feed.no_posts_found_description"))):o.createElement("div",{style:{margin:"0 8px",height:`${T.totalSize}px`,position:"relative"}},T.virtualItems.map(e=>{let t=e.index;if(!h.data||!h.data[t].feedPost)return null;let a=h.data[t].feedPost;return o.createElement(h2,{post:a,key:e.key,virtualRowItem:e,feedListRef:n,itemIdx:t,feedIdx:D[a.publicUuid],requestToOpenPostByFeedIdx:O,mostRecentUnviewed:_&&D[a.publicUuid]===B})}))))}function h6(e){let t=(0,s.wA)(),[a,r]=(0,aJ.fp)(h3),[n,l]=o.useState(!1),i=(0,s.d4)(e=>e.teamFeedRefreshNonce);o.useEffect(()=>{t(hD.yu({orgId:e.currentOrgId,bellActive:!1}))},[t,i,e.currentOrgId]);let c=o.useMemo(()=>[{key:hF.S8.ForYou,label:(0,S.t)("fig_feed.tab.for_you")},{key:hF.S8.All,label:(0,S.t)("fig_feed.tab.all")}],[]),[d,m]=o.useState(null),[u,_]=o.useState(null),{setSelectedTabKey:p}=e,f=o.useCallback(e=>{e===hF.S8.ForYou&&(_(null),m(null)),p(e),t(A.$T({view:"teamFeed",feedTab:e}))},[t,p]),g=o.createElement(o.Fragment,null,o.createElement(hO.CreateFeedPostContent,{entryPoint:hM.My.FEED_HEADER,onSubmitSuccess:e.onNewPostSubmitSuccess,disabled:!n,minimized:a,setMinimized:r,uploadInfo:e.uploadInfo}),o.createElement(hU.Qn,{orgId:e.currentOrgId,tabs:c,selectedTabKey:e.selectedTabKey,setSelectedTabKey:f,selectedContainer:d,setSelectedContainer:m,selectedUser:u,setSelectedUser:_}));return o.createElement(h9,{...e,scrollHeaders:g,setHasLoaded:l,selectedContainer:d,selectedUser:u})}var h7=a(238472);function ye(){let e=(0,aJ.md)(hL.T),t=(0,aJ.md)(h5),a=(0,fV.Xr)(h3),[r,n]=o.useState(!1);return(o.useEffect(()=>{t&&n(!0)},[t]),r)?o.createElement(eu.$$,{className:ey()("create_feed_post_button--container--gokzc",t?"create_feed_post_button--fadeInOnMount--QLi5F":"create_feed_post_button--fadeOut--D6C6X"),onMouseDown:()=>a(!1)},o.createElement(es.B,{svg:sy.A,className:"create_feed_post_button--plusIcon--DCzT2"}),(0,S.t)("fig_feed.new_post"),e&&o.createElement(es.B,{svg:h7.A})):null}var yt=a(395900),ya=a(43325);let yr="new_post_indicator--icon--uvRMg";var yn=a(884114);function yl(e){return o.createElement("div",{className:"new_post_indicator--notification--NxIRJ text--_negText--j9g-L _overlayBase--_overlayBase--Rkj8l"},o.createElement("div",{className:"new_post_indicator--leftSide--Y7k6-",onClick:e.onRefresh,role:"button",tabIndex:0},o.createElement(es.B,{svg:yn.A,className:yr}),(0,S.tx)("fig_feed.new_posts")),o.createElement("div",{className:"new_post_indicator--dismiss--BAIvc",onClick:e.onDismiss,role:"button",tabIndex:0},o.createElement(es.B,{svg:aQ.default,className:yr})))}function yi(e){let t=(0,s.wA)();o.useEffect(()=>((0,tK.sx)("Team Feed Posts List View Visited"),t(hD.yu({orgId:e.currentOrgId,bellActive:!1})),()=>{(0,tK.sx)("Team Feed List View Closed")}),[t,e.currentOrgId]);let a=o.useCallback(()=>t(hD.Y9()),[t]),r=o.useCallback(e=>{e||a()},[a]),[n,l]=o.useState(e.feedTab??hF.S8.ForYou),i=o.useCallback(()=>{a(),l(hF.S8.All)},[a]),c=(0,s.d4)(t=>t.teamFeedBellStates[e.currentOrgId]),[d,m]=o.useState(!1),u=(0,li.ZC)(c);o.useEffect(()=>{c&&!1===u?m(!0):u&&!1===c&&m(!1)},[c,u,t]),o.useEffect(()=>{e.initialPostUuidToShow&&t((0,R.to)({type:hV.K,data:{postUuid:e.initialPostUuidToShow}}))},[t,e.initialPostUuidToShow]);let[_,p]=o.useState(!1),[f,g]=o.useState(null),[E,v]=(0,aJ.fp)(h3),h=o.useCallback(e=>{E&&(g(e.files),p(!1))},[E]);return o.createElement(o.Fragment,null,o.createElement(a4.Y,{isDragTarget:()=>!0,onTargetDragEnter:()=>p(!0),onTargetDragLeave:()=>p(!1),onTargetDrop:h,className:"main_feed_view--contentLayout--HPUlv"},d&&o.createElement(yl,{onRefresh:i,onDismiss:()=>m(!1)}),o.createElement(h6,{currentOrgId:e.currentOrgId,onNewPostSubmitSuccess:r,uploadInfo:f??void 0,selectedTabKey:n,setSelectedTabKey:l}),E&&_&&o.createElement("div",{className:"main_feed_view--dragOverlay--e78e2"})),o.createElement(ya.cx,null))}function yo(e){let t=(0,s.d4)(e=>e.currentUserOrgId),a=o.useRef(new yt.M4);return(o.useEffect(()=>{a.current.start()},[]),t)?o.createElement(yi,{currentOrgId:t,initialPostUuidToShow:e.postUuid,creatorId:e.creatorId,feedViewTimer:a.current,feedTab:e.feedTab}):null}var ys=a(93484);let yc=[nP.Wb3,nP.KoA,nP.Ult,nP.kmq,nP.USq,nP.DKo,nP.jQF,nP.Ob5,nP.s7O,nP.Qlc,nP.I$z,nP.X5_,nP.RJL,nP.LB2,nP.I5n,nP.n0G,nP.Msu,nP.UmN,nP.nIZ,nP.Ql8,nP.pIP,nP.Q16,nP.O5v,nP.rQs,nP.YHe,nP.hxO,nP.sqw,nP.Duq,nP.yjU,nP.BTz,nP.I3H,nP._9u,nP.jVB,nP.syA,nP.cJy,nP.tUL,nP.zMZ,nP.tBR,nP.K69,nP.Tp6,nP.fz8,nP.XIg,nP.fQh,nP.O9D,nP.c6t,nP.r3Y].map(e=>e.id);function yd({children:e}){return o.createElement(ys.A,{name:"FileBrowser",order:yc},e)}var ym=a(386079),yu=a(394828),y_=a(813803);let yp="has_seen_jamboard_importer_callout",yf=(0,nL.r1)(yp),yg=(0,nL.r1)("signed_up_from_figjam_jamboard");function yE(){let e=(0,s.wA)(),t=(0,aJ.md)(yf),a=(0,aJ.md)(yg),r=(0,aJ.md)(nA.mp),n=(0,aJ.md)(nA.zN),{isShowing:l,complete:i}=(0,nk.e)({overlay:nP.DKo,priority:nR.N.HIGH_PRIORITY_MODAL},[t,a,r,n]);return o.createElement(nD.rq,{isShowing:l,trackingContextName:"Jamboard Importer Button Callout",targetKey:ym._s,userFlagOnShow:yp,onTargetLost:i,onClose:i,primaryCta:{label:(0,S.tx)("rcs.jamboard.importer_callout.primary_cta"),type:"button",onClick:()=>{i(),e((0,R.to)({type:y_.Qn}))},ctaTrackingDescriptor:ew.c.GET_STARTED},secondaryCta:{label:(0,S.tx)("rcs.jamboard.importer_callout.secondary_cta"),type:"button",onClick:i,ctaTrackingDescriptor:ew.c.NOT_NOW},title:(0,S.tx)("rcs.jamboard.importer_callout.title"),media:o.createElement(yu.y,{src:"https://static.figma.com/uploads/0d827f2ef59eca7e23348ab3935984c306b2ed8d",alt:"",aspectRatio:300/146}),description:(0,S.tx)("rcs.jamboard.importer_callout.desc"),disableHighlight:!0})}var yv=a(886653);let yh=e=>{switch(e){case cs.t2.DESIGN:return"design";case cs.t2.FIGJAM:return"whiteboard";case cs.t2.PROTOTYPE:return"prototype";case cs.t2.SITES:return"sites";case cs.t2.SLIDES:return"slides";case cs.t2.ANY:return"";default:(0,el.xb)(e)}},yy=e=>{switch(e){case cs.C0.NAME:return"name";case cs.C0.CREATED_AT:return"created_at";case cs.C0.TOUCHED_AT:return"updated_at";default:return(0,tS.$D)(w.e.WAYFINDING,Error(`Attempting to sort by an unsupported sort key: ${e}`)),"created_at"}};var yb=a(406941),yw=a(344780),yT=a(716475),yI=a(803258);function yx(){let e=o.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 311 213",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("rect",{x:"0",y:"0",width:"310",height:"212",rx:"5.5",stroke:"#E5E5E5",strokeDasharray:"5 6"}),o.createElement("rect",{width:"100%",height:"100%",fill:"url(#paint0_linear_1701_4654)"}),o.createElement("defs",null,o.createElement("linearGradient",{id:"paint0_linear_1701_4654",x1:"0",y1:"0",x2:"0",y2:"100%",gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"var(--color-bg, white)",stopOpacity:"0"}),o.createElement("stop",{offset:"0.661458",stopColor:"var(--color-bg, white)"}))));return o.createElement("div",{className:yI.kL},o.createElement("div",{className:yI.yl},o.createElement("div",{className:yI._h},e)))}function yN({text:e,tooltipText:t,currentProgress:a,totalProgress:r}){return o.createElement(eg.Y,{direction:"vertical",height:"hug-contents",spacing:"7px"},o.createElement(eg.Y,{horizontalAlignItems:"space-between"},o.createElement(eg.Y,{spacing:4},o.createElement(ev.E,{fontSize:13,fontWeight:"medium"},e),o.createElement("div",{"data-tooltip-type":eB.Ib.TEXT,"data-tooltip":t,"data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0,"data-tooltip-tip-align-left":!0,"data-tooltip-text-left":!0},o.createElement(re.In,{icon:"info-16",fill:"secondary"}))),o.createElement(ev.E,{fontSize:13,fontWeight:"medium"},a,"/",r)),o.createElement("div",{className:ef.cx.relative.wFull.$},o.createElement("div",{className:ef.cx.absolute.wFull.$},o.createElement(eg.Y,{cornerRadius:5,height:5,backgroundColor:"disabled"})),o.createElement("div",{className:ef.cx.absolute.wFull.$},o.createElement(eg.Y,{cornerRadius:5,height:5,width:`${Math.min(a/r*100,100)}%`,backgroundColor:a>=r?"warning":"brand"}))))}function yC({canEditTeam:e,isDraftsFolder:t}){let a=(0,s.wA)(),r=(0,r5.ol)(),n=(0,ry._6)(),l=(0,M.PP)();return t||!r||(0,K.w5)(r)||"folder"!==n.view||!l()?null:o.createElement(yS,{folderId:n.folderId,showPlanComparisonModal:()=>{a((0,R.to)({type:a9.V,data:{upsellSource:J.b.STARTER_LIMIT_OVERVIEW,teamId:r.id}}))},canEditTeam:e})}function yS({folderId:e,showPlanComparisonModal:t,canEditTeam:a}){var r,n,l,i,s,c,d,m,u,_;let p=(0,rr.Rs)(rl.yU5,{projectId:e}),f=rp.h.useTrackingContext({trigger:J.b.STARTER_LIMIT_OVERVIEW});if("loaded"!==p.status)return null;let g=(null==(n=null==(r=p.data.project)?void 0:r.team)?void 0:n.projectsCount.status)==="loaded"?(null==(i=null==(l=p.data.project)?void 0:l.team)?void 0:i.projectsCount.data)??1:1,E=(null==(d=null==(c=null==(s=p.data.project)?void 0:s.team)?void 0:c.teamFileCounts)?void 0:d.designFileCount)??0,v=(null==(_=null==(u=null==(m=p.data.project)?void 0:m.team)?void 0:u.teamFileCounts)?void 0:_.whiteboardFileCount)??0,h=E>=K.WW||v>=K.WW;return o.createElement(O.fu,{name:"Starter Limit Overview",properties:f},o.createElement("div",{className:ey()(ef.cx.cursorDefault.mr32.maxW300.colorBg.$,"starter_limit_overview--responsiveHide--tahPL"),style:ea.sx.sticky.add({alignSelf:"flex-start",top:"128px"}).$},o.createElement(eg.Y,{direction:"vertical",padding:32,spacing:24,cornerRadius:8,strokeWidth:1,strokeColor:"default",height:"hug-contents"},o.createElement(ev.E,{fontSize:14,fontWeight:"semi-bold"},(0,S.tx)("file_browser.starter_limit.your_starter_team_overview")),o.createElement(yk,{numProjects:g,numFigmaFilesUsed:E,numFigjamFilesUsed:v}),a?o.createElement(eg.Y,{direction:"vertical",spacing:"12px"},o.createElement(ev.E,{fontSize:13},(0,S.tx)(h?"file_browser.starter_limit.running_out_of_files":"file_browser.starter_limit.enough_for_you_to_get_started")),o.createElement(eu.vd,{onClick:t,trackingProperties:{trackingDescriptor:ew.c.VIEW_PLANS}},(0,S.tx)("upgrade.view_plans"))):o.createElement(ev.E,{fontSize:13},(0,S.tx)("file_browser.starter_limit.trying_things_out")))))}function yk({numProjects:e,numFigmaFilesUsed:t,numFigjamFilesUsed:a}){return o.createElement(eg.Y,{direction:"vertical",spacing:24,width:234},o.createElement(yN,{text:(0,S.t)("file_browser.starter_limit.projects"),tooltipText:(0,S.t)("file_browser.starter_limit.projects.tooltip"),currentProgress:e,totalProgress:K.Wf}),o.createElement(yN,{text:(0,S.t)("file_browser.starter_limit.design_files"),tooltipText:(0,S.t)("file_browser.starter_limit.design_files.tooltip"),currentProgress:t,totalProgress:K.WW}),o.createElement(yN,{text:(0,S.t)("file_browser.starter_limit.figjam_boards"),tooltipText:(0,S.t)("file_browser.starter_limit.figjam_boards.tooltip"),currentProgress:a,totalProgress:K.WW}))}var yA=a(321747),yL=a(119198),yR=a(296559),yD=a(835156),yF=a(974105),yP=a(857766),yM=a(779709),yO=a(565167),yB=a(608902),yU=a(723127),yV=a(828702);let yH="tiles_view--tilesGrid--gtDcv tiles_view--tiles--PQRwh",yW="tiles_view--container--u00AG",yj="tiles_view--emptyStateContainer--eoExf",y$="tiles_view--emptyState--jfzsE text--fontPos11--2LvXf text--_fontBase--QdLsd",yG={metaContainer:320,sidebar:241,tileGridOuterPadding:32,singleTile:272,singleTileWithPadding:304},yz=256/192;function yY({tile:e,index:t,dispatch:a,selectedView:r,currentPlanFilter:n,currentSharedByFilter:l,isListView:i}){e.type===lh.nb.FILE&&(a(L.UN({fileKey:e.file.key,entrypoint:"file tile",currentPlanFilter:n,currentSharedByFilter:l,viewMode:void 0!==i?i?"list":"grid":void 0})),(0,X.K)(r)&&a(L.T5({index:t})),d.eD&&(0,tK.sx)("Open File Click",{fileKey:e.file.key,fileRepoId:e.file.file_repo_id,uiSelectedView:JSON.stringify(r)}))}let yK=()=>Math.max(Math.floor((window.innerWidth-yG.sidebar-yG.metaContainer-yG.tileGridOuterPadding)/yG.singleTileWithPadding),0),yQ=(e,t)=>{let a=lh.Tf.getName(e)||"",r=lh.Tf.getName(t)||"";return a2.Tt.compare(a,r)},yq=(e,t)=>{let a=(lh.Tf.getName(e)||"").toLowerCase(),r=(lh.Tf.getName(t)||"").toLowerCase();return a===r?0:a<r?-1:1},yX=(e,t)=>{if(e.type!==lh.nb.FILE||t.type!==lh.nb.FILE)return 0;let a=e.file,r=t.file;return a.created_at<r.created_at?1:-1},yJ=(e,t)=>e.type!==lh.nb.PROTOTYPE||t.type!==lh.nb.PROTOTYPE?0:e.prototype.file_key<t.prototype.file_key?-1:1,yZ=(e,t)=>{let a=lh.Tf.getAccessedAt(e),r=lh.Tf.getAccessedAt(t);return a&&r?a>r?1:-1:r?-1:a?1:0},y0=(e,t)=>lh.Tf.getCreatedAt(e)>lh.Tf.getCreatedAt(t)?1:-1,y1=(e,t)=>{let a=lh.Tf.getTouchedAt(e),r=lh.Tf.getTouchedAt(t);return null===a||null===r?0:a>r?1:-1},y2=(e,t)=>e.type!==lh.nb.FILE&&e.type!==lh.nb.REPO||t.type!==lh.nb.FILE&&t.type!==lh.nb.REPO?0:(e.type===lh.nb.FILE?e.file.trashed_at:e.repo.trashed_at)>(t.type===lh.nb.FILE?t.file.trashed_at:t.repo.trashed_at)?1:-1;function y4(e){var t;let a=o.useRef(null),r=o.useRef(null),n=o.useRef(null),l=(0,$.iZ)(),i=(0,ry._6)(),c="folder"===i.view?i.folderId:null,u=lI.M4.Folder.useValue(c).data,p=[null==l?void 0:l.drafts_folder_id,null==l?void 0:l.personal_drafts_folder_id].includes(null==u?void 0:u.id),{showing:f,show:E,data:v}=(0,cl.L)();o.useEffect(()=>{let e="page_selected_view",t=yw.sn.get(e);if(t&&t.isRunning&&!t.isUnreliable){let t=yw.sn.tryStop(e);t&&(0,tK.sx)("File Browser Tab Switch Page Load Time",{elapsedMs:t,selectedView:i.view},{forwardToDatadog:!0,batchRequest:!0})}},[i.view,c]);let h=(0,j.FC)(),{userStateLoaded:y,userExternallyRestricted:b,selectedBranchKeyByRepoId:w,upsellData:T}=(0,iX.R)(e=>{let t=null,a=(0,yF.e9)(e),r=a&&a.team_id&&e.teams[a.team_id];return a&&r&&(0,q.canEditTeam)(r.id,e)&&(t={team:r,folderId:a.id,isAtFileLimit:[z.P4.FILES_LIMITED,z.P4.FILES_LIMITED_LEGACY,z.P4.WHITEBOARD_FILES_LIMITED,z.P4.WHITEBOARD_FILES_LIMITED_BETA].some(e=>{var t;return!!(null==(t=r.restrictions_list)?void 0:t.includes(e))})}),{userFlags:e.userFlags,userStateLoaded:e.userStateLoaded,userExternallyRestricted:(0,q.isOrgUserExternallyRestrictedFromState)(h),selectedBranchKeyByRepoId:e.selectedBranchKeyByRepoId,upsellData:t}}),x=(0,s.wA)(),N=(0,M.PP)(),C=(0,r5.ol)(),k=!!C&&!!e.eligibleForLockedStateRedesign,[L,D]=o.useState(()=>yK()),F=e.sortFilterOptions.tileSortFilterConfig.viewMode===cs.XU.LIST,P="recentsAndSharing"===i.view&&i.tab===nl.G.SHARED_FILES,B=(e,t,a)=>e===cs.rJ.ANY||e===cs.rJ.SELF&&a.type===lh.nb.FILE&&a.file.creator_id===t||e===cs.rJ.SELF&&a.type===lh.nb.REPO&&a.branches[0].creator_id===t||e===cs.rJ.OTHER&&a.type===lh.nb.FILE&&a.file.creator_id!==t||e===cs.rJ.OTHER&&a.type===lh.nb.REPO&&a.branches[0].creator_id!==t,U=(e,t)=>{let a="design";switch(t.type===lh.nb.FILE?a=t.file.editor_type:t.type===lh.nb.PINNED_FILE?a=t.file.editorType:t.type===lh.nb.OFFLINE_FILE&&(a=t.file.editorType),e){case cs.t2.ANY:return!0;case cs.t2.DESIGN:if(t.type===lh.nb.FILE||t.type===lh.nb.REPO||t.type===lh.nb.PINNED_FILE||t.type===lh.nb.OFFLINE_FILE)return"design"===a;return!1;case cs.t2.FIGJAM:if(t.type===lh.nb.FILE||t.type===lh.nb.PINNED_FILE||t.type===lh.nb.OFFLINE_FILE)return"whiteboard"===a;return!1;case cs.t2.PROTOTYPE:return t.type===lh.nb.PROTOTYPE;case cs.t2.SLIDES:if(t.type===lh.nb.FILE||t.type===lh.nb.PINNED_FILE||t.type===lh.nb.OFFLINE_FILE)return"slides"===a;return!1;case cs.t2.SITES:if(t.type===lh.nb.FILE||t.type===lh.nb.PINNED_FILE||t.type===lh.nb.OFFLINE_FILE)return"sites"===a;return!1;default:(0,el.xb)(e)}},V=(e,t)=>!e||e===`${lh.Tf.getSharedBy(t)}`,H=o.useCallback((e,t)=>{var a,r;if("sharedWithYou"===i.view||"recentsAndSharing"===i.view&&i.tab===nl.G.SHARED_FILES||!e||!e.planId)return!0;let n=e.planId;switch(t.type){case lh.nb.FILE:return("org"===e.planType?t.file.parent_org_id:t.file.team_id)===n;case lh.nb.REPO:return("org"===e.planType?t.repo.parent_org_id:t.repo.team_id)===n;case lh.nb.PROTOTYPE:return("org"===e.planType?null==(a=t.prototype.parent_org)?void 0:a.id:null==(r=t.prototype.parent_team)?void 0:r.id)===n;case lh.nb.OFFLINE_FILE:return"org"===e.planType&&t.file.orgId===n;default:return!1}},[i]),W=o.useCallback((t,a)=>{var r;let n,l,o;let s=t.filter(e=>{var t;return V(a.filters.sharedBy,e)&&U(a.filters.fileType,e)&&B(a.filters.creator,null==(t=h.user)?void 0:t.id,e)&&H(a.filters.plan,e)});if(n=P?s.filter(e=>e.type===lh.nb.FILE||e.type===lh.nb.PROTOTYPE||e.type===lh.nb.REPO):s.filter(e=>e.type===lh.nb.FILE||e.type===lh.nb.REPO||e.type===lh.nb.OFFLINE_FILE),"recentsAndSharing"===i.view&&i.tab===nl.G.SHARED_FILES)return s;let c=a.sort.dir===cs.ue.DESC;switch(a.sort.key){case cs.C0.SEARCH_RELEVANCE:return t;case cs.C0.ACCESSED_AT:l=E6.f.byComparators(yZ),o=s;break;case cs.C0.CREATED_AT:l=E6.f.byComparators(y0),o=s;break;case cs.C0.TOUCHED_AT:l=E6.f.byComparators(y1),o=n;break;case cs.C0.NAME:if(p){l=E6.f.byComparators(yQ,E6.f.byProperty("type")),o=s;break}let d=s.length<a2.Tw;l=E6.f.byComparators(d?yQ:yq,E6.f.byProperty("type"),yX,yJ),o=s;break;case cs.C0.TRASHED_AT:l=E6.f.byComparators(y2),o=n;break;case cs.C0.SHARED_AT:return s;default:return console.error("Unknown sort key",a.sort.key),[]}if(l=c?E6.f.reverse(l):l,o.sort(l),e.isDataPartial)for(;(null==(r=o[o.length-1])?void 0:r.type)===lh.nb.OFFLINE_FILE;)o.pop();return o},[P,H,e.isDataPartial,p,i,null==(t=h.user)?void 0:t.id]),G=o.useMemo(()=>W(e.tiles,e.sortFilterOptions.tileSortFilterConfig),[W,e.tiles,e.sortFilterOptions.tileSortFilterConfig]),Y=o.useMemo(()=>{if("deletedFiles"===i.view)return[];let e=[];return G.forEach(t=>{switch(t.type){case lh.nb.FILE:e.push({fileKey:t.file.key});break;case lh.nb.REPO:e.push(...t.branches.map(e=>({fileKey:e.key})))}}),e},[i.view,G]),K=(0,rr.p)(rl.hqi,Y);o.useEffect(()=>{for(let{result:e,args:t}of K)if("loaded"===e.status&&e.data){let a=(0,yD.Z)(e.data);x(l_.Lk({fileKey:t.fileKey,users:a}))}},[K,x]);let Q=(0,aJ.md)(lh.Y6),X=o.useCallback((t,a,r)=>{yY({tile:t,index:r,dispatch:x,selectedView:i,currentPlanFilter:e.currentPlanFilter,currentSharedByFilter:e.currentSharedByFilter,isListView:F}),function({tile:e,e:t,dispatch:a,selectedView:r,permissionsState:n,selectedBranchKeyByRepoId:l,renamingItem:i}){if(lh.Tf.isRenaming(e,i)||e.type===lh.nb.FILE&&e.file.trashed_at||e.type===lh.nb.REPO&&e.repo.trashed_at){t.preventDefault(),t.stopPropagation();return}let o=g.Ay.mac?t.metaKey:t.ctrlKey,s=null;o&&t.shiftKey?s=d.aw.FOCAL_TAB:o?s=d.aw.BACKGROUND_TAB:t.shiftKey&&(s=d.aw.NEW_WINDOW);let c=n.user;if(d.eD){let r;switch(s=s??d.aw.FOCAL_TAB,t.preventDefault(),t.stopPropagation(),e.type){case lh.nb.FILE:r=!!(e.file.is_team_template&&(0,ns.LQ)(n)),d.eD.openFile({fileKey:e.file.key,title:e.file.name||"Untitled",editorType:e.file.editor_type,target:s,isBranch:(0,yP.Xm)(e.file),isLibrary:!!e.file.last_published_at,isTeamTemplate:r,userId:null==c?void 0:c.id});break;case lh.nb.PINNED_FILE:r=!!(e.file.isTeamTemplate&&(0,ns.LQ)(n)),d.eD.openFile({fileKey:e.file.key,title:e.file.name||"Untitled",editorType:e.file.editorType,isTeamTemplate:r,target:s,userId:null==c?void 0:c.id});break;case lh.nb.PROTOTYPE:d.eD.openPrototype(e.prototype.file_key,e.prototype.page_id,e.prototype.name||"",s,null==c?void 0:c.id);break;case lh.nb.REPO:let i=(0,yP.mr)(e.repo,e.branches,l);d.eD.openFile({fileKey:i.key,title:i.name,editorType:i.editor_type,target:s,isBranch:(0,yP.Xm)(i),isLibrary:!!i.last_published_at,userId:null==c?void 0:c.id});break;case lh.nb.PROJECT:(0,el.KF)(!0,"Do not expec to be rendering project tiles here");break;case lh.nb.OFFLINE_FILE:a(yL.NA({file:e.file,openNewFileIn:hw.ai.NEW_TAB,source:yO.U.OFFLINE_FILE_TILE}));break;default:(0,el.xb)(e)}return}if(null!=s){if(a(A.oB()),e.type===lh.nb.OFFLINE_FILE){a(yL.NA({file:e.file,openNewFileIn:hw.ai.NEW_TAB,source:yO.U.OFFLINE_FILE_TILE})),t.preventDefault(),t.stopPropagation();return}if(t instanceof KeyboardEvent){let a=lh.Tf.getUrl(e,l);m.Ay.redirect(a,"_blank"),t.preventDefault(),t.stopPropagation()}return}t.preventDefault(),t.stopPropagation();let u=n.currentUserOrgId,p=n.currentTeamId,f="recentsAndSharing"===r.view||"folder"===r.view?r:void 0,E=(0,_.kc)().ps_benchmark;switch(a(E?yR.c5({planId:u||p,planType:u?yB.O.ORG:yB.O.TEAM}):yR.p4({planId:u||yU.P})),e.type){case lh.nb.FILE:{let t=e.file;(0,cg.N7)(u,t.parent_org_id,p,t.team_id)?(0,cg.QV)(e.file.key,c,u,E?p:null,r,e.file.editor_type||void 0):a(A.$T({view:"fullscreen",fileKey:e.file.key,editorType:yM.z4.getIsExtension()?Eq.nT.DevHandoff:e.file.editor_type?(0,Eq.wN)(e.file.editor_type):Eq.nT.Design,prevSelectedView:f}));break}case lh.nb.PINNED_FILE:(0,cg.N7)(u,e.file.parentOrgId,p,e.file.teamId)?(0,cg.QV)(e.file.key,c,u,E?p:null,r,e.file.editorType):a(A.$T({view:"fullscreen",fileKey:e.file.key,editorType:e.file.editorType?(0,Eq.wN)(e.file.editorType):Eq.nT.Design,prevSelectedView:f}));break;case lh.nb.PROTOTYPE:let v=e.prototype.fig_file;(0,cg.N7)(u,v.parent_org_id,p,v.team_id)?(0,cg.QV)(v.key,c,u,E?p:null,r,v.editor_type||void 0,"proto"):a(A.$T({view:"prototype",file:v,nodeId:e.prototype.page_id,prevSelectedView:f}));break;case lh.nb.REPO:{let t=(0,yP.mr)(e.repo,e.branches,l);if(!t)throw Error(`Branch not found for repo ${e.repo.id}`);let n=t.key;(0,cg.N7)(u,t.parent_org_id,p,t.team_id)?(0,cg.QV)(n,c,u,E?p:null,r):a(A.$T({view:"fullscreen",fileKey:n,editorType:Eq.nT.Design,prevSelectedView:f}));break}case lh.nb.PROJECT:(0,el.KF)(!0,"Do not expect to be rendering project tiles here");break;case lh.nb.OFFLINE_FILE:a(yL.NA({file:e.file,openNewFileIn:hw.ai.SAME_TAB,source:yO.U.OFFLINE_FILE_TILE}));break;default:(0,el.xb)(e)}}({tile:t,e:a,dispatch:x,selectedView:i,permissionsState:h,selectedBranchKeyByRepoId:w,renamingItem:Q})},[F,e.currentPlanFilter,e.currentSharedByFilter,x,h,w,i,Q]),Z=o.useCallback((t,a,r)=>{yY({tile:t,index:r,dispatch:x,selectedView:i,currentPlanFilter:e.currentPlanFilter,currentSharedByFilter:e.currentSharedByFilter,isListView:F})},[F,e.currentPlanFilter,e.currentSharedByFilter,i,x]),ee=o.useCallback((e,t,a)=>{E({data:{tile:e,targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},index:a,enableRestore:t.shiftKey&&t.altKey}})},[E]),et=(0,lh.nw)(e.tiles);o.useEffect(()=>{let e=()=>{D(yK())};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),o.useEffect(()=>{if(g.Ay.mobile&&g.Ay.safari&&a.current){let e=a.current.className,t=()=>{a.current&&(a.current.className=""),setTimeout(()=>{a.current&&(a.current.className=e)},500)};return window.addEventListener("load",t),()=>window.removeEventListener("load",t)}},[]);let ea=o.createElement("div",{className:ef.cx.flex.alignCenter.$},o.createElement(oe.$c,{initialViewMode:e.sortFilterOptions.tileSortFilterConfig.viewMode,onViewModeChange:t=>{(0,tK.sx)("file view toggle",{viewType:t===cs.XU.GRID?"grid":"list"}),x(A.JF({selectedView:i,config:{...e.sortFilterOptions.tileSortFilterConfig,viewMode:t}}))}})),er=(0,q.canEditTeam)((null==u?void 0:u.team_id)||(null==C?void 0:C.id)||"",h),en=o.createElement("div",null),ei=o.createElement(oe.$f,{options:e.sortFilterOptions,selectedView:i,dispatch:x}),eo=o.createElement("div",{className:ef.cx.flex.$},ei,ea),es=o.createElement(oe.C9,{options:e.sortFilterOptions,selectedView:i,dispatch:x,sharedWithYouFilters:e.sharedWithYouFilters});en=o.createElement("div",{className:ey()(!e.isFolder||er?"tiles_view--viewBarWrapper--AR2zB":"tiles_view--viewBarWrapperWithTopPadding--4zGHb","tiles_view--viewBarWrapperNoExtraLeftPadding--L4Ueu")},o.createElement(oe.lU,{leftSide:es,rightSide:eo}));let[ec,ed]=o.useState([]);if((0,yT.Cm)(ec),0===G.length){let t="";if(e.emptyStateText?t=e.emptyStateText:(g.Ay.mobile||g.Ay.tablet)&&(t=(0,S.t)("file_browser.folder.this_project_is_empty")),t)return o.createElement("div",{className:yj},!e.hideSorter&&en,o.createElement("div",{className:ef.cx.flex.$},o.createElement("div",{className:y$},t),k&&o.createElement("div",{className:ef.cx.mr32.$},o.createElement(yV.R,{teamId:C.id,canEditTeam:er}))));if(e.emptyStateContent)return o.createElement("div",{className:yj},e.emptyStateContent)}let em=yW+(F?` ${yI._O} `:` ${yI.CK} `),eu=e.tiles.length>0;if(!y)return o.createElement("div",{className:"tiles_view--loading--6rn3X"},o.createElement(tc.kt,null));let e_=!F&&L>0&&(null==T?void 0:T.isAtFileLimit)&&!(0,_.kc)().fbg_starter_project_redesign&&!N(),ep=e_?(()=>{if(0===L)return 0;let e=window.innerWidth-yG.sidebar-yG.metaContainer,t=yG.singleTileWithPadding-yG.singleTile;return Math.max((e-yG.tileGridOuterPadding-L*t)/L/yz+yG.tileGridOuterPadding,0)})():void 0;return o.createElement("div",{className:yW,ref:a},o.createElement("div",{className:em,ref:r},!e.hideSorter&&en,o.createElement("div",{className:ef.cx.flex.$},eu&&o.createElement(yA.d,{sortConfig:e.sortFilterOptions.tileSortFilterConfig.sort,handleOpenTile:Z,items:G,sortBy:t=>{let a=e.sortFilterOptions.tileSortFilterConfig,r=a.sort.dir===cs.ue.DESC?cs.ue.ASC:cs.ue.DESC;x(A.JF({selectedView:i,config:{...a,sort:{key:t,dir:t===a.sort.key?r:a.sort.dir}},tab:"recentsAndSharing"===i.view?i.tab:void 0}))},viewType:F?cs.XU.LIST:cs.XU.GRID,updateRenderedItems:ed,handleOpenDropdown:ee,checksForViewOnlyLabels:k?{teamId:C.id,isLockedTeam:k}:void 0}),eu&&(k?o.createElement("div",{className:ef.cx.mr32.$},o.createElement(yV.R,{teamId:C.id,canEditTeam:er})):o.createElement(yC,{canEditTeam:er,isDraftsFolder:p}))),e_&&o.createElement(O.fu,{name:"Tiles View Upsell",properties:{buttonColor:"blue"}},o.createElement("div",{className:yH},[...Array(L)].map((e,t)=>o.createElement(yx,{key:t}))),o.createElement("div",{className:"tiles_view--upgradeOverlay--ZwyMN",style:{marginTop:`-${ep}px`,height:`${ep}px`}},o.createElement("p",{className:"tiles_view--upgradeTitle--PFF3i text--fontPos20--Bcz97 text--_fontBase--QdLsd"},(0,S.tx)("file_browser.folder.ready_for_an_upgrade")),o.createElement("p",{className:"tiles_view--upgradeText--ApEbY text--fontPos14--OL9Hp text--_fontBase--QdLsd"},(0,S.tx)("file_browser.folder.do_more_paid_plan",{lineBreak:o.createElement("br",null)})),o.createElement(I.vd,{onClick:()=>{if(T){let e=J.b.TILES_VIEW_UPSELL;x((0,R.to)({type:a9.V,data:{upsellSource:e,teamId:T.team.id}}))}},trackingProperties:{trackingDescriptor:ew.c.VIEW_PLANS}},(0,S.tx)("file_browser.folder.view_plans")))),!(g.Ay.mobile||g.Ay.tablet)&&e.newFileTile&&!b&&!eu&&!e_&&o.createElement("div",{className:ef.cx.flex.$},o.createElement("div",{className:"tiles_view--importPrompt--srrJn",ref:e=>{e&&(n.current=c_.findDOMNode(e))}},o.createElement("div",{className:y$},o.createElement("div",{className:"tiles_view--emptyTitle--3Vwmu"},e.isFolder?(0,S.t)("file_browser.folder.this_project_doesn_t_have_any_files"):(0,S.t)("file_browser.folder.no_files_yet")),(0,S.tx)("file_browser.folder.create_a_new_file_to_start_from_scratch_lucid",{lineBreak:o.createElement("br",null)}))),k?o.createElement("div",{className:ef.cx.mr32.$},o.createElement(yV.R,{teamId:C.id,canEditTeam:er})):o.createElement(yC,{canEditTeam:er,isDraftsFolder:p}))),(()=>{let t=(null==v?void 0:v.tile)??null,a=null==v?void 0:v.index;return o.createElement(O.fu,{name:e.isFolder?t3.e0.PROJECT_TILES_VIEW_DROPDOWN:t3.e0.TILES_VIEW_DROP_DOWN,enabled:f,properties:{tileType:null==t?void 0:t.type,tileFileId:(null==t?void 0:t.type)===lh.nb.FILE?null==t?void 0:t.file.key:void 0}},o.createElement(ci.i,{...e,tile:t,selectedTiles:et,openTile:e=>{t&&X(t,e,a)},dropdownVisible:f}))})())}function y8(e){return o.createElement("div",{className:yj},o.createElement("div",{className:y$},e.emptyStateText,o.createElement("div",{onMouseDown:e.onClaimClick},o.createElement(I.cw,{className:"tiles_view--emptyButton--oAaGe"},(0,S.tx)("tile.empty.join_as_owner")))))}var y3=a(788811),y5=a(181912),y9=a(439729),y6=a(760824),y7=a(986060),be=a(454984),bt=a(127987),ba=a(659969);let br=(0,eU.Ju)(function(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.teams)[e.teamId].subscription,r=e.paymentRequiresAction;return(0,o.useEffect)(()=>{ba.T.getHostedInvoicesPage({teamId:e.teamId}).then(({data:e})=>{(0,cg.FJ)(e.meta.hosted_invoice_url,"_blank","noopener")})},[e.teamId]),(0,o.useEffect)(()=>{r||a===z.Qh.INCOMPLETE||t(R.ES({type:br.type}))},[a,t,r]),o.createElement(eW.Eo,{title:(0,S.t)("payments.pending_subscription_modal_header"),hideCancel:!0,confirmText:(0,S.t)("payments.got_it"),trackedConfirmationProperties:{trackingDescriptor:ew.c.CONFIRM_VERIFY_PAYMENT,trackingContextName:"Confirm Verify Payment"}},(0,S.tx)("payments.pending_subscription_modal_description"))},"PENDING_SUBSCRIPTION_CHANGE_MODAL");var bn=a(999394);let bl="banners--warn--bC4ke",bi="banners--primaryCtaButton--tyhCJ",bo="banners--content--ciED3",bs="banners--titleSmall--ceZgU",bc="banners--bold--qt00U",bd="banners--message--9BMLM",bm="banners--messageSmall--YT-82",bu="banners--secondaryCtaButton--uYrvi",b_="banners--ctaButtonGroup--r8cfU",bp="banners--closeButton--IXY-V",bf="banners--teamBannerWithBackground--CwS6V banners--banner--l8udl",bg="banners--teamUpgradeNotice--gqc9c",bE="banners--softWarningBanner--QK9Y5",bv="banners--softWarningBannerBlue--uQmhb";var bh=a(677050),by=a(403262),bb=a(169321),bw=a(123243);function bT(e,t){let a;if(!e.currentUserOrgId||!(0,K.wn)(e.currentUserOrgId,e))return null;let r=e.orgById[e.currentUserOrgId],n=(0,q.canAdminOrg)(e.currentUserOrgId,e),l=r.past_due_at&&(0,y5.A)(r.past_due_at).add(2,"weeks")>(0,y5.A)(new Date);if(!n&&l)return null;let i=(0,t0.zR)(e.orgUsersByOrgId[e.currentUserOrgId]).map(e=>o.createElement("span",{key:e.id,className:bc},e.user.handle," (",e.user.email,")"));return a=n?r.billing===t4.EZ.CHARGE_IMMEDIATELY?(0,S.tx)("payments.org_past_due_on_payment",{invoice:o.createElement("a",{onClick:()=>{null==t||t(A.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:ng.J7.BILLING}))}},(0,S.tx)("payments.outstanding_invoice")),orgName:r.name}):(0,S.tx)("payments.org_past_due_on_payment_invoiced",{email:o.createElement("b",{className:bc},(0,_.W4)()),orgName:r.name}):(0,S.tx)("payments.please_reach_out_to_org_admins",{orgName:r.name,admins:(0,q.canMemberOrg)(e.currentUserOrgId,e)&&o.createElement("span",null," ",o.createElement(y9.T,{formatType:"disjunction"},i)),numAdmins:i.length}),{severity:bn.c.WARN,title:(0,S.t)("payments.payment_not_received"),message:a,cta:null,onClickCta:null}}function bI(e,t,a,r,n){var l;let i=a?r.teams[a]:null;if(a&&!i||"file"===e)return null;let s=r.currentTeamId,c=i&&i.subscription===z.Qh.GRACE_PERIOD,d=r.billingSummary,u=(null==i?void 0:i.subscription)===z.Qh.INCOMPLETE,p=!!(null==i?void 0:i.org_id),f=!!(null==i?void 0:i.subscription),g=e=>{var t;return(null==e?void 0:e.status)==="open"&&(null==(t=null==e?void 0:e.payment_intent)?void 0:t.status)===lC.pk.REQUIRES_SOURCE_ACTION},E=(0,_.kc)().requires_action_3ds_banner&&c&&!p&&f&&(g(null==d?void 0:d.last_monthly_invoice)||g(null==d?void 0:d.last_annual_invoice)),v=i&&(u||E),h=i&&i.subscription===z.Qh.PAST_DUE,y=i&&i.subscription===z.Qh.NO_MONTHLY_SUB_EDITOR_COUNT_EXCEEDED,w=a&&(0,q.canOwnTeam)(a,r),T=a&&(0,q.canAdminTeam)(a,r),x=a&&(0,q.canEditTeam)(a,r),N=i&&(0,K.oc)(i.id,r),C=i&&!(0,K.n0)(i)&&!i.student_team&&N,k=i&&(i.student_team_state===lC.kU.STUDENT_TEAM_CURRENT||i.student_team_state===lC.kU.STUDENT_TEAM_EXPIRED),L="folder"===e?t:null,F=0,P={showReminder:!1,showAccessRestricted:!1},M=a||(null==L?void 0:L.team_id),B="folder"===e&&!L;if(r.user){let t=M?(0,q.getRolesForUserAndTeam)(M,r):[],a=M&&(0,q.hasMinRole)(t,t8.e6.EDITOR),n=["folder","team"].includes(e)&&a,{ps_benchmark:l}=(0,_.kc)(),i=(0,b.cn)(r.user),o=r.userEduGracePeriods;B?(l&&s&&(0,b.hP)(r.user.id,r.roles.byTeamId,r.teams[s])||!l&&(0,b.ej)(r.user.id,r.roles.byTeamId,r.teams))&&(P=(0,b.df)(o,i),F=(0,b.Me)(o)):M&&n&&(P=(0,b.GU)(o,i,M,!!r.teams[M].student_team),F=(0,b.qS)(o,M))}let U=i&&!(0,K.n0)(i)&&!i.student_team&&L&&!(0,lQ.Gi)(L),V=U&&L.is_invite_only,H=U&&L.is_view_only,W=L&&(0,lQ.sp)(L),j=!W&&!i&&L&&(0,K.ZZ)(L,r),$=()=>null==n?void 0:n(D.WX({teamId:i.id,selectedView:r.selectedView})),G=e=>{e.preventDefault(),null==n||n(R.to({type:bt.v,data:{teamId:a}}))},Y=()=>{null==n||n(A.$T({view:"teamAdminConsole",teamId:a,teamAdminConsoleViewTab:hT.I.SETTINGS}))},Q=()=>m.Ay.redirect("/education/apply","_blank"),X=()=>null==n?void 0:n(D.WX({teamId:i.id,openInNewTab:!1,selectedView:{view:"team",teamId:i.id}})),Z=()=>null==n?void 0:n((0,R.to)({type:a9.V,data:{upsellSource:J.b.BANNER}})),ee=bT(r,n);if(ee)return ee;let et=(0,K._b)(i),er=i&&i.subscription_raw!==z.Qh.OK&&(0,K.WQ)(i)&&T&&rw.ng.getProTrialStatus(i)!==y7.a.IN_TRIAL&&et,en=["team","folder"].includes(e)&&x&&(0,r5.cU)(i),el=x&&function(e,t){var a;let r=e&&(null==(a=t[e.id])?void 0:a.dismissed_legacy_team_upgrade_notice_banner);return(0,r5.zs)(e)&&!r}(i,r.userTeamFlags),ei=(0,rb.R$)(r.user,r.currentUserOrgId),eo=rw.ng.canSeeExpiredProTrialBanner(r.userTeamFlags,i,r),es=i&&(null==(l=r.userTeamFlags[i.id])?void 0:l[rw.lg]),ec=eo&&(N||x&&!es),ed=r.user?(0,b.x$)(r.eduPeriodEnd,(0,b.cn)(r.user)):1/0,em=ed>0&&ed!==1/0,eu=0===ed,e_=i&&i.student_team_state===lC.kU.STUDENT_TEAM_CURRENT,ep=i&&i.student_team_state===lC.kU.STUDENT_TEAM_EXPIRED&&N,ef=em&&w&&e_,eg=eu&&w&&ep,eE=em&&x&&e_,ev=eu&&!x&&e_,eh=(0,_.kc)().edu_offboarding_experience&&(ef||eg||eE||ev),ey=(0,_.kc)().edu_offboarding_experience&&ep;if(c&&!E)return{severity:bn.c.WARN,title:(0,S.t)("payments.payment_failed"),message:(0,S.t)("payments.payment_failed_explanation"),cta:T?(0,S.t)("payments.update_payment"):(0,S.t)("payments.contact_admin"),ctaTrackingProperties:T?{trackingDescriptor:ew.c.UPDATE_PAYMENT}:void 0,onClickCta:T?Y:null};if(h)return{severity:bn.c.WARN,title:(0,S.t)("payments.locked"),message:(0,S.t)("payments.locked_description",{teamName:i.name}),cta:T?(0,S.t)("payments.update_payment"):(0,S.t)("payments.contact_admin"),ctaTrackingProperties:T?{trackingDescriptor:ew.c.UPDATE_PAYMENT}:void 0,onClickCta:T?Y:null};if(y)return{severity:bn.c.WARN,title:(0,S.t)("payments.locked"),message:T?o.createElement("span",null,(0,S.tx)("payments.no_monthly_sub_over_editor_limit_admin.seat_rename",{contactSupport:o.createElement("a",{href:`mailto:${(0,_.W4)()}`},(0,S.tx)("payments.contact_support"))})):o.createElement("span",null,(0,S.tx)("payments.no_monthly_sub_over_editor_limit.seat_rename")),cta:T?(0,S.t)("payments.manage_plan"):null,onClickCta:T?()=>{null==n||n(A.$T({view:"teamAdminConsole",teamId:a,teamAdminConsoleViewTab:hT.I.SETTINGS}))}:null};if(ec){let e,t,r,l;return N?(e=x?(0,S.tx)("payments.pro_trial_expiry.locked_description_on_team",{teamName:i.name,lowerUsageLink:o.createElement(O.$z,{onClick:G},(0,S.tx)("payments.pro_trial_expiry.lower_usage"))}):(0,S.tx)("payments.pro_trial_expiry.locked_description_for_viewer_on_team",{teamName:i.name}),t=x?(0,S.tx)("payments.pro_trial_upgrade_cta.upgrade"):null,r=`${bE} `,l="Pro Trial Expiry Banner Locked"):(e=i?(0,S.tx)("payments.pro_trial.trial_ended_banner_message",{teamName:i.name}):(0,S.tx)("payments.pro_trial.trial_ended_banner_message.no_name"),t=(0,S.tx)("payments.pro_trial.trial_ended_banner_upgrade_cta"),r=`${bE} ${bv}`,l="Pro Trial Expiry Banner Unlocked"),{severity:bn.c.WARN_SOFT,title:(0,S.t)("payments.pro_trial.trial_ended_banner_title"),message:e,cta:t,onClickCta:x?X:void 0,svg:by.A,bannerClassName:r,trackingContextName:l,dismissible:!N,onClose:N?void 0:()=>{a&&(null==n||n(y6.bE({all_team_flags:[{team_id:a,flags:{[rw.lg]:!0}}]})))}}}if(eh){let e=()=>null==n?void 0:n(R.to({type:be.ZL,data:{team:i}}));if(ef||eE)return{severity:bn.c.WARN_SOFT,title:(0,S.tx)("edu.banner.your_education_status_is_expiring_soon"),message:(0,S.tx)("edu.banner.to_keep_collaborating_upgrade_team",{teamName:i.name,verify:o.createElement(I.Us,{href:"/education/apply",target:"_blank",trusted:!0},(0,S.tx)("edu.banner.verify_your_education_status"))}),cta:(0,S.tx)("edu.banner.learn_more"),onClickCta:e,svg:bh.A,bannerClassName:`${bE} ${bv}`,trackingContextName:"Edu Offboarding Banner"};if(eg)return{severity:bn.c.WARN_SOFT,title:(0,S.tx)("edu.banner.your_education_plan_has_expired"),message:(0,S.tx)("edu.banner.team_is_now_view_only_for_all_members",{teamName:i.name}),cta:(0,S.tx)("edu.banner.learn_more"),onClickCta:e,svg:bh.A,bannerClassName:bE,trackingContextName:"Edu Offboarding Banner"};if(ev)return{severity:bn.c.WARN_SOFT,title:(0,S.tx)("edu.banner.your_education_plan_has_expired"),message:(0,S.tx)("edu.banner.you_can_no_longer_edit_files",{teamName:i.name}),cta:(0,S.tx)("edu.banner.learn_more"),onClickCta:e,svg:bh.A,bannerClassName:bE,trackingContextName:"Edu Offboarding Banner"}}else if(ey)return{severity:bn.c.WARN_SOFT,title:(0,S.tx)("edu.banner.team_s_education_status_has_expired",{teamName:i.name}),message:(0,S.tx)("edu.banner.move_or_duplicate_files_to_another_location_to_save_your_work"),cta:null,svg:bh.A,bannerClassName:bE,trackingContextName:"Edu Offboarding Banner"};else if(!C||r.checks&&r.checks.isEligibleForLockedRedesign&&r.checks.isEligibleForLockedRedesign(!k&&C)){if(ei){let e=r.user.external_restricted_org_id,t=(0,S.t)("external_collaboration_restricted.banner.restriction_description.no_org");if(e&&r.orgById[e]){let a=r.orgById[e];t=(0,S.t)("external_collaboration_restricted.banner.restriction_description",{organizationName:a.name})}return{severity:bn.c.WARN,title:(0,S.t)("external_collaboration_restricted.banner.title"),message:t,cta:null,ctaTrackingProperties:void 0,onClickCta:null}}if(r.user&&["team","folder"].includes(e)&&P.showAccessRestricted){let e,t=(0,S.t)("banner.edu_grace_period.your_education_plan_has_expired");return i?(0,b.eB)(r.user.id,r.roles.byTeamId,i)?e=(0,S.t)("banner.edu_grace_period.team_is_now_view_only_for_all_members",{teamName:i.name}):(0,b.QS)(r.user.id,r.roles.byTeamId,i)?e=(0,S.t)("banner.edu_grace_period.you_can_no_longer_edit_files_in_team",{teamName:i.name}):(t=(0,S.t)("banner.edu_grace_period.your_education_plan_has_expired.is_member",{teamName:i.name}),e=(0,S.t)("banner.edu_grace_period.move_or_duplicate_files_to_another_location_to_save_your_work")):e=(0,S.t)("banner.edu_grace_period.education_team_members_need_to_verify_their_education_status"),{severity:bn.c.ANNOUNCEMENT,title:t,message:e,learnMoreUrl:"/education/",cta:(0,S.t)("banner.edu_grace_period.verify_status_button"),onClickCta:Q,svg:bh.A,bannerClassName:bg}}if(["team","folder"].includes(e)&&P.showReminder)return{severity:bn.c.ANNOUNCEMENT,title:(0,S.t)("banner.edu_grace_period.only_edu_grace_period_days_left",{daysLeft:F}),message:(0,S.t)("banner.edu_grace_period.to_keep_collaborating_on_figma_s_education_plan_please_verify_your_status_soon"),cta:(0,S.t)("banner.edu_grace_period.verify_status_button"),onClickCta:Q,svg:bw.A};else if(V||H)return{severity:bn.c.WARN,title:(0,S.t)("payments.folder_locked"),message:(0,S.t)("payments.folder_locked_description",{projectType:"Invite"==(V?"Invite":"View")?(0,S.t)("payments.invite_only_projects"):(0,S.t)("payments.view_only_projects"),teamName:i.name}),learnMoreUrl:"/pricing",cta:x?(0,S.t)("payments.upgrade_now"):(0,S.t)("payments.contact_admin_for_details"),ctaTrackingProperties:x?{trackingDescriptor:ew.c.UPGRADE_NOW,upsellSource:J.b.BANNER}:void 0,onClickCta:x?$:null};else if(j&&"folder"===e)return{severity:bn.c.WARN,title:(0,S.t)("payments.locked"),message:(0,S.t)("payments.projects_deprecated"),learnMoreUrl:"/pricing-faq#what-changes-for-me",cta:null,onClickCta:null};else if(W&&"folder"===e)return{severity:bn.c.WARN,title:(0,S.t)("payments.abandoned_project"),message:(0,S.t)("payments.abandoned_project_description"),cta:null,onClickCta:null};else if(el){let e=(0,S.t)("payments.file_limit_unified",{figmaFiles:K.WW,figjamFiles:K.WW});en?el||(e=(0,S.t)("payments.file_limit_figjam",{figjamFiles:K.WW})):e=(0,S.t)("payments.file_limit_figma",{figmaFiles:K.WW});let t=()=>o.createElement("button",{type:"button",onClick:Z,className:"banners--bannerInlineTextButton--GRx12"},(0,S.tx)("payments.check_out_our_paid_plans")),a=i?o.createElement("span",null,(0,S.tx)("payments.team_over_starter_team_limit_with_button.legacy_team",{fileLimitString:e,checkoutOurPlans:t(),teamName:i.name})):o.createElement("span",null,(0,S.tx)("payments.team_over_starter_team_limit_with_button.no_legacy_team_present",{fileLimitString:e,checkoutOurPlans:t()}));return{severity:bn.c.ANNOUNCEMENT,title:(0,S.t)("payments.team_over_starter_team_limit_title"),message:a,cta:(0,S.t)("payments.upgrade_now"),ctaTrackingProperties:{trackingDescriptor:ew.c.UPGRADE_NOW,upsellSource:J.b.BANNER},onClickCta:$,svg:bb.A,bannerClassName:bg,trackingContextName:"Unified Legacy / Beta File Limit Banner"}}else if(er){let e=(0,y5.A)(i.grace_period_end).toDate(),t=(0,S.tx)("payments.pro_plan_ends_relative_time_string",{relative_time_string:o.createElement(cy.h1,{date:e})});return et||(t=(0,S.tx)("payments.pro_plan_ends_on_date",{end_date:new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)})),{severity:bn.c.ANNOUNCEMENT,title:t,message:(0,S.t)("payments.pro_plan_ends_for_team_description",{teamName:i.name}),cta:(0,S.t)("payments.pro_plan_ends_button"),onClickCta:X,svg:et?bb.A:by.A,trackingContextName:"Promo Code Expiration Banner",bannerClassName:et?bg:void 0}}else if(v){let e=u?(0,S.t)("payments.complete_team_payment_description",{teamName:i.name}):(0,S.t)("payments.complete_team_renewal_payment_description");return{severity:bn.c.WARN,title:(0,S.t)("payments.complete_payment"),message:e,cta:o.createElement(tP.V,{trackingProperties:{trackingDescriptor:ew.c.VERIFY_PAYMENT,trackingContextName:"Verify Payment Banner"},onClick:()=>null==n?void 0:n(R.to({type:br,data:{teamId:a,paymentRequiresAction:!!E}}))},(0,S.tx)("payments.complete_payment_cta")),onClickCta:null}}}else{let e;return e=T||x?o.createElement("span",null,o.createElement("b",{style:ea.sx.fontSemiBold.$},(0,S.tx)("payments.team_over_starter_team_limit",{teamName:i.name})," "),(0,S.tx)("payments.team_over_starter_team_limit_upgrade",{teamName:i.name,lowerYourUsage:o.createElement("a",{href:"#",onClick:G},(0,S.tx)("payments.team_over_starter_team_limit_lower_your_usage"))})):o.createElement("span",null,o.createElement("b",{style:ea.sx.fontSemiBold.$},(0,S.tx)("payments.team_over_starter_team_limit",{teamName:i.name})," "),(0,S.tx)("payments.contact_admin_for_details")),{severity:bn.c.WARN,title:(0,S.t)("payments.locked"),message:e,cta:x?(0,S.t)("payments.upgrade_now"):null,ctaTrackingProperties:x?{trackingDescriptor:ew.c.UPGRADE_NOW,upsellSource:J.b.BANNER}:void 0,onClickCta:x?$:null}}return null}function bx(e,t,a,r,n){return!!bI(t,a,r,{userFlags:e.userFlags,userTeamFlags:e.userTeamFlags,currentOrgId:e.currentUserOrgId,selectedView:e.selectedView,userEduGracePeriods:e.userEduGracePeriods,fileKeysByFolderId:e.fileKeysByFolderId,isFreeUser:e.isFreeUser,userAnalyticsData:e.userAnalyticsData,checks:n,...(0,q.getPermissionsState)(e)},null)}function bN(e){return(0,s.d4)(t=>bx(t,e.resourceType||z.vt.FOLDER,e.resource||null,e.teamId||null,e.checks))}function bC(e,t){let a={...e};return"string"==typeof t.title&&(a.title=t.title),"string"==typeof t.message&&(a.message=t.message),a}var bS=a(114961),bk=a(702595);let bA=o.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M0 24C0 10.7452 10.7452 0 24 0V0C37.2548 0 48 10.7452 48 24V24C48 37.2548 37.2548 48 24 48V48C10.7452 48 0 37.2548 0 24V24Z",fill:"var(--color-bg-inverse, black)"}),o.createElement("mask",{id:"mask0_4:25",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"48",height:"48"},o.createElement("path",{d:"M0 24C0 10.7452 10.7452 0 24 0V0C37.2548 0 48 10.7452 48 24V24C48 37.2548 37.2548 48 24 48V48C10.7452 48 0 37.2548 0 24V24Z",fill:"var(--color-bg-inverse, black)"})),o.createElement("g",{mask:"url(#mask0_4:25)"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 20H17.5C16.1193 20 15 21.1193 15 22.5C15 23.8807 16.1193 25 17.5 25H20L20 20ZM21 19.9963L21 25H21.6738C23.3383 25 24.9874 25.3196 26.5314 25.9416L28 26.5333V17.7761L27.3548 18.1614C25.4287 19.3116 23.2393 19.9428 21 19.9963ZM17.5 19H20.6897C22.8561 19 24.9821 18.4135 26.8421 17.3028L28.2437 16.4658C28.5769 16.2668 29 16.507 29 16.8951V27.2737C29 27.628 28.6418 27.8699 28.3132 27.7375L26.1577 26.8692C24.7325 26.2951 23.2103 26 21.6738 26H21.3286L22.5613 29.698C22.7771 30.3455 22.2951 31.0142 21.6126 31.0142H20.4415C19.5807 31.0142 18.8164 30.4634 18.5442 29.6467L17.3333 26.0142L17.3272 25.9958C15.4745 25.9057 14 24.375 14 22.5C14 20.567 15.567 19 17.5 19ZM18.3874 26.0142L19.4928 29.3304C19.6289 29.7388 20.0111 30.0142 20.4415 30.0142H21.6126L20.2792 26.0142H18.3874Z",fill:"var(--color-icon-oninverse, white)"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32.5 22C32.5 21.1716 31.8284 20.5 31 20.5V19.5C32.3807 19.5 33.5 20.6193 33.5 22C33.5 23.3807 32.3807 24.5 31 24.5V23.5C31.8284 23.5 32.5 22.8284 32.5 22Z",fill:"var(--color-icon-oninverse, white)"}));function bL(e){let{title:t,message:a,cta:r,ctaTrackingProperties:n,learnMoreUrl:l,onClickCta:i,severity:s,secondaryCTA:c,secondaryOnClickCta:d,svg:m,trackingContextName:u="Banner",contentStyles:_,reverseCtas:p,dismissible:f,onClose:g}=e;return s===bn.c.ANNOUNCEMENT?o.createElement(O.fu,{name:u,properties:{severity:s,...e.tracking}},o.createElement("div",{className:bo},m&&o.createElement(es.B,{svg:m,useOriginalSrcFills_DEPRECATED:!0}),o.createElement("div",{className:bd},o.createElement("div",{className:bs},t),o.createElement("div",{className:bm},a)),o.createElement(I.e2,{reversed:p,className:b_},i&&o.createElement(I.vd,{className:bi,onClick:i,trackingProperties:n},r),d&&o.createElement(I.tM,{className:bu,onClick:d},c),f&&g&&o.createElement(e_.Jn,{className:bp,onClick:g})))):s===bn.c.EVENT?o.createElement(O.fu,{name:u,properties:{severity:s,...e.tracking}},o.createElement("div",{className:`${bo} ${_}`},o.createElement("div",{className:"banners--eventMegaphoneIcon--7J3rx"},bA),o.createElement("div",{className:bd},o.createElement("p",{className:bs},t),o.createElement("p",{className:bm},a)),o.createElement(I.e2,{className:b_},i&&o.createElement(I.vd,{className:bi,onClick:i,trackingProperties:n},r),d&&o.createElement(I.tM,{className:bu,onClick:d},c),f&&g&&o.createElement(e_.Jn,{className:bp,onClick:g})))):o.createElement(O.fu,{name:u,properties:{severity:s,...e.tracking}},o.createElement("div",{className:`${bo} ${_}`},o.createElement(es.B,{svg:bk.A,className:"banners--warningIcon--A5YS-",autosize:s===bn.c.WARN_SOFT}),o.createElement("div",{className:bd},o.createElement("span",{className:"banners--title--OIA0P"},t),a,l&&o.createElement("span",null,"\xa0",o.createElement("a",{target:"_blank",rel:"noopener",href:l},(0,S.tx)("payments.learn_more")))),o.createElement(I.e2,{reversed:p,className:b_},i&&o.createElement(I.vd,{className:bi,onClick:i,trackingProperties:n},r),!i&&o.createElement("div",{className:"banners--ctaMessage--5MB88"},r),f&&g&&o.createElement(e_.Jn,{className:bp,onClick:g}))))}let bR=(0,s.Ng)(e=>{var t;return{userFlags:e.userFlags,userTeamFlags:e.userTeamFlags,currentOrgId:e.currentUserOrgId,selectedView:e.selectedView,userEduValidated:!!(null==(t=e.user)?void 0:t.student_validated_at),userEduGracePeriods:e.userEduGracePeriods,fileKeysByFolderId:e.fileKeysByFolderId,isFreeUser:e.isFreeUser,userAnalyticsData:e.userAnalyticsData,...(0,q.getPermissionsState)(e)}})(function(e){var t,a;let r;let n=(0,rr.Rs)(rl.UpR,{}),l=(0,M.Yz)(),i=e.folderId?e.folders[e.folderId]:null,c=i?i.team_id:null,d=e.dispatch,m=c&&(0,q.canAdminTeam)(c,e),u=c?e.teams[c]:null,p=!!(null==u?void 0:u.org_id),f=!!(null==u?void 0:u.subscription);(0,o.useEffect)(()=>{(0,_.kc)().requires_action_3ds_banner&&c&&!p&&f&&m&&d(bS.Be({teamId:c}))},[d,c,p,f,m]);let g=(0,s.d4)(e=>{var t;return null==(t=e.teamBilling)?void 0:t.summary}),E=bI(z.vt.FOLDER,i??null,c,{eduPeriodEnd:null==(a=null==(t=n.data)?void 0:t.currentUser)?void 0:a.eduPeriodEnd,billingSummary:g,checks:{isEligibleForLockedRedesign:l},...e},e.dispatch);if(!E)return o.createElement("div",null);r=i?bC({resourceType:z.vt.TEAM,teamId:c,folderId:i.id},E):bC({resourceType:"recents"},E);let v=E.severity===bn.c.WARN?bl:"",h=E.bannerClassName||"",y=`${bf} ${v} ${h}`;return o.createElement("div",{className:y},o.createElement(bL,{...E,tracking:r}))});var bD=a(841563),bF=a.n(bD),bP=a(347632);function bM(e){let t=(0,s.d4)(of.hK),a=(0,s.wA)(),r=e.tabs?o.createElement(bP.f,{tabs:e.tabs.map(e=>o.createElement(bP.r,{key:e.tabName,tab:null,onClick:()=>a(A.$T(e.view)),tabName:e.tabName,isSelected:bF()(t,e.view),ariaLabel:e.ariaLabel}))}):o.createElement(o.Fragment,null);return o.createElement(oe.g2,{leftSide:r,rightSide:e.viewbarActions||[]})}let bO=e=>({tileSortFilterConfig:e.deletedFiles,sortKeys:[cs.C0.TRASHED_AT,cs.C0.NAME,cs.C0.CREATED_AT,cs.C0.TOUCHED_AT]});function bB(){let e=(0,s.wA)(),t=(0,s.d4)(e=>e.tileSortFilterStateByView),a=(0,ry._6)(),r=(0,yv.xx)(bO)(t);return o.createElement(bM,{viewbarActions:["deletedFiles"===a.view?o.createElement(oe.gr,{key:3,dispatch:e,options:r,selectedView:a}):null,o.createElement(oe.ye,{key:0,config:r.tileSortFilterConfig}),o.createElement(oe.mc,{key:1,dispatch:e,options:r,selectedView:a}),o.createElement(oe.$c,{key:2,initialViewMode:r.tileSortFilterConfig.viewMode,onViewModeChange:t=>{(0,tK.sx)("file view toggle",{viewType:t===cs.XU.GRID?"grid":"list"}),e(A.JF({selectedView:a,config:{...r.tileSortFilterConfig,viewMode:t}}))}})]})}function bU(){var e,t;let a;let r=(0,s.wA)(),n=(0,s.d4)(e=>e.currentUserOrgId),l=(0,s.d4)(e=>e.currentTeamId),i=(0,et.S)();a=n?null==(e=null==i?void 0:i.currentUser.baseOrgUser)?void 0:e.draftsProject:(0,_.kc)().ps_benchmark&&l?null==(t=null==i?void 0:i.currentUser.currentTeamUser)?void 0:t.draftsProject:null==i?void 0:i.currentUser.draftsProject;let c=(0,s.d4)(e=>e.tileSortFilterStateByView),d=(0,ry._6)();if(!i||!a)return o.createElement(bM,{tabs:[],viewbarActions:[]});let m="deletedFiles"===d.view?(0,yv.xx)(bO)(c):(0,yv.xx)(lQ.ZN)(a.id,c);return o.createElement(bM,{tabs:(0,_.kc)().pdr_trashed_section?void 0:[{tabName:(0,S.t)("file_browser.tool_bar.drafts"),view:{view:"folder",folderId:a.id},ariaLabel:(0,S.t)("file_browser.tool_bar.drafts.aria_label")},{tabName:(0,S.t)("file_browser.tool_bar.deleted"),view:{view:"deletedFiles"},ariaLabel:(0,S.t)("file_browser.tool_bar.deleted.aria_label")}],viewbarActions:["deletedFiles"===d.view?o.createElement(oe.gr,{key:3,dispatch:r,options:m,selectedView:d}):null,o.createElement(oe.ye,{key:0,config:m.tileSortFilterConfig}),o.createElement(oe.mc,{key:1,dispatch:r,options:m,selectedView:d}),o.createElement(oe.$c,{key:2,initialViewMode:m.tileSortFilterConfig.viewMode,onViewModeChange:e=>{(0,tK.sx)("file view toggle",{viewType:e===cs.XU.GRID?"grid":"list"}),r(A.JF({selectedView:d,config:{...m.tileSortFilterConfig,viewMode:e}}))}})]})}let bV={open:!0,openNewTab:!0,restoreFromVersion:!0,share:!0,copyLink:!0,rename:!0,duplicate:!0,delete:!0,createBranch:!0,moveFile:!0},bH=(0,yv.xx)(lQ.ZN);function bW(e){var t,a,r,n;let{sortFilterOptions:l,selectedBranchKeyByRepoId:i}=(0,iX.R)(t=>({sortFilterOptions:bH(e.folderId,t.tileSortFilterStateByView),selectedBranchKeyByRepoId:t.selectedBranchKeyByRepoId})),c=(0,y3.Rp)(),d=(0,s.d4)(({currentUserOrgId:e})=>e);(0,E.I7)("exp_aa_test_org_drafts").getConfig();let m=()=>{},[u,_]=function(e){let t=(0,s.d4)(t=>t.tileSortFilterStateByView.folders.byId[e]??t.tileSortFilterStateByView.folders.default),a=(0,o.useMemo)(()=>({file_type:yh(t.filters.fileType),sort_order:t.sort.dir===cs.ue.ASC?"asc":"desc",sort_column:yy(t.sort.key)}),[t.filters.fileType,t.sort.dir,t.sort.key]),[r,n]=(0,p.IT)((0,rO.BU)({folderId:e,...a}));return[r,(0,o.useCallback)(e=>{if("fetchNextPage"===e.type)return n.fetchNextPage();(0,el.xb)(e.type)},[n])]}(e.folderId),f=null==(t=u.data)?void 0:t.folder,g=(0,M.Yz)(),v=(0,r0.vt)(null==f?void 0:f.team_id),h=bN({resourceType:z.vt.FOLDER,resource:f,teamId:(null==f?void 0:f.team_id)||null,checks:{isEligibleForLockedRedesign:g}});m=o.useCallback(()=>{u.isFetchingNextPage||_({type:"fetchNextPage"})},[u.isFetchingNextPage,_]);let y=o.useMemo(()=>{var e,t,a;let r=((null==(e=u.data)?void 0:e.files)||[]).map(e=>({type:lh.nb.FILE,file:e})),n=(null==(t=u.data)?void 0:t.filesByRepoId)||{};return[...r,...((null==(a=u.data)?void 0:a.repos)||[]).map(e=>({type:lh.nb.REPO,repo:e,branches:n[e.id],selectedBranchKey:i[e.id]||""})),...Object.values(c).filter(e=>e.orgId===d).map(lh.gB)]},[d,null==(a=u.data)?void 0:a.files,null==(r=u.data)?void 0:r.filesByRepoId,null==(n=u.data)?void 0:n.repos,c,i]),b=!!f&&v,w=o.createElement(o.Fragment,null,o.createElement(y4,{newFileTile:!0,tiles:y,chunkSize:y.length,tileActions:bV,sortFilterOptions:l,emptyStateText:"",hideSorter:!0,isDataPartial:!!u.hasNextPage,eligibleForLockedStateRedesign:g(b)}),o.createElement(ya.cx,null)),T=o.createElement(r2.A,{loadingElementId:"loading-content-pane",loaded:"loaded"===u.status,loadingElementClassName:ef.cx.pr32.$},o.createElement(yb.B,{key:`${l.tileSortFilterConfig.filters.fileType}`,onShouldFetchNextPage:m},w));return(0,O.T8)(o.createElement(so.r,{viewBarSticky:!0,banner:h?o.createElement(bR,{folderId:e.folderId}):void 0,content:T,viewbar:o.createElement(bU,null)}),t3.e0.FILE_BROWSER,{view:"drafts"})}var bj=a(772841),b$=a(189430),bG=a(953993),bz=a(529982),bY=a(649433),bK=a(516056);let bQ=(0,eU.Ju)(function(e){let t,a;let r=(0,s.wA)(),[n,l]=o.useState(""),i=(0,s.d4)(e=>e.deletedReposById),c=(0,s.d4)(e=>e.fileByKey),{reposToDelete:d,draftsToDelete:m,deleteAllDraftsAsync:u,isDeleteAll:p,isPermanentDeletion:f}=e,g=m.map(e=>e.name).concat(d.map(e=>e.name)),E=g.length>1;t=f?E?(0,S.t)("file_browser.draft_delete_modal.header_multiple_files_delete",{fileCount:g.length}):(0,S.t)("file_browser.draft_delete_modal.header_single_file_delete",{fileName:g[0]}):E?(0,S.t)("file_browser.draft_delete_modal.header_multiple_files_trash",{fileCount:g.length}):(0,S.t)("file_browser.draft_delete_modal.header_single_file_trash");let v=(t,a)=>{if(t.length>0){if(f){let a=t.reduce((e,t)=>(e[t.key]=!0,e),{});r(l_.YK({fileKeys:a,userInitiated:!0,onSuccessCallback:e.onDeleteSuccess}))}else{let a=t.reduce((e,t)=>(e[t.key]=t,e),{});r(l_.VK({fileKeys:a,userInitiated:!0,onSuccessCallback:e.onDeleteSuccess,hideVisualBell:!0}))}}let n={};a.forEach(e=>{let t=i[e.id];if(t)n[e.id]=t;else{let t=e.default_file_key&&c[e.default_file_key];t&&(n[e.id]={repo:e,main_file:t})}}),a.length>0&&(f?r((0,bY.YM)({repoIds:Object.keys(n),userInitiated:!0})):r((0,bY.hT)({reposById:n,userInitiated:!0})))},h=()=>bK.k.deleteAllPersonalDrafts().then(()=>r(ec.F.enqueue({message:(0,S.t)("file_browser.draft_delete_modal.async_delete_drafts_scheduled")}))).catch(()=>r(ec.F.enqueue({message:(0,S.t)("file_browser.draft_delete_modal.async_delete_drafts_scheduled_error")}))),y=()=>{let{draftsToDelete:t,reposToDelete:a}=e;t.length+a.length>100?r(C.s.error((0,S.t)("file_browser.draft_delete_modal.unable_to_delete",{maxSize:100}))):(e.setSynchronousFileTransferInProgress(t.length>0),v(t,a))},b=()=>{u?h():y(),e.onClose()},w=o.useMemo(()=>n.trim().toLowerCase()!==(0,S.t)("file_browser.draft_delete_modal.button_delete").toLocaleLowerCase(),[n]);a=f?E?(0,S.t)("file_browser.draft_delete_modal.permanently_delete_multiple_drafts",{fileCount:g.length}):(0,S.t)("file_browser.draft_delete_modal.permanently_delete_one_draft"):E?(0,S.t)("file_browser.draft_delete_modal.you_are_about_to_delete_multiple_drafts",{fileCount:g.length}):(0,S.t)("file_browser.draft_delete_modal.you_are_about_to_delete_single_draft",{fileName:g[0]});let T=f?o.createElement(I.qM,{onClick:b,disabled:w,trackingProperties:{isDeletingDraftFromDTM:!0,isPermanentDeletion:f},dataTestId:"draft-delete-confirmation-button"},o.createElement("span",{"data-tooltip":(0,S.t)("file_browser.draft_delete_modal.draft_deletion_tooltip",{deletionString:(0,S.t)("file_browser.draft_delete_modal.button_delete")}),"data-tooltip-type":w?eB.Ib.TEXT:null,"data-tooltip-max-width":180,"data-tooltip-show-above":!0},(0,_.kc)().ps_trashed_drafts_enabled?(0,S.t)("file_browser.draft_delete_modal.button_permanently_delete_files",{numFiles:g.length}):(0,S.t)("file_browser.draft_delete_modal.button_delete"))):o.createElement(eu.vd,{onClick:b,"data-testid":"draft-delete-confirmation-button",trackingProperties:{isDeletingDraftFromDTM:!0,isPermanentDeletion:f}},(0,S.tx)("file_browser.draft_delete_modal.button_delete_files",{numFiles:g.length}));return o.createElement(O.fu,{name:"draftDeleteModal",properties:{itemCount:g.length,isDeleteAsync:!!u,isDeleteAll:!!p}},o.createElement(eW.XV,{title:t,minWidth:480,maxWidth:480,onClose:e.onClose,truncateTitleText:!0,fixedCenter:!0},o.createElement("div",{className:"draft_delete_modal--modalContent--QYGIS"},o.createElement("p",null,a," ",!f&&o.createElement("p",null,o.createElement("br",null),(0,S.tx)("file_browser.draft_delete_modal.you_can_access_drafts_from_deleted_drafts_section",{fileCount:g.length}))),o.createElement("p",{className:"draft_delete_modal--confirmationTextSpacing---MQEW"},f&&(0,S.tx)("file_browser.draft_delete_modal.permanently_delete_multiple_drafts_confirmation",{deletionString:(0,S.t)("file_browser.draft_delete_modal.button_delete")})),o.createElement("form",{onSubmit:b},f&&o.createElement("div",null,o.createElement(ty.L,{className:"draft_delete_modal--deleteDraftsInput--pCTUB",type:"text",dataTestId:"draft-delete-confirmation-input",value:n,onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()},onChange:e=>{l(e.currentTarget.value)},autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1})),o.createElement("div",{className:"draft_delete_modal--footer--SRSo6"},o.createElement(I.nR,{onClick:e.onClose},(0,S.tx)("modal.cancel")),T)))))},"DraftDeleteModal");var bq=a(279358),bX=a(70964),bJ=a(255533),bZ=a(821150);let b0="drafts_to_move_page_view--fileCellDateSpan--xWiCm",b1="drafts_to_move_page_view--dateColumn--V3e9G drafts_to_move_page_view--column--jpRzM table--column--974RA",b2="drafts_to_move_page_view--emptyContentContainer--w1lwc",b4="drafts_to_move_page_view--emptyContentHeader--35cXt",b8=(0,oI.jz)(oQ.ISO);var b3=(e=>(e.DRAFT_FILES="draft-files",e.DELETED_DRAFT_FILES="deleted-draft-files",e))(b3||{}),b5=(e=>(e.NONE="NONE",e.SYNCHRONOUS_DELETION_OR_MIGRATION="SYNCHRONOUS_DELETION_OR_MIGRATION",e.ASYNC_FILE_MIGRATION="ASYNC_FILE_MIGRATION",e.ASYNC_FILE_DELETION="ASYNC_FILE_DELETION ",e.TRANSFER_COMPLETED="TRANSFER_COMPLETED",e))(b5||{});function b9(e){let t=e=>{switch(e){case"draft-files":return(0,S.t)("file_browser.drafts_to_move.drafts");case"deleted-draft-files":return(0,S.t)("file_browser.drafts_to_move.deleted_drafts");default:(0,el.xb)(e)}},a=t=>{let a=b3[t].replace(/-/g,"_");(0,eP.Cu)({text:a,name:"Drafts to move tab switch"},"cta_clicked"),e.setSelectedTab(b3[t])},r=Object.keys(b3).map(r=>o.createElement(bP.r,{tab:b3[r],onClick:()=>a(r),isSelected:e.selectedTab===b3[r],tabName:t(b3[r]),key:r}));return o.createElement(oe.g2,{leftSide:o.createElement(bP.f,{tabs:r}),rightSide:[]})}function b6(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.selectedView),r=(0,s.d4)(e=>e.selectedBranchKeyByRepoId),n=(0,cn.v)(),{item:l}=e,i=lh.Tf.getFileKey(l)??"",c=(0,bG.Y)(i,lh.Tf.getFavoritedResourceType(l),lh.Tf.getOrgId(l),lh.Tf.getFavoriteResourceTeamId(l)),d=o.useMemo(()=>"loaded"===c.status?!!c.favorite:lh.Tf.getIsFavorited(l),[l,c]),m=e=>r=>{r.detail>1&&!lh.Tf.getTrashedAt(l)&&(yY({tile:e,index:0,dispatch:t,selectedView:a}),n(e,r),r.stopPropagation())};return o.createElement("div",{className:ef.cx.inlineFlex.minW0.$},o.createElement("button",{className:"drafts_to_move_page_view--draftThumbnail--whTtS",onClick:m(l),"data-testid":`fileTile-${i}`},o.createElement(lz.H5,{file:l.type===lh.nb.FILE?l.file:(0,yP.mr)(l.repo,l.branches,r),noBorder:!0}),o.createElement("div",{className:"drafts_to_move_page_view--topLeftControls--kfCRe"},o.createElement(cb.x,{tile:l,iconSize:16})),d&&o.createElement("div",{className:"drafts_to_move_page_view--topRightControls--dD-Od"},o.createElement("div",{className:"drafts_to_move_page_view--control--W49tq"},o.createElement(lY.r,{setFavorite:f.lQ,favoriteType:(0,rg.UL)(l.type),resourceId:i,noHoverState:!0,size:lY.m.SMALL,orgId:lh.Tf.getOrgId(l)??null,teamId:lh.Tf.getFavoriteResourceTeamId(l),disableTooltip:!0})))),o.createElement("div",{className:ef.cx.ml14.minW0.flex.flexColumn.itemSelfCenter.$},o.createElement("button",{className:"drafts_to_move_page_view--fileName--U3mn4",onClick:m(l)},lh.Tf.getName(l)),e.shouldDisplayFileDates&&o.createElement("div",{className:"drafts_to_move_page_view--fileCellDatesSection--LFnvg"},o.createElement("span",{className:b0},(0,S.tx)("file_browser.drafts_to_move.file_created_at_label",{timeDifference:o.createElement(cy.h1,{date:lh.Tf.getCreatedAt(l)})})),o.createElement("span",{className:b0},(0,S.tx)("file_browser.drafts_to_move.file_last_modified_at_label",{timeDifference:o.createElement(cy.h1,{date:lh.Tf.getTouchedAt(l)??""})})))))}function b7({currentFileTransferState:e}){let t="dark"===(0,oA.DP)(),a=e=>o.createElement(o.Fragment,null,o.createElement(tc.kt,{size:"large"}),o.createElement("p",{className:"drafts_to_move_page_view--transferContentHeader--ljikD"},(0,S.tx)("file_browser.drafts_to_move.file_transfer_header",{transferType:"ASYNC_FILE_MIGRATION"===e?(0,S.tx)("file_browser.drafts_to_move.file_transfer_migration_type"):(0,S.tx)("file_browser.drafts_to_move.file_transfer_deletion_type")})),o.createElement("p",null,(0,S.tx)("file_browser.drafts_to_move.file_transfer_description"))),r=()=>o.createElement("div",{className:"drafts_to_move_page_view--slideIn--c-NGK"},o.createElement("div",{className:"drafts_to_move_page_view--animatedContentContainer--z1sdh"},o.createElement(bX.Gv,{src:t?"https://static.figma.com/uploads/c9f2d8cbce5754a2b6e3e3e81adf5fe313429577":"https://static.figma.com/uploads/6212099329ba7714b869112a09f8dfffce71edf5",containerClassName:"drafts_to_move_page_view--allDoneGif--mwZxC",height:100,width:100}),o.createElement("p",{className:b4},(0,S.tx)("file_browser.drafts_to_move.empty_header")),o.createElement("p",null,(0,S.tx)("file_browser.drafts_to_move.empty_body_text")))),n=()=>o.createElement(tc.kt,{size:"large"});return o.createElement("div",{className:b2},(()=>{switch(e){case"ASYNC_FILE_MIGRATION":case"ASYNC_FILE_DELETION ":return a(e);case"TRANSFER_COMPLETED":return r();default:return n()}})())}function we(){let e=(0,s.wA)(),t=(0,s.d4)(e=>{var t;return null==(t=e.user)?void 0:t.personal_drafts_folder_id}),a=(0,s.d4)(e=>e.fileKeysByFolderId),r=(0,s.d4)(e=>e.fileKeysByRepoId),n=(0,s.d4)(e=>e.repoIdsByFolderId),l=(0,s.d4)(e=>e.repos),i=(0,s.d4)(e=>e.fileByKey),c=(0,s.d4)(e=>e.selectedView),d=(0,s.d4)(e=>e.selectedBranchKeyByRepoId),m=(0,s.d4)(e=>e.userFlags),u=m.personal_draft_migration_scheduled,p=m.personal_draft_migration_completed,f=m.personal_draft_deletion_scheduled,g=m.personal_draft_deletion_completed,v=(0,s.d4)(e=>e.loadedFolders),h=(0,s.d4)(e=>e.deletedFilesByKey),y=(0,s.d4)(e=>e.deletedReposById),{windowInnerWidth:b}=(0,b$.l)(),w=(0,rr.Rs)(rl.vXh,{}),T=(0,rr.Rs)(rl.Jzf,{projectId:t??""},{enabled:!!t}),x=(0,cn.v)(),[N,C]=o.useState("draft-files"),[k,A]=o.useState(!1),[D,F]=o.useState("NONE"),[P,M]=o.useState(!1),[B,U]=o.useState(!1);o.useEffect(()=>{u&&(0,iu.rO)(u.updatedAt,null==p?void 0:p.updatedAt)?F("ASYNC_FILE_MIGRATION"):f&&(0,iu.rO)(f.updatedAt,null==g?void 0:g.updatedAt)?F("ASYNC_FILE_DELETION "):P?F("SYNCHRONOUS_DELETION_OR_MIGRATION"):F("NONE")},[u,p,f,g,P]),o.useEffect(()=>{e(L.h3({orgId:null}))},[e]);let V="loaded"===w.status,H=o.useMemo(()=>{var e,t;if(!V)return[];let a=[];return(null==(t=null==(e=w.data)?void 0:e.currentUser)?void 0:t.draftsFolderId)&&a.push(w.data.currentUser.draftsFolderId),a},[V,w]),W=o.useMemo(()=>{var e,t,a,r;return(null==(t=null==(e=T.data)?void 0:e.project)?void 0:t.status)!==bj.tT.Loaded?new Set:new Set(((null==(r=null==(a=T.data)?void 0:a.project.data)?void 0:r.undeletedFilesHighLimit)??[]).map(e=>e.key))},[T]),j=o.useMemo(()=>{var e,t,a,r;if((null==(t=null==(e=T.data)?void 0:e.project)?void 0:t.status)!==bj.tT.Loaded)return new Set;let n=new Set;return((null==(r=null==(a=T.data)?void 0:a.project.data)?void 0:r.undeletedFilesHighLimit)??[]).forEach(e=>{e.fileRepoId&&n.add(e.fileRepoId)}),n},[T]),$=o.useCallback(e=>W.has(e),[W]),G=o.useCallback(e=>j.has(e),[j]);o.useEffect(()=>H.forEach(t=>V&&e((0,rO.jl)({folderId:t,loadedFolders:v}))),[v,H,e,V]);let{getConfig:z}=(0,E.I7)("ps_async_draft_move_limit",void 0,!0),Y=z().get("async_limit",100),K=V&&H.every(e=>e&&"loaded"===v[e]),Q=o.useMemo(()=>Object.keys(h).map(e=>h[e]).filter(e=>!e.file_repo_id&&e.folder_id===t&&$(e.key)),[h,t,$]),q=o.useMemo(()=>Object.keys(y).map(e=>y[e]).filter(e=>e&&e.main_file&&e.main_file.folder_id===t&&e.repo&&G(e.repo.id)),[y,t,G]),X=o.useMemo(()=>H.flatMap(e=>n[e]).map(e=>l[e]).filter(e=>!!e&&G(e.id)),[H,l,n,G]),J=o.useMemo(()=>H.flatMap(e=>a[e]).map(e=>i[e]).filter(e=>!!e&&$(e.key)),[H,i,a,$]);o.useEffect(()=>{let e=J.length+X.length,t=Q.length+q.length;K&&!B&&(0===e&&t>0&&C("deleted-draft-files"),U(!0))},[K,B,J.length,X.length,q.length,Q.length]);let Z=o.useMemo(()=>J.concat(Q).map(e=>({type:lh.nb.FILE,file:e})),[J,Q]),ee="deleted-draft-files"===N?Q:J,et=o.useMemo(()=>ee.map(e=>({type:lh.nb.FILE,file:e})),[ee]),ea=o.useMemo(()=>X.map(e=>{let t=r[e.id].map(e=>i[e]).filter(e=>!!e);return{type:lh.nb.REPO,repo:e,branches:t,selectedBranchKey:d[e.id]}}),[X,d,i,r]),er=o.useMemo(()=>q.map(e=>{var t;return{type:lh.nb.REPO,repo:e.repo,branches:[e.main_file],selectedBranchKey:null==(t=e.main_file)?void 0:t.key}}),[q]),en="deleted-draft-files"===N?er:ea,el=er.concat(ea),ei=et.concat(en),eo=Z.length>0||el.length>0,es=ei.length>0,[ed,em]=o.useState([]),eu=()=>{e(R.Ce()),A(!1)},e_=(t,a)=>{e(ec.F.enqueue({message:(0,S.t)("visual_bell.files_moved_to_folder",{fileCount:a,folderName:t})})),M(!1),em([])},ep=()=>{M(!1),em([])},eg=e=>{let t=[],a=[];return e.forEach(e=>{e.type===lh.nb.FILE&&t.push(e.file),e.type===lh.nb.REPO&&a.push(e.repo)}),{draftsToMove:t,reposToMove:a}},eE=t=>{let{draftsToMove:a,reposToMove:r}=eg(ed);A(!0),e(R.to({type:bQ,data:{isPermanentDeletion:t,draftsToDelete:a,reposToDelete:r,deleteAllDraftsAsync:ed.length>Y,setSynchronousFileTransferInProgress:M,onDeleteSuccess:ep,onClose:eu}}))},ev=()=>{let{draftsToMove:t,reposToMove:a}=eg(ed);A(!0),e(R.to({type:bq.K,data:{draftsToMove:t,reposToMove:a,moveAllDraftsAsync:ed.length>Y,onMoveSuccess:e_,onClose:eu,setSynchronousFileTransferInProgress:M}}))},eh=function(e,t,a,r){let n=r>=1200,l=[{name:(0,S.t)("file_browser.drafts_to_move.table_header_name"),className:"drafts_to_move_page_view--nameColumn--sSZYF drafts_to_move_page_view--column--jpRzM table--column--974RA",getSortValue:e=>lh.Tf.getName(e),cellComponent:e=>o.createElement(b6,{item:e,shouldDisplayFileDates:!n})}];return n&&l.push({name:(0,S.t)("file_browser.drafts_to_move.table_header_last_modified"),className:b1,getSortValue:e=>lh.Tf.getTouchedAt(e)??"",cellComponent:e=>{let t=lh.Tf.getTouchedAt(e);return t?o.createElement(cy.h1,{date:t}):""}},{name:(0,S.t)("file_browser.drafts_to_move.table_header_created"),className:b1,getSortValue:e=>lh.Tf.getCreatedAt(e),cellComponent:e=>o.createElement(cy.h1,{date:lh.Tf.getCreatedAt(e)})}),l.push({name:"",className:"drafts_to_move_page_view--moveButtonColumn--Mvc2P drafts_to_move_page_view--column--jpRzM table--column--974RA",cellComponent:r=>0===a?o.createElement(o.Fragment,null,o.createElement(I.tM,{className:ey()("drafts_to_move_page_view--openDraftButton--zXZGf",ef.cx.if(!!lh.Tf.getTrashedAt(r),ef.cx.invisible).$),onClick:e=>t(e,r)},(0,S.tx)("file_browser.drafts_to_move.open_draft_button")),o.createElement(I.tM,{className:"drafts_to_move_page_view--moveDraftButton--GmBWa",onClick:t=>e(t,r)},(0,S.tx)("file_browser.drafts_to_move.move_draft_button"))):o.createElement(o.Fragment,null)}),l}((t,a)=>{let{draftsToMove:r,reposToMove:n}=eg([a]);e(R.to({type:bq.K,data:{draftsToMove:r,reposToMove:n,onMoveSuccess:e_,onClose:eu,setSynchronousFileTransferInProgress:M}})),t.stopPropagation()},(t,a)=>{yY({tile:a,index:0,dispatch:e,selectedView:c}),x(a,t),t.stopPropagation()},ed.length,b),[eb,ew,eT]=(0,bz.z)({columnName:(0,S.t)("file_browser.drafts_to_move.table_header_last_modified"),isReversed:!0},ei,eh),eI=o.createElement("div",{className:b2},o.createElement("span",{className:b4},(0,S.tx)("file_browser.drafts_to_move.empty_header")),o.createElement("span",null,(0,S.tx)("file_browser.drafts_to_move.empty_content_description",{tab:o.createElement("button",{className:"drafts_to_move_page_view--emptyContentTab--GKlRP",onClick:()=>C("draft-files"===N?"deleted-draft-files":"draft-files")},"draft-files"===N?(0,S.t)("file_browser.drafts_to_move.deleted_drafts"):(0,S.t)("file_browser.drafts_to_move.drafts"))})));if("NONE"!==D)return o.createElement(b7,{currentFileTransferState:D});let ex=ed.length<=0||ed.length>Y,eN="deleted-draft-files"===N||!(0,_.kc)().ps_trashed_drafts_enabled,eC=o.createElement(r2.A,{loadingElementClassName:"drafts_to_move_page_view--loadingPage--ZZyqG",loadingElementId:"loading-content-pane",loaded:K},es?o.createElement(o.Fragment,null,o.createElement("div",{className:"drafts_to_move_page_view--tableWrapper--b-sz2"},o.createElement(bJ.Cj,{selectAllDisabled:eT.length>Y,items:eT,columns:eh,actionBarClassName:ey()("drafts_to_move_page_view--actionBar--BbYQh",{"drafts_to_move_page_view--actionBarHidden--l4K4A":k}),getItemKey:e=>lh.Tf.getFileKey(e)??"",minContentWidth:728,actionBar:e=>o.createElement("div",{className:"drafts_to_move_page_view--actionBarButtons--RUREB"},!ex&&o.createElement(I.rb,{className:"drafts_to_move_page_view--deleteDraftsButton--Aesaa",onClick:()=>eE(eN)},eN?(0,S.tx)("file_browser.drafts_to_move.bulk_delete_drafts_button"):(0,S.tx)("file_browser.drafts_to_move.bulk_trash_drafts_button")),o.createElement(I.vd,{className:"drafts_to_move_page_view--moveDraftsButton--fZf6H",disabled:ex,onClick:ev},(0,S.tx)("file_browser.drafts_to_move.bulk_move_drafts_button",{numSelected:ed.length}))),emptyContent:"",onSelectedItemsChange:em,itemTypeContext:{itemType:"draftToMove",getSelectedCountString:e=>(0,S.t)("file_browser.drafts_to_move.selected_count_files",{numSelected:e})},isLoading:!bZ.s1,sortState:eb,onSetSortState:ew,shouldRoundBordersForSelectedRows:!0,styleOverrideClassNames:{row:"drafts_to_move_page_view--row--v9ugA",header:"drafts_to_move_page_view--header--qsyde",unselectedCheckbox:"drafts_to_move_page_view--visibleCheckbox--UOqli",batchActionClearButton:"drafts_to_move_page_view--batchActionClearButton--Qk923"},scrollContainerInnerClassName:"drafts_to_move_page_view--scrollContainer--yiQAz",rowHeightOverride:b8}))):eo?eI:o.createElement(b7,{currentFileTransferState:"TRANSFER_COMPLETED"}));return(0,O.T8)(o.createElement(so.r,{content:eC,viewbar:eo&&o.createElement(o.Fragment,null,o.createElement("div",{className:"drafts_to_move_page_view--viewbar--wJ6Pu"},o.createElement("div",{className:"drafts_to_move_page_view--viewbarWarning--6T7y-"},o.createElement(a7.EG,{className:"drafts_to_move_page_view--yellowIcon--xHN3r"}),o.createElement("div",null,o.createElement("h1",{className:"drafts_to_move_page_view--viewbarHeading--02fvs"},(0,S.tx)("file_browser.drafts_to_move.viewbar_heading")),o.createElement("ul",{className:"drafts_to_move_page_view--viewbarDescription--dV8s3"},o.createElement("li",null,(0,S.tx)("file_browser.drafts_to_move.move_drafts_below")),o.createElement("li",null,(0,S.tx)("file_browser.drafts_to_move.drafts_for_personal_work")),o.createElement("li",null,(0,S.tx)("file_browser.drafts_to_move.access_to_drafts"))),o.createElement("div",{className:"drafts_to_move_page_view--viewbarActions--v-cwt"},o.createElement(I.vd,{className:"drafts_to_move_page_view--moveAllDraftsButton--9-TlX",onClick:()=>{A(!0),e(R.to({type:bq.K,data:{reposToMove:el.map(e=>e.repo),draftsToMove:Z.map(e=>e.file),onMoveSuccess:e_,isMoveAll:!0,moveAllDraftsAsync:Z.length>Y,onClose:eu,setSynchronousFileTransferInProgress:M}}))}},(0,S.tx)("file_browser.drafts_to_move.move_all_drafts_button")),o.createElement(I.NY,{className:"drafts_to_move_page_view--learnMoreButton--lUnQ9 drafts_to_move_page_view--moveAllDraftsButton--9-TlX",href:"https://www.figma.com/blog/updates-to-how-drafts-work/",target:"_blank"},(0,S.tx)("file_browser.drafts_to_move.viewbar_learn_more_link")))))),o.createElement("div",{className:"drafts_to_move_page_view--tabViewBarContainer--lsoH0"},o.createElement(b9,{selectedTab:N,setSelectedTab:C})))}),t3.e0.FILE_BROWSER,{view:"draftsToMove",selectedTab:N})}var wt=a(308548),wa=a(363137),wr=a(305821),wn=a(302586),wl=a(954244),wi=a(115630);function wo(e){let t=(0,hC.$)(z._Y.DESIGN,e.from,"toolbar_design_created"),a=(0,M.Yz)()(!!e.isTeamLocked),r=!!e.disabled||a,n=r?f.lQ:t,l=r?(0,S.t)("locked_team.label.tooltip"):void 0,i=r?eB.Ib.TEXT:void 0;return{disabled:r,onClick:n,dataTooltip:l,dataTooltipType:i,displayText:(0,S.t)("file_browser.tool_bar.new_design_file"),dataTestId:"new-design-file-button",editorThemeMode:"design",key:sT.D.NEW_FILE,listOptionType:hx.R.DESIGN}}function ws(e){let t=wo(e),a=t.disabled?hN.NY:hN.k3,r=t.disabled?hN.ts:hN.sI;return o.createElement(sm.K,{action:{kind:sm.A.ICON_TEXT_BUTTON,key:t.key,displayText:t.displayText,onClick:t.onClick,icon:sy.A,styleClass:a,svgStyleClass:r,dataTestId:t.dataTestId,editorThemeMode:t.editorThemeMode,"data-tooltip":t.dataTooltip,"data-tooltip-type":t.dataTooltipType}})}function wc(e){let t=(0,hC.$)(z._Y.WHITEBOARD,e.from,"toolbar_figjam_created"),a=(0,M.Yz)()(!!e.isTeamLocked),r=!!e.disabled||a,n=r?f.lQ:t,l=r?(0,S.t)("locked_team.label.tooltip"):void 0,i=r?eB.Ib.TEXT:void 0;return{disabled:r,onClick:n,dataTooltip:l,dataTooltipType:i,displayText:(0,S.t)("file_browser.tool_bar.new_figjam_board"),dataTestId:"new-whiteboard-file-button",editorThemeMode:"whiteboard",key:sT.D.NEW_WHITEBOARD_FILE,listOptionType:hx.R.WHITEBOARD}}function wd(e){let t=wc(e),a=t.disabled?hN.NY:hN.k3,r=t.disabled?hN.ts:hN.sI;return o.createElement(sm.K,{action:{kind:sm.A.ICON_TEXT_BUTTON,key:t.key,displayText:t.displayText,onClick:t.onClick,icon:sy.A,styleClass:a,svgStyleClass:r,dataTestId:t.dataTestId,editorThemeMode:t.editorThemeMode,"data-tooltip":t.dataTooltip,"data-tooltip-type":t.dataTooltipType}})}var wm=a(741477),wu=a(694778);let w_="resource_creation_action--icon--I0s0W",wp="resource_creation_action--iconDisabled--80iVj",wf="resource_creation_action--betaTag--o8v94",wg="resource_creation_action--fadeInOnMount--A5XBA",wE={[hx.R.DESIGN]:"resource_creation_action--designHoverOption--50QUQ",[hx.R.WHITEBOARD]:"resource_creation_action--figJamHoverOption--ipE-z",[hx.R.SLIDES]:"resource_creation_action--piperHoverOption--x6D--",[hx.R.SITES]:"resource_creation_action--seascapeHoverOption--AZM8v",[hx.R.IMPORT]:"resource_creation_action--importHoverOption--sVdl8"};function wv(e,t){let a=void 0!==t?t:e.onClick;return{displayText:e.displayText,activeClassName:"resource_creation_action--active--a-b-K",className:ey()(wE[e.listOptionType],"resource_creation_action--menuOptionItem--XHeQF",e.disabled&&"resource_creation_action--disabled--Kajn-"),disabled:e.disabled,preventDismissOnSelected:!1,callback:(t,r,n,l)=>{e.disabled||a(l)},render:()=>o.createElement(wh,{disabled:e.disabled,text:e.displayText,onClick:a,listOptionType:e.listOptionType,dataTestId:e.dataTestId,key:e.key,dataOnboardingKey:e.dataOnboardingKey})}}function wh(e){let t={[hx.R.DESIGN]:o.createElement(wt.k,{className:e.disabled?wp:w_}),[hx.R.WHITEBOARD]:o.createElement(wa.D,{className:e.disabled?wp:w_}),[hx.R.SLIDES]:o.createElement(wr.l,{className:e.disabled?wp:w_}),[hx.R.SITES]:o.createElement(wn.Y,{className:e.disabled?wp:w_}),[hx.R.IMPORT]:o.createElement(wl.R,{className:e.disabled?wp:w_})};return o.createElement("div",{role:"link",tabIndex:0,"data-testid":e.dataTestId,"data-tooltip":e.dataTooltip,"data-tooltip-type":eB.Ib.TEXT,"data-tooltip-timeout-delay":300,"data-onboarding-key":e.dataOnboardingKey},o.createElement("div",{className:ey()({[ef.cx.flex.gap8.flexRow.pl6.pt6.pb6.pr8.overflowHidden.$]:!0})},o.createElement("div",{className:ef.cx.flex.w24.h24.flexRow.itemsCenter.alignCenter.justifyCenter.flexShrink0.$},t[e.listOptionType]),o.createElement("div",{className:ey()({[ef.cx.flex.h24.flexRow.overflowHidden.flexGrow1.itemsCenter.$]:!0,[ef.cx.colorTextMenu.$]:!e.disabled,[ef.cx.colorTextMenuDisabled.$]:!!e.disabled})},e.text),e.listOptionType===hx.R.SLIDES&&(0,_.kc)().omnicreate_slides_beta_tag&&o.createElement(eb.Ex,{className:wf,text:(0,S.t)("file_browser.creation_buttons.beta"),color:eb.zE.LIGHT_TRANSLUCENT}),e.listOptionType===hx.R.SITES&&(0,_.kc)().sites_alpha&&o.createElement(eb.Ex,{className:wf,text:(0,S.t)("file_browser.creation_buttons.alpha"),color:eb.zE.LIGHT_TRANSLUCENT})))}function wy(){let e=(0,r0.vt)();return(0,M.Yz)()(e)}function wb({createOptionsList:e,dropdownType:t,isHidden:a}){let r=(0,s.wA)(),n=(0,s.d4)((0,wm.E)(t)),l=wy(),i=()=>{n||r(A.j7({type:t}))},c=o.useRef(null),[d,m]=o.useState(void 0),u=o.useCallback(e=>{c.current=e,m(null==e?void 0:e.getBoundingClientRect())},[m]);return o.useEffect(()=>{let e=()=>{var e;return m(null==(e=c.current)?void 0:e.getBoundingClientRect())};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[m]),o.createElement(o.Fragment,null,o.createElement("div",{tabIndex:0,role:"menu","data-tooltip":l?(0,S.t)("locked_team.label.tooltip"):(0,S.t)("file_browser.tool_bar.create_new"),"data-tooltip-type":eB.Ib.TEXT,onKeyDown:e=>{"Enter"===e.key&&i()}},o.createElement(sw,{variant:l?"secondary":"primary",onMouseDown:i,text:(0,S.t)("file_browser.tool_bar.create_new"),hasDropdown:!0,dataTestId:"omnicreate-creation-button",ref:u,disabled:l})),d&&n&&!a&&o.createElement(O.fu,{name:"Resource Creation Dropdown",properties:{fileCreationDefaultsDropdownType:t}},o.createElement(nq.j,{dataTestId:"resource-creation-dropdown",lean:"center",showPoint:!1,rootAndSubmenuMaxWidth:180,minWidth:180,autoHeight:!0,hidePointWhenContentOffScreen:!0,recordingKey:"resource-creation-dropdown",onSelectItem:(e,t)=>{e.callback&&e.callback(void 0,void 0,void 0,t)},items:e,parentRect:d,dispatch:r})))}function ww({dropdownType:e,disabled:t,from:a,folderId:r,isHidden:n}){let{canCreateDesignFile:l,canCreateFigjamFile:i,canCreateSlidesFile:s,canShowCreateSitesFile:c}=(0,wu.n)(r),d=wo({from:a,disabled:t||!l}),m=wc({from:a,disabled:t||!i}),u=[wv(d),wv(m)];(0,hI.lt)({from:a,disabled:t});let p=hA({from:a,disabled:t||!s});(0,_.kc)().piper&&u.push(wv(p));let f=(0,ym.oz)({disabled:t});return u.push({displayText:"",disabled:!0,separator:!0},wv(f)),o.createElement(wb,{dropdownType:e,createOptionsList:u,isHidden:n})}let wT=(0,iJ.eU)(!1);function wI(e){let t=(0,aJ.md)(wT),a=wy(),r=!!(0,_.kc)().show_interim_templates_shelf,n=(0,aJ.md)(Ta),l=(0,_.kc)().omnicreate_button&&!g.Ay.mobile&&!a&&(!r||!n),i=t||n,[s,c]=o.useState(!1);o.useEffect(()=>{i&&c(!0)});let[d,m]=o.useState(!i),u=!i&&d;return l&&!s?e.leftContent??null:o.createElement(o.Fragment,null,u&&o.createElement("div",{className:wg},e.leftContent),o.createElement("div",{className:ey()("resource_creation_action--fadeContainer--A86Kj",l?i?wg:"resource_creation_action--fadeOut--KJEi2":"",u&&"resource_creation_action--hidden--HrBSv"),onAnimationStart:()=>{m(!1)},onAnimationEnd:()=>{i||m(!0)}},e.leftContent,o.createElement(ww,{dropdownType:e.dropdownType,disabled:e.disabled,from:e.from,folderId:e.folderId,isHidden:!i})))}var wx=a(544949),wN=a(182876);let wC="file_creation_thumbnails_shelf--betaTag--PUVzI";function wS(){let e=o.useRef(null),[t,a]=o.useState(!1),r=o.useCallback(e=>{e.intersectionRatio<.5?a(!0):a(!1)},[a]);(0,wN.g)(e,r,{threshold:.5,rootMargin:"-50px"});let n=(0,s.d4)(e=>{var t;return null==(t=e.user)?void 0:t.drafts_folder_id}),{isLoading:l,canCreateDesignFile:i,canCreateFigjamFile:c,canCreateSlidesFile:d,canShowCreateSitesFile:m}=(0,wu.n)(n),u=[o.createElement(wL,{key:"design",isDisabled:!i,isLoading:l}),o.createElement(wR,{key:"whiteboard",isDisabled:!c,isLoading:l}),!1,(0,_.kc)().piper&&o.createElement(wD,{key:"slides",isDisabled:!d,isLoading:l}),o.createElement(wF,{key:"import",isLoading:l})].filter(Boolean),p=u.length,[f,g]=o.useState(window.innerWidth);o.useEffect(()=>{let e=()=>g(window.innerWidth);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[g]);let{breakpointClassName:E,minWidth:v}=function(e,t){if("ja"===t){if(3===e)return{minWidth:980,breakpointClassName:"file_creation_thumbnails_shelf--jaThreeButtonShelf--Ud7nt"};if(4===e)return{minWidth:1200,breakpointClassName:"file_creation_thumbnails_shelf--jaFourButtonShelf--79zBr"};if(5===e)return{minWidth:1410,breakpointClassName:"file_creation_thumbnails_shelf--jaFiveButtonShelf--wqwQT"}}if(3===e)return{minWidth:810,breakpointClassName:"file_creation_thumbnails_shelf--enThreeButtonShelf--y7NDF"};if(4===e)return{minWidth:970,breakpointClassName:"file_creation_thumbnails_shelf--enFourButtonShelf--ctLk0"};if(5===e)return{minWidth:1140,breakpointClassName:"file_creation_thumbnails_shelf--enFiveButtonShelf--qkEvu"};throw Error("Invalid number of file creation buttons")}(p,o.useMemo(()=>(0,_.mm)()[0],[])),h=f<v,y=(0,fV.Xr)(wT),b=t||h;return(o.useEffect(()=>{y(b)},[b,y]),h)?null:o.createElement("div",{className:ey()("file_creation_thumbnails_shelf--fileCreationThumbnailsShelf--KMJ6U",E),ref:e},u)}function wk(e){let t=e.isDisabled||e.isLoading,a=e.onClick,r=o.useRef(null),n=o.useCallback(e=>{var t;a(e),null==(t=r.current)||t.blur()},[a]);return o.createElement("button",{className:ey()(e.containerClassName??"file_creation_thumbnails_shelf--fileCreationThumbnail--atC3k",t&&"file_creation_thumbnails_shelf--disabled--6IyUM"),ref:r,"data-testid":e.isLoading?void 0:e.dataTestId,tabIndex:0,disabled:t,onClick:t?void 0:n,"data-onboarding-key":e.dataOnboardingKey},!e.isLoading&&o.createElement(o.Fragment,null,o.createElement("div",{className:e.iconContainerClassName??"file_creation_thumbnails_shelf--iconContainer--e9sFx"},e.icon),o.createElement("div",{className:"file_creation_thumbnails_shelf--productNameContainer--F3ppZ"},o.createElement("span",{className:"file_creation_thumbnails_shelf--productName--13XZL"},e.title),o.createElement("span",{className:"file_creation_thumbnails_shelf--productSubtitle--Oxgs2"},e.isDisabled?(0,S.t)("file_browser.creation_buttons.disabled_by_organization"):e.subtitle)),e.showBetaTag&&o.createElement(eb.Ex,{className:wC,text:(0,S.t)("file_browser.creation_buttons.beta"),color:eb.zE.DEFAULT_TRANSLUCENT}),e.showAlphaTag&&o.createElement(eb.Ex,{className:wC,text:(0,S.t)("file_browser.creation_buttons.alpha"),color:eb.zE.DEFAULT_TRANSLUCENT})))}function wA(e){return o.createElement(wi.v,{mode:e.brand},o.createElement(wk,{title:e.title,subtitle:e.subtitle,icon:e.icon,isDisabled:e.isDisabled,isLoading:e.isLoading,showBetaTag:e.showBetaTag,showAlphaTag:e.showAlphaTag,dataTestId:e.dataTestId,onClick:e.onClick}))}function wL({isDisabled:e,isLoading:t}){let a=(0,hC.$)(z._Y.DESIGN,hw.f6.FILE_BROWSER_THUMBNAILS_RECENTS,"recents_file_creation_thumbnails_created");return o.createElement(wA,{title:(0,S.t)("file_browser.creation_buttons.new_design_file"),subtitle:(0,S.t)("file_browser.creation_buttons.design_and_prototype"),brand:"design",dataTestId:"new-design-file-button",icon:o.createElement(wt.k,null),isDisabled:e,isLoading:t,onClick:a})}function wR({isDisabled:e,isLoading:t}){let a=(0,hC.$)(z._Y.WHITEBOARD,hw.f6.FILE_BROWSER_THUMBNAILS_RECENTS,"recents_file_creation_thumbnails_created");return o.createElement(wA,{title:(0,S.t)("file_browser.creation_buttons.new_fig_jam_board"),subtitle:(0,S.t)("file_browser.creation_buttons.whiteboard_and_jam"),brand:"whiteboard",dataTestId:"new-whiteboard-file-button",icon:o.createElement(wa.D,null),isDisabled:e,isLoading:t,onClick:a})}function wD({isDisabled:e,isLoading:t}){let a=(0,hC.$)(z._Y.SLIDES,hw.f6.FILE_BROWSER_THUMBNAILS_RECENTS,"recents_file_creation_thumbnails_created");return o.createElement(wA,{title:(0,S.t)("file_browser.creation_buttons.new_slide_deck"),subtitle:(0,S.t)("file_browser.creation_buttons.present_and_share"),brand:"piper",dataTestId:"new-slides-file-button",icon:o.createElement(wr.l,null),isDisabled:e,isLoading:t,showBetaTag:(0,_.kc)().omnicreate_slides_beta_tag,onClick:a})}function wF({isLoading:e}){let t=(0,s.wA)();return o.createElement(wk,{title:(0,S.t)("file_browser.creation_buttons.import"),subtitle:(0,S.t)("file_browser.creation_buttons.bring_in_files"),dataTestId:"file-import-button",icon:o.createElement(wl.R,null),isLoading:e,onClick:()=>{t((0,wx.L)({showImportModal:(0,_.kc)().figjam_3p_file_importer}))},containerClassName:"file_creation_thumbnails_shelf--importThumbnail--xooVC file_creation_thumbnails_shelf--fileCreationThumbnail--atC3k",iconContainerClassName:"file_creation_thumbnails_shelf--importIconContainer--FjJ9d file_creation_thumbnails_shelf--iconContainer--e9sFx",dataOnboardingKey:ym._s})}var wP=a(522739),wM=a(701707),wO=a(384162),wB=a(178323),wU=a(887811),wV=a(102310),wH=a(106112),wW=a(218934),wj=a(27928),w$=a(583765),wG=a(67048),wz=a(435898),wY=a(315944),wK=a(40092);let wQ="templates_bar--headerTitle--6BSKy text--fontPos13--xW8hS text--_fontBase--QdLsd",wq="templates_bar--seeMoreIcon--u6ar5",wX="templates_bar--seeMoreTitle--a9L3F text--fontPos13--xW8hS text--_fontBase--QdLsd",wJ="templates_bar--tileBottomRowNameOnly--SMVhN text--fontPos13--xW8hS text--_fontBase--QdLsd";var wZ=a(613557),w0=a(98015);function w1(e){let t=(0,s.wA)(),a=(0,$.iZ)(),r=(0,wU.vD)(a),n=(0,wU.Qk)(!1,r),l=(0,gE.oh)(n),i=(0,gE.mC)(n),c=!!(0,_.kc)().figjam_hybrid_shelf,d=!!(0,_.kc)().show_interim_templates_shelf,m=wU.NV.has(r)?r:cY.iF.ALL;o.useEffect(()=>{if(!l&&!i)return null!==m?t(wO.Dw({shelfType:cY.cS.FILE_BROWSER_TEMPLATES_BAR,filterLabel:m})):t(wO.sz({shelfType:cY.cS.FILE_BROWSER_TEMPLATES_BAR}))},[l,i,t,r,m]);let u=(0,s.d4)(e=>e.communityHub.shelves[cY.cS.FILE_BROWSER_TEMPLATES_BAR]||[]),p=o.useMemo(()=>{let e=new Map;return u.forEach(t=>{e.set(t.id,t.shelf_content.map(e=>e))}),e},[u]),f=o.useCallback(e=>{if(!c||"All"!==e)return null;if(d&&m)return(0,S.t)("file_browser.templates_shelf.for_you");switch(m){case"ENG":return(0,S.t)("file_browser.hybrid_templates_shelf.for_eng");case"MKT":return(0,S.t)("file_browser.hybrid_templates_shelf.for_mkt");case"UR":return(0,S.t)("file_browser.hybrid_templates_shelf.for_ur");case"PM":return(0,S.t)("file_browser.hybrid_templates_shelf.for_pm");case"DES":return(0,S.t)("file_browser.hybrid_templates_shelf.for_des");default:return null}},[c,m,d]),g=o.useMemo(()=>{let e=[];return u.forEach(t=>{t.shelf_content.length>0&&e.push({tabKey:t.id,tabTitle:t.title,modifiedTabTitle:f(t.title)})}),e},[u,f]);return e.isShowing&&0!==g.length?o.createElement(O.fu,{name:"topbar_templates_shown"},o.createElement("div",{className:"templates_bar--container--0nCIh"},o.createElement(w2,{tabNameToTemplatesMap:p,folderId:e.folderId,onClose:e.onClose,tabList:g,newFileFrom:e.newFileFrom,normJobPrefix:r,team:e.team}))):null}function w2(e){let[t,a]=o.useState(e.tabList[0]),[r,n]=o.useState(e.tabNameToTemplatesMap.get(t.tabKey)??[]),[l,i]=o.useState(null),{sizeRef:s,numTemplates:c,templateWidth:d,templateHeight:m}=function(e){let t=!!(0,_.kc)().show_interim_templates_shelf,a=(0,o.useRef)(null),[r,n]=(0,o.useState)(0),l=Math.min(r-2*(t?2:24),t?2229:2002),i=t?0:1;(0,o.useLayoutEffect)(()=>{var e;n((null==(e=null==a?void 0:a.current)?void 0:e.offsetWidth)??0)},[n,a]),(0,_A.w)(a,e=>{n(e.width)});let s=t?16:12,c=(0,o.useMemo)(()=>l?Math.min(Math.floor((l+s)/(171+s))-i,e):0,[l,s,i,e]),d=c&&l?Math.floor((l-s*(c+(t?1:0)))/(c+i)):0,m=d?Math.floor(d*(t?136:124)/171):0;return{sizeRef:a,numTemplates:c,templateWidth:d,templateHeight:m}}((null==r?void 0:r.length)??0),u=!!(0,_.kc)().show_interim_templates_shelf,p=!u&&!!(0,_.kc)().figjam_hybrid_shelf;o.useEffect(()=>{if(!e.tabList||0===e.tabList.length)return;let t=e.tabList[0];a(t),n(e.tabNameToTemplatesMap.get(t.tabKey)??[])},[e.tabList,e.tabNameToTemplatesMap]),o.useEffect(()=>{n(e.tabNameToTemplatesMap.get(t.tabKey)??[])},[t,e.tabNameToTemplatesMap]);let f=o.createElement(w9,{tabs:e.tabList,activeTab:t,setActiveTab:a,hasHybridShelf:p});return o.createElement(o.Fragment,null,o.createElement("div",{className:ey()("templates_bar--headerContainer--3-3sN",{"templates_bar--headerContainerInterim--T-5sO":u,"templates_bar--headerContainerRegular--9hrY3":!p&&!u,"templates_bar--headerContainerHybrid--COZhA":p})},!p&&o.createElement("div",{className:"templates_bar--headerLeft--p4T6m"},!u&&o.createElement(w8,null),o.createElement(w3,{normJobPrefix:e.normJobPrefix})),o.createElement("div",{className:ey()({"templates_bar--headerTabs--AAQDi":p,"templates_bar--headerCenter--vLNAU":!p&&!u,"templates_bar--headerEnd--rI6SI":u})},p&&o.createElement("div",{className:ef.cx.mr8.mt1.$},o.createElement(wK.K7,null)),f),o.createElement("div",{className:ey()({"templates_bar--headerRight--OruBN":p,"templates_bar--headerRightOld--j-Via":!p&&!u,"templates_bar--headerRightOldInterim--AfhZM":u})},o.createElement(e_.Jn,{className:"templates_bar--closeButton--XeG8e templates_bar--headerIcon--qAnUr",onClick:e.onClose}))),p&&o.createElement(w7,{folderId:e.folderId,team:e.team,newFileFrom:e.newFileFrom}),o.createElement("div",{className:ey()({"templates_bar--body--PKvm-":!u,"templates_bar--bodyInterim--WbP1K":u}),ref:s},o.createElement("div",{className:ey()({"templates_bar--tilesContainer--OHkyf":!u,"templates_bar--tilesContainerInterim--mTj4h":u})},null==r?void 0:r.slice(0,c??0).map((a,r)=>o.createElement("div",{key:a.id,style:{width:d,height:m,marginRight:u?16:12}},o.createElement(w5,{hubFile:a,rank:r,folderId:e.folderId,tab:t,duplicatingHubId:l,setDuplicatingHubId:i,newFileFrom:e.newFileFrom})))),!u&&o.createElement(w4,{activeTab:t,width:d,height:m})))}function w4(e){var t;let a=(0,s.wA)(),r=(t=e.activeTab.tabTitle,o.useMemo(()=>{switch(t){case"Brainstorm":let e="https://static.figma.com/uploads/1b49485e3b8b3a7e8a6f8099d37025abf445eaa9";return{color:"#FFBDF2",bgColor:"#FFF5FD",src:e,srcSet:`https://static.figma.com/uploads/17a263251c06e92c17ebcf534106f46de670f126, ${e} 2x`};case"All":let a="https://static.figma.com/uploads/f48b345384c95e6becd8f0afd653da77516f3754";return{color:"#80CAFF",bgColor:"#D5EAFA",src:a,srcSet:`https://static.figma.com/uploads/4fb27f103e1c26fd5018968f50d4de3ffc525981, ${a} 2x`};case"Diagram":let r="https://static.figma.com/uploads/fb96122b14ed3ae9c4f99858e53f198e4519881d";return{color:"#FFD966",bgColor:"#FFECB4",src:r,srcSet:`https://static.figma.com/uploads/b7d203490b07b0cc0996a32539727dd689542562, ${r} 2x`};case"Meetings":let n="https://static.figma.com/uploads/5bd4f8be4b68b3406a4efc955452d597843fe395";return{color:"#FF8311",bgColor:"#F9CA9F",src:n,srcSet:`https://static.figma.com/uploads/7919f8b041bc650fc00a468edb5639ca277fce09, ${n} 2x`};case"Planning":let l="https://static.figma.com/uploads/a5b7b70525c9fd5b075019212a36a4c85f296f0c";return{color:"#DA9DFF",bgColor:"#EBCAFF",src:l,srcSet:`https://static.figma.com/uploads/5df93072bc6c4eff89a96011b823515116dd80f2, ${l} 2x`};default:return null}},[t]));return r?o.createElement("div",{className:"templates_bar--seeMoreContainer--3XOPB"},o.createElement("button",{className:"templates_bar--seeMore--wyQRY",style:{backgroundColor:r.bgColor,width:e.width,height:e.height},onClick:()=>{(0,eP.Cu)({triggeredFrom:"file-browser",category:e.activeTab.tabTitle},"template_shelf_see_more_clicked"),(0,wj.KF)(a,{templateInsertionLocation:m5.RD.NEW_FILE,triggeredFrom:"templatesShelfSeeMore",initiallySelectedCategoryTitle:e.activeTab.tabTitle})}},o.createElement("div",{className:ey()({"templates_bar--seeMoreImageWrapper--DtT2m":!0,"templates_bar--seeMoreImageDiagrammingWrapper--k-JG5":"Diagram"===e.activeTab.tabTitle})},o.createElement("img",{className:"templates_bar--seeMoreImage--xJ2jX",srcSet:r.srcSet,src:r.src,alt:`See all ${e.activeTab.tabTitle} templates`})),o.createElement("div",{className:"templates_bar--seeMoreSwoopWrapper--smJZh",style:{width:e.width,height:e.height}},o.createElement("svg",{className:"templates_bar--seeMoreSwoop--eQyRg",viewBox:"0 0 171 83",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("g",null,o.createElement("path",{d:"M171 31.852C156.81 34.3516 142.025 35.6728 126.834 35.6728C78.3913 35.6728 34.0786 22.236 0 0V83H171V31.852Z",fill:r.color})))),o.createElement("div",{"data-preferred-theme":"light",className:"templates_bar--seeMoreContent--Lh02f",style:ea.sx.add({height:"All"===e.activeTab.tabTitle?"30%":"45%"}).$},"All"===e.activeTab.tabTitle?o.createElement("div",{className:wX},(0,S.tx)("file_browser.templates_shelf.see_all"),o.createElement(es.B,{className:wq,svg:wZ.A})):o.createElement(o.Fragment,null,o.createElement("div",{className:wX},e.activeTab.modifiedTabTitle??e.activeTab.tabTitle),o.createElement("div",{className:"templates_bar--seeMorePrompt--LIZSe text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,S.tx)("file_browser.templates_shelf.see_more"),o.createElement(es.B,{className:wq,svg:wZ.A})))))):null}function w8(){return o.createElement("svg",{className:"templates_bar--headerIconLeft--RIFKx",width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M0.997498 3.32344C0.997498 2.22161 1.89071 1.3284 2.99254 1.3284H12.9678C14.0696 1.3284 14.9628 2.22161 14.9628 3.32344V13.2987C14.9628 14.4005 14.0696 15.2937 12.9678 15.2937H2.99254C1.89071 15.2937 0.997498 14.4005 0.997498 13.2987V3.32344Z",fill:"#9747FF"}),o.createElement("mask",{id:"path-2-inside-1_1042_9371",fill:"white"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.99255 4.32095H12.9678V12.3011H2.99255V4.32095ZM3.99007 5.31847H11.9702V7.31355H3.99007V5.31847ZM11.9702 8.31107H6.98264V11.3036H11.9702V8.31107ZM5.98512 11.3036H3.99007V8.31107H5.98512V11.3036Z"})),o.createElement("path",{d:"M3.99007 5.31847V4.32095H2.99255V5.31847H3.99007ZM11.9702 5.31847H12.9678V4.32095H11.9702V5.31847ZM11.9702 7.31355V8.31107H12.9678V7.31355H11.9702ZM3.99007 7.31355H2.99255V8.31107H3.99007V7.31355ZM2.99255 4.32095V3.32343H1.99503V4.32095H2.99255ZM12.9678 4.32095H13.9653V3.32343H12.9678V4.32095ZM12.9678 12.3011V13.2986H13.9653V12.3011H12.9678ZM2.99255 12.3011H1.99503V13.2986H2.99255V12.3011ZM11.9702 8.31107H12.9678V7.31355H11.9702V8.31107ZM6.98264 8.31107V7.31355H5.98512V8.31107H6.98264ZM6.98264 11.3036H5.98512V12.3011H6.98264V11.3036ZM11.9702 11.3036V12.3011H12.9678V11.3036H11.9702ZM5.98512 11.3036V12.3011H6.98264V11.3036H5.98512ZM3.99007 11.3036H2.99255V12.3011H3.99007V11.3036ZM3.99007 8.31107V7.31355H2.99255V8.31107H3.99007ZM5.98512 8.31107H6.98264V7.31355H5.98512V8.31107ZM3.99007 6.316H11.9702V4.32095H3.99007V6.316ZM10.9727 5.31847V7.31355H12.9678V5.31847H10.9727ZM4.9876 7.31355V5.31847H2.99255V7.31355H4.9876ZM11.9702 7.31355H6.98264V9.30859H11.9702V7.31355ZM5.98512 8.31107V11.3036H7.98016V8.31107H5.98512ZM6.98264 12.3011H11.9702V10.3061H6.98264V12.3011ZM12.9678 11.3036V8.31107H10.9727V11.3036H12.9678ZM5.98512 10.3061H3.99007V12.3011H5.98512V10.3061ZM4.9876 11.3036V8.31107H2.99255V11.3036H4.9876ZM3.99007 9.30859H5.98512V7.31355H3.99007V9.30859ZM4.9876 8.31107V11.3036H6.98264V8.31107H4.9876ZM11.9702 6.31603H3.99007V8.31107H11.9702V6.31603ZM3.99007 12.3011V4.32095H1.99503V12.3011H3.99007ZM2.99255 5.31847H12.9678V3.32343H2.99255V5.31847ZM11.9702 4.32095V12.3011H13.9653V4.32095H11.9702ZM12.9678 11.3036H2.99255V13.2986H12.9678V11.3036Z",fill:"white",mask:"url(#path-2-inside-1_1042_9371)"}))}function w3(e){let t=!!(0,_.kc)().show_interim_templates_shelf,[a,r]=(0,wU.sh)(e.normJobPrefix);return t?o.createElement("div",{className:wQ},(0,S.tx)("file_browser.templates_shelf.interim_title")):o.createElement("div",{className:wQ},a??(0,S.tx)("file_browser.templates_shelf.title"))}function w5(e){let t=(0,s.wA)(),a=e.hubFile,r=a.id,n=null!==e.duplicatingHubId,l=e.duplicatingHubId===r,i=a&&(0,m5.a6)(e.hubFile),c=!!(0,_.kc)().show_interim_templates_shelf,d=n=>{n.stopPropagation(),e.setDuplicatingHubId(r),t(gR.rL({hubFileId:r,hubFileName:(null==i?void 0:i.name)||"this file",openInNewTab:!1,folderId:e.folderId,source:hw.f6.FILE_BROWSER_TEMPLATES_BAR,callback:t=>{e.setDuplicatingHubId(null),(0,eP.Cu)({fileKey:t,rank:e.rank,templateId:r,productType:a.viewer_mode===z.y4.WHITEBOARD?"figjam":"design"},"topbar_template_selected"),(0,wB._)("resource_inserted",{fileKey:t,resourceId:r,resourceName:i.name,resourceType:"template",templateType:wH.n.HubFile,triggeredFrom:e.newFileFrom,category:e.tab.tabTitle,templateCategory:e.tab.tabKey})}}))};return a?o.createElement(wW.zq,{containerStyle:"templates_bar--templatesTileContainer--yy7Q2",onClick:n?void 0:d,image:o.createElement(wW.FK,{backgroundColor:(0,un.Cn)(a.client_meta),removeBorder:!0,className:ey()({"templates_bar--templatesTileImage--y0sA9":!c,"templates_bar--templatesTileImageInterim--GA5Gc templates_bar--templatesTileImage--y0sA9":c}),customRatioClassName:"templates_bar--imageRatio--enx9l"},o.createElement(wW.zx.Cover,null,o.createElement("button",{className:"templates_bar--hoverOverlay--bQBil browse_templates_modal--hoverOverlay--sFj3y",onClick:d,disabled:n})),o.createElement(wW.zx.Center,null,o.createElement(eu.$$,{onClick:d,className:"templates_bar--useTemplateButton--4KFhz",disabled:n,tabIndex:-1},l?o.createElement(tc.kt,{size:"medium"}):(0,S.tx)("file_browser.new_file_creation_topbar.use_templates"))),o.createElement(ul.Ho,{image:e.overrideThumbnailUrl||a.thumbnail_url||void 0,isSet:!!e.overrideThumbnailUrl||!!a.thumbnail_is_set,isWhiteboard:a.viewer_mode===z.y4.WHITEBOARD,hubFileId:a.id,alt:(0,m5.a6)(a).name,imageClassName:"templates_bar--thumbnailImage--ymHpx",resizedThumbnailUrls:a.resized_thumbnail_urls})),bottomRow:c?o.createElement(wW.Wf.NameAndFileIconMetadata,{name:i.name,className:"templates_bar--tilesBottomRowContainerInterim--2UYbZ",textClassName:wJ,viewerMode:a.viewer_mode}):o.createElement(wW.Wf.NameMetadata,{name:i.name,className:"templates_bar--tilesBottomRowContainer--GxsNx",textClassName:wJ}),bottomRowStyle:c?"templates_bar--bottomRowStyleInterim--qBzJE":"templates_bar--bottomRowStyle--a32JN"}):null}function w9(e){let t=(0,s.wA)(),a=!!(0,_.kc)().show_interim_templates_shelf,r=!e.hasHybridShelf&&!a;return o.createElement("div",{className:"templates_bar--tabs--a8HOf text--fontPos13--xW8hS text--_fontBase--QdLsd",style:ea.sx.add({columnGap:e.hasHybridShelf?"20px":"26px"}).$},r&&o.createElement(wP.GG,{"data-tooltip-type":eB.Ib.TEXT,"data-tooltip":(0,S.t)("file_browser.templates_shelf.search_tooltip"),"aria-label":(0,S.t)("file_browser.templates_shelf.search_tooltip"),className:"templates_bar--searchButton--1EdKI templates_bar--headerIcon--qAnUr",onClick:()=>{(0,eP.Cu)({triggeredFrom:"file-browser",category:e.activeTab.tabTitle},"template_shelf_search_clicked"),(0,wj.KF)(t,{templateInsertionLocation:m5.RD.NEW_FILE,triggeredFrom:"templatesShelfSearch"})}},o.createElement(re.In,{icon:"search-32"})),e.tabs.map(t=>o.createElement(w6,{key:t.tabKey,tab:t,isActive:t.tabKey===e.activeTab.tabKey,setActiveTab:e.setActiveTab})))}function w6(e){let t=!!(0,_.kc)().show_interim_templates_shelf;return o.createElement(wP.GG,{className:ey()({"templates_bar--tab---drzF":!t,"templates_bar--tabInterim--b4Do5":t,"templates_bar--activeTab--c7Hid":e.isActive}),onClick:()=>{(0,eP.Cu)({triggeredFrom:"file-browser",category:e.tab.tabTitle},"template_shelf_category_toggled"),e.setActiveTab(e.tab)}},e.tab.modifiedTabTitle??e.tab.tabTitle)}function w7(e){let[t,a]=(0,o.useState)(""),r=(0,aJ.md)(w$.dO).status===wY.c.LOADING,{onMake:n}=function(e,t,a){let r=(0,s.wA)(),n=(0,wV.B)(a);return{onMake:(a,l,i)=>{r(yL.zE({state:n,editorType:z._Y.WHITEBOARD,team:t,from:e,openNewFileIn:(0,a1.oJ)(l)?hw.ai.NEW_TAB:hw.ai.SAME_TAB,figjamAiNewFileData:{prompt:i?`${i.title} ${i.subtitle}`:a,useCaseCategory:null==i?void 0:i.useCaseCategory,subtitle:null==i?void 0:i.subtitle,entrypoint:wz.fV.TEMPLATE_SHELF}}))}}}(e.newFileFrom,e.team,e.folderId);return o.createElement("div",{className:ef.cx.ml24.mr24.flex.flexRow.justifyCenter.$,style:ea.sx.add({width:"calc(100% - 48px)"}).$},o.createElement("div",{className:ef.cx.flex.itemsCenter.colorBg.b1.colorBorder.wFull.$,style:ea.sx.add({maxWidth:"800px",borderRadius:"12px"}).$},o.createElement("div",{className:ef.cx.ml12.font14.colorTextSecondary.flex.itemsCenter.gap8.$},o.createElement(es.B,{svg:w0.A,style:ea.sx.add({fill:"currentColor"}).$}),o.createElement(wG.G,{location:"FILE_BROWSER_BAR"})),o.createElement("input",{className:ey()(ef.cx.flex1.px16.py12.h24.bgTransparent.font13.lh24.$,"templates_bar--input--v2677"),placeholder:(0,S.t)("whiteboard.ai_onboarding.file_browser.placeholder"),value:t,onChange:e=>a(e.target.value),disabled:r,autoComplete:"off",onKeyDown:e=>{t.length>0&&(0,a1.Fo)(e)&&"Enter"===e.key&&(e.preventDefault(),n(t))}}),o.createElement("div",{className:ey()(ef.cx.mr8.$,"templates_bar--figjamButton--8yaTU")},o.createElement(wM.$n,{variant:"primary",disabled:0===t.length||r,onClick:e=>n(t,e)},o.createElement("div",{className:ef.cx.flex.itemsCenter.gap8.$},(0,S.tx)("file_browser.hybrid_templates_shelf.generate_button"))))))}var Te=a(600081),Tt=a(392830);(0,nL.r1)("dismissed_figjam_ai_file_browser_bar");let Ta=(0,iJ.eU)(!1);function Tr(e){let t=e.team&&(0,Tt.D)(e.team.id,e.team.org_id),a=(0,j.gj)(e.folderId,z._Y.WHITEBOARD,!!t).unwrapOr(!1),r=(0,j.gj)(e.folderId,z._Y.DESIGN,!!t).unwrapOr(!1),n=(0,j.gj)(e.folderId,z._Y.SLIDES,!!t).unwrapOr(!1),l=(0,$.TA)(),i=e.team&&rw.ng.getProTrialStatus(e.team)===y7.a.IN_TRIAL,{recommendedTemplatesIsOpen:s,toggleRecommendedTemplates:c}=e,d=o.useCallback(()=>{c(),(0,eP.Cu)({userId:l,opening:!s},"topbar_recommended_templates_toggled")},[s,l,c]),m=(0,fV.Xr)(Ta),u=!!(0,_.kc)().figjam_hide_templates_shelf,p=!!(0,_.kc)().show_interim_templates_shelf,f=(!u||p)&&!i&&!e.disableRecommendedTemplates&&r,E=(p?e.showFileCreationShelf&&(!f||!s):e.showFileCreationShelf)?o.createElement(wS,null):void 0,v=p&&!g.Ay.mobile&&(a||r||n)&&f&&s;return(o.useEffect(()=>{m(v)},[m,v]),g.Ay.mobile)?null:a||r||n?o.createElement(o.Fragment,null,E,f&&o.createElement(w1,{isShowing:e.recommendedTemplatesIsOpen,onClose:d,folderId:e.folderId,newFileFrom:e.newFileFrom,team:e.team}),i&&o.createElement(Te.J,{teamId:e.team.id})):o.createElement(o.Fragment,null,E)}Tr.displayName="NewFileCreationTopbar";var Tn=a(433011);function Tl(e){let[t,a]=o.useState(!1),[r]=o.useState(()=>new Tn.W),{isSelected:n,selectPinnedFile:l,file:i,index:s,openFile:c}=e,d=o.useCallback(e=>{t?(n&&l(i.file,e),c(i.file,e,s)):(l(i.file,e),r.reset(),r.scheduleOnce(()=>{a(!1)},500),a(!0),e.preventDefault(),e.stopPropagation())},[r,s,n,c,i.file,l,t]);o.useEffect(()=>()=>r.reset(),[r]);let m=e.file.file,u=t?(0,lb.jN)({file:e.file.file}):void 0;return u&&(u=(0,cg.mc)(u,e.user),u=(0,cg.vk)(u,e.currentOrgId,e.currentTeamId,e.selectedView)),o.createElement("a",{className:ey()(yI.GC,{[yI.GV]:e.isSelected}),href:u,rel:"noopener",onClick:d,onContextMenu:t=>{e.onFileContextMenu(e.file.file,t,e.index)}},o.createElement("div",{className:yI.PP},o.createElement(lz.H5,{file:{key:m.key,editor_type:m.editorType,client_meta:(0,_.kc)().thumbnail_lg_client_meta?m.checkpointClientMeta||null:m.clientMeta,thumbnail_url:m.thumbnailUrl,thumbnail_url_override:m.thumbnailUrlOverride,thumbnail_guid:m.thumbnailGuid,has_file_link_password:m.hasFileLinkPassword,link_access:m.linkAccess,touched_at:null,updated_at:null},noBorder:!0})),o.createElement("div",{className:yI.q6},o.createElement("div",{className:yI.z6},o.createElement(ev.E,{fontSize:13,fontWeight:"medium",truncate:!0},m.name)),o.createElement("div",{className:yI.h7},e.file.pinnedByUser?o.createElement(ev.E,{fontSize:11,fontWeight:"regular",truncate:!0},(0,S.tx)("tile.file_tile.pinned_by_user",{name:e.file.pinnedByUser.name})):o.createElement(ev.E,{fontSize:11,fontWeight:"regular",truncate:!0},(0,S.tx)("tile.file_tile.pinned_just_now")))))}function Ti(e){let t=o.useRef(null),a=o.useRef(null),r=o.useRef(null),n=o.useRef(null),l=o.useRef(null),{selectedView:i,tileSelect:c,currentOrgId:u,currentTeamId:p,user:f}=(0,iX.R)(e=>({selectedView:e.selectedView,tileSelect:e.tileSelect,currentOrgId:e.currentUserOrgId,currentTeamId:e.currentTeamId,user:e.user})),E=(0,s.wA)(),{showing:v,show:h,hide:y,data:b}=(0,cl.L)(),w=o.useCallback((e,t,a)=>{t.stopPropagation(),t.preventDefault();let r={top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},n={type:lh.nb.PINNED_FILE,file:e},l=t.shiftKey&&t.altKey;if(c&&c[lS.F.PINNED_FILES]){if(c[lS.F.PINNED_FILES][n.file.key]){h({data:{tile:n,targetRect:r,index:a,enableRestore:l}});return}if(t.shiftKey||t.metaKey||t.ctrlKey){E(lg.y$({type:lS.F.PINNED_FILES,tiles:[n]})),h({data:{tile:n,targetRect:r,index:a,enableRestore:l}});return}}t.shiftKey||t.metaKey||t.ctrlKey||E(lg.an()),E(lg.y$({type:lS.F.PINNED_FILES,tiles:[n]})),h({data:{tile:n,targetRect:r,index:a,enableRestore:l}})},[E,h,c]),T=o.useCallback((e,t)=>{if(v){y();return}if(g.Ay.mobile||g.Ay.tablet){m.Ay.redirect((0,lb.jN)({file:e}));return}t.stopPropagation();let a=c&&c[lS.F.PINNED_FILES]&&c[lS.F.PINNED_FILES][e.key];if(t.ctrlKey||t.metaKey||t.shiftKey)a?E(lg.TK({tileKeys:[e.key]})):E(lg.y$({type:lS.F.PINNED_FILES,tiles:[{type:lh.nb.PINNED_FILE,file:e}]}));else{if(a)return;E(lg.an()),E(lg.y$({type:lS.F.PINNED_FILES,tiles:[{type:lh.nb.PINNED_FILE,file:e}]}))}},[E,v,y,c]),I=o.useCallback((e,t)=>{d.eD&&(0,tK.sx)("Open File Click",{fileKey:e.key,uiSelectedView:JSON.stringify(i)}),E(L.UN({fileKey:e.key,entrypoint:"pinned files"}));let a=g.Ay.mac?t.metaKey:t.ctrlKey,r=null;if(a&&t.shiftKey?r=d.aw.FOCAL_TAB:a?r=d.aw.BACKGROUND_TAB:t.shiftKey&&(r=d.aw.NEW_WINDOW),null!=r){E(A.oB()),d.eD&&(t.preventDefault(),t.stopPropagation(),d.eD.openFile({fileKey:e.key,title:e.name||"Untitled",editorType:e.editorType,target:r,isTeamTemplate:e.isTeamTemplate,userId:null==f?void 0:f.id}));return}t.preventDefault(),t.stopPropagation(),E(yR.p4({planId:u||yU.P}));let n=i&&("recentsAndSharing"===i.view||"folder"===i.view)?i:void 0,l=(0,_.kc)().ps_benchmark;(0,cg.N7)(u,e.parentOrgId,p,e.teamId)?(0,cg.QV)(e.key,f,u,l?p:null,i,e.editorType):E(A.$T({view:"fullscreen",fileKey:e.key,editorType:(0,Eq.wN)(e.editorType),prevSelectedView:n}))},[E,u,p,i,f]),x=o.useMemo(()=>e.files.filter(({file:e})=>!!e).map(({file:e})=>({type:lh.nb.PINNED_FILE,file:e})),[e.files]),N=(0,lh.nw)(x),C=o.useCallback(()=>{let t=(null==b?void 0:b.tile)??null;return o.createElement(ci.i,{...e,tile:t,selectedTiles:N,openTile:e=>{(null==t?void 0:t.type)===lh.nb.PINNED_FILE&&(null==t?void 0:t.file)&&I(t.file,e)},dropdownVisible:v})},[null==b?void 0:b.tile,e,N,v,I]),S=o.useCallback(e=>{(e.target===t.current||e.target===a.current||e.target===r.current||e.target===l.current||n.current&&n.current.contains(e.target))&&(E(A.oB()),E(lg.an()))},[E]),k=c[lS.F.PINNED_FILES],R=yW+` ${yI.dp}`;o.useEffect(()=>{if(g.Ay.mobile&&g.Ay.safari&&t.current){let e=t.current.className;window.addEventListener("load",()=>{t.current&&(t.current.className=""),setTimeout(()=>{t.current&&(t.current.className=e)},500)})}},[]);let D=o.useMemo(()=>e.files.map(e=>{var t;return null==(t=e.file)?void 0:t.key}).filter(e=>!!e),[e.files]);return(0,ls.IT)(D),o.createElement("div",{className:"tiles_view--pinnedContainer--2x-rH",onMouseDown:S,ref:t},o.createElement("div",{className:R,ref:a},o.createElement("div",{ref:r,key:"grid",className:ey()(yH,"tiles_view--tilesGridPinned--YNmwb")},e.files.map((e,t)=>{let a=!!(k&&k[e.file.key]);return o.createElement(Tl,{file:e,openFile:I,index:t,onFileContextMenu:w,isSelected:a,selectPinnedFile:T,key:`file-${e.file.key}`,currentOrgId:u,currentTeamId:p,selectedView:i,user:f})}))),C())}function To(e){return o.createElement("div",{className:ey()("starter_team_overview_item--container--2OVmD",{"starter_team_overview_item--containerDisabled--76kDd":e.disabled,"starter_team_overview_item--containerDefault--dN-eI":!e.disabled})},o.createElement(es.B,{className:"starter_team_overview_item--icon--Z3o0g",svg:e.icon}),o.createElement("p",{className:"starter_team_overview_item--text--r36FA"},e.text))}var Ts=a(174726),Tc=a(965821);function Td({folderId:e}){var t,a,r,n,l,i;let s=(0,rr.Rs)(rl.yU5,{projectId:e});if("loaded"!==s.status)return null;let c=(null==(r=null==(a=null==(t=s.data.project)?void 0:t.team)?void 0:a.teamFileCounts)?void 0:r.designFileCount)??0,d=(null==(i=null==(l=null==(n=s.data.project)?void 0:n.team)?void 0:l.teamFileCounts)?void 0:i.whiteboardFileCount)??0;return o.createElement(o.Fragment,null,o.createElement(To,{icon:Tc.A,text:(0,S.t)("team_view.starter_team.num_of_figma_files_user",{numFigmaFilesUsed:c,maxFreeFiles:K.WW})}),o.createElement(To,{icon:Ts.A,text:(0,S.t)("team_view.starter_team.num_of_figjam_files_user",{numFigjamFilesUsed:d,maxFreeFiles:K.WW})}))}function Tm({folderId:e}){return o.createElement("div",{className:"starter_team_overview--container--YU-xB text--fontPos13--xW8hS text--_fontBase--QdLsd","data-testid":"StarterTeamOverview"},o.createElement("div",{className:"starter_team_overview--header--4s2vt text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,S.tx)("file_browser.folder.starter_team_overview")),o.createElement("div",{className:"starter_team_overview--detailsWithFigjam--n0fVl"},o.createElement(Td,{folderId:e})))}function Tu({folder:e}){let t=(0,s.wA)(),a=o.createElement(I.tM,{key:"upgrade_button",className:ey()(ef.cx.flex.itemsCenter.justifyCenter.mt8.$,"starter_team_project_upsell_footer--primaryCtaButton--SPePt basic_form--primaryBtn--AU7Gy basic_form--btn--FSrmp ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"),innerText:(0,S.t)("file_browser.starter_team.view_plans"),onClick:()=>{t((0,R.to)({type:a9.V,data:{teamId:e.team_id??void 0,upsellSource:J.b.STARTER_TEAM_PROJECT_FOOTER}}))},trackingProperties:{trackingDescriptor:ew.c.VIEW_PLANS}},(0,S.tx)("file_browser.starter_team.view_plans"));return o.createElement("div",{className:ey()(ef.cx.flex.p32.mt16.mb16.mx32.bRadius6.justifyCenter.colorBorder.$,"starter_team_project_upsell_footer--borderStyle--REXNs"),"data-testid":"StarterTeamProjectUpsellFooter"},o.createElement("div",{className:ey()(ef.cx.flex.flexColumn.itemsCenter.lh24.$,"starter_team_project_upsell_footer--contentWrapper--QGLsm")},o.createElement(ev.E,{fontWeight:"semi-bold",fontSize:18},(0,S.tx)("file_browser.starter_folder.ready_for_an_upgrade")),o.createElement("div",{className:ef.cx.alignCenter.mt8.$},o.createElement(ev.E,{fontSize:13},(0,S.tx)("file_browser.starter_folder.folder_upgrade_info"))),o.createElement(Td,{folderId:e.id}),a))}let T_="upgrade_section--sidebarDivider--O7mLk",Tp="upgrade_section--upsellDescription--Heggv text--fontPos13--xW8hS text--_fontBase--QdLsd";function Tf({teamId:e}){var t,a;let r=(0,s.wA)(),n=(0,rh.TN)(e),l=(0,s.d4)(t=>t.teams[e]),i=!!(null==(a=null==(t=(0,rr.Rs)(rl.kQI,{id:e}).data)?void 0:t.team)?void 0:a.hasPermission),c=l&&!l.org_id&&!l.subscription&&i,d=rw.ng.canSeeProTrialUx(n),m=l&&!(0,K.w5)(l),u=()=>d?J.b.PRO_TRIAL_UPSELL_MODAL:J.b.UPGRADE_SECTION,_=t=>()=>{r((0,R.to)({type:a9.V,data:{teamId:e,upsellSource:t}}))};return m&&c||d?d?o.createElement(O.fu,{name:u(),properties:rw.ng.getTrackingProperties()},o.createElement("div",{className:T_}),o.createElement("p",{className:"upgrade_section--upsellTitle--db4mh text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement(ev.E,{fontSize:13,fontWeight:"medium"},(0,S.tx)("team_view.upgrade.pro_trials.title"))),o.createElement("p",{className:Tp},o.createElement(ev.E,{fontSize:13},(0,S.tx)("team_view.upgrade.pro_trials.description"))),o.createElement("div",{className:"upgrade_section--teamProUpgrade--8J0Tz text--fontPos11--2LvXf text--_fontBase--QdLsd"},o.createElement(I.vd,{onClick:_(u()),trackingProperties:{teamId:e,trackingDescriptor:ew.c.UPGRADE_TO_PROFESSIONAL}},(0,S.tx)("team_view.upgrade.pro_trials.upgrade_to_professional_cta")))):o.createElement(O.fu,{name:u()},o.createElement("div",{className:T_}),o.createElement("p",{className:Tp},o.createElement(I.Us,{onClick:_(u()),trackingProperties:{trackingDescriptor:ew.c.UPGRADE_YOUR_TEAM},trusted:!0},(0,S.tx)("team_view.upgrade.upgrade_your_team")),(0,S.tx)("team_view.upgrade.for_unlimited_files_projects_and_customizable_team_libraries"))):null}var Tg=a(902957),TE=a(129318),Tv=a(543312),Th=a(66154),Ty=a(573821);let Tb="seen_pro_onboarding_unlimited_files_overlay",Tw=(0,nL.r1)(Tb);function TT({teamId:e,canCreateFigjamBoard:t}){var a;let r=(0,aJ.md)(Tw),n=(0,aJ.md)(Tv.e),l=null==(a=(0,s.d4)(e=>e.userTeamFlags)[e])?void 0:a[Ty.UA],i=(0,M.kO)(),{show:c,isShowing:d,complete:m}=(0,nk.e)({overlay:nP.jVB,priority:nR.N.DEFAULT_MODAL,experiment:{check:i,predicate:e=>e,postCheck:e=>!e}},[r,n]);return((0,u.h)(()=>{l&&c({canShow:(t,a)=>a.some(t=>t.id===e)})}),d)?o.createElement(gz.M,{isShowing:d,userFlagOnShow:Tb},o.createElement(O.fu,{name:tM.S.getTooltipTrackingContext("Unlimited Files"),properties:tM.S.getTrackingProperties(e)},o.createElement(Th.yG,{dismissModal:m,canCreateFigjamBoard:t}))):null}function TI(e){var t,a;let{selectedView:r,userFlags:n,userTeamFlags:l,userEduVerified:i,isFreeUser:c,userAnalyticsData:d,...m}=(0,iX.R)(e=>{var t;return{selectedView:e.selectedView,userFlags:e.userFlags,userTeamFlags:e.userTeamFlags,userEduVerified:!!(null==(t=e.user)?void 0:t.student_validated_at),isFreeUser:e.isFreeUser,userAnalyticsData:e.userAnalyticsData,...(0,q.getPermissionsState)(e)}}),u=(0,s.wA)(),p=(0,rr.Rs)(rl.UpR,{}),{teamId:f,selectedTab:g}=e,E=m.teams[f],v=!!(null==E?void 0:E.org_id),h=!!(null==E?void 0:E.subscription),y=f&&(0,q.canAdminTeam)(f,m),b=(0,M.Yz)();(0,o.useEffect)(()=>{(0,_.kc)().requires_action_3ds_banner&&f&&!v&&h&&y&&u(bS.Be({teamId:f}))},[u,f,v,h,y]);let w=(0,s.d4)(e=>{var t;return null==(t=e.teamBilling)?void 0:t.summary}),T=bI(z.vt.TEAM,E,f,{selectedView:r,userFlags:n,userTeamFlags:l,selectedTab:g,isFreeUser:c,userAnalyticsData:d,eduPeriodEnd:null==(a=null==(t=p.data)?void 0:t.currentUser)?void 0:a.eduPeriodEnd,billingSummary:w,checks:{isEligibleForLockedRedesign:b},...m},u);if(!T)return o.createElement("div",null);let I=bC({resourceType:z.vt.TEAM,teamId:f},T),x=T.severity===bn.c.WARN?bl:"",N=T.bannerClassName||"",C=`${bf} ${x} ${N}`;return o.createElement("div",{className:C},o.createElement(bL,{...T,tracking:I}))}var Tx=a(290750);class TN extends o.PureComponent{constructor(){super(...arguments),this.state={contributors:null},this.viewUser=(e,t)=>{this.props.dispatch(A.$T({view:"user",userId:t.id,userViewTab:sU.o.INTERNAL_PROFILE}))}}componentDidMount(){Tx.W.getContributors({folderId:this.props.folderId}).then(e=>{this.setState({contributors:e.data.meta})}).catch(e=>{console.warn("Unable to load project contributors")})}render(){let e=this.viewUser;return o.createElement("div",{className:"contributors--contributors--UpVcx text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement("div",{className:"contributors--contributorsHeader--6sefy"},(0,S.tx)("file_browser.folder.recent_contributors")),o.createElement(N.x,{className:"contributors--loading--0u-Y2",isLoading:!this.state.contributors},()=>o.createElement("div",null,this.state.contributors&&this.state.contributors.filter(e=>e.user).map(t=>o.createElement(eV.az,{key:t.user.id,className:"contributors--contributorAvatar--bCw14",entity:t.user,size:24,showIsMe:t.user.id===this.props.currentUserId,onClick:e})),this.state.contributors&&0===this.state.contributors.length&&o.createElement("div",{className:"contributors--contributorEmpty--BnRcr text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,S.tx)("file_browser.folder.people_who_have_edited_this_project_will_appear_here")))))}}let TC=(0,s.Ng)((e,t)=>{let a=e.folders[t.folderId],r=a&&a.team_id?e.teams[a.team_id]:null;return{folderOrg:r&&r.org_id?e.orgById[r.org_id]:null,currentUserId:e.user?e.user.id:null}})(TN);var TS=a(411045),Tk=a(303345),TA=a(426887),TL=a(720488);function TR(e){let t=(0,s.wA)(),a=o.useRef(null),r=(0,s.d4)(({dropdownShown:e})=>e),n=e.dropdownKey&&r&&r.type===e.dropdownKey&&r.data&&r.data.targetRect,l=c_.findDOMNode(a.current),i=[];return e.canCreateDesignFile&&i.push(o.createElement(sI.c$,{key:"new-design-file",children:o.createElement(o.Fragment,null,o.createElement(ax.oS,{className:ef.cx.pr6.$,size:ax.LE.SMALL,type:ax.y1.DESIGN}),(0,S.tx)("file_browser.tool_bar.new_design_file")),onClick:e.onNewDesignFileClick})),e.canCreateWhiteBoardFile&&i.push(o.createElement(sI.c$,{key:"new-figjam-board",children:o.createElement(o.Fragment,null,o.createElement(ax.oS,{className:ef.cx.pr6.$,size:ax.LE.SMALL,type:ax.y1.WHITEBOARD}),(0,S.tx)("file_browser.tool_bar.new_figjam_board")),onClick:e.onNewWhiteBoardClick})),e.canCreateSlidesFile&&i.push(o.createElement(sI.c$,{key:"new-slides-file",children:o.createElement(o.Fragment,null,o.createElement(ax.oS,{className:ef.cx.pr6.$,size:ax.LE.SMALL,type:ax.y1.SLIDES}),(0,S.tx)("file_browser.tool_bar.new_slide_deck")),onClick:e.onNewSlidesClick})),o.createElement("button",{className:ey()(ef.cx.flex.itemsCenter.$,"new_file_toolbar_dropdown--newFileDropdown--pPPdw"),ref:a,onClick:a=>{e.dropdownKey&&l&&t(A.j7({type:e.dropdownKey,data:{targetRect:null==l?void 0:l.getBoundingClientRect()}}))}},o.createElement(es.B,{svg:sy.A,className:ey()(ef.cx.pr6.$,"new_file_toolbar_dropdown--svg--ugaqW")}),(0,S.tx)("file_browser.tool_bar.new"),n&&o.createElement(TL.Cf,{targetRect:r.data.targetRect,minWidth:172,maxWidth:172,propagateCloseClick:!0},i))}var TD=a(558011);function TF(e){var t,a,r,n,l,i;let c=(0,s.wA)(),d=o.useRef(null),m=(0,s.d4)(({dropdownShown:e})=>e),u=(0,s.d4)(t=>(0,lQ.oq)(e.folder.id,t))??null,_=(0,s.d4)(e=>e.favorites.collapsedCustomSections),p=(0,nK.S)(),f=(0,et.Q)({currentOrgId:u,currentTeamId:null}),g=o.useMemo(()=>{if("loaded"===f.status)return(0,rg.T0)(f.data,e.folder.id)},[f,e.folder.id]),E=void 0!==g;if("loaded"!==f.status)return o.createElement("div",{className:ef.cx.flex.itemsCenter.colorIcon.$},o.createElement(es.B,{svg:E5.A}));let v=(0,rg.gV)(f.data,u),h=e.dropdownKey&&m&&m.type===e.dropdownKey&&m.data&&m.data.targetRect,y=d.current&&(null==(t=null==m?void 0:m.data)?void 0:t.targetRef)===d.current&&(null==m?void 0:m.type)===a6.jU,b=d.current,w=[];return e.folder.canCreateDesignFile&&w.push(o.createElement(sI.c$,{key:"import",children:(0,S.tx)("file_browser.folder.import"),onClick:e.onImportClick})),e.folder.canView&&w.push(o.createElement(sI.c$,{key:"share",children:(0,S.tx)("file_browser.folder.share"),onClick:e.onShareClick})),e.setFavorite&&(p?w.push(o.createElement(sI.c$,{key:"add-to-favorites-section",children:o.createElement("div",{className:ef.cx.flex.justifyBetween.itemsCenter.w150.$},(0,S.tx)("favorited_resources.add_to_sidebar"),o.createElement(es.B,{svg:TD.A})),onClick:t=>{t.stopPropagation(),d.current&&c(A.j7({type:a6.jU,data:{targetRect:b.getBoundingClientRect(),targetRef:b,resourceId:e.folder.id}}))}})):w.push(o.createElement(sI.c$,{key:"shaadd-to-favorites-section",children:e.folder.is_subscribed?(0,S.tx)("sidebar.remove_from_favorites"):(0,S.tx)("sidebar.add_to_favorites"),onClick:t=>{t.stopPropagation(),c(rJ.ZJ({folderId:e.folder.id,folderName:e.folder.path,teamId:e.folder.team_id,isSubscribed:!e.folder.is_subscribed}))}}))),o.createElement("button",{className:ef.cx.flex.itemsCenter.colorIcon.$,ref:d,onClick:t=>{e.dropdownKey&&b&&c(A.j7({type:e.dropdownKey,data:{targetRect:null==b?void 0:b.getBoundingClientRect()}}))}},o.createElement(es.B,{svg:E5.A}),h&&o.createElement(TL.Cf,{targetRect:m.data.targetRect,minWidth:172,maxWidth:172,propagateCloseClick:!0},w),y&&o.createElement(lW.t,{updateFavorite:(t,a)=>{(!v||t)&&(e.setFavorite&&e.setFavorite(t,null==g?void 0:g.resource.id,a),t&&a&&(_.delete(a),c(no.U6({collapsedCustomSections:_})),ia.Fp({type:"topLevel",id:"custom",orgId:u,sectionId:a},!0)))},resourceId:e.folder.id,resourceType:z.bk.FOLDER,isFavorited:E,currentSectionId:(null==g?void 0:g.resource.sidebarSectionId)??void 0,sections:(0,r1.oA)(null==(r=null==(a=f.data)?void 0:a.currentUser)?void 0:r.userSidebarSections)??[],customSectionOrdering:(null==(i=null==(l=null==(n=f.data.currentUser)?void 0:n.baseOrgUser)?void 0:l.fileBrowserPreferences)?void 0:i.orderedSidebarSections)??[],showPoint:!0}))}var TP=a(357894),TM=a(492379),TO=a(750293),TB=a(410436),TU=a(564517),TV=a(490184),TH=a(213045),TW=a(114959),Tj=a(808576),T$=a(249963),TG=a(872429);function Tz({dataTestId:e,key:t,tooltipEditorString:a,listOptionType:r}){return{displayText:(0,S.t)("file_browser.tool_bar.request_sent"),preventDismissOnSelected:!0,render:()=>o.createElement(wh,{disabled:!0,text:(0,S.t)("file_browser.tool_bar.request_sent"),onClick:f.lQ,listOptionType:r,dataTestId:e,key:t,dataTooltip:(0,S.t)("file_browser.tool_bar.request_sent_tooltip",{editorString:a})})}}function TY(e,t,a){return e===lo._YF.WHITEBOARD?t&&t.whiteboardPaidStatus===z.El.RESTRICTED||a&&a.whiteboardPaidStatus===te.Zf.RESTRICTED:e===lo._YF.DESIGN&&(t&&t.designPaidStatus===z.El.RESTRICTED||a&&a.designPaidStatus===te.Zf.RESTRICTED)}var TK=a(310435);function TQ({folder:e,user:t,dispatch:a,team:r,shouldShowRenameModal:n,onClaimClick:l,lgFolder:i,shouldShowLockedRedesign:c}){var d,m,p,g,v;let[h,y]=o.useState(void 0),b=(0,r5.cD)(),w=(0,TS.c)(),T=()=>{e.name&&q&&(a(rJ.WC()),a(R.to({type:(0,TA.y)(),data:{folder:e}})))},I=()=>{TU.S.getFolderTransfer({folderId:e.id}).then(({data:e})=>{y(e.meta)},e=>{y(void 0)})};(0,u.h)(()=>{I()}),(0,u.h)(()=>{n&&T()});let x=(0,M.fn)()===M.ih.CONTROL,N=(0,j.FC)(),C=(0,s.d4)(e=>e.currentUserOrgId),k=(0,s.d4)(e=>e.teamRoleRequests),A=o.useMemo(()=>{var e;return i&&i.team&&(null==(e=i.team.org)?void 0:e.id)},[i]),D=o.useMemo(()=>i&&i.team&&i.team.id,[i]),F=o.useMemo(()=>{var e;return!!(null==(e=null==i?void 0:i.team)?void 0:e.canAdmin)},[i]),P=()=>{tQ.Ay.del(`/api/asset_transfer/${null==h?void 0:h.id}`).then(()=>{y(void 0),a(ec.F.enqueue({message:"Transfer revoked."}))},e=>{a(ec.F.enqueue({message:"Something went wrong - check your connection and try again",error:!0}))})},O=()=>{a(R.to({type:lA.W,data:{folderId:e.id}}))},B=o.useMemo(()=>!F&&e&&null!==C&&!(null==i?void 0:i.canEdit),[F,e,C,i]),U=o.useMemo(()=>!!(i&&i.canCreateFigjamFile&&i.canEdit),[i]),V=o.useMemo(()=>!!(i&&i.canCreateDesignFile&&i.canEdit),[i]),W=o.useMemo(()=>!!i&&i.canCreateSlidesFile&&i.canEdit,[i]),$=!!(0,_.kc)().piper&&W,G=(0,TG.sy)(),Y=V&&G,K=U||V,Q=o.useMemo(()=>!!(i&&i.canRead),[i]),q=o.useMemo(()=>!!(i&&i.canEdit),[i]),X=o.useMemo(()=>!!(i&&i.isEditingLockedForUser),[i]),J=o.useMemo(()=>{if(B&&k&&r&&k[r.id]&&k[r.id].status===TB.c.PENDING)return k[r.id].id},[B,k,r]);o.useEffect(()=>{B&&C&&a((0,H.Rw)())},[B,a,C]);let Z=(0,lE.jm)(A,D),ee=(0,nK.S)(),et=(0,iw.a)(e.id),ea=c?(0,S.t)("locked_team.label.tooltip"):void 0,er=c?eB.Ib.TEXT:void 0,en=null==(m=null==(d=null==i?void 0:i.team)?void 0:d.org)?void 0:m.currentBaseOrgUser,el=null==(p=null==i?void 0:i.team)?void 0:p.currentTeamUser,ei=(0,M.zq)(),eo=(0,E.I7)("exp_pro_upgrade_project_vr"),es=(0,E.I7)("exp_org_upgrade_project_vr"),ed=!1;b&&el&&(el&&el.whiteboardPaidStatus===te.Zf.RESTRICTED||el&&el.designPaidStatus===te.Zf.RESTRICTED)&&i&&i.canEdit&&i.team&&!i.team.isStarterTeam&&!i.team.isStudentTeam&&((0,tK.sx)("pro_upgrade_project_exp_fetch",{reduxTeamId:b,lgTeamId:el.teamId,userId:el.userId}),ed=eo.getConfig().getValue("showExp",!1));let em=!1;C&&en&&(en&&en.whiteboardPaidStatus===z.El.RESTRICTED||en&&en.designPaidStatus===z.El.RESTRICTED)&&i&&i.canEdit&&i.team&&(null==(g=i.team.org)?void 0:g.id)&&((0,tK.sx)("org_upgrade_project_exp_fetch",{reduxOrgId:C,lgOrgId:null==(v=i.team.org)?void 0:v.id,userId:en.userId}),em=es.getConfig().getValue("showExp",!1));let eu=(e,t)=>{var a,r,n,l;return(!t||!t.team||null==(r=null==(a=t.team)?void 0:a.org)||!r.k12GoogleOrg)&&(e===lo._YF.WHITEBOARD?!!en&&en.whiteboardPaidStatus===z.El.STARTER||!!el&&el.whiteboardPaidStatus===te.Zf.STARTER:e===lo._YF.DESIGN&&(!!en&&en.designPaidStatus===z.El.STARTER||!!el&&el.designPaidStatus===te.Zf.STARTER))&&!!t&&!!t.canEdit&&!!t.team&&!(null==(n=t.team)?void 0:n.isStarterTeam)&&!(null==(l=t.team)?void 0:l.isStudentTeam)&&ei()},e_=(e,t)=>{var a,r,n,l;return(e!==z._Y.WHITEBOARD||null==(r=null==(a=null==t?void 0:t.team)?void 0:a.org)||!r.isFigJamDisabled)&&!!TY(e,en,el)&&!!t&&!!t.canEdit&&!!t.team&&!(null==(n=t.team)?void 0:n.isStarterTeam)&&!(null==(l=t.team)?void 0:l.isStudentTeam)&&(!!en&&!!em||!!el&&!!ed)},ep=e=>{var t,a,r,n;if(TY(e,en,el)){if(en&&em){if(e===z._Y.DESIGN&&(null==(t=en.designAccountTypeRequest)?void 0:t.status)==="pending"||e===z._Y.WHITEBOARD&&(null==(a=en.whiteboardAccountTypeRequest)?void 0:a.status)==="pending")return!0}else if(el&&ed&&(e===z._Y.DESIGN&&(null==(r=el.designAccountTypeRequest)?void 0:r.status)==="pending"||e===z._Y.WHITEBOARD&&(null==(n=el.whiteboardAccountTypeRequest)?void 0:n.status)==="pending"))return!0}return!1},eg=(e,t)=>{var n,l,o;let s=A?null==(n=null==i?void 0:i.team)?void 0:n.org:null==i?void 0:i.team,c=null==s?void 0:s.name,d=en||el;if(w){let r=(null==(o=null==(l=null==d?void 0:d.activeSeatTypeUpgrade)?void 0:l.billableProduct)?void 0:o.licenseTypes)??[],n=t.toString();return r.includes(n)?e:(0,Tk.Fs)(e,n,a,s&&{type:A?z.OL.ORG:z.OL.TEAM,id:s.id,name:s.name,canSelfUpgrade:s.canSelfUpgrade})}if(eu(t,i))return()=>{a(R.to({type:Tj.y,data:{planType:A?yB.O.ORG:yB.O.TEAM,planName:c,seatTypesToBeUpgraded:{design:t===z._Y.DESIGN,whiteboard:t===z._Y.WHITEBOARD},planId:A??D,upgradeReason:T$.X.CREATE_FILE,onConfirm:e}}))};if(e_(t,i)){if(en&&(null==i?void 0:i.team))return()=>{var e;a(R.to({type:TH.Y,data:{orgId:A??"",orgUser:{id:en.id,user_id:en.userId,org_id:A??"",permission:en.permission,license_group_member:{license_group_id:(null==(e=i.team)?void 0:e.licenseGroupId)??null}},entryPoint:TO.PE.CreateFileProjectView,licenseType:(0,eO.vc)(t)}}))};if(el)return()=>{a(R.to({type:TW.PK,data:{team:r,entryPoint:TO.Wc.CREATE_FILE_PROJECT_VIEW,editorType:t}}))}}return e},eE=(0,hC.$)(z._Y.DESIGN,hw.f6.FILE_BROWSER_TOPBAR_FOLDER,"toolbar_design_created",e.id,!!(!r&&i&&i.canEdit)),ev=(0,hC.$)(z._Y.WHITEBOARD,hw.f6.FILE_BROWSER_TOPBAR_FOLDER,"toolbar_figjam_created",e.id,!!(!r&&i&&i.canEdit)),eh=(0,hC.$)(z._Y.SLIDES,hw.f6.FILE_BROWSER_TOPBAR_FOLDER,"toolbar_slides_created",e.id,!!(!r&&i&&i.canEdit)),ey=(0,hC.$)(z._Y.SITES,hw.f6.FILE_BROWSER_TOPBAR_FOLDER,"toolbar_sites_created",e.id,!!(!r&&i&&i.canEdit)),eb=(t,r,n)=>{if(e){let l={folder:e,entrypoint:"folder_page_view",sectionId:n,favoriteId:r};t?a(no.Mv(l)):a(no.jv(l))}},ew=()=>{a(L.gN(e.id)),a((0,wx.L)({showImportModal:(0,_.kc)().figjam_3p_file_importer}))},eT=!!(0,lQ.c8)(e.id,e.team_id,N).data,eI=wo({from:hw.f6.FILE_BROWSER_TOPBAR_FOLDER}),ex=wc({from:hw.f6.FILE_BROWSER_TOPBAR_FOLDER}),eN=(0,ym.oz)({}),eC=hA({from:hw.f6.FILE_BROWSER_TOPBAR_FOLDER}),eS=(0,hI.lt)({from:hw.f6.FILE_BROWSER_TOPBAR_FOLDER});return o.createElement(su,{title:e.name,rightSideActions:(()=>{let n=[],s=(0,_.kc)().ps_benchmark&&(0,rb.R$)(t,C);eT&&n.push({kind:sT.A.BUTTON,key:sT.D.CLAIM,displayText:(0,S.t)("file_browser.folder.join_as_owner"),onClick:l});let d=[],m=wv(ex,eg(ev,z._Y.WHITEBOARD)),u=wv(eI,eg(eE,z._Y.DESIGN)),p=null!==eC?wv(eC,eh):null,g=null!==eS?wv(eS,ey):null,E=ep(z._Y.DESIGN),v=ep(z._Y.WHITEBOARD),h=e_(z._Y.DESIGN,i)&&e_(z._Y.WHITEBOARD,i)&&E&&v;if(!X&&!s){let e=Tz({dataTestId:"request-sent-design-button",key:sT.D.REQUEST_SENT_DESIGN,tooltipEditorString:(0,S.t)("file_browser.tool_bar.request_sent_tooltip_figma_design"),listOptionType:hx.R.DESIGN}),t=Tz({dataTestId:"request-sent-whiteboard-button",key:sT.D.REQUEST_SENT_WHITEBOARD,tooltipEditorString:(0,S.t)("file_browser.tool_bar.request_sent_tooltip_figjam"),listOptionType:hx.R.WHITEBOARD}),a=Tz({dataTestId:"disabled-import-button",key:sT.D.IMPORT,tooltipEditorString:(0,S.t)("file_browser.tool_bar.request_sent_tooltip_figma_design_and_figjam"),listOptionType:hx.R.IMPORT});h?(d.push(e,t),Y&&null!==g&&d.push(g),$&&null!==p&&d.push(p),d.push(a)):(V?d.push(u):w?d.push(u):e_(z._Y.DESIGN,i)&&(E?d.push(e):d.push(u)),U?d.push(m):w?d.push(m):e_(z._Y.WHITEBOARD,i)&&(v?d.push(t):d.push(m)),Y&&null!==g&&d.push(g),$&&null!==p&&d.push(p))}if(K&&!s&&(d.push({displayText:"",disabled:!0,separator:!0}),d.push(wv(eN))),d.length>0&&n.push({kind:sT.A.CUSTOM,key:sT.D.NEW_RESOURCE,element:o.createElement(wb,{createOptionsList:d,dropdownType:hx.x})}),Q){let e={kind:sT.A.BUTTON,key:sT.D.SHARE,displayText:(0,S.t)("file_browser.folder.share"),onClick:c?f.lQ:O,"data-tooltip":ea,"data-tooltip-type":er,styleClass:c?TK.EB:void 0};n.push(e)}B&&n.push({kind:sT.A.BUTTON,key:sT.D.REQUEST_TO_EDIT,displayText:void 0!==J?(0,S.t)("file_browser.team.cancel_request"):(0,S.t)("file_browser.team.request_to_edit"),onClick:()=>{J?a(TM.lT({requestId:J})):r&&a(R.to({type:TV.$,data:{team:r,requesterCurrentLevel:t8.e6.VIEWER,source:"FolderPageView"}}))}});let y=ee?o.createElement(lY.r,{setFavorite:eb,favoriteType:z.bk.FOLDER,resourceId:e.id,isFavoriteHeaderStar:!0,orgId:C,teamId:D??null}):o.createElement(TP.d,{folder:e});if(x&&(!(0,_.kc)().ps_benchmark||Z)&&n.push({kind:sT.A.CUSTOM_BUTTON,key:sT.D.FAVORITE,element:y}),!X&&(V||U||$)){let e=o.createElement(TR,{dropdownKey:"new-file-dropdown",canCreateDesignFile:V,canCreateWhiteBoardFile:U,canCreateSlidesFile:$,onNewDesignFileClick:eg(eE,z._Y.DESIGN),onNewWhiteBoardClick:eg(ev,z._Y.WHITEBOARD),onNewSlidesClick:eg(eh,z._Y.SLIDES)});n.push({kind:sT.A.CUSTOM_BUTTON,key:sT.D.NEW_FILE_DROPDOWN,styleClass:ef.cx.colorBgInverse.$,showOnMobile:!0,hideOnDesktop:!0,element:e})}let b=o.createElement(TF,{dropdownKey:"project-overflow-dropdown",folder:e,onImportClick:ew,onShareClick:O,setFavorite:Z?eb:null});return n.push({kind:sT.A.CUSTOM_BUTTON,key:sT.D.PROJECT_OVERFLOW_MENU,showOnMobile:!0,hideOnDesktop:!0,element:b}),n})(),rightSideOfTitleAction:(()=>{let t=et({folder:{...(0,hw.Kk)({...e,canCreateDesignFile:V,canCreateFigjamFile:U,canCreateSlidesFile:$},q),isSubscribed:e.is_subscribed,description:e.description},onRenameClick:T,onRevokeTransfer:P,shouldShowJoinButton:!1,getPendingInfo:I,pendingTransfer:h});return Q&&t.length>0?{kind:sT.A.CUSTOM,key:sT.D.DROPDOWN,element:o.createElement(sf,{buttonAriaLabel:(0,S.t)("file_browser.folder.page_header_dropdown_label"),dropdownKey:`folder-${e.id}`,dropdownOptions:t})}:void 0})()})}let Tq="folder_page_view--sidebarDivider--NEgHu";function TX(e){let t=(0,s.wA)(),a=(0,rr.Rs)(rl.CH9,{folderId:e.folderId}),r=o.useMemo(()=>{var e;return"loaded"===a.status?((null==(e=a.data.project)?void 0:e.pinnedFiles)||[]).filter(e=>!!e.file):[]},[a]);o.useEffect(()=>{t(rJ.MR({folderId:e.folderId,fileKeys:r.map(e=>e.file.key)}))},[r,t,e.folderId]);let n=o.useCallback(()=>{t(lg.an())},[t]);return 0!==r.length?o.createElement(o.Fragment,null,o.createElement("div",{className:"folder_page_view--pinnedHeader--YJufT",onMouseDown:n},o.createElement(ev.E,{fontSize:13,color:"secondary"},(0,S.tx)("file_browser.folder.pinned"))),o.createElement(Ti,{files:r,tileActions:e.tileActions,repos:e.repos})):null}let TJ={open:!0,openNewTab:!0,restoreFromVersion:!0,share:!0,copyLink:!0,rename:!0,duplicate:!0,delete:!0,createBranch:!0,publishOrgTemplate:!0,moveFile:!0,pinToFolder:!0,pinToWorkspace:!0},TZ=(0,yv.xx)(lQ.ZN);function T0(e){var t;let{folderId:a}=e,r=(0,rr.Rs)(rl.L8O,{projectId:a}),n=(0,j.FC)(),l=(0,rO.LK)(a),i=lc.Qw.useTransformShallowEqual(l,e=>{let t=e.folder;return{folder:e.folder,canView:(0,q.canViewFolder_DEPRECATED)(a,n),canEdit:(0,q.canEditFolder)(a,n),isEditingLocked:!!t&&(0,K.ZZ)(t,n),team:n.teams[(null==t?void 0:t.team_id)||""]||null}}).data,c=null==i?void 0:i.folder,d=(0,s.wA)(),m=(0,rr.Rs)(rl.Udv,{id:a});o.useLayoutEffect(()=>{var e;"loaded"!==m.status||(null==(e=m.data.project)?void 0:e.hasPermission)||d(A.$T({view:"recentFiles"}))},[d,m]);let u=(0,M.Yz)();o.useEffect(()=>{c&&!c.is_invite_only&&c.team_id&&!i.team&&d(Tg.Jt({teamId:c.team_id}))},[d,a,c,null==i?void 0:i.team]),o.useEffect(()=>{if(!(0,_.kc)().auto_accept_project_invites)return;let e={999:"owner",900:"admin",300:"edit",100:"view"},t=(0,TE.QL)("auto_role");t&&c&&t in e&&((i.canView||"100"!==t)&&(i.canEdit||"300"!==t&&"900"!==t&&"999"!==t)&&d(ec.F.enqueue({message:(0,S.t)("file_browser.auto_accept_project_invite_modal",{projectName:c.name,inviteType:e[t]})})),(0,TE.EM)("auto_role"))},[d,c,i]);let p=(null==(t=r.data)?void 0:t.project)||null,f=(0,s.d4)(e=>TZ(a,e.tileSortFilterStateByView)),E=(0,s.d4)(rZ.yK),v=(0,s.d4)(e=>!!(null==i?void 0:i.team)&&!!(null==c?void 0:c.team_id)&&bx(e,z.vt.TEAM,i.team,c.team_id,{isEligibleForLockedRedesign:u})),h=(0,s.d4)(e=>!!e.userFlags.hide_recommended_templates_in_projects),y=(0,s.d4)(e=>e.selectedBranchKeyByRepoId),b=(0,r0.vt)(),w=(0,rv.dq)(),T=(0,$.iZ)(),I=()=>{d(P.b({hide_recommended_templates_in_projects:!h}))},x=!!(null==p?void 0:p.canCreateFigjamFile),N=!!(null==p?void 0:p.canCreateDesignFile),C=!!(null==p?void 0:p.canCreateSlidesFile),k=!!(null==p?void 0:p.canEdit),L=!!(null==p?void 0:p.canRead),R=()=>!v&&!h,D=()=>{d(rJ.B7({folderId:a}))},F=(0,lQ.c8)(a,(null==c?void 0:c.team_id)||null,n),B=(0,M.PP)();if(!c||"loaded"!==l.status||"loaded"!==r.status)return o.createElement("div",{className:"folder_page_view--loading--ZkDG0"},o.createElement(tc.kt,null));let U=e=>{d(rJ.ub({folderId:a,description:e.trim()}))},V={view:"project",folderId:a,canEdit:i.canEdit,userSpace:w?t3.qo.ORG:t3.qo.PERSONAL},H=i.team,W=H&&!(0,K.w5)(H),G=!!H&&(0,q.canEditTeam)(H.id,n)&&W&&!!(0,_.kc)().fbg_starter_project_redesign&&!B();return(0,O.T8)(o.createElement(so.r,{content:o.createElement("div",{className:ef.cx.flex.flexColumn.$},(()=>{let t=!!(N||x||C)&&!i.isEditingLocked,a=t?"":(0,S.t)("file_browser.folder.no_files_yet");if("loaded"!==F.status)return null;let{files:r,repos:n,filesByRepoId:s}=l.data,d=[...r.map(e=>({type:lh.nb.FILE,file:e})),...n.filter(e=>!e.trashed_at).map(e=>({type:lh.nb.REPO,repo:e,branches:s[e.id],selectedBranchKey:y[e.id]||""}))],m=o.createElement(o.Fragment,null,o.createElement(Tr,{team:i.team||void 0,newFileFrom:hw.f6.FILE_BROWSER_TOPBAR_FOLDER,disableRecommendedTemplates:E||u(b),folderId:c.id,recommendedTemplatesIsOpen:R(),toggleRecommendedTemplates:I,isInProjectsView:!0}),o.createElement(TX,{folderId:e.folderId,repos:n,tileActions:TJ}),o.createElement(y4,{newFileTile:t,tiles:d,tileActions:TJ,sortFilterOptions:f,emptyStateText:a,isFolder:!0,eligibleForLockedStateRedesign:u(b)})),_=o.createElement(y8,{emptyStateText:(0,S.t)("file_browser.folder.join_this_project_to_view_files"),onClaimClick:D});return F.data?_:m})(),G?o.createElement(Tu,{folder:c}):null,o.createElement(ya.cx,null)),metaContent:g.Ay.mobile||!W||(0,_.kc)().fbg_starter_project_redesign||B()?void 0:(()=>{let e=k&&!i.isEditingLocked,t=i.team,r=t&&!(0,K.w5)(t);return o.createElement("div",{className:"folder_page_view--metaColumn--FPnOz"},(e||c.description)&&o.createElement(o.Fragment,null,o.createElement("div",{className:Tq}),o.createElement("div",{className:"folder_page_view--folderDescription--wO8Rd text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement("h3",{className:ef.cx.font13.fontMedium.$},(0,S.tx)("file_browser.about")),o.createElement(gC,{value:c.description||"",placeholder:(0,S.t)("file_browser.folder.add_a_description"),formatter:gN,submit:U,readOnly:!e}))),c.team_id&&o.createElement(o.Fragment,null,o.createElement("div",{className:Tq})),L&&!g.Ay.mobile?o.createElement(TC,{key:a,folderId:a}):null,t&&r&&o.createElement(Tm,{folderId:a}),c.team_id&&o.createElement(Tf,{teamId:c.team_id}))})(),banner:H&&v?o.createElement(TI,{teamId:H.id}):void 0,header:o.createElement(o.Fragment,null,o.createElement(TQ,{dispatch:d,user:T,folder:{...i,...c,canCreateDesignFile:N,canCreateWhiteboardFile:x},team:H,currentOrgId:w,onClaimClick:D,shouldShowRenameModal:e.shouldShowRenameModal||!1,lgFolder:p,shouldShowLockedRedesign:u(b)}),N&&H&&o.createElement(TT,{teamId:H.id,canCreateFigjamBoard:x}))}),t3.e0.FILE_BROWSER,V)}function T1({orgId:e}){let t=(0,j.FC)(),a=(0,s.wA)();return(0,q.canMemberOrg)(e,t)?o.createElement(sm.K,{action:{kind:sm.A.BUTTON,key:sT.D.VIEW_LIBRARIES,displayText:(0,S.t)("org_view.view_libraries"),onClick:()=>{a(A.$T({view:"org",orgId:e,orgViewTab:r9.X.LIBRARIES}))}}}):null}function T2({orgId:e}){let t=(0,s.wA)(),a=(0,s.d4)(rZ.QT),r=(0,s.d4)(t=>t.orgById[e]),{canCreateTeam:n}=(0,G.l6)(r,void 0);return a||!n?null:o.createElement(sm.K,{action:{kind:sm.A.CUSTOM,key:sT.D.NEW_TEAM,element:o.createElement(sw,{onClick:()=>{t(R.to({type:r6.Uc,data:{}}))},variant:"inverse",text:(0,S.t)("license_group_view.toolbar.new_team_button")})}})}function T4({orgId:e}){return e?o.createElement(o.Fragment,null,o.createElement(T2,{orgId:e,key:"org-new-team-action"}),o.createElement(T1,{orgId:e,key:"org-library"})):null}var T8=a(193360);function T3(){let e=(0,s.wA)(),t=(0,rv.dq)(),a=bT((0,iX.R)(e=>({...(0,q.getPermissionsState)(e),selectedView:e.selectedView,userFlags:e.userFlags,userTeamFlags:e.userTeamFlags,isFreeUser:e.isFreeUser,userAnalyticsData:e.userAnalyticsData})),e);if(!a)return o.createElement("div",null);let r=bC({resourceType:"org",orgId:t},a),n=a.severity===bn.c.WARN?bl:"",l=`${bf} ${n}`;return o.createElement("div",{className:l},o.createElement(bL,{...a,tracking:r}))}var T5=a(918012);let T9="org_meta_content--container--b5Iq3";function T6({org:e}){return o.createElement("div",{className:ef.cx.flex.flexColumn.rowGap16.$},o.createElement(eV.Ro,{entity:e,size:36}),o.createElement(ev.E,{fontWeight:"medium",fontSize:13},e.name))}function T7({handle:e}){let t=(0,s.wA)();return o.createElement("a",{href:`/@${e}`,className:T5.B,onClick:a=>{a.metaKey||(a.preventDefault(),t(A.$T({view:"communityHub",subView:"handle",handle:e})))}},o.createElement(ev.E,{fontSize:11},"@",e))}function Ie({orgId:e}){let t=(0,s.d4)(t=>(0,t0.Xy)(t.orgUsersByOrgId[e]).map(e=>e.user)),a=(0,s.wA)();return o.createElement(sB,{label:(0,S.t)("org_home_view_meta.admins"),members:t,onMemberClick:(e,t)=>{a(A.$T({view:"user",userId:t.id,userViewTab:sU.o.INTERNAL_PROFILE}))},canLeave:!1})}function It({org:e,orgStats:t}){let a=t?o.createElement(ev.E,{fontSize:11,color:"secondary"},(0,S.tx)("org_home_view_meta.member_count",{memberCount:t.memberCount.data}),o.createElement("span",null,"\xa0\xb7\xa0"),"workspaceCount"in t?(0,S.tx)("org_home_view_meta.workspace_count",{workspaceCount:t.workspaceCount.data}):(0,S.tx)("org_home_view_meta.team_count",{teamCount:t.discoverableTeamCount.data})):o.createElement(fx.Wi,{className:ef.cx.mb4.$,animationType:fx.JR.SHIMMER});return o.createElement("div",{className:T9},o.createElement(T6,{org:e}),o.createElement("span",{className:ef.cx.mt4.$},a),e.community_profile_handle?o.createElement("span",{className:ef.cx.mt2.$},o.createElement(T7,{handle:e.community_profile_handle})):null,o.createElement("span",{className:ef.cx.mt32.$},o.createElement(Ie,{orgId:e.id})))}function Ia({org:e}){var t;let a=(0,rr.Rs)(rl.nYs,{orgId:e.id});return o.createElement(It,{orgStats:(null==(t=a.data)?void 0:t.org)??null,org:e})}function Ir({org:e}){var t;let a=(0,rr.Rs)(rl.kei,{orgId:e.id});return o.createElement(It,{orgStats:(null==(t=a.data)?void 0:t.org)??null,org:e})}function In({org:e}){return o.createElement("div",{className:T9},o.createElement(T6,{org:e}),e.community_profile_handle?o.createElement("span",{className:ef.cx.mt4.$},o.createElement(T7,{handle:e.community_profile_handle})):null,o.createElement("span",{className:ef.cx.mt4.$},o.createElement(ev.E,{fontSize:11,color:"secondary"},(0,S.tx)("payments_modal.guest_permission_disclaimer")," ",o.createElement("a",{className:T5.B,href:"https://help.figma.com/hc/articles/360039957374",target:"_blank",rel:"noopener"},(0,S.tx)("org_home_view_meta.learn_more")))))}var Il=a(963067),Ii=a(66944);let Io="org_plugins_view--resourcesGrid--vuLoW profile_resources_grid--_resourcesGridTemplateColumns--19JO6",Is="org_plugins_view--container--LquUh",Ic="org_plugins_view--emptyState--lppIb tiles_view--emptyState--jfzsE text--fontPos11--2LvXf text--_fontBase--QdLsd";function Id(){let e=(0,Il.Yo)(),t=(0,s.wA)(),a=(0,s.d4)(e=>e.publishedPlugins);o.useEffect(()=>{t(m8.Xt())},[t]);let r=function(){if(!e)return[];let t=(0,ml.Qt)((0,ml.i8)(Object.values(a)),e.id);return Object.keys(t).map(e=>t[e])}();return e&&0!==r.length?o.createElement("div",{className:Is},o.createElement("div",{className:Io},r.map((e,t)=>o.createElement(ul.AB,{isPublic:!1,pluginId:e.id,showInstallCount:!0,key:`plugin-${e.id}`,viewContext:"OrgPluginsView",innerText:(0,S.t)("org_view.plugin_tile"),trackingProperties:{pluginId:e.id,position:t},dropdown:o.createElement(Ii.d,{resource:e})})),o.createElement(ul.hT,{numResources:r.length}))):o.createElement("div",{className:Ic},(0,S.tx)("org_view.private_plugins_will_appear_here"))}let Im=e=>{switch(e){case r9.X.HOME:return(0,S.t)("org_view.overview");case r9.X.YOUR_TEAMS:return(0,S.t)("org_view.your_teams");case r9.X.PLUGINS:return(0,S.t)("org_view.plugins");case r9.X.WIDGETS:return(0,S.t)("org_view.widgets");default:return null}};function Iu(e){let t=(0,s.wA)(),a=(0,rv.sZ)(),r=e=>{t(A.$T({view:"org",orgId:(null==a?void 0:a.id)??"",orgViewTab:e}))},n=Object.keys(r9.X).reduce((t,a)=>{let n=Im(r9.X[a]);return null!=n&&t.push(o.createElement(bP.r,{tab:r9.X[a],onClick:r,isSelected:e.selectedTab===r9.X[a],tabName:n,key:a})),t},[]),l=o.createElement(bP.f,{tabs:n});return o.createElement(oe.g2,{leftSide:l,rightSide:[]})}var I_=a(39954);let Ip=(0,s.Ng)(e=>({orgEntity:(0,ou.Jl)(e),publishedWidgets:e.publishedWidgets}))(function(e){let t=(0,s.wA)();o.useEffect(()=>{t(m8.gI())},[t]);let a=o.useMemo(()=>{if(!e.orgEntity)return[];let t=(0,ml.Qt)((0,ml.i8)(Object.values(e.publishedWidgets)),e.orgEntity.id);return Object.keys(t).map(e=>t[e])},[e.orgEntity,e.publishedWidgets]);return e.orgEntity&&0!==a.length?o.createElement("div",{className:Is},o.createElement("div",{className:Io},a.map((e,t)=>o.createElement(I_.F9,{key:`widget-${e.id}`,widget:e,viewContext:"OrgWidgetsView",trackingProperties:{widget:e.id,position:t}})),o.createElement(ul.hT,{numResources:a.length}))):o.createElement("div",{className:Ic},(0,S.tx)("org_view.private_widgets_will_appear_here"))});var If=a(193212);function Ig(e){var t;let a,r,n;let{workspace:l,teamCount:i,isSelected:c,onSelect:d}=e,m=(0,s.d4)(e=>e.currentUserOrgId),[u,_]=o.useState(!1),p=(0,If.aq)(),f=(null==(t=l.colorConfig)?void 0:t.colors)??[],E=e.isMainWorkspace?f[0]:void 0,v=l.description??void 0;E&&(E=function(e,t,a){try{let r=(0,oS.H0)(t),n=(0,oS.kx)(r),l=(0,ok.oN)(t,!n,n);return a&&l!==t&&(0,tK.sx)("workspace_background_color_adjusted_for_accessibility",{workspace_id:e,original_background_color:t,adjusted_background_color:l}),l}catch(e){console.error(e)}return t}(l.id,E,p()));let h=(0,s.wA)(),y=()=>{h(L.kg({clickedResourceType:"workspace",resourceIdOrKey:l.id})),h(A.$T({view:"workspace",subView:nE.V0.DIRECTORY,workspaceId:l.id,selectedTab:nE.dN.TEAMS}))},b=o.useCallback((e,t,a)=>{if(l){let r={workspace:{id:l.id,name:l.name??"",imgUrl:l.imgUrl},entrypoint:"workspace_tile",sectionId:a,favoriteId:t};e?h(no.ZW(r)):h(no.if(r))}},[h,l]);E&&((0,oS.kx)(E)?(a="org_page_view--workspaceTileTitleColorForDarkBackground--m6sFp",r="org_page_view--secondaryTextColorOnDarkBackground--7Ru-V",n="org_page_view--favoriteStarContainerForDarkBackground--mVRVn workspace_page_header--favoriteStarContainerForDarkBackground--MXtIt"):(a="org_page_view--workspaceTileTitleColorForLightBackground---zSTU",r="org_page_view--secondaryTextColorOnLightBackground--68byE",n="org_page_view--favoriteStarContainerForLightBackground--W9qx7 workspace_page_header--favoriteStarContainerForLightBackground--AKL23"));let w=o.createElement(eV.z6,{entity:l,size:40}),T=(0,r1.oA)(l.memberCount),I=o.createElement("div",{className:ey()(ef.cx.flex.flexRow.itemsCenter.$,r)},o.createElement("span",null,(0,S.tx)("org_view.license_group.member_count",{memberCount:(null==T?void 0:T.data)??"0"}),o.createElement("span",null,"\xa0\xb7\xa0"),(0,S.tx)("org_view.license_group.team_count",{teamCount:i}))),x=o.createElement(lY.r,{setFavorite:b,favoriteType:z.bk.WORKSPACE,resourceId:l.id,size:lY.m.MEDIUM,containerStyle:ey()("org_page_view--favoriteStarContainer--GKbng button_styles--button--h219I",n),noHoverState:!0,orgId:m,parentBackgroundColor:E}),N=l.orgAccess===z.bU.SECRET?o.createElement("div",{className:ef.cx.ml4.$,"data-tooltip-type":eB.Ib.TEXT,"data-tooltip":(0,S.t)("workspace_table.secret_workspace_lock_tooltip"),"data-tooltip-subtext":(0,S.t)("workspace_table.secret_workspace_lock_tooltip_subtext"),"data-tooltip-timeout-delay":500,"data-tooltip-max-width":300},o.createElement(re.In,{icon:"lock-16"})):null;return o.createElement(o3.a,{backgroundColor:E,description:v,descriptionClassName:r,name:o.createElement("span",{className:a},l.name),titleSubtitleRight:N,headerLeft:w,footerLeft:I,headerRight:x,onClick:e=>{2===e.detail||g.Ay.mobile||g.Ay.tablet?y():1===e.detail&&d()},canView:!0,onMouseOver:()=>{_(!0)},onMouseOut:()=>{_(!1)},isCardActive:u||c,isSelected:c})}function IE(e){let{unassignedTeams:t,isSelected:a,onSelect:r}=e,[n,l]=o.useState(!1),i=(0,s.wA)(),c=()=>{i(L.kg({clickedResourceType:"workspace"})),i(A.$T({view:"workspace",subView:nE.V0.DIRECTORY,workspaceId:null,selectedTab:nE.dN.TEAMS}))},d=(0,S.tx)("org_view.license_group.unassigned_tile.name"),m=o.createElement(eV.md,{teams:t,size:40,isHovered:n}),u=o.createElement("span",null,"\xa0"),_=(0,S.tx)("org_view.license_group.unassigned_tile.description",{teamCount:t.length});return o.createElement(o3.a,{name:d,headerLeft:m,headerRight:u,footerLeft:_,onClick:e=>{2===e.detail||g.Ay.mobile||g.Ay.tablet?c():1===e.detail&&r()},canView:!0,onMouseOver:()=>{l(!0)},onMouseOut:()=>{l(!1)},isCardActive:n||a,isSelected:a})}function Iv(){var e,t;let[a,r]=o.useState(null),n=(0,s.wA)(),l=(0,j.FC)(),i=(0,s.d4)(e=>e.currentUserOrgId),c=(0,rv.sZ)(),d=(0,G.Au)(i),{canCreateTeam:m}=(0,G.l6)(c,void 0),u=(0,rr.Rs)(rl.bUn,{orgId:i}),_="loaded"!==u.status,p=(null==(t=null==(e=u.data)?void 0:e.org)?void 0:t.workspaces)??[],f=_?[]:[...p],g=(0,aJ.md)(oZ.wT),E="loaded"!==g.status,{workspaceTeamCounts:v,unassignedTeams:h}=o.useMemo(()=>{let e=(g.data||[]).filter(e=>(0,se.dP)(e,l,i));return{workspaceTeamCounts:(0,lx.ZM)(e),unassignedTeams:e.filter(e=>null===e.workspace_id||void 0===e.workspace_id)}},[l,i,g]);(0,a2.KQ)(f,"name");let y=f.find(e=>e.id===d.data),b=f.map(e=>{if(e.id!==(null==y?void 0:y.id))return o.createElement(Ig,{key:e.id,workspace:e,teamCount:v[e.id]??0,isSelected:(null==a?void 0:a.type)==="workspace"&&a.workspaceId===e.id,onSelect:()=>{r({type:"workspace",workspaceId:e.id})}})});if(h.length>0&&b.push(o.createElement(IE,{key:"unassigned",unassignedTeams:h,isSelected:(null==a?void 0:a.type)==="unassigned-teams",onSelect:()=>{r({type:"unassigned-teams"})}})),_||E)return o.createElement(o0.X,{isLoading:!0});let w=y&&o.createElement(o.Fragment,null,o.createElement("div",{className:ef.cx.pl32.$},o.createElement(ev.E,{color:"secondary",fontSize:11},(0,S.tx)("org_view.your_workspace"))),o.createElement(o0.X,{emptyView:o.createElement(o.Fragment,null),tileSize:o0.o.Medium},o.createElement(Ig,{key:y.id,workspace:y,teamCount:v[y.id]??0,isMainWorkspace:!0,isSelected:(null==a?void 0:a.type)==="workspace"&&a.workspaceId===y.id,onSelect:()=>{r({type:"workspace",workspaceId:y.id})}})));return o.createElement(o.Fragment,null,w,y&&o.createElement("div",{className:ef.cx.pl32.$},o.createElement(ev.E,{color:"secondary",fontSize:11},(0,S.tx)("org_view.other_workspaces"))),o.createElement(o0.X,{emptyView:o.createElement(o2,{onCreateTeam:m?()=>{n(R.to({type:r6.Uc,data:{}}))}:void 0}),tileSize:o0.o.Medium},b))}let Ih=(e,t)=>({canMemberOrg:(0,q.canMemberOrg)(e.currentUserOrgId,(0,q.getPermissionsState)(e)),org:e.orgById[t],isEnterpriseOrgDirectoryEnabled:(0,rZ.QT)(e),currentOrgUser:e.user&&e.currentUserOrgId?e.orgUsersByOrgId[e.currentUserOrgId][e.user.id]:null});function Iy(e){let{canMemberOrg:t,org:a,isEnterpriseOrgDirectoryEnabled:r,currentOrgUser:n}=(0,iX.R)(t=>Ih(t,e.orgId)),l=(0,s.wA)();o.useEffect(()=>{t&&(l(o7.Jt({includeMemberCount:!0,includeTopMembers:!1,includeProjectCount:!0})),l(T8.Pg({orgId:e.orgId})))},[t,e.orgId,l]);let i=null;switch(e.selectedTab){case r9.X.WIDGETS:i=o.createElement(Ip,null);break;case r9.X.PLUGINS:i=o.createElement(Id,null);break;case r9.X.YOUR_TEAMS:i=o.createElement(sl,{onlyJoinedTeams:!0});break;case r9.X.HOME:case r9.X.FONTS:case r9.X.LIBRARIES:i=r?o.createElement(Iv,null):o.createElement(sl,null)}let c=n&&n.permission===z._D.GUEST,d=null;d=c?o.createElement(In,{org:a}):r?o.createElement(Ia,{org:a}):o.createElement(Ir,{org:a});let m=o.createElement(Iu,{selectedTab:e.selectedTab});return o.createElement(so.r,{banner:o.createElement(T3,null),viewbar:m,content:i,metaContent:d})}var Ib=a(200482);let Iw=(0,iJ.eU)(!1);function IT(){let e=(0,c.lH)(),t=(0,aJ.md)(c.Bb),a=(0,aJ.md)(Iw),r=(0,fV.Xr)(Iw);if(!(0,_.kc)().chrome_os_app_install_button||!g.Ay.chromeos||!g.Ay.chrome||e||!t)return null;let n=async()=>{r(!0),"dismissed"===(await t.prompt()).outcome&&r(!1)};return o.createElement(sm.K,{action:{kind:sm.A.CUSTOM,key:sT.D.ADD_TO_CHROMEBOOK,element:o.createElement("button",{onClick:n,className:ey()(TK.AS,a&&TK.Xn),tabIndex:0},o.createElement(es.B,{className:TK.He,svg:Ib.A}),(0,S.tx)("file_browser.tool_bar.add_to_chromebook"))}})}var II=a(58716);function Ix(){return d.eD||!(0,_.kc)().desktop_get_app_navbar?null:o.createElement(sm.K,{action:{kind:sm.A.CUSTOM,key:sT.D.GET_DESKTOP_APP,element:o.createElement("button",{onClick:()=>{m.Ay.redirect(`/download/desktop/${g.Ay.mac?"mac":"win"}`,"_blank")},"data-onboarding-key":"get_desktop_app",className:TK.Fu},o.createElement(es.B,{className:TK.Kk,svg:II.A}),(0,S.tx)("banner.desktop_download_button"))}})}var IN=a(831045);function IC(e){let t=(0,IN.lX)(),a=(0,$.TA)();if(!t)return null;if(0===t.length){let t=e.dropdownType===IN.$c.DESIGN?ws:e.dropdownType===IN.$c.SLIDES?hk:wd;return o.createElement(t,{key:`new${e.dropdownType}Action`,from:e.from})}let r=e.dropdownType===IN.$c.DESIGN?"New File Creation Dropdown Design":e.dropdownType===IN.$c.WHITEBOARD?"New File Creation Dropdown FigJam":"New File Creation Dropdown Slides",n=e.dropdownType===IN.$c.DESIGN?(0,S.t)("file_browser.tool_bar.new_design_file"):e.dropdownType===IN.$c.WHITEBOARD?(0,S.t)("file_browser.tool_bar.new_figjam_board"):(0,S.t)("file_browser.tool_bar.new_slide_deck");return o.createElement(O.fu,{name:r,properties:{userId:a,numberOfEditableProjects:t.length,fileCreationDefaultsDropdownType:e.dropdownType}},o.createElement(IN.X8,{buttonText:n,dataTestId:e.dataTestId,teamsWithEditableProjects:t,currentDropdownType:e.dropdownType,hideOnMobile:!0}))}function IS(){let e=(0,s.wA)(),t=(0,$.Pc)();return o.createElement(sm.K,{action:{kind:sm.A.BUTTON,key:sT.D.VIEW_COMMUNITY_PROFILE,onClick:()=>{e(A.$T({view:"communityHub",subView:"handle",handle:t.community_profile_handle}))},displayText:(0,S.t)("internal_profile.view_community_profile"),styleClass:ef.cx.colorText.$}})}var Ik=a(593803);let IA="banner--bullet--4CyMR",IL="banner--button_group--K5S92",IR="banner--primary_button--LmAJY",ID="banner--secondary_button--1IhyX",IF="banner--svg--yRAMV";var IP=a(693806),IM=a(447020),IO=a(313673);function IB(){var e;let t=(0,s.wA)(),a=!!(0,r3.f)("dismissed_config_2024_virtual_promo_banner"),r=!!(0,r3.f)("dismissed_config_2024_apac_promo_banner"),n=_.tl(),l=n.iso_code||"UNKNOWN",i=null==(e=n.user_data)?void 0:e.locale,c=(0,_.kc)().config_2024_promo_banner&&!a,d=(0,_.kc)().config_2024_apac_promo_banner&&(Ik.uk.includes(l)||"ja"===i)&&!c&&!r,m=()=>{t(P.b({dismissed_config_2024_virtual_promo_banner:!0}))},u=()=>{t(P.b({dismissed_config_2024_apac_promo_banner:!0}))};return d||c?d?o.createElement(O.fu,{name:"Config 2024 APAC Promo Banner",properties:{severity:bn.c.EVENT}},o.createElement("div",{className:"banner--apac_wrapper--z7UfS"},o.createElement("div",{className:"banner--apac_logo_and_title--bABaH"},o.createElement(es.B,{svg:IO.A,className:"banner--apac_logo--hdtfE",svgClassName:IF}),o.createElement("h2",{className:"banner--apac_title--frGn-"},o.createElement(es.B,{svg:IP.A,svgClassName:IF,className:[IA,"banner--apac_bullet--gFG2L"].join(" ")}),(0,S.tx)("banner.config_2024_apac_promo.title"))),o.createElement(I.e2,{className:IL},o.createElement(I.vd,{className:IR,onClick:()=>{(0,cg.FJ)("https://configapac.splashthat.com/PROD","_blank")}},(0,S.tx)("banner.config_2024_promo.primary_cta")),o.createElement(I.tM,{className:ID,onClick:()=>u()},(0,S.tx)("banner.config_2024_promo.secondary_cta"))))):o.createElement(O.fu,{name:"Config 2024 April Promo Banner",properties:{severity:bn.c.EVENT}},o.createElement("div",{className:"banner--wrapper--T0A6D"},o.createElement(es.B,{svg:IO.A,className:"banner--logo--6Aw6U",svgClassName:IF}),o.createElement("div",{className:"banner--copy_and_ctas--WJLUr"},o.createElement("h2",{className:"banner--title--4J6US"},o.createElement(es.B,{svg:IM.A,svgClassName:IF,className:IA}),(0,S.tx)("banner.config_2024_virtual_promo.title")),o.createElement(I.e2,{className:IL},o.createElement(I.vd,{className:IR,onClick:()=>{(0,cg.FJ)("https://config.figma.com/registration#selectVirtualTicket?utm_source=figma&utm_medium=prod&utm_campaign=virtual","_blank")}},(0,S.tx)("banner.config_2024_virtual_promo.primary_cta")),o.createElement(I.tM,{className:ID,onClick:()=>m()},(0,S.tx)("banner.config_2024_promo.secondary_cta")))))):null}var IU=a(791435);let IV=new class{constructor(){this.SharerFilterOptionsSchemaValidator=(0,dE.vh)(),this.PlanFilterOptionsSchemaValidator=(0,dE.vh)()}getSharerFilterOptions(e){return this.SharerFilterOptionsSchemaValidator.validate(async({xr:t})=>await t.get(`/api/shared_with_you/sharer_filter_options?resource_type[]=${e.resource_type}`))}getPlanFilterOptions(e){return this.PlanFilterOptionsSchemaValidator.validate(async({xr:t})=>await t.get(`/api/shared_with_you/plan_filter_options?resource_type[]=${e.resource_type}`))}};function IH(){return{"":{label:(0,S.t)("shared_with_you.filters.all_organizations")}}}let IW=lI.M4.Query({fetch:async e=>{let t=await IV.getPlanFilterOptions({resource_type:e}),a={};return t.data.meta.plan_filters.forEach(e=>{let t={label:e.label,plan_id:e.plan_id,plan_type:e.plan_type};e.plan_id&&(a[e.plan_id]=t)}),{...IH(),...a}}});function Ij(e){let t=e.join("&resource_type[]="),[a]=(0,lI.IT)(IW(t));return a.data||IH()}let I$={"":"Anyone"};function IG(e){let[t,a]=(0,o.useState)(I$),r=e.join("&resource_type[]=");return(0,o.useEffect)(()=>{IV.getSharerFilterOptions({resource_type:r}).then(({data:e})=>{a(e.meta.shared_by_filters.reduce((e,{user_id:t,label:a})=>({...e,[t]:a}),{...I$}))})},[r]),t}var Iz=a(307524),IY=a(388120);let IK=(e,t)=>`${t}:${e}`;function IQ(e){let t=(0,rr.Rs)(rl.ox,{resourceTypes:e.resourceTypes,firstPageSize:30,sortOrder:e.sortOrder,cursorColumn:e.sortKey,sharedBy:e.sharedBy||null,planId:e.planId||null,planType:e.planType||null,fileType:e.fileType||null,orgDeletedDrafts:e.orgDeletedDrafts||null}),a=(0,o.useMemo)(()=>({fetchNextPage:()=>{"loaded"===t.status&&t.data.sharedWithYouResources.hasNextPage()&&t.data.sharedWithYouResources.loadNext(30)}}),[t]),r="loaded"===t.status&&t.data.sharedWithYouResources.isLoadingNextPage;return[{data:(0,o.useMemo)(()=>"loaded"!==t.status?{}:t.data.sharedWithYouResources.reduce((e,t)=>{var a;if(t.sharedWithYouFile){let a=function(e){if(!e||!e.file)return null;let{file:t,...a}=e,r=(0,lT.V1)({...t,...a,edit_url:`${window.location.origin}/file/${t.key}/${(0,d8.sy)(t.name||"")}`,client_meta:t.checkpointClientMeta}),n=(0,lT.V1)({type:lh.nb.FILE,file:r},{filePerms:(0,ls.ru)(t)});return{file:r,tile:n}}(t.sharedWithYouFile);if(!a)return e;e[IK(t.id,"file")]={resourceKey:IK(t.id,"file"),tile:a.tile,subscribed:!0}}else if(t.sharedWithYouFolder){let{folder:r,...n}=t.sharedWithYouFolder;if(null==r)return e;let l=(0,lT.V1)({...r,...n},{created_at:r.createdAt.toString(),updated_at:r.updatedAt.toString(),deleted_at:(null==(a=r.deletedAt)?void 0:a.toString())||null}),i=(0,lT.V1)({type:lh.nb.PROJECT,folder:l}),o=IK(t.id,"folder");e[o]={resourceKey:o,tile:i,subscribed:!0}}else if(t.sharedWithYouRepo){let a=function(e){var t;let{repo:a,...r}=e;if(null===a)return null;let{branches:n,...l}=a,i=(null==(t=null==n?void 0:n.filter(e=>null!=e))?void 0:t.map(e=>(0,lT.V1)({...e,edit_url:e?`${window.location.origin}/file/${e.key}/${(0,d8.sy)(e.name||"")}`:"",client_meta:e.checkpointClientMeta})))??[],o=(0,lT.V1)({...l,...r}),s=(0,lT.V1)({type:lh.nb.REPO,repo:o,branches:i,selectedBranchKey:""},{repoPerms:(0,IY.zh)(a)});return{repo:o,branches:i,tile:s}}(t.sharedWithYouRepo);if(!a)return e;let r=IK(t.id,"file_repo");e[r]={resourceKey:r,tile:a.tile,subscribed:!0}}else if(t.sharedWithYouPrototype){let a=function(e){let{prototype:t,...a}=e;if(null==t)return null;let r=(0,lT.V1)({...t,...a});return(0,lT.V1)({type:lh.nb.PROTOTYPE,prototype:r},{prototypePerms:(0,Iz.R)(t)})}(t.sharedWithYouPrototype);if(!a)return e;let r=IK(t.id,"prototype");e[r]={resourceKey:r,tile:a,subscribed:!0}}return e},{}),[t]),errors:t.errors,status:t.status,isFetchingNextPage:r},a]}function Iq(e){var t,a;let r=(0,ry._6)(),n=(0,s.d4)(e=>e.tileSortFilterStateByView),l="recentsAndSharing"===r.view?n.recentsAndSharing.sharedFiles:n.sharedWithYou,i=IG(["file","file_repo","prototype"]),c=Ij(["file","file_repo","prototype"]),d={tileSortFilterConfig:l,sortKeys:[cs.C0.SHARED_AT]},m=e=>{switch(e){case cs.t2.DESIGN:return"design";case cs.t2.FIGJAM:return"whiteboard";case cs.t2.PROTOTYPE:return"prototype";case cs.t2.SITES:return"sites";case cs.t2.SLIDES:return"slides";case cs.t2.ANY:return null;default:(0,el.xb)(e)}},[u,{fetchNextPage:_}]=IQ(o.useMemo(()=>{var e,t;return{resourceTypes:["file","file_repo","prototype"],sharedBy:l.filters.sharedBy??"",planId:(null==(e=l.filters.plan)?void 0:e.planId)??"",planType:(null==(t=l.filters.plan)?void 0:t.planType)??"",fileType:m(l.filters.fileType)??"",sortOrder:l.sort.dir===cs.ue.ASC?"asc":"desc",sortKey:(0,cs.De)(l.sort.key)??"shared_at"}},[l.filters.sharedBy,null==(t=l.filters.plan)?void 0:t.planId,null==(a=l.filters.plan)?void 0:a.planType,l.filters.fileType,l.sort.dir,l.sort.key])),p=(0,o.useMemo)(()=>u.data??{},[u.data]),f=(0,o.useMemo)(()=>Object.values(p).map(e=>{let t=e.tile;return(t.type===lh.nb.FILE||t.type===lh.nb.REPO)&&(t.renameCallbacks={onStopRename:e=>{t.type===lh.nb.FILE?t.file.name=e??t.file.name:t.type===lh.nb.REPO&&(t.repo.name=e??t.repo.name)}}),t}),[p]),{trackPerformanceEvent:g}=(0,IU.S)("swy_files_pagination_performance","livegraph");(0,o.useEffect)(()=>{g("fetch_end")},[g,f.length]),(0,o.useEffect)(()=>{"errors"===u.status&&g("fetch_error",{errors:JSON.stringify(u.errors??{})})},[g,u.status,u.errors]),(0,o.useEffect)(()=>(g("fetch_start"),()=>{g("fetch_cancel")}),[g]);let E=(0,o.useCallback)(()=>{u.isFetchingNextPage||(g("fetch_next"),_())},[u.isFetchingNextPage,_,g]);return o.createElement(r2.A,{loadingElementId:"loading-content-pane",delay:250,loaded:"loaded"===u.status,loadingElementClassName:ef.cx.pr32.$},o.createElement(yb.B,{onShouldFetchNextPage:E},o.createElement(y4,{tiles:f,tileActions:{showInFolder:!0,open:!0,openNewTab:!0,restoreFromVersion:!0,rename:!0,share:!0,copyLink:!0,duplicate:!0,delete:!0,removeFromRecents:!1,createBranch:!0,publishOrgTemplate:!0,moveFile:!0,pinToWorkspace:!0},chunkSize:f.length,sortFilterOptions:d,newFileTile:!1,emptyStateText:u.isFetchingNextPage?"":(0,S.t)("shared_with_you.no_items"),sharedWithYouFilters:{sharer:i,plan:c,fileType:!0},hideSorter:!0,currentPlanFilter:l.filters.plan,currentSharedByFilter:l.filters.sharedBy,eligibleForLockedStateRedesign:e.eligibleForLockedStateRedesign})))}var IX=a(418993),IJ=a(396226),IZ=a(300874),I0=a(129531);function I1(e,t,a){return e&&t&&!(0,K.w5)(e)&&"recentsAndSharing"!==a}function I2({canEditTeam:e}){let t=(0,s.wA)(),a=(0,r5.ol)(),r=(0,ry.z3)(),n=(0,E.I7)("exp_fbg_project_limit_upsell"),l=rp.h.useTrackingContext({trigger:J.b.FOLDER_UPSELL_CARD});if(!I1(a,e,r)||!n.getConfig().getValue("show_upsell",!1))return null;let i=o.createElement(I.Us,{className:ef.cx.noWrap.cursorDefault.$,onClick:e=>{e.stopPropagation(),t((0,R.to)({type:a9.V,data:{upsellSource:J.b.FOLDER_UPSELL_CARD,teamId:null==a?void 0:a.id}}))},trackingProperties:{trackingDescriptor:ew.c.PROFESSIONAL_PLAN,...l},trusted:!0},(0,S.tx)("team_view.folder_upsell.professional_plan"));return o.createElement(O.fu,{name:"Folder Upsell Card",properties:l},o.createElement(O.$z,{className:ey()(ef.cx.flex.alignLeft.p24.$,"folder_upsell--card--m7-Lh"),onClick:()=>{t((0,R.to)({type:I0.DV,data:{team:a,resource:IZ.vL.FOLDER,action:lC.ZN.CREATE_FOLDER,currentPlan:IJ.F.Plan.STARTER,upsellPlan:IJ.F.Plan.PRO,editorType:null,upsellSource:J.b.FOLDER_UPSELL_CARD}}))},trackingProperties:{trackingDescriptor:ew.c.FOLDER_UPSELL_CARD},dataTestId:"folder_upsell_button"},o.createElement("div",{style:ea.sx.add({paddingBottom:"85%"}).$})," ",o.createElement(eg.Y,{direction:"vertical",spacing:0},o.createElement("div",{className:ef.cx.relative.wFull.hFull.$},o.createElement("div",{style:ea.sx.absolute.topHalf.leftHalf.add({transform:"translate(-50%, -50%)"}).$},o.createElement(eg.Y,{cornerRadius:20,backgroundColor:"brand",height:40,width:40},o.createElement(re.In,{icon:"new-40",fill:"onbrand"}))),o.createElement(eg.Y,{direction:"vertical",spacing:"12px"},o.createElement(eg.Y,{direction:"horizontal",spacing:"12px"},o.createElement(eg.Y,{cornerRadius:8,backgroundColor:"default"}),o.createElement(eg.Y,{cornerRadius:8,backgroundColor:"default"})),o.createElement(eg.Y,{direction:"horizontal",spacing:"12px"},o.createElement(eg.Y,{cornerRadius:8,backgroundColor:"default"}),o.createElement(eg.Y,{cornerRadius:8,backgroundColor:"default"})))),o.createElement(eg.Y,{direction:"vertical",padding:{top:16},spacing:0,height:"hug-contents"},o.createElement(ev.E,{fontSize:13,fontWeight:"medium"},(0,S.tx)("team_view.folder_upsell.upgrade_to_create_more_projects")),o.createElement(ev.E,{fontSize:11,color:"secondary"},(0,S.tx)("team_view.folder_upsell.get_unlimited_everything",{professionalPlanLink:i}))))))}function I4({canEditTeam:e}){let t=(0,s.wA)(),a=(0,r5.ol)(),r=(0,ry.z3)(),n=rp.h.useTrackingContext({trigger:J.b.FOLDER_UPSELL_CARD}),l=(0,E.I7)("exp_fbg_project_limit_upsell");if(!I1(a,e,r)||!l.getConfig().getValue("show_upsell",!1))return null;let i=o.createElement(I.Us,{className:ef.cx.noWrap.cursorDefault.$,onClick:e=>{e.stopPropagation(),t((0,R.to)({type:a9.V,data:{upsellSource:J.b.FOLDER_UPSELL_CARD,teamId:null==a?void 0:a.id}}))},trackingProperties:{trackingDescriptor:ew.c.PROFESSIONAL_PLAN,...n},trusted:!0},(0,S.tx)("team_view.folder_upsell.professional_plan"));return o.createElement(O.fu,{name:"Folder Upsell List",properties:n},o.createElement("div",{className:ef.cx.flex.mt16.bRadius8.b1.colorBorder.$,style:ea.sx.add({borderStyle:"dashed",marginLeft:"-16px"}).$},o.createElement(O.$z,{className:ey()(ef.cx.flex.alignLeft.gap12.py24.px16.bRadius8.wFull.$,"folder_upsell--list--2Higk"),onClick:()=>{t((0,R.to)({type:I0.DV,data:{team:a,resource:IZ.vL.FOLDER,action:lC.ZN.CREATE_FOLDER,currentPlan:IJ.F.Plan.STARTER,upsellPlan:IJ.F.Plan.PRO,editorType:null,upsellSource:J.b.FOLDER_UPSELL_CARD}}))},trackingProperties:{trackingDescriptor:ew.c.FOLDER_UPSELL_CARD},dataTestId:"folder_upsell_button"},o.createElement("div",{className:ey()(ef.cx.relative.flexShrink0.h40.w64.py4.px8.colorBgSecondary.bRadius4.$,"folder_upsell--listCard--qnkxf")},o.createElement("div",{style:ea.sx.absolute.topHalf.leftHalf.add({transform:"translate(-50%, -50%)"}).$},o.createElement(eg.Y,{cornerRadius:12,backgroundColor:"brand",height:24,width:24,horizontalAlignItems:"center",verticalAlignItems:"center"},o.createElement(re.In,{icon:"plus-32",fill:"onbrand"}))),o.createElement(eg.Y,{direction:"vertical",spacing:4},o.createElement(eg.Y,{direction:"horizontal",spacing:4},o.createElement(eg.Y,{cornerRadius:2,backgroundColor:"default"}),o.createElement(eg.Y,{cornerRadius:2,backgroundColor:"default"})),o.createElement(eg.Y,{direction:"horizontal",spacing:4},o.createElement(eg.Y,{cornerRadius:2,backgroundColor:"default"}),o.createElement(eg.Y,{cornerRadius:2,backgroundColor:"default"})))),o.createElement(eg.Y,{direction:"vertical",spacing:0},o.createElement(ev.E,{fontSize:13},(0,S.tx)("team_view.folder_upsell.upgrade_to_create_more_projects")),o.createElement(ev.E,{fontSize:11,color:"secondary"},(0,S.tx)("team_view.folder_upsell.get_unlimited_everything",{professionalPlanLink:i}))))))}var I8=a(818466),I3=a(489348),I5=a(167480),I9=a(750486);let I6="folder_list_view--emptyState--8vmgw tiles_view--emptyState--jfzsE text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos11--2LvXf text--_fontBase--QdLsd",I7="project-card";function xe(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.dropdownShown),r=(0,s.d4)(e=>e.folders),n=(0,s.d4)(e=>e.currentUserOrgId),l=(0,nK.S)(),i=(0,s.d4)(e=>e.user),c=(0,j.FC)(),d=(0,rZ.wA)(c),m=e.folderList.map(e=>({...e,canView:(0,q.canViewFolder_DEPRECATED)(e.id,c),hideSubtitle:!!(d&&!(0,q.canMemberOrg)(d.id,c))})),u=()=>e.viewMode===cs.XU.LIST,_=!!e.teamId&&!!e.eligibleForLockedStateRedesign,p=e.teamId?{teamId:e.teamId,isLockedTeam:!!e.eligibleForLockedStateRedesign}:void 0,f=l?(0,a8.He)(a):void 0,g=(t,a)=>{let{hideSubtitle:r,...n}=t,l=!r&&e.showTeamNameOrAuthor;return o.createElement(I3.Z,{key:t.id,showTeamNameOrAuthor:l,folder:n,dataOnboardingKey:a,isSharerInfoIncluded:e.isSharerInfoIncluded,currentPlanFilter:e.currentPlanFilter,checksForViewOnlyLabels:p})};return 0===m.length?o.createElement(o.Fragment,null,e.onCreateNewFolder&&!(0,rb.R$)(i,n)?o.createElement("div",{className:I6},e.canEditTeamContents?o.createElement(o.Fragment,null,o.createElement("div",{className:"folder_list_view--emptyTitle--t1u0a tiles_view--emptyTitle--3Vwmu"},(0,S.tx)("team_view.folder_empty_view.no_projects_yet")),(0,S.tx)("team_view.folder_empty_view.projects_help_you_organize"),o.createElement(I.cw,{className:"folder_list_view--emptyButton--g-yAA tiles_view--emptyButton--oAaGe",onClick:e.onCreateNewFolder},o.createElement(es.B,{svg:ne.A,className:"folder_list_view--newProjectIcon--O3wnv tiles_view--newFileIcon--LR1sm"}),(0,S.tx)("team_view.folder_empty_view.new_project"))):(0,S.tx)("team_view.folder_empty_view.this_team_does_not_have_any_projects_yet")):null!=e.emptyStateText?o.createElement("div",{className:ef.cx.flex.gap32.$},o.createElement("div",{className:I6},e.emptyStateText),_&&o.createElement(yV.R,{teamId:e.teamId,canEditTeam:!!e.canEditTeamContents})):(0,S.tx)("team_view.folder_empty_view.no_projects")):o.createElement(o.Fragment,null,(()=>{let t=m.length>=2?1:1===m.length?0:void 0,a=u()+m.map(e=>e.id).join(",");return u()?o.createElement("div",{className:ef.cx.flex.gap36.$},o.createElement("div",null,o.createElement(I8.u,{folderList:m,onChangeSortOptions:e.onChangeSortOptions,dataOnboardingKey:I7,dataOnboardingKeyIndex:t,checksForViewOnlyLabels:p}),!_&&o.createElement(I4,{canEditTeam:e.canEditTeamContents})),_&&o.createElement(yV.R,{teamId:e.teamId,canEditTeam:!!e.canEditTeamContents})):o.createElement("div",{className:ef.cx.flex.gap36.wFull.$},o.createElement(IX.o,{chunkSize:e.chunkSize??30,className:u()?"folder_list_view--foldersContainerList--JrOTO":"folder_list_view--foldersContainerGrid--TRHq7",listKey:a},o.createElement(o0.X,{containerClassName:"folder_list_view--tileGrid--hEswM",tileSize:o0.o.Medium,emptyView:o.createElement(o.Fragment,null)},m.map((e,a)=>a===t?g(e,I7):g(e,"")),!_&&o.createElement(I2,{canEditTeam:e.canEditTeamContents}))),_&&o.createElement(yV.R,{teamId:e.teamId,canEditTeam:!!e.canEditTeamContents}))})(),f&&o.createElement(iw.p,{folder:f,onRenameClick:()=>{if(!f||!f.canEdit)return;let e=r[null==f?void 0:f.id];e&&(t((0,rJ.WC)()),t((0,R.to)({type:(0,TA.y)(),data:{folder:e}})))}}))}let xt=[lN.Dq.NAME,lN.Dq.TEAM,lN.Dq.OWNER,lN.Dq.LAST_MODIFIED],xa=[lN.Dq.SHARED_AT],xr=[lN.Dq.NAME,lN.Dq.TEAM,lN.Dq.OWNER,lN.Dq.LAST_MODIFIED,lN.Dq.SHARED_AT],xn=[lN.Dq.NAME,lN.Dq.LAST_MODIFIED],xl={[lN.Dq.NAME]:cs.ue.ASC,[lN.Dq.TEAM]:cs.ue.ASC,[lN.Dq.OWNER]:cs.ue.ASC,[lN.Dq.LAST_MODIFIED]:cs.ue.DESC,[lN.Dq.SHARED_AT]:cs.ue.DESC},xi={[cs.XU.GRID]:{[lN.Dq.NAME]:(0,S.tx)("tile.sort_filter.sort_alphabetical"),[lN.Dq.TEAM]:(0,S.tx)("tile.sort_filter.owner"),[lN.Dq.OWNER]:(0,S.tx)("tile.sort_filter.team"),[lN.Dq.LAST_MODIFIED]:(0,S.tx)("tile.sort_filter.sort_last_modified"),[lN.Dq.SHARED_AT]:(0,S.tx)("tile.sort_filter.date_shared"),[lN.Dq.CREATED_AT]:(0,S.tx)("tile.sort_filter.sort_date_created")},[cs.XU.LIST]:{[lN.Dq.NAME]:(0,S.tx)("tile.sort_filter.sort_alphabetical"),[lN.Dq.TEAM]:(0,S.tx)("tile.sort_filter.owner"),[lN.Dq.OWNER]:(0,S.tx)("tile.sort_filter.team"),[lN.Dq.LAST_MODIFIED]:(0,S.tx)("tile.sort_filter.sort_last_modified"),[lN.Dq.SHARED_AT]:(0,S.tx)("tile.sort_filter.date_shared"),[lN.Dq.CREATED_AT]:(0,S.tx)("tile.sort_filter.sort_date_created")}},xo={viewMode:cs.XU.GRID,sortMode:{sortKey:lN.Dq.LAST_MODIFIED,sortDesc:!0}},xs={...xo,sortMode:{sortKey:lN.Dq.SHARED_AT,sortDesc:!0}},xc={name:E6.f.byProperty("name",E6.f.LEXICOGRAPHICALLY),lastModified:E6.f.byProperty("folderLastUpdated"),team:E6.f.byProperty("folderTeamName",E6.f.LEXICOGRAPHICALLY),owner:E6.f.byProperty("folderOwnerName",E6.f.LEXICOGRAPHICALLY),sharedAt:E6.f.byProperty("folderSharedAt"),createdAt:E6.f.byProperty("created_at")};function xd(e){let{folderList:t,...a}=e,r=(0,s.d4)(e=>e.teams),n=(0,s.d4)(e=>e.roles),l=(0,s.d4)(e=>e.viewBarViewModeOptionByView),i=(0,s.d4)(e=>e.viewBarSortOptionsByView),c=e.isSharerInfoIncluded?xa:xt,d=e.showTeamNameOrAuthor?c:xn,m=e.isSharerInfoIncluded?xs:xo,u=o.useMemo(()=>({viewMode:(0,I9.y2)(e.viewId,l,m.viewMode),sortMode:(0,I9.bV)(e.viewId,{viewBarSortOptionsByView:i},d,m.sortMode)}),[m.sortMode,m.viewMode,e.viewId,d,i,l]),_=(0,s.wA)(),p=t=>{_(A.ZR({viewId:e.viewId,sortMode:{sortKey:t.sortKey,sortDesc:t.sortDesc}}))},f=t=>{_(A.uV({viewId:e.viewId,viewMode:t}))},g=e.isSharerInfoIncluded?"folder_list_view--sharedWithYouFolderColumnHeader--YBKhp folder_list_view--columns--k84Gi":"folder_list_view--allFolderColumnHeader--MGmSg folder_list_view--columns--k84Gi",E=e.showTeamNameOrAuthor?g:"folder_list_view--basicFolderColumnHeader--dZmjY folder_list_view--columns--k84Gi",v="sharedWithYou"===e.selectedView.view,h="recentsAndSharing"===e.selectedView.view,y=!v&&!h,b=o.useMemo(()=>{if("recentsAndSharing"===e.selectedView.view)return e.folderList;let t=xc[u.sortMode.sortKey];if(!t)return e.folderList;let a=u.sortMode.sortDesc?E6.f.reverse(t):t,l=e.folderList.map(e=>({...e,...(0,I5.Z)({teams:r,roles:n},e)}));return l.sort(a),l},[e.selectedView.view,u.sortMode.sortKey,u.sortMode.sortDesc,e.folderList,r,n]);return o.createElement("div",{className:"folder_list_view--tabContentContainer--lHQoT"},v?o.createElement(xm,{sortFilterOptions:e.sortFilterOptions,sharedWithYouFilters:e.sharedWithYouFilters,onChangeViewModeOption:f,viewBarOptions:u}):null,y?o.createElement(oe.fB,{sortKeys:d,listSortKeys:d,initialSortOrders:xl,mobileListSortKeys:d,tabletListSortKeys:d,sortKeyDescriptions:xi,listHeaderClassName:`folder_list_view--listViewHeader--kUvYs text--fontPos13--xW8hS text--_fontBase--QdLsd ${E}`,options:u,onChangeSortOptions:p,onChangeViewModeOption:f,displayColumns:v?xr:d,hideViewModeToggle:v||h}):null,o.createElement(xe,{folderList:b,chunkSize:e.chunkSize,viewMode:u.viewMode,onChangeSortOptions:p,...a}))}function xm(e){let{sortFilterOptions:t,sharedWithYouFilters:a,onChangeViewModeOption:r,viewBarOptions:n}=e,l=(0,s.wA)(),i=(0,ry._6)();if("sharedWithYou"!==i.view)return null;if(null==t)return(0,el.KF)(!0,`sortFilterOptions prop is ${t}`),null;let c=o.createElement(oe.$f,{options:t,selectedView:i,dispatch:l}),d=o.createElement("div",{className:ef.cx.flex.alignCenter.$},o.createElement(oe.$c,{initialViewMode:n.viewMode,onViewModeChange:r})),m=o.createElement("div",{className:ef.cx.flex.$},c,d),u=o.createElement(oe.C9,{options:t,selectedView:i,dispatch:l,sharedWithYouFilters:a});return o.createElement(oe.lU,{leftSide:u,rightSide:m})}function xu(){return{[cs.cT.ALL]:(0,S.t)("shared_with_you.filters.org_deleted_drafts.all"),[cs.cT.SHARED]:(0,S.t)("shared_with_you.filters.org_deleted_drafts.shared"),[cs.cT.ORG_DELETED_DRAFTS]:(0,S.t)("shared_with_you.filters.org_deleted_drafts.deleted_user_drafts")}}function x_(e){var t,a;let r=(0,ry._6)(),n=(0,r5.ol)(),l=(0,rr.Rs)(rl.kQI,{id:(null==n?void 0:n.id)||""},{enabled:!!n}),i=(0,s.d4)(e=>e.tileSortFilterStateByView),c="recentsAndSharing"===r.view?i.recentsAndSharing.sharedProjects:i.sharedWithYou,d=IG(["folder"]),m=Ij(["folder"]),u=xu(),p={tileSortFilterConfig:c,sortKeys:[cs.C0.SHARED_AT]},[f,{fetchNextPage:g}]=IQ((0,o.useMemo)(()=>{var e,t;return{resourceTypes:["folder"],sharedBy:c.filters.sharedBy??"",planId:(null==(e=c.filters.plan)?void 0:e.planId)??"",planType:(null==(t=c.filters.plan)?void 0:t.planType)??"",orgDeletedDrafts:(0,_.kc)().org_admin_settings_abandoned_drafts?"":c.filters.orgDeletedDrafts??"",sortOrder:c.sort.dir===cs.ue.ASC?"asc":"desc",sortKey:(0,cs.De)(c.sort.key)??"shared_at"}},[c.filters.sharedBy,null==(t=c.filters.plan)?void 0:t.planId,null==(a=c.filters.plan)?void 0:a.planType,c.filters.orgDeletedDrafts,c.sort.dir,c.sort.key])),E=(0,o.useMemo)(()=>f.data??{},[f.data]),v=(0,o.useMemo)(()=>Object.values(E).map(e=>e.tile).filter(e=>e.type===lh.nb.PROJECT).map(e=>({...e.folder,touched_at:e.folder.updated_at})),[E]),h=(0,o.useMemo)(()=>v.map(e=>e.id),[v]),{trackPerformanceEvent:y}=(0,IU.S)("swy_projects_pagination_performance","livegraph");(0,o.useEffect)(()=>{y("fetch_end")},[y,h.length]),(0,o.useEffect)(()=>{"errors"===f.status&&y("fetch_error",{errors:JSON.stringify(f.errors??{})})},[y,f.status,f.errors]),(0,o.useEffect)(()=>(y("fetch_start"),()=>{y("fetch_cancel")}),[y]);let b=(0,o.useCallback)(()=>{f.isFetchingNextPage||(y("fetch_next"),g())},[f.isFetchingNextPage,g,y]),w="loaded"===l.status&&!!l.data.team&&l.data.team.hasPermission;return o.createElement(r2.A,{loadingElementId:"loading-content-pane",delay:250,loaded:"loaded"===f.status,loadingElementClassName:ef.cx.pr32.$},o.createElement(yb.B,{onShouldFetchNextPage:b},o.createElement(xd,{viewId:"shared-with-you-projects",teamId:n?n.id:void 0,canEditTeamContents:w,folderList:v,chunkSize:v.length,showTeamNameOrAuthor:!1,isSharerInfoIncluded:!0,sharedWithYouFilters:{sharer:d,plan:m,orgDeletedDrafts:u},sortFilterOptions:p,selectedView:r,emptyStateText:f.isFetchingNextPage?"":(0,S.t)("shared_with_you.no_items"),useLGPerms:!0,currentPlanFilter:c.filters.plan,eligibleForLockedStateRedesign:!!n&&e.eligibleForLockedStateRedesign})))}function xp(){let e=(0,s.wA)(),t=(0,r0.vt)(),a=(0,M.Yz)(),r=(0,s.d4)(({orgById:e})=>e),n=(0,s.d4)(({currentUserOrgId:e})=>e),l=(0,rZ.yK)({orgById:r,currentUserOrgId:n}),i=!!(0,s.d4)(e=>e.userFlags).hide_recommended_templates_in_recents,c=(0,s.d4)(e=>{var t;return null==(t=e.user)?void 0:t.drafts_folder_id});if(!c)return null;let d=a(t);return o.createElement(Tr,{folderId:c,newFileFrom:hw.f6.FILE_BROWSER_TOPBAR_RECENTS,disableRecommendedTemplates:l||d,recommendedTemplatesIsOpen:!i,toggleRecommendedTemplates:()=>e(P.b({hide_recommended_templates_in_recents:!i})),showFileCreationShelf:(0,_.kc)().omnicreate_button&&!d})}var xf=a(552963),xg=a(135720),xE=a(435095);let xv=e=>o.createElement("span",{className:"unsubscribe_confirmation_modal--boldText--dNK-D"},e),xh=(0,eU.Ju)(function(e){let t=(0,s.wA)(),a=(0,$.iZ)();return a?o.createElement(oy.u,{tintedModalBackground:!0,headerText:(0,S.t)("interstitial.unsubscribe_success_header")},o.createElement("div",{className:xE.Yg},(0,S.tx)("interstitial.unsubscribe_success_subheader_with_address",{emailName:xv((()=>{switch(e.policyType){case"FileCommentActivity":return(0,S.t)("interstitial.comment_activity_digest");case"TeamCommentActivity":return(0,S.t)("interstitial.team_comment_digest");case"FeedWeeklyDigest":return(0,S.t)("interstitial.feed_weekly_digest");case"WorkspaceActivity":return(0,S.t)("interstitial.workspace_activity");default:(0,el.xb)(e.policyType)}})()),emailAddress:xv(a.email)})),o.createElement(I.nD,{onClick:()=>{t(R.Lo())},className:"unsubscribe_confirmation_modal--button--j6qqT"},(0,S.tx)("interstitial.done")),o.createElement("button",{className:"unsubscribe_confirmation_modal--notificationSettingsButton--vmHlZ interstitial_modal--secondaryText--IC9Gu",onClick:()=>{t((0,R.to)({type:xg.s,data:{tab:xg.c.NOTIFICATIONS}})),t(R.aZ())}},(0,S.tx)("interstitial.open_notifications_settings"))):null},"UNSUBSCRIBE_CONFIRMATION_INTERSTITIAL_MODAL");var xy=a(540193),xb=a(824780);function xw({eligibleForLockedStateRedesign:e}){let t=(0,s.d4)(e=>e.currentUserOrgId),a=(0,xy.ql)(t||null),r=(0,xy.O8)(t||null),n=(0,y3.Rp)(),l=o.useMemo(()=>a.transform(e=>e.map(lh.fA)),[a]),i=o.useMemo(()=>r.transform(e=>e.map(lh.Nu)),[r]),c=(0,s.d4)(e=>e.recentRepos),d=(0,s.d4)(e=>e.selectedBranchKeyByRepoId),m=o.useMemo(()=>c.map(e=>(0,lh.uy)(e,d)),[c,d]),_=o.useMemo(()=>Object.values(n).map(lh.gB),[n]),p=o.useMemo(()=>lc.Qw.merge([l,i],m,_),[_,l,i,m]),f=(0,s.d4)(e=>e.tileSortFilterStateByView),E=o.useMemo(()=>({tileSortFilterConfig:f.recentsAndSharing.recents,sortKeys:[cs.C0.NAME,cs.C0.CREATED_AT,cs.C0.ACCESSED_AT]}),[f]);!function(){let e=(0,s.wA)(),t=(0,ns.a9)();(0,u.h)(()=>{let a=(0,TE.QL)("one_click_upgrade_request_type");(0,TE.EM)("one_click_upgrade_request_type");let r=(0,TE.QL)("upgrade_modal_type")||"";(0,TE.EM)("upgrade_modal_type");let n=(0,TE.QL)("entry_point")||"";(0,TE.EM)("entry_point");let l=(0,eO.px)(a??r);l&&t&&(0,t0.oE)(t,l)&&e((0,R.to)({type:TH.Y,data:{orgId:t.org_id,orgUser:t,licenseType:l,entryPoint:(0,xb.K)(TO.PE,n)??(0,xb.K)(TO.tc,n)??(0,xb.K)(TO.i$,n)??l===eO.oM.DEV_MODE?TO.i$.DowngradeEmail:TO.PE.DEPRECATED_Recents,isOneClickUpgradeRequest:!!a,trackForDowngradeNotificationExperiment:!0}}))})}();let v=o.useMemo(()=>({showInFolder:!0,open:!0,openNewTab:!0,restoreFromVersion:!0,rename:!0,share:!0,copyLink:!0,duplicate:!0,delete:!0,removeFromRecents:!0,createBranch:!0,publishOrgTemplate:!0,moveFile:!0,pinToWorkspace:!0}),[]),h=g.Ay.mobile||g.Ay.tablet?(0,S.t)("file_browser.tool_bar.recently_viewed_empty_state"):"",y="loaded"===p.status;return o.createElement(r2.A,{loadingElementId:"loading-content-pane",loaded:y,loadingElementClassName:ef.cx.pr32.$},o.createElement(y4,{tiles:p.data,tileActions:v,sortFilterOptions:E,newFileTile:!0,emptyStateText:h,hideSorter:!0,eligibleForLockedStateRedesign:e}),o.createElement(ya.cx,null))}var xT=a(601538);let xI="seen_shared_files_onboarding",xx=(0,nL.r1)("seen_account_profile_switcher_onboarding"),xN=(0,nL.r1)(xI);function xC(){let e=(0,aJ.md)(xx),t=(0,aJ.md)(xN),a=(0,nk.e)({overlay:nP.fz8,priority:nR.N.SECONDARY_MODAL},[t,e]);return(0,u.h)(()=>{a.show({canShow:(e,t)=>t&&!e})}),o.createElement(nD.rq,{targetKey:xT.Bh,isShowing:a.isShowing,title:(0,S.tx)("rcs.shared_with_you.shared_files_title"),description:(0,S.tx)("rcs.shared_with_you.shared_files_description",{recents:o.createElement("span",{className:ef.cx.fontBold.$},(0,S.tx)("rcs.shared_with_you.recents"))}),primaryCta:{type:"button",label:(0,S.tx)("rcs.got_it"),onClick:a.complete,ctaTrackingDescriptor:ew.c.DONE},width:350,onClose:a.complete,trackingContextName:"File Browser Shared Files in Recents Overlay",userFlagOnShow:xI})}let xS=e=>{switch(e){case nl.G.RECENTLY_VIEWED:return(0,S.t)("file_browser.recents_and_sharing_view.recent_files_tab_name");case nl.G.SHARED_PROJECTS:return(0,S.t)("file_browser.recents_and_sharing_view.shared_projects_tab_name");case nl.G.SHARED_FILES:return(0,S.t)("file_browser.recents_and_sharing_view.shared_files_tab_name");default:(0,el.xb)(e)}};function xk(e){var t,a,r,n,l,i;let c=(0,$.TA)(),d=(0,s.d4)(e=>e.orgUsersByOrgId),m=o.useMemo(()=>null!==c&&Object.values(d).some(e=>{var t;return(null==(t=e[c])?void 0:t.permission)===z._D.ADMIN}),[c,d])&&!(0,_.kc)().org_admin_settings_abandoned_drafts,u=e.options.tileSortFilterConfig.filters.sharedBy,p=e.options.tileSortFilterConfig.filters.plan;return o.createElement("div",{className:"recents_and_sharing_viewbar--dropdownCollectionContainer--XE-iM"},o.createElement(o.Fragment,null,(null==(t=e.filters)?void 0:t.sharer)&&Object.keys(null==(a=e.filters)?void 0:a.sharer).length>1&&o.createElement(o.Fragment,null,u&&o.createElement(oe.qD,{userId:u}),o.createElement(oe.lI,{config:e.options.tileSortFilterConfig,filterOptions:e.filters.sharer,tab:e.tab})),(null==(r=e.filters)?void 0:r.plan)&&Object.keys(null==(n=e.filters)?void 0:n.plan).length>1&&o.createElement(o.Fragment,null,(null==p?void 0:p.planId)&&o.createElement(oe.lV,{planOption:e.filters.plan[p.planId]}),o.createElement(oe.FU,{config:e.options.tileSortFilterConfig,filterOptions:e.filters.plan,tab:e.tab})),(null==(l=e.filters)?void 0:l.fileType)&&o.createElement(o.Fragment,null,o.createElement(oe.ye,{config:e.options.tileSortFilterConfig,tab:e.tab})),(null==(i=e.filters)?void 0:i.orgDeletedDrafts)&&m&&o.createElement(o.Fragment,null,o.createElement(oe.T3,{config:e.options.tileSortFilterConfig,filterOptions:e.filters.orgDeletedDrafts,tab:e.tab}))))}function xA(e){let t=e.selectedTab,a=(0,s.wA)(),r=(0,ry._6)(),n=(0,s.d4)(e=>e.tileSortFilterStateByView),l=t===nl.G.SHARED_PROJECTS?["folder"]:["file","file_repo","prototype"],i=IG(l),c=function(){var e;let t=(0,$.TA)(),a=(0,s.d4)(e=>e.authedUsers);return((t?null==(e=a.byId[t])?void 0:e.plans:[])??[]).map(e=>({label:e.name,plan_id:e.plan_id,plan_type:e.is_org?"org":"team"})).reduce((e,t)=>({...e,[`${t.plan_id}`]:t}),{...IH()})}(),d=Ij(l),m=xu(),u={sharer:t!==nl.G.RECENTLY_VIEWED?i:void 0,plan:t===nl.G.RECENTLY_VIEWED?c:d,fileType:t!==nl.G.SHARED_PROJECTS,orgDeletedDrafts:t===nl.G.SHARED_PROJECTS?m:void 0},_=o.useMemo(()=>{let e;switch(t){case nl.G.RECENTLY_VIEWED:e=n.recentsAndSharing.recents;break;case nl.G.SHARED_FILES:e=n.recentsAndSharing.sharedFiles;break;case nl.G.SHARED_PROJECTS:e=n.recentsAndSharing.sharedProjects;break;default:(0,el.xb)(t)}return{tileSortFilterConfig:e,sortKeys:nl.o[t]}},[t,n]),p=e=>{e===nl.G.SHARED_FILES?(0,tK.sx)("file_browser_shared_files"):e===nl.G.SHARED_PROJECTS&&(0,tK.sx)("file_browser_shared_projects"),a(A.$T({view:"recentsAndSharing",tab:e}))},f=e=>{(0,tK.sx)("file view toggle",{viewType:e===cs.XU.GRID?"grid":"list"}),Object.keys(nl.G).map(t=>{a(A.JF({selectedView:r,config:{..._.tileSortFilterConfig,viewMode:e},tab:nl.G[t]}))},a(A.uV({viewId:"shared-with-you-projects",viewMode:e})))},g=o.createElement("div",{className:ef.cx.flex.alignCenter.$},o.createElement(oe.$c,{initialViewMode:_.tileSortFilterConfig.viewMode,onViewModeChange:f})),E=o.createElement(oe.mc,{options:_,selectedView:r,dispatch:a,tab:t}),v=o.createElement("div",{className:ef.cx.flex.$,key:"sortWithViewOptions"},E,g),h=o.createElement(xk,{options:_,filters:u,tab:t,key:"recentsAndSharingTileFilters"}),y=o.createElement(oe.IB,{dropdownKey:"recents-and-sharing-sort-filter-mobile-dropdown",sortFilterOptions:_,filters:u,onViewModeChange:f,tab:t}),b=Object.keys(nl.G).map(t=>{let a="SHARED_FILES"===t?xT.Bh:"";return o.createElement(bP.r,{tab:nl.G[t],onClick:p,isSelected:e.selectedTab===nl.G[t],tabName:xS(nl.G[t]),key:t,dataOnboardingKey:a})});return o.createElement(o.Fragment,null,o.createElement(gG.p,null,o.createElement(xC,null)),o.createElement(oe.g2,{leftSide:o.createElement(bP.f,{tabs:b}),rightSide:[h,v],rightSideMobile:y}))}function xL(e){switch(e){case ee.bb.ACCOUNT:return xg.c.ACCOUNT;case ee.bb.COMMUNITY:return xg.c.COMMUNITY;case ee.bb.NOTIFICATIONS:return xg.c.NOTIFICATIONS}}function xR(e){let t=(0,s.wA)(),a=(0,M.Yz)(),r=(0,r0.vt)(),n=bN({checks:{isEligibleForLockedRedesign:a}}),{selectedTab:l,accountModalTab:i,emailPolicyToUnsubscribeFrom:c}=e,d=o.createElement(xA,{selectedTab:l}),m=(0,li.ZC)(i),u=(0,li.ZC)(c);return(0,o.useEffect)(()=>{i&&i!==m?(t((0,R.to)({type:xg.s,data:{tab:xL(i)}})),t(A.$T({view:"recentsAndSharing",tab:nl.G.RECENTLY_VIEWED}))):c&&c!==u&&(xf.z.updateUserCommunicationPreference({channelType:"email",policyType:c,policySetting:"none"}).then(()=>{t((0,R.to)({type:xh,data:{policyType:c}}))}).catch(e=>{t((0,R.to)({type:xg.s,data:{tab:xL(ee.bb.NOTIFICATIONS)}})),t(ec.F.dequeue({}))}),t(A.$T({view:"recentsAndSharing",tab:nl.G.RECENTLY_VIEWED})))},[i,m,c,u,t]),o.createElement(so.r,{banner:n?o.createElement(bR,{folderId:null}):o.createElement(IB,null),viewbar:d,viewBarSticky:!0,toolbar:o.createElement(xp,null),content:function(e,t){switch(e){case nl.G.SHARED_FILES:return o.createElement(Iq,{eligibleForLockedStateRedesign:null==t?void 0:t.eligibleForLockedStateRedesign});case nl.G.SHARED_PROJECTS:return o.createElement(x_,{eligibleForLockedStateRedesign:null==t?void 0:t.eligibleForLockedStateRedesign});case nl.G.RECENTLY_VIEWED:return o.createElement(xw,{eligibleForLockedStateRedesign:null==t?void 0:t.eligibleForLockedStateRedesign})}}(l,{eligibleForLockedStateRedesign:a(r)})})}var xD=a(24171),xF=a(996773);let xP=(0,sV.rw)();function xM(e){let t=(0,s.wA)(),a=[o.createElement(xP,{tab:xD.G.FILES,key:"files",selectedTab:e.selectedTab,onClick:()=>{t(A.$T({view:"sharedWithYou",tab:xD.G.FILES}))},mobileNavTabTitle:(0,S.t)("shared_with_you.toolbar.files")},(0,S.tx)("shared_with_you.toolbar.files")),o.createElement(xP,{tab:xD.G.PROJECTS,key:"projects",selectedTab:e.selectedTab,onClick:()=>{t(A.$T({view:"sharedWithYou",tab:xD.G.PROJECTS}))},mobileNavTabTitle:(0,S.t)("shared_with_you.toolbar.projects")},(0,S.tx)("shared_with_you.toolbar.projects"))];return o.createElement(xF.W,{resetTileSelectionOnMouseDown:!0,tabs:a})}function xO(e){return o.createElement(so.r,{toolbar:o.createElement(xM,{selectedTab:e.tab}),content:function(e){switch(e){case"files":return o.createElement(Iq,null);case"projects":return o.createElement(x_,null)}}(e.tab)})}var xB=a(412721),xU=a(834571),xV=a(402838),xH=a(501217);function xW(){return o.createElement("div",{className:ef.cx.flex.p12.colorBgSelected.bRadius6.$},o.createElement("div",{className:ef.cx.mr12.colorIcon.itemSelfCenter.$},o.createElement(es.B,{svg:uG.A})),(0,S.tx)("sidebar.meta.this_team_is_for_education_users_only"),o.createElement(I.Us,{target:"_blank",trusted:!0,href:"/education/"},(0,S.tx)("org_home_view_meta.learn_more")))}function xj({team:e}){var t,a;let r=(0,s.wA)(),n=!!(null==(a=null==(t=(0,rr.Rs)(rl.kQI,{id:e.id}).data)?void 0:t.team)?void 0:a.hasPermission),[{data:l}]=(0,p.IT)((0,rO.Xg)({teamId:e.id})),i=(l||[]).filter(e=>""!==e.name).length,c=(0,E.I7)("exp_fbg_project_limit_upsell");if(!(!e.subscription&&!e.org_id&&n&&i>=K.Wf)||c.getConfig().getValue("show_upsell",!1))return null;let d=o.createElement(I.Us,{onClick:()=>{r((0,R.to)({type:a9.V,data:{teamId:e.id,upsellSource:J.b.STARTER_TEAM_FOOTER}}))},trusted:!0,trackingProperties:{trackingDescriptor:ew.c.UPGRADE_TO_A_PAID_PLAN},"data-testid":"starterTeamUpsellFooterUpgradeLink"},(0,S.tx)("file_browser.starter_team.upgrade_link"));return o.createElement(O.fu,{name:"Starter Team Upsell Footer"},o.createElement("div",{className:ey()(ef.cx.flex.p32.mt16.bRadius6.justifyCenter.colorBorder.$,"starter_team_upsell_footer--borderStyle--pM4nA"),"data-testid":"starterTeamUpsellFooter"},o.createElement("div",{className:ey()(ef.cx.flex.flexColumn.itemsCenter.lh24.$,"starter_team_upsell_footer--contentWrapper--H-soB")},o.createElement("strong",null,i===K.Wf?(0,S.tx)("file_browser.starter_team.project_limit_warning",{maxProjects:K.Wf}):(0,S.tx)("file_browser.starter_team.project_limit_warning_over_max_projects")),o.createElement("p",{className:ef.cx.alignCenter.$},(0,S.tx)("file_browser.starter_team.project_limit_info",{upgradeLink:d})))))}var x$=a(874109);let xG="professional_badge_onboarding_key",xz="seen_professional_badge_overlay";function xY({teamId:e}){var t,a;let r=(0,s.d4)(e=>e.userTeamFlags),n=null==(t=r[e])?void 0:t[xz],l=null==(a=r[e])?void 0:a[Ty.UA],i=(0,M.kO)(),c=(0,nk.e)({overlay:nP.zMZ,priority:nR.N.DEFAULT_MODAL,experiment:{check:i,predicate:e=>e,postCheck:()=>!0}}),d=(0,s.wA)();return((0,o.useEffect)(()=>{l&&!n&&c.show()},[c,l,n]),c.isShowing)?o.createElement(nD.rq,{isShowing:c.isShowing,title:(0,S.tx)("pro_onboarding.see_whats_included"),description:(0,S.tx)("pro_onboarding.review_your_teams_plan_and_all_its_features_by_clicking_on_your_professional_badge"),targetKey:xG,onClose:()=>{d(y6.bE({all_team_flags:[{team_id:e,flags:{[xz]:!0}}]})),c.complete()},trackingContextName:t3.e0.PROFESSIONAL_BADGE_TOOLTIP,trackingProperties:tM.S.getTrackingProperties(e),emphasized:!0,shouldCenterArrow:gY.EL.FALLBACK,clickOutsideToHide:!0}):null}let xK="seen_pro_onboarding_unlimited_projects_overlay",xQ=(0,nL.r1)(xK);function xq({teamId:e}){var t,a;let r=(0,aJ.md)(xQ),n=(0,aJ.md)(Tv.e),l=(0,s.d4)(e=>e.userTeamFlags),i=null==(t=l[e])?void 0:t[Ty.UA],c=null==(a=l[e])?void 0:a[xz],d=(0,M.kO)(),{show:m,isShowing:_,complete:p}=(0,nk.e)({overlay:nP._9u,priority:nR.N.DEFAULT_MODAL,experiment:{check:d,predicate:e=>e,postCheck:e=>!e}},[r,n]);return((0,u.h)(()=>{i&&c&&m({canShow:(t,a)=>a.some(t=>t.id===e)})}),_)?o.createElement(gz.M,{isShowing:_,userFlagOnShow:xK},o.createElement(O.fu,{name:tM.S.getTooltipTrackingContext("Unlimited Projects"),properties:tM.S.getTrackingProperties(e)},o.createElement(Th.jA,{dismissModal:p}))):null}function xX(e){var t,a,r,n,l,i;let c=(0,s.wA)(),d=o.useRef(null),m=(0,s.d4)(({dropdownShown:e})=>e),u=e.team.org_id??null,_=(0,et.Q)({currentOrgId:u,currentTeamId:null}),p=(0,s.d4)(e=>e.favorites.collapsedCustomSections),f=(0,nK.S)(),g=o.useMemo(()=>{if("loaded"===_.status)return(0,rg.T0)(_.data,e.team.id)},[_,e.team.id]),E=void 0!==g;if("loaded"!==_.status)return o.createElement("div",{className:ef.cx.flex.itemsCenter.colorIcon.$},o.createElement(es.B,{svg:E5.A}));let v=(0,rg.gV)(_.data,u),h=e.dropdownKey&&m&&m.type===e.dropdownKey&&m.data&&m.data.targetRect,y=d.current&&(null==(t=null==m?void 0:m.data)?void 0:t.targetRef)===d.current&&(null==m?void 0:m.type)===a6.jU,b=d.current,w=[];return e.showInvite&&w.push(o.createElement(sI.c$,{key:"import",children:(0,S.tx)("file_browser.team.invite"),onClick:e.onInviteClick})),w.push(o.createElement(sI.c$,{key:"share",children:(0,S.tx)("file_browser.team.view_members"),onClick:t=>e.onMembersClick(t)})),f&&w.push(o.createElement(sI.c$,{key:"add-to-favorites-section",children:o.createElement("div",{className:ef.cx.flex.justifyBetween.itemsCenter.w150.$},(0,S.tx)("favorited_resources.add_to_sidebar"),o.createElement(es.B,{svg:TD.A})),onClick:t=>{t.stopPropagation(),d.current&&c(A.j7({type:a6.jU,data:{targetRect:b.getBoundingClientRect(),targetRef:b,resourceId:e.team.id}}))}})),o.createElement("button",{className:ef.cx.flex.itemsCenter.colorIcon.$,ref:d,onClick:t=>{e.dropdownKey&&b&&c(A.j7({type:e.dropdownKey,data:{targetRect:null==b?void 0:b.getBoundingClientRect()}}))}},o.createElement(es.B,{svg:E5.A}),h&&o.createElement(TL.Cf,{targetRect:m.data.targetRect,minWidth:172,maxWidth:172,propagateCloseClick:!0},w),y&&o.createElement(lW.t,{updateFavorite:(t,a)=>{(!v||t)&&(e.setFavorite(t,null==g?void 0:g.resource.id,a),t&&a&&(p.delete(a),c(no.U6({collapsedCustomSections:p})),ia.Fp({type:"topLevel",id:"custom",orgId:u,sectionId:a},!0)))},resourceId:e.team.id,resourceType:z.bk.TEAM,isFavorited:E,currentSectionId:(null==g?void 0:g.resource.sidebarSectionId)??void 0,sections:((null==(r=null==(a=_.data)?void 0:a.currentUser)?void 0:r.userSidebarSections)?(0,r1.oA)(_.data.currentUser.userSidebarSections):null)??[],customSectionOrdering:(null==(i=null==(l=null==(n=_.data.currentUser)?void 0:n.baseOrgUser)?void 0:l.fileBrowserPreferences)?void 0:i.orderedSidebarSections)??[],showPoint:!0}))}var xJ=a(534048),xZ=a(761273),x0=a(297536),x1=a(937890),x2=a(50292);function x4(e){let{team:t,orgTeamActionType:a}=e;switch(a){case se.gO.CLICK_JOIN:case se.gO.BYPASS_REQUEST:return o.createElement(o.Fragment,null,(0,S.tx)("file_browser.team.no_permissions_message",{teamName:t.name}),o.createElement("br",null),(0,S.tx)("file_browser.team.please_join_team"));case se.gO.CLICK_REQUEST:return o.createElement(o.Fragment,null,(0,S.tx)("file_browser.team.no_permissions_message",{teamName:t.name}),o.createElement("br",null),(0,S.tx)("file_browser.team.please_request_to_join_team"));case se.gO.CLICK_WITHDRAW:return(0,S.tx)("file_browser.team.request_to_join_team_is_pending",{teamName:t.name});default:return(0,S.tx)("file_browser.team.no_permissions_message",{teamName:t.name})}}function x8({team:e}){let t=(0,s.d4)(t=>(0,se.YP)(e,t.teamRoleRequests[e.id],(0,q.getPermissionsState)(t),t.currentUserOrgId)),a=(0,s.d4)(t=>t.teamRoleRequests[e.id]),r=(0,s.wA)(),n=o.createElement("div",{className:"team_page_view--nonMemberViewContainer--uleTt"},o.createElement("div",{className:"team_page_view--header--sTxh6"},o.createElement(ed.nl,{team:e,size:ed.Pf.LARGE}),o.createElement("span",{className:"team_page_view--teamName--9MXYi text--fontPos18--rYXJb text--_fontBase--QdLsd"},e.name)),o.createElement("div",{className:"team_page_view--joinOptionText--McFNQ text--fontPos14--OL9Hp text--_fontBase--QdLsd"},o.createElement(x4,{team:e,orgTeamActionType:t})),o.createElement("div",{className:"team_page_view--joinButton--waTM-"},o.createElement(o5.m,{team:e,onJoin:(0,o7.GR)(r,e.id),onLeave:()=>{r(R.to({type:sa.p,data:{teamId:e.id}}))},onJoinRequestOverride:()=>{r(R.to({type:TV.$,data:{team:e}}))},onBypassRequestOverride:(0,o7.GR)(r,e.id,t8.e6.OWNER),onWithdrawRequestForTeamOverride:()=>{let e=null==a?void 0:a.id;e&&r(TM.lT({requestId:e}))},isCardActive:!1})));return o.createElement(so.r,{content:n})}function x3({teamId:e,selectedTab:t,upgradeModalType:a,showProOnboardingModal:r}){var n,l;let i;let c=(0,iX.R)(t=>{let a=t.teams[e];return a&&{...a,canAdmin:(0,q.canAdminTeam)(e,t),canEdit:(0,q.canEditTeam)(e,t),canRead:(0,q.canViewTeam)(e,t),isCurrentUserInTeam:(0,q.hasViewerRoleAccessOnTeam)(e,t),canEditTeamContents:(0,q.hasEditorRoleAccessOnTeam)(e,t)}}),d=(0,s.d4)(e=>e.currentUserOrgId),m=(0,s.d4)(e=>c&&c.org_id&&e.orgById[c.org_id]||null),g=(0,s.d4)(e=>e.avatarEditorState),E=(0,s.d4)(e=>e.loadingState),v=(0,s.d4)(e=>e.teamBilling),h=(0,s.wA)(),y=(0,ry._6)(),[b,w]=o.useState(!1),[{status:T,data:I}]=(0,p.IT)((0,rO.Xg)({teamId:null==c?void 0:c.id}),{revalidateOnMount:!0});(0,xB.w)(e);let x=(0,s.d4)(e=>e.teamRoleRequests),N=!!(0,s.d4)(e=>{var t;return c&&(0,q.canManageOrgTeam)(c.id,e,null==(t=e.user)?void 0:t.id)}),[k,L]=o.useState(),D=(0,K.w5)(c)&&!(null==c?void 0:c.org_id),F=(0,Tt.D)((null==c?void 0:c.id)||null,(null==c?void 0:c.org_id)||null),P=(0,rr.Rs)(rl.GyZ,{teamId:e}),B="loaded"===P.status,U=o.useMemo(()=>(0,x0.X)(P),[P]),V=F?!!(U&&U.canAdmin):!!(c&&c.canAdmin),W=F?!!(U&&U.canEdit):!!(c&&c.canEdit),j=F?!!(U&&U.canRead):!!(c&&c.canRead),G=(0,M.Yz)(),Y=(0,r0.vt)(e),Q=o.useCallback(()=>{TU.S.getTeamTransfer({teamId:e}).then(({data:e})=>{L(e.meta)},()=>{L(void 0)})},[e]);(0,u.h)(()=>{let e=(0,TE.QL)("team_role_redemption");if(e&&parseInt(e) in t8.e6){let e=(0,x1.VE)();e&&h(ec.F.enqueue({message:e})),(0,TE.EM)("team_role_redemption")}}),(0,u.h)(()=>{if(!(0,_.kc)().auto_accept_team_invites)return;let e={999:"owner",900:"admin",300:"edit",100:"view"},t=(0,TE.QL)("auto_role");t&&null!==c&&t in e&&(((null==c?void 0:c.canRead)||"100"!==t)&&((null==c?void 0:c.canEdit)||"300"!==t)&&((null==c?void 0:c.canAdmin)||"900"!==t&&"999"!==t)&&h(ec.F.enqueue({message:(0,S.t)("join_team_flash.auto_accept_team_invite_modal",{teamName:(null==c?void 0:c.name)||"",inviteType:e[t]})})),(0,TE.EM)("auto_role"))}),o.useEffect(()=>{Q()},[null==k?void 0:k.id,Q]),o.useEffect(()=>{let e=xZ.um.loadingKeyForPayload();(0,gE.VP)(E,e)||(0,gE.D2)(E,e)||h(xZ.um())},[h,E]),o.useEffect(()=>{d&&h((0,H.Rw)())},[h,d]),o.useEffect(()=>{if(c)w(!1);else{let t=o7.HD.loadingKeyForPayload({teamId:e}),a=`TEAM_GET_ACTION_${e}`;d&&!E[t]?h(o7.HD({teamId:e,disableFlashError:!0})):(0,gE.VP)(E,t)||(0,gE.VP)(E,a)||w(!0)}},[h,E,c,e,d]),o.useEffect(()=>{if(c&&!c.org_id){if(t===hT.A.BILLING){let e=bS.Be.loadingKeyForPayload({teamId:c.id}),t=bS.NP.loadingKeyForPayload({teamId:c.id}),a=!(0,gE.D2)(E,e)&&!(0,gE.VP)(E,e),r=!(0,gE.D2)(E,t)&&!(0,gE.VP)(E,t);(a||r)&&h(bS.Q({teamId:c.id}))}else if(t===hT.A.MEMBERS){let e=Tg.m$.loadingKeyForPayload({teamId:c.id});(0,gE.VP)(E,e)||(0,gE.D2)(E,e)||h(Tg.m$({teamId:c.id}))}else if(t===hT.A.SETTINGS){let e=bS.Be.loadingKeyForPayload({teamId:c.id});V&&D&&!(0,gE.VP)(E,e)&&!(0,gE.D2)(E,e)&&h(bS.Q({teamId:c.id}))}}},[h,t,E,c,m,D,V]);let X=(0,$.Pc)(),J=null==(l=null==(n=(0,rr.Rs)(rl.Cit,{teamId:e}).data)?void 0:n.team)?void 0:l.currentTeamUser;o.useEffect(()=>{var e,r;let n;if(!(c&&X&&J&&a)||!D)return;let l=a===z.G_.DEV_MODE,i=a===z.G_.WHITEBOARD?z._Y.WHITEBOARD:z._Y.DESIGN;if(i===z._Y.DESIGN?n=(null==(e=J.designAccountTypeRequest)?void 0:e.status)==="pending":i===z._Y.WHITEBOARD&&(n=(null==(r=J.whiteboardAccountTypeRequest)?void 0:r.status)==="pending"),!0===n&&h(C.s.flash((0,S.t)("team_view.request_upgrade.request_already_sent"))),!1===n&&(0,rZ.dk)(!!(0,rb.XG)(J,i)||l&&!(0,rb.HA)(J,i),n,c,X)){let e=(0,TE.QL)("entry_point")||(l?TO.i$.DowngradeEmail:TO.tc.DOWNGRADE_EMAIL);h(R.to({type:TW.PK,data:{editorType:i,team:c,entryPoint:e}}))}h(A.$T({view:"team",teamId:c.id,teamViewTab:t}))},[h,c,X,J,a,D,t]),(0,u.h)(()=>{r&&h(R.to({type:x2.C,data:{teamId:e}}))});let Z=o.useCallback((e,t,a)=>{if(c){let r={team:c,entrypoint:"team_page_view",sectionId:a,favoriteId:t};e?h(no.DN(r)):h(no.ox(r))}},[h,c]),et=o.useCallback(()=>{tQ.Ay.del(`/api/asset_transfer/${null==k?void 0:k.id}`).then(()=>{L(void 0),h(ec.F.enqueue({message:(0,S.t)("asset_transfers.revoke.transfer_revoked")}))},()=>{h(ec.F.enqueue({message:(0,S.t)("asset_transfers.error_message.something_went_wrong_check_your_connection"),error:!0}))})},[null==k?void 0:k.id,h]),ea=o.useRef(!1);o.useEffect(()=>{!ea.current&&(0,_.kc)().pro_team_project_transfers&&"team"===y.view&&y.assetTransferRequestId&&h(R.to({type:(0,xU.S)(),data:{selectedAssetTransferRequest:y.assetTransferRequestId}})),ea.current=!0});let er=o.useMemo(()=>{if(c)return{team:c,pending:k,onRevokeTransfer:et,updatePending:Q,billing:v}},[Q,et,k,c,v]),en={view:"team",teamId:e,teamViewTab:hT.A.HOME},el=(0,xV.n)(xJ.am.MEMBERS,er,!!(null==c?void 0:c.canAdmin),en),ei=(0,xV.n)(xJ.am.SETTINGS,er,!!(null==c?void 0:c.canAdmin),en);o.useEffect(()=>{t===hT.A.MEMBERS?el():t===hT.A.SETTINGS&&ei()},[]);let eo=o.useCallback(e=>{let t={view:"team",teamId:c?c.id:"",teamViewTab:e};h(A.$T(t))},[h,c]),es=o.useMemo(()=>{if(c){if((0,Tt.D)(c.id,c.org_id)){if(j)switch(c.org_access){case z.bU.PRIVATE:return(0,S.t)("file_browser.team_header.closed_team_header");case z.bU.SECRET:return(0,S.t)("file_browser.team_header.secret_team_header")}}else switch(c.org_access){case z.bU.PRIVATE:if(W)return(0,S.t)("file_browser.team_header.private_team_can_edit");if(j)return(0,S.t)("file_browser.team_header.private_team_can_view");break;case z.bU.SECRET:if(W)return(0,S.t)("file_browser.team_header.secret_team_can_edit");if(j)return(0,S.t)("file_browser.team_header.secret_team_can_view")}}},[c,j,W]),em=o.useMemo(()=>{if(c&&j){if(c.org_access===z.bU.PRIVATE)return(0,S.t)("file_browser.team_header.closed_team_subtitle");if(c.org_access===z.bU.SECRET)return(0,S.t)("file_browser.team_header.secret_team_subtitle")}},[c,j]),eu=(0,r_.N)();if(!B)return o.createElement(tc.qc,null);if(b||!j&&!d)return o.createElement(si.S,{resourceType:ee.Ft.TEAM});if(!c)return null;if(!j)return o.createElement(x8,{team:c});let e_=()=>{h((0,rO.SX)({where:lN.Ah.FolderListView,team:c}))},ep=()=>{h(A.oB()),ei(),eo(hT.A.SETTINGS)},eE=()=>{h(A.oB()),h(A.$T({view:"teamAdminConsole",teamId:c.id,isProTeam:c.pro_team})),(0,tK.sx)("Admin Console Opened",{trackingContext:t3.e0.FILE_BROWSER,entryPoint:"team_page_view"})},ev="loaded"===T;i=c.org_id?ev?o.createElement(o.Fragment,null,o.createElement(xd,{viewId:`team-${e}`,teamId:e,eligibleForLockedStateRedesign:G(Y),folderList:I||[],showTeamNameOrAuthor:!1,onCreateNewFolder:F?W?e_:void 0:c.isCurrentUserInTeam?e_:void 0,canEditTeamContents:F?W:c.canEditTeamContents,selectedView:y}),o.createElement(ya.cx,null)):o.createElement(tc.qc,null):o.createElement(o.Fragment,null,ev?o.createElement(o.Fragment,null,o.createElement(Te.J,{teamId:c.id}),o.createElement(xd,{viewId:`team-${e}`,teamId:e,eligibleForLockedStateRedesign:G(Y),folderList:I||[],showTeamNameOrAuthor:!1,onCreateNewFolder:c.isCurrentUserInTeam?e_:void 0,canEditTeamContents:F?W:c.canEditTeamContents,selectedView:y}),o.createElement(ya.cx,null)):o.createElement(tc.qc,null));let eh=c.canAdmin?o.createElement(rx.FL,{entity:c,entityType:rI.ck.TEAM,avatarEditorState:g,size:40,dispatch:h,avatarSvg:lj.A,svgSizeRatio:.6}):o.createElement(ed.nl,{team:c,size:40,avatarSvg:lj.A,svgSizeRatio:.6}),ey=!j&&!N,ew=(()=>{if(ey)return;let e=eu({team:c,onChangeTeamIconClick:()=>{h((0,rf.o)({team:c}))},onRenameClick:()=>{h(R.to({type:(0,xH.h)(),data:{team:c}}))},teamRoleRequests:x});if(!W&&!(0,Tt.D)(c.id,c.org_id))return e;let t=[];return er&&(W&&t.push({displayText:(0,S.t)("team_view.settings.view_settings"),callback:ep}),(0,Tt.D)((null==c?void 0:c.id)||null,(null==c?void 0:c.org_id)||null)&&m&&t.push({displayText:(0,S.t)("teams_table.view_team_members"),callback:el}),D||t.push({displayText:"",separator:!0})),D&&c.canAdmin&&t.push({displayText:(0,S.t)("team_view.settings.view_admin_console"),callback:eE},{displayText:"",separator:!0}),t.push(...e),t})(),eT=ew?{kind:sT.A.CUSTOM,key:sT.D.DROPDOWN,element:o.createElement(sf,{buttonAriaLabel:(0,S.t)("team_view.page_header_dropdown_label"),dropdownKey:`team-${c.id}`,dropdownOptions:ew})}:void 0,eI=c.pro_team&&(0,_.kc)().pro_onboarding_launch,ex=c.student_team?o.createElement(xW,null):(0,K.w5)(c)?void 0:o.createElement(xj,{team:c}),eN=(0,Tt.D)((null==c?void 0:c.id)||null,(null==c?void 0:c.org_id)||null);return o.createElement(so.r,{content:o.createElement(o.Fragment,null,i,ex),banner:o.createElement(TI,{teamId:e,selectedTab:t}),header:o.createElement(su,{avatar:eh,title:c.name,rightSideActions:function(e,t,a,r,n,l,i,s,c,d,m){var u;let _=[],p=!!(c&&Object.keys(c).includes(e.id))&&(null==(u=c[e.id])?void 0:u.status)===TB.c.PENDING,g=e.canAdmin&&!e.isCurrentUserInTeam,E={kind:sm.A.CUSTOM_BUTTON,key:sT.D.FAVORITE,element:o.createElement(lY.r,{setFavorite:i,favoriteType:z.bk.TEAM,resourceId:e.id,isFavoriteHeaderStar:!0,orgId:e.org_id})};g&&_.push({kind:sm.A.BUTTON,key:sT.D.JOIN_TEAM,displayText:(0,S.t)("file_browser.team.join_team"),onClick:(0,o7.GR)(r,e.id,t8.e6.ADMIN)});let v=m?eB.Ib.TEXT:void 0,h=m?(0,S.t)("locked_team.label.tooltip"):void 0;(a===hT.A.HOME||n)&&(s&&!(0,rb.R$)(l,e.org_id)?_.push({kind:sm.A.CUSTOM,key:sT.D.NEW_PROJECT,element:o.createElement("div",{"data-tooltip":h,"data-tooltip-type":v},o.createElement(sw,{"data-onboarding-key":"team-view-new-project-cta",dataTestId:"team-view-new-project-cta",variant:m?"secondary":"inverse",disabled:m,onClick:()=>{r((0,rO.SX)({team:{...e,canEdit:s,canAdmin:e.canAdmin,canEditTeamContents:s},where:lN.Ah.FolderListView}))},text:(0,S.t)("file_browser.team.add_project")}),o.createElement(xq,{teamId:e.id})),showOnMobile:!0}):e.org_id&&c&&e.org_access!==z.bU.SECRET&&!g&&!e.canAdmin&&_.push({kind:sm.A.BUTTON,key:sT.D.REQUEST_TO_EDIT,displayText:p?(0,S.t)("file_browser.team.cancel_request"):(0,S.t)("file_browser.team.request_to_edit"),onClick:()=>{var t;p?r(TM.lT({requestId:null==(t=c[e.id])?void 0:t.id})):r(R.to({type:TV.$,data:{team:e,requesterCurrentLevel:t8.e6.VIEWER}}))}}));let y=m?f.lQ:()=>{r(R.to({type:(0,x$.T)(),data:{teamId:e.id,notifyOnSuccess:!0}}))};(a===hT.A.MEMBERS||n)&&t&&_.push({kind:sm.A.BUTTON,key:sT.D.INVITE,displayText:(0,S.t)("file_browser.team.share"),onClick:y,styleClass:m?TK.EB:void 0,"data-tooltip":h,"data-tooltip-type":v}),e.org_id&&_.push(E);let b=o.createElement(xX,{dropdownKey:"team-overflow-dropdown",team:e,showInvite:t,onInviteClick:()=>{r(R.to({type:(0,x$.T)(),data:{teamId:e.id,notifyOnSuccess:!0}}))},onMembersClick:e=>{d&&d(e)},setFavorite:i});return _.push({kind:sm.A.CUSTOM_BUTTON,key:sT.D.TEAM_OVERFLOW_MENU,showOnMobile:!0,hideOnDesktop:!0,element:b}),_}(c,!0,t,h,!0,X,Z,W,x,e=>{e.stopPropagation(),h(A.oB()),el(),eo(hT.A.MEMBERS)},G(Y)),rightSideOfTitleAction:eT,pageHeaderIcon:!eN&&es?o.createElement("div",{className:ef.cx.ml8.mr4.$,"data-tooltip-type":eB.Ib.TEXT,"data-tooltip":es,"data-tooltip-offset-y":-4,"data-tooltip-timeout-delay":50,"data-tooltip-max-width":200},o.createElement(re.In,{icon:"lock-16"})):void 0,badge:o.createElement(eg.Y,{direction:"horizontal"},eN&&es?o.createElement("div",{className:ef.cx.ml4.mr4.$,"data-tooltip-type":eB.Ib.TEXT,"data-tooltip":es,"data-tooltip-offset-y":-4,"data-tooltip-timeout-delay":50,"data-tooltip-max-width":200,"data-tooltip-subtext":(0,Tt.D)(c.id,c.org_id)?em:""},o.createElement(re.In,{icon:"lock-16"})):void 0,eI?o.createElement(o.Fragment,null,o.createElement(O.fu,{name:eb._Y.PROFESSIONAL,properties:tM.S.getTrackingProperties(e)},o.createElement(O.$z,{type:"button",onClick:()=>{h(R.to({type:tO,data:{teamId:c.id}}))},"data-onboarding-key":xG,className:"team_page_view--pointerOnHover--at7fp"},o.createElement(eb.Ex,{color:eb.zE.INFORMATIONAL,text:(0,S.t)("pro_onboarding.professional"),size:eb.vj.EXTRA_LARGE}))),o.createElement(xY,{teamId:e})):void 0)})})}function x5(){let e=(0,s.d4)(e=>e.currentUserOrgId),t=(0,s.d4)(e=>e.currentTeamId),a=(0,s.d4)(e=>e.tileSortFilterStateByView),r=(0,r0.vt)(),n=(0,M.Yz)(),l=(0,yv.xx)(e=>({tileSortFilterConfig:e,sortKeys:[cs.C0.TRASHED_AT,cs.C0.NAME,cs.C0.CREATED_AT,cs.C0.TOUCHED_AT]})),[{data:i,status:c}]=(0,p.IT)((0,L.Uk)({orgId:e,teamId:t})),d=(null==i?void 0:i.files)||[],m=(null==i?void 0:i.repos)||[],u=l(a.deletedFiles),_=[...d.map(e=>({type:lh.nb.FILE,file:e})),...m.map(e=>({type:lh.nb.REPO,repo:e.repo,branches:[e.main_file],selectedBranchKey:e.main_file.key}))];return o.createElement(r2.A,{loadingElementId:"loading-content-pane",loaded:"loading"!==c,loadingElementClassName:ef.cx.pr32.$},o.createElement(y4,{tiles:_,newFileTile:!1,tileActions:{restore:!0,deleteForever:!0,duplicateToDrafts:!0},sortFilterOptions:u,hideSorter:!0,emptyStateText:(0,S.t)("file_browser.tool_bar.deleted_empty_state"),eligibleForLockedStateRedesign:n(r)}),o.createElement(ya.cx,null))}function x9(){let e=(0,_.kc)().pdr_trashed_section?o.createElement(bB,null):o.createElement(bU,null);return o.createElement(so.r,{viewBarSticky:!0,viewbar:e,content:o.createElement(x5,null)})}var x6=a(733556);let x7={ctrlKey:"metaKey"};function Ne(e,t={}){let a=(0,s.wA)(),r=(0,s.Pj)(),n=o.useMemo(()=>({metaKey:e=>{let t=(0,X.xS)(r.getState(),e);a(L.V3({url:t}))},...t}),[t,a,r]);return o.useCallback((t,r)=>{let l=e(r),i=Object.keys(n).find(e=>t[e]);if(i){let e=n[g.Ay.mac?i:x7[i]||i];if(e){t.preventDefault(),e(l);return}}a(A.$T(l))},[n,a,e])}var Nt=a(692630),Na=a(314866),Nr=a(196495),Nn=a(548310),Nl=a(654696);let Ni="org_user_meta_content--teamsHeader--1p4jT org_user_meta_content--sectionHeader--snmkw text--fontPos13--xW8hS text--_fontBase--QdLsd";function No(e){let t=(0,s.wA)(),a=(0,$.iZ)(),r=(0,Nn.w)(e.user),n=(0,s.d4)(t=>t.currentUserOrgId===e.orgId),l=()=>{t((0,R.to)({type:Nl.u}))};return o.createElement("div",{className:ef.cx.flex.flexColumn.ml16.hFull.$},o.createElement(N.x,{isLoading:e.isLoading},()=>{var t,i,s;return o.createElement(o.Fragment,null,o.createElement("div",{className:"org_user_meta_content--userData--NrFpt"},o.createElement(ed.H8,{user:e.user,size:ed.Pf.LARGE}),o.createElement("div",{className:"org_user_meta_content--userName--JeBfv text--fontPos18--rYXJb text--_fontBase--QdLsd"},e.title),(null==(t=e.user.profile)?void 0:t.job_title)&&o.createElement("div",{className:"org_user_meta_content--jobTitle--bWmsS text--fontPos11--2LvXf text--_fontBase--QdLsd"},o.createElement(eb.Ex,{color:eb.zE.INVERT,text:(0,Na.lb)(null==(i=e.user.profile)?void 0:i.job_title)}),e.userId===(null==a?void 0:a.id)&&o.createElement("span",{className:"org_user_meta_content--blueLink--u44PB blue_link--blueLink--9rlnd",role:"button",tabIndex:0,onClick:l},(0,S.tx)("internal_profile.change_job_title"))),e.user.email&&o.createElement("div",{className:"org_user_meta_content--email--tgx7t text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.user.email),o.createElement(gC,{value:e.description??"",placeholder:(0,S.t)("internal_profile.add_a_description"),submit:e.submitDescription,formatter:gN,readOnly:e.isReadOnly,className:"org_user_meta_content--description--gYuxd text--fontPos13--xW8hS text--_fontBase--QdLsd"})),r&&(null==(s=e.user)?void 0:s.id)===(null==a?void 0:a.id)&&o.createElement(Nu,{user:e.user}),n&&o.createElement(ep.P,{className:ef.cx.flexShrink1.bt1.bSolid.colorBorder.$,innerClassName:ef.cx.p16.borderBox.flex.flexColumn.$},o.createElement("div",{className:Ni},(0,S.tx)("internal_profile.teams")),o.createElement(N_,{userId:e.userId,orgId:e.orgId}),o.createElement("div",{className:Ni},(0,S.tx)("internal_profile.recent_projects")),o.createElement(Nd,{files:e.recents,isYourProfile:!e.isReadOnly})))}))}function Ns(e){let t=(0,$.iZ)(),a=(0,s.wA)();return o.createElement(No,{submitDescription:t=>{a(Nr.yJ({user:{id:e.userId,description:t},userInitiated:!0}))},isLoading:!e.user,isReadOnly:!t||t.id!==e.userId,description:e.user.description??null,title:e.user.name??e.user.handle??null,userId:e.userId,user:e.user,recents:e.recents,orgId:e.orgId})}function Nc(e){let t=(0,s.wA)(),a=(0,$.iZ)();return o.createElement(No,{isLoading:!e.user||!e.orgUser||!e.org,isReadOnly:!a||a.id!==e.userId,description:(e.orgId&&e.orgUser?e.orgUser.description:e.user.description)??null,title:e.user&&e.org?(0,S.t)("internal_profile.title",{userName:e.user.handle,orgName:e.org.name}):null,recents:e.recents,submitDescription:a=>{e.orgId&&e.orgUser&&t(T8.yJ({orgUser:{id:e.orgUser.id,org_id:e.orgId,description:a},userInitiated:!0}))},user:e.user,userId:e.userId,orgId:e.orgId})}function Nd(e){let t=(0,j.FC)(),a=Ne(e=>({view:"folder",folderId:e})),r=o.useMemo(()=>{if(e.files.status!==a$.r.SUCCESS)return[];let a=[],r=[];if(!e.files)return a;let n=new Set;for(let l of e.files.value){if(n.has(l.folder_id)||(n.add(l.folder_id),""===l.folder_name||null==l.folder_name))continue;let e={id:l.folder_id,name:l.folder_name,teamName:l.team_name,hasAccess:(0,q.canViewFolder_DEPRECATED)(l.folder_id,t)};if(e.hasAccess?a.push(e):r.push(e),a.length+r.length>=5)break}return a.concat(r)},[e.files,t]);return o.createElement(N.x,{state:e.files},()=>o.createElement("div",null,0===r.length&&o.createElement("div",{className:"org_user_meta_content--projectEmptyState--zusT6 text--fontPos11--2LvXf text--_fontBase--QdLsd"},e.isYourProfile?(0,S.t)("internal_profile.your_recent_projects_will_appear_here"):(0,S.t)("internal_profile.their_recent_projects_will_appear_here")),r.map(e=>o.createElement("div",{key:e.id,onClick:e.hasAccess?t=>a(t,e.id):void 0,className:e.hasAccess?"org_user_meta_content--project--t-Nos org_user_meta_content--projectBase--ofeuj text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa":"org_user_meta_content--dimProject--a1lrh org_user_meta_content--dim--aNVfK org_user_meta_content--projectBase--ofeuj text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},o.createElement("span",{"data-tooltip-type":eB.Ib.TEXT,"data-tooltip":e.hasAccess?void 0:(0,S.t)("internal_profile.you_must_be_a_member_of_team_name",{teamName:e.teamName})},e.name)))))}function Nm(e){return o.createElement("div",{className:"org_user_meta_content--userProfileNotification--qHv4P"},o.createElement("div",{className:"org_user_meta_content--userProfileNotificationTitle--lDm8h text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L"},e.title),o.createElement("div",{className:"org_user_meta_content--userProfileNotificationText--H2ZHJ text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L"},e.text),o.createElement("div",{className:"org_user_meta_content--userProfileNotificationAction--NQLlj"},e.action))}function Nu(e){let{profile:t}=e.user,a=(0,s.wA)(),[r,n]=o.useState(!1),l=r=>{n(!0),setTimeout(()=>{a(Nr.yJ({user:{id:e.user.id,job_title:r,profile:{...t,job_title:r}},userInitiated:!0}))},600),(0,eP.Cu)({trackingContext:t3.e0.FILE_BROWSER,context:"job_title",text:"Set Job Title",jobTitle:r})};return o.createElement(o.Fragment,null,(null==t?void 0:t.images)?null:o.createElement(Nm,{title:(0,S.t)("internal_profile.profile_image_nudge.title"),text:(0,S.t)("internal_profile.profile_image_nudge.text"),action:o.createElement(I.N_,{trusted:!0,className:"org_user_meta_content--userProfileNotificationActionLink--sVVav",onClick:()=>{a((0,rf.X)({entity:e.user,entityType:rI.ck.CURRENT_USER,shape:"CIRCLE"})),(0,eP.Cu)({trackingContext:t3.e0.FILE_BROWSER,context:"job_title",text:"Update Photo"})}},(0,S.tx)("internal_profile.profile_image_nudge.action"))}),(null==t?void 0:t.job_title)?null:o.createElement(Nm,{title:(0,S.t)("internal_profile.job_title_nudge.title"),text:(0,S.t)("internal_profile.job_title_nudge.text"),action:r?o.createElement(tc.kt,null):o.createElement(o.Fragment,null,Na.s_.map(e=>o.createElement(eb.Ex,{key:e,color:eb.zE.INVERT,subtle:!0,text:(0,Na.lb)(e),className:"org_user_meta_content--userProfileNotificationBadge--UDTOo",onClick:()=>l(e)})))}))}let N_=(0,s.Ng)((e,t)=>({permissionState:e}))(function(e){let[t,a]=o.useState(null);o.useEffect(()=>{bK.k.getTeams({userId:e.userId,orgId:e.orgId||void 0}).then(e=>{a(e.data.meta)}).catch(e=>{console.error("Unable to load org user teams",e)})},[e.userId,e.orgId]);let r=Ne(e=>({view:"team",teamId:e.id})),n=(t||[]).sort((t,a)=>{let r=(0,q.canViewTeam)(t.id,e.permissionState),n=(0,q.canViewTeam)(a.id,e.permissionState);return r&&!n?-1:!r&&n?1:0});return o.createElement(N.x,{isLoading:!t},()=>o.createElement("div",{className:ef.cx.flex.flexColumn.gap8.$},n.map(t=>{let a=(0,q.canViewTeam)(t.id,e.permissionState);return o.createElement(eV.rE,{key:t.id,entity:t,size:12,hideFallbackInitial:!0,onClick:a?r:void 0,className:`org_user_meta_content--teamListItem--gXcF- text--fontPos13--xW8hS text--_fontBase--QdLsd ${a?"":"org_user_meta_content--dim--aNVfK"}`,"data-tooltip-type":eB.Ib.TEXT,"data-tooltip":a?void 0:(0,S.t)("internal_profile.you_re_not_a_member_of_this_team"),"data-tooltip-offset-y":4})}),t&&0===t.length&&(0,S.tx)("internal_profile.no_teams_in_common")))});function Np(e){let t=(0,ml.i8)(e.publishedPlugins),a=(0,ml.LH)((0,ml.ky)(t,e.userId),e.org),r=Object.keys(a).map(e=>a[e]),n=(0,a2.LN)(r);return 0===n.length?null:o.createElement(o.Fragment,null,o.createElement("div",{className:"user_org_resources--sectionHeader--MUg1j internal_user_profile_page_view--sectionHeader--3NNNT text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,S.tx)("file_browser.settings.plugins_published",{orgName:e.org.name})),o.createElement("div",{className:"user_org_resources--container---l25- profile_resources_grid--_resourcesGridTemplateColumns--19JO6"},n.map(e=>o.createElement(ul.cS,{pluginId:e.id,showInstallCount:!0,key:`plugin-${e.id}`,isPublic:!!e.roles.is_public,viewContext:"UserOrgResources"})),o.createElement(ul.hT,{numResources:n.length})))}var Nf=a(204545);function Ng(e){let{org:t}=e,a=(0,s.d4)(a=>(t&&t.id&&a.orgUsersByOrgId[t.id]||{})[e.user.id]);return t?o.createElement(Nc,{orgId:t.id,recents:e.recents,userId:e.user.id,user:e.user,org:t,orgUser:a}):o.createElement(Ns,{orgId:null,recents:e.recents,userId:e.user.id,user:e.user})}let NE=e=>{let t=e.user.id,a=(0,s.wA)(),r=(0,s.d4)(e=>e.selectedView),n=e.orgUser&&e.orgUser.org_id,l=(0,s.d4)(e=>e.currentUserOrgId),i=void 0===n?l:n,c=(0,s.d4)(e=>i&&e.orgById[i]||null),d=(0,_.kc)().xr_debounce_threshold&&c,m="user"===r.view?r.userViewTab:void 0;o.useEffect(()=>{a((0,R.ES)({type:Nt.E}))},[a,m]);let u=(0,s.d4)(e=>e.userFlags);o.useEffect(()=>{u.seen_profile||a(P.b({seen_profile:!0}))},[a,u.seen_profile]);let p=(0,s.d4)(e=>e.tileSortFilterStateByView.user),f=o.useMemo(()=>({srcTileSortFilterConfig:{filters:{creator:cs.rJ.ANY,fileType:cs.t2.ANY},sort:{key:cs.C0.ACCESSED_AT,dir:cs.ue.DESC}},tileSortFilterConfig:p,sortKeys:[cs.C0.NAME,cs.C0.CREATED_AT,cs.C0.ACCESSED_AT]}),[p]),g=o.useMemo(()=>{let e=new URLSearchParams;return i&&e.append("org_id",i),`/api/user/${t}/recents${""===e.toString()?"":"?"}${e.toString()}`},[t,i]),[E,v]=o.useState([]),[h,y]=o.useState(!0),[b,w]=o.useState(null),[T,I]=o.useState(0),x=o.useCallback(e=>{w(e),a(ec.F.enqueue({message:(0,S.t)("internal_profile.an_error_occurred"),error:!0}))},[a]),{fetchNext:N,hasMore:C}=(0,gb.WQ)(g,x,55),k=o.useCallback(async()=>{if(!C)return;let e=async()=>{try{let e=await N();if(!Array.isArray(e))return;v(t=>[...t,...e])}catch(e){x(e)}};await e()},[N,x,C]);o.useEffect(()=>{(async()=>{E.length<55&&T<3&&(await k(),I(e=>e+1),y(!1))})()},[T]);let L=o.useMemo(()=>E.filter(e=>{switch(p.filters.fileType){case cs.t2.ANY:return!0;case cs.t2.DESIGN:return"design"===e.editor_type;case cs.t2.FIGJAM:return"whiteboard"===e.editor_type;case cs.t2.PROTOTYPE:return!1;case cs.t2.SITES:return"sites"===e.editor_type;case cs.t2.SLIDES:return"slides"===e.editor_type;default:(0,el.xb)(p.filters.fileType)}}),[E,p]),D=o.useMemo(()=>b?{status:a$.r.FAILURE,error:b}:h?{status:a$.r.LOADING}:{status:a$.r.SUCCESS,value:L},[h,b,L]),F=(0,x6.J)(()=>c&&c.community_profile_id?a(gD.pZ({profileId:c.community_profile_id})):Promise.resolve([]),[a,c]),M=e=>{a(A.$T({view:"user",userId:t,userViewTab:e}))},B=m===sU.o.INTERNAL_PROFILE?[o.createElement("div",{key:"sort-filter",className:"internal_user_profile_page_view--hideFilterRightPadding--fd-Z-"},o.createElement(oe.$4,{options:f,hideSortMenu:!0,selectedView:r,dispatch:a}))]:[],U=o.createElement(oe.g2,{leftSide:d?o.createElement(bP.f,{tabs:[o.createElement(bP.r,{key:sU.o.INTERNAL_PROFILE,tab:sU.o.INTERNAL_PROFILE,isSelected:m===sU.o.INTERNAL_PROFILE,onClick:()=>M(sU.o.INTERNAL_PROFILE),tabName:(0,S.t)("internal_profile.file_contributions")}),o.createElement(bP.r,{key:sU.o.INTERNAL_PROFILE_POSTS,tab:sU.o.INTERNAL_PROFILE_POSTS,isSelected:m===sU.o.INTERNAL_PROFILE_POSTS,onClick:()=>M(sU.o.INTERNAL_PROFILE_POSTS),tabName:(0,S.t)("internal_profile.posts")})]}):B,rightSide:d?B:[]});return(0,O.T8)(o.createElement(so.r,{scrollableContainerClass:"internal_user_profile_page_view--pageContainer--FQu11",containerClass:"internal_user_profile_page_view--pageContainerInner--2Ep2e",content:o.createElement("div",{className:"internal_user_profile_page_view--content--X0lTp"},o.createElement("div",{className:"internal_user_profile_page_view--viewbar--eprew"},U),m===sU.o.INTERNAL_PROFILE&&(F.status===a$.r.SUCCESS&&D.status===a$.r.SUCCESS?o.createElement(o.Fragment,null,c&&o.createElement(Np,{userId:t,org:c,publishedPlugins:F.value}),!d&&o.createElement("div",{className:"internal_user_profile_page_view--sectionHeader--3NNNT text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,S.tx)("internal_profile.file_contributions")),o.createElement(Nh,{files:D,fetchNext:k})):o.createElement(tc.qc,null)),m===sU.o.INTERNAL_PROFILE_POSTS&&c&&o.createElement(h9,{currentOrgId:c.id,selectedUser:e.user})),metaContent:o.createElement(Ng,{user:e.user,recents:D,org:c,orgUser:e.orgUser})}),t3.e0.USER_DETAILS,{view:"org_user",userId:t})};function Nv(e){return o.createElement(NE,{key:e.user.id,user:e.user,orgUser:e.orgUser})}let Nh=(0,s.Ng)((e,t)=>({permissionState:e}))(function(e){let{fetchNext:t}=e,a=Ne(e=>({view:"fullscreen",fileKey:e.key,editorType:(0,Eq.wN)(e.editorType||"design")})),r=o.useCallback((e,a)=>{e+a.trackHeight>=a.scrollHeight&&t()},[t]),n=o.useMemo(()=>e.files.status===a$.r.SUCCESS?e.files.value.map(e=>({key:e.key})):[],[e.files]),l=(0,rr.p)(rl.sMs,n),i=o.useMemo(()=>{let e={};return l.forEach(t=>{var a;"loaded"===t.result.status&&(e[t.args.key]=!!(null==(a=t.result.data.file)?void 0:a.hasPermission))}),e},[l]);return o.createElement(N.x,{className:"internal_user_profile_page_view--loading--R8iYF",state:e.files},t=>o.createElement(o.Fragment,null,o.createElement("div",{className:"internal_user_profile_page_view--fileListHeader--HBbTz internal_user_profile_page_view--grid--wdUAM text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement("div",null,(0,S.tx)("internal_profile.file_name")),o.createElement("div",null),o.createElement("div",{className:"internal_user_profile_page_view--projectHeader--1xRXi"},(0,S.tx)("internal_profile.project")),o.createElement("div",{className:"internal_user_profile_page_view--activityHeader--4Qatb"},(0,S.tx)("internal_profile.last_activity"))),o.createElement(ep.P,{onScroll:r,className:"internal_user_profile_page_view--scrollContainer--yPmA8",innerClassName:"internal_user_profile_page_view--scrollContainerInner--jae6x"},t.map(t=>{let r=i[t.key]?r=>{e.dispatch(L.UN({fileKey:t.key,entrypoint:"internal user profile page view"})),a(r,{key:t.key,editorType:t.editor_type})}:void 0;return o.createElement("a",{onClick:r,href:(0,lb.rl)(t),key:t.key,className:"internal_user_profile_page_view--recentFile--zdHK5 internal_user_profile_page_view--grid--wdUAM text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement(lz.H5,{size:l4.y.SMALL,file:{touched_at:null,updated_at:null,...t},noBorder:!0}),o.createElement("div",{className:"internal_user_profile_page_view--filename--pUgkH ellipsis--ellipsis--Tjyfa"},null!==t.source_file_name&&o.createElement(o.Fragment,null,t.source_file_name,o.createElement(es.B,{svg:Nf.A,className:"internal_user_profile_page_view--branchIcon--CcWO2"})),t.name),o.createElement("div",{className:"internal_user_profile_page_view--projectName--50iEN ellipsis--ellipsis--Tjyfa"},t.folder_name),o.createElement("div",{className:"internal_user_profile_page_view--activity--CsNi8"},o.createElement(cy.h1,{date:new Date(1e3*t.timestamp)})))}))))}),Ny=(e,t,a)=>a?Promise.resolve([]):bK.k.getTeams({userId:t}).then(e=>e.data.meta).catch(e=>{throw e}),Nb=(e,t,a)=>e&&e.id===a?Promise.resolve(e):bK.k.getUser({userId:a}).then(e=>e.data.meta).catch(e=>{throw t(C.s.error("Failed to get user",5e3)),console.warn("Failed to get user files"),e}),Nw=(e,t,a)=>a?e(T8.I1({orgId:a,userId:t})):Promise.resolve(null),NT={[sU.o.INTERNAL_PROFILE]:{Component:Nv},[sU.o.INTERNAL_PROFILE_POSTS]:{Component:Nv},[sU.o.PLUGINS]:{Component:o.Fragment}};function NI(e){return o.createElement(e.component,{...e.context})}function Nx(e){let t=(0,s.wA)(),a=(0,$.iZ)(),r=e.orgId,n=(0,s.d4)(e=>e.currentUserOrgId),l=void 0===r?n:r,i=(0,x6.J)(()=>{let r=Nb(a,t,e.userId),n=Nw(t,e.userId,l);return Promise.all([r,Ny(t,e.userId,l),n]).then(([a,r,n])=>((0,lE.hL)(a.handle),{userId:e.userId,user:a,teams:r,orgUser:n,profileHandle:a.community_profile_handle||null,on404Redirect:r.length>0||n?()=>{t(A.$T({view:"user",userId:e.userId,orgId:l,userViewTab:sU.o.INTERNAL_PROFILE}))}:()=>{m.Ay.redirect("/404")}}))},[t,a,l,e.userId]),{tab:c}=e;if(!c)return null;let{Component:d}=NT[c];return o.createElement(N.x,{className:"user_page_view--loadingContainer--vr9Zb",state:i,failure:void 0},t=>o.createElement(NI,{component:d,tab:c,userId:e.userId,context:t}))}function NN(e){let t=(0,aJ.md)(nA.t),a=(0,aJ.md)(nA.d2),r=(0,rv.sZ)(),n=(0,j.FC)();o.useEffect(()=>{(0,eP.o5)(e.selectedView)},[e.selectedView]);let l=function(e,t,a){var r;let{selectedView:n,currentTeamId:l,teams:i,permissionState:s}=e,c=l?i[l]:null,d=!!l&&!!c&&!!(0,K.oc)(l,s)&&!(0,K.w5)(c)&&c.student_team_at!==lC.kU.STUDENT_TEAM_CURRENT&&c.student_team_at!==lC.kU.STUDENT_TEAM_EXPIRED;switch(n.view){case"communityHub":{let{content:e,key:t}=hh(n);return{pageContent:o.createElement(so.r,{toolbar:void 0,content:e,collapseSidebarOnTabletView:!0,key:t}),CustomPageLayout:hy}}case"deletedFiles":return(0,_.kc)().pdr_trashed_section?{pageHeaderContent:(0,S.t)("file_browser.tool_bar.trash"),pageContent:(0,O.T8)(o.createElement(x9,{key:"trashed"}),t3.e0.FILE_BROWSER,{view:"trashed"})}:{pageHeaderContent:(0,S.t)("file_browser.tool_bar.deleted"),pageContent:(0,O.T8)(o.createElement(x9,{key:"deleted"}),t3.e0.FILE_BROWSER,{view:"deleted"})};case"draftsToMove":return{pageHeaderContent:(0,S.t)("file_browser.tool_bar.drafts_to_move"),pageContent:o.createElement(we,{key:"draftsToMove"})};case"folder":if(n.folderId===(null==(r=e.user)?void 0:r.drafts_folder_id))return{pageHeaderContent:(0,S.t)("file_browser.tool_bar.drafts"),pageHeaderActions:NS({from:hw.f6.FILE_BROWSER_TOPBAR_DRAFTS,user:e.user,currentOrgId:e.currentUserOrgId,isTeamLockedDueToStarterLimits:d,folderId:e.user.drafts_folder_id}),pageContent:(0,O.T8)(o.createElement(bW,{folderId:n.folderId,key:"drafts",userId:e.user.id}),t3.e0.FILE_BROWSER_DRAFTS,{orgId:e.currentUserOrgId,teamId:e.currentTeamId})};{let e=n.shouldShowRenameModal||!1;return{pageContent:o.createElement(T0,{folderId:n.folderId,key:`folder-${n.folderId}`,shouldShowRenameModal:e})}}case"workspace":switch(n.subView){case nE.V0.ADMIN:return{pageContent:(0,O.T8)(o.createElement(a0.y$,{workspaceId:n.workspaceId,selectedTab:n.selectedTab}),t3.e0.WORKSPACE_ADMIN_SETTINGS_PAGE,{workspaceId:n.workspaceId,workspaceViewTab:n.selectedTab})};case nE.V0.DIRECTORY:return{pageContent:(0,O.T8)(o.createElement(cR,null),t3.e0.WORKSPACE_DIRECTORY_PAGE,{workspaceId:n.workspaceId,workspaceGroupViewTab:n.selectedTab})};default:(0,el.xb)(n)}case"licenseGroup":if(n.subView===nf.GN.ADMIN)return{pageContent:(0,O.T8)(o.createElement(a0.VY,null),t3.e0.LICENSE_GROUP_ADMIN_SETTINGS_PAGE,{licenseGroupId:n.licenseGroupId,licenseGroupViewTab:n.selectedTab})};(0,el.xb)(n);case"org":return{pageHeaderContent:e.currentOrg?o.createElement(ix,null):void 0,pageHeaderActions:[o.createElement(T4,{orgId:n.orgId,key:"org-page-header-actions"})],pageContent:(0,O.T8)(o.createElement(Iy,{orgId:n.orgId,selectedTab:n.orgViewTab}),t3.e0.ORG_PAGE,{orgId:n.orgId,orgViewTab:(n.orgViewTab===r9.X.HOME?"HOME":n.orgViewTab)||""})};case"orgAdminSettings":return{pageContent:(0,O.T8)(o.createElement(a0.vW,{selectedTab:n.orgAdminSettingsViewTab,selectedSecondaryTab:n.orgAdminSettingsViewSecondaryTab,selectedExtensionId:n.selectedExtensionId,selectedWorkspaceId:n.selectedWorkspaceId}),t3.e0.ORG_ADMIN_SETTINGS_PAGE,{orgId:e.currentUserOrgId,orgViewTab:n.orgAdminSettingsViewTab,source:n.orgAdminSettingsViewTab||"dashboard",orgViewSecondaryTab:n.orgAdminSettingsViewSecondaryTab})};case"orgDomainManagement":let m=[{text:(0,S.t)("general.admin"),onClick:()=>{e.dispatch(A.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:ng.J7.DASHBOARD}))}},{text:(0,S.t)("org_dashboard.settings"),onClick:()=>{e.dispatch(A.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:ng.J7.SETTINGS}))}}];return{pageContent:(0,O.T8)(o.createElement(a0.Oe,null),t3.e0.ORG_DOMAIN_MANAGEMENT_PAGE,{orgId:e.currentUserOrgId}),pageHeaderContent:o.createElement(aZ.B,{items:m})};case"billingGroupDashboard":return{pageContent:(0,O.T8)(o.createElement(a0.wu,null),t3.e0.BILLING_GROUP_DASHBOARD_SETTINGS_PAGE,{orgId:e.currentUserOrgId,orgViewTab:n.selectedTab})};case"recentFiles":return e.dispatch(A.$T({view:"recentsAndSharing",tab:nl.G.RECENTLY_VIEWED})),null;case"recentsAndSharing":let u=n.tab||nl.G.RECENTLY_VIEWED,p=a===t3.qo.ORG,f=NS({from:hw.f6.FILE_BROWSER_TOPBAR_RECENTS,isFreeUser:t,isInOrgSpace:p,user:e.user,currentOrgId:e.currentUserOrgId,folderId:e.user.drafts_folder_id});return{pageHeaderContent:(0,S.t)("file_browser.tool_bar.recents"),pageHeaderActions:f,pageContent:(0,O.T8)(o.createElement(xR,{selectedTab:u,userId:e.user.id,accountModalTab:n.accountModalTab,emailPolicyToUnsubscribeFrom:n.emailPolicyToUnsubscribeFrom}),t3.e0.FILE_BROWSER,{view:"recentsAndSharing",userSpace:e.currentUserOrgId?t3.qo.ORG:t3.qo.PERSONAL})};case"resourceUnavailable":return{pageContent:o.createElement(si.S,{resourceType:n.resourceType})};case"search":{let{searchScope:t,query:a}=e.search.parameters,r=!g.Ay.mobile;return{pageHeaderContent:o.createElement(NC,{query:a}),pageContent:(0,O.T8)(o.createElement(oe.bS,null),t3.e0.UNIFIED_SEARCH,{showInternalModal:r&&t!==s5.Rx.COMMUNITY,showCommunityModal:r&&t===s5.Rx.COMMUNITY})}}case"sharedWithYou":return{pageContent:o.createElement(xO,{tab:n.tab})};case"team":{let t=e.teams[n.teamId],a=n.teamViewTab??(0,r5.ZP)(t,e.permissionState);return{pageContent:(0,O.T8)(o.createElement(x3,{teamId:n.teamId,selectedTab:a,upgradeModalType:n.upgradeModalType,showProOnboardingModal:n.isProUpgrade,key:`team-${n.teamId}`}),t3.e0.TEAM_PAGE,{teamId:n.teamId,canUpgradeToPro:(0,K.hp)(t,e.permissionState),userSpace:e.currentUserOrgId?t3.qo.ORG:t3.qo.PERSONAL,canEdit:(0,q.canEditTeam)(n.teamId,e.permissionState)})}}case"teamAdminConsole":{let e=n.teamAdminConsoleViewTab??(n.isProTeam?hT.I.DASHBOARD:hT.I.MEMBERS);return{pageContent:(0,O.T8)(o.createElement(a0.JC,{teamId:n.teamId,selectedTab:e,shouldShowDevModeSuggestedUpgradesModal:!!n.shouldShowDevModeSuggestedUpgradesModal}),t3.e0.TEAM_ADMIN_PAGE,{teamId:n.teamId,teamAdminConsoleViewTab:e})}}case"teamFeed":let E=[{text:(0,S.t)("fig_feed.feed"),onClick:()=>{e.dispatch(A.$T({view:"teamFeed"}))}}],v=[o.createElement(ye,{key:"create-feed-post-button"})];return{pageHeaderContent:o.createElement(aZ.B,{items:E}),pageHeaderActions:v,pageContent:o.createElement(Nk,{postUuid:n.postUuid,creatorId:n.creatorId,feedTab:n.feedTab})};case"user":return{pageHeaderContent:(0,S.t)("internal_profile.profile"),pageHeaderActions:e.user.community_profile_handle&&e.user.id===n.userId?[o.createElement(IS,{key:"viewCommunityProfileAction"})]:void 0,pageContent:o.createElement(Nx,{userId:n.userId,tab:n.userViewTab,orgId:n.orgId})};default:return null}}({...e,currentOrg:r,permissionState:n},!!t.data,a.data?a.data:t3.qo.ORG),i=e.showingFileBrowserLoader;if(!l)return null;let{CustomPageLayout:s,pageContent:c}=l;return s?o.createElement(yd,null,o.createElement(s,null,!i&&c)):o.createElement(yd,null,o.createElement(oJ,{...e,showingFileBrowserLoader:i,pageHeaderContent:l.pageHeaderContent,pageHeaderActions:l.pageHeaderActions},c))}function NC(e){return e.query?o.createElement("div",{className:ef.cx.flex.columnGap8.$},o.createElement("span",{className:ef.cx.flexShrink0.$},o.createElement(ev.E,{color:"secondary"},(0,S.tx)("search.search_results_for"))),o.createElement("div",{className:ef.cx.flex.fontMedium.minW0.$},"\u201C",o.createElement(ev.E,{truncate:!0},e.query),"\u201D")):o.createElement("div",{className:ef.cx.flex.columnGap8.$},o.createElement("span",{className:ef.cx.flexShrink0.$},o.createElement(ev.E,{color:"secondary"},(0,S.tx)("search.search_results"))))}function NS({from:e,user:t,isFreeUser:a,isInOrgSpace:r,currentOrgId:n,isTeamLockedDueToStarterLimits:l,folderId:i}){if((0,_.kc)().ps_benchmark&&t&&(0,rb.R$)(t,n))return[];let s=e===hw.f6.FILE_BROWSER_TOPBAR_RECENTS,c=s&&(0,M.mw)(!!a,!!r),d=(0,_.kc)().omnicreate_button,m=s?o.createElement(wI,{key:"resourceCreationAction",from:e,dropdownType:hx.x,disabled:!1,folderId:i,leftContent:o.createElement(IT,null)}):o.createElement(ww,{key:"resourceCreationAction",from:e,dropdownType:hx.x,disabled:!1,folderId:i}),u=c?o.createElement(IC,{key:"newDesignActionDropdown",from:e,dropdownType:IN.$c.DESIGN,dataTestId:"new-design-file-button-dropdown"}):o.createElement(ws,{key:"newDesignAction",from:e,isTeamLocked:l}),p=c?o.createElement(IC,{key:"newFigjamActionDropdown",from:e,dropdownType:IN.$c.WHITEBOARD,dataTestId:"new-whiteboard-file-button-dropdown"}):o.createElement(wd,{key:"newFigjamAction",from:e,isTeamLocked:l}),f=c?o.createElement(IC,{key:"newSlidesActionDropdown",from:e,dropdownType:IN.$c.SLIDES,dataTestId:"new-slides-file-button-dropdown"}):o.createElement(hk,{key:"newSlidesAction",from:e,isTeamLocked:l}),g=o.createElement(hI.kD,{key:`${Eq.oQ}ToolbarAction`,from:e,isTeamLocked:l}),E=o.createElement(gG.p,{key:"jamboardImporter"},o.createElement(yE,null)),v=o.createElement(o.Fragment,{key:"importAction"},o.createElement(ym.E_,{isTeamLocked:l}),o.createElement(gG.p,null,o.createElement(yE,null)));return[o.createElement(Ix,{key:"getDesktopApp"}),...d?[m,E]:[u,p,g,f,v]]}function Nk(e){return(0,hb.w)()?o.createElement(yo,{postUuid:e.postUuid,creatorId:e.creatorId,feedTab:e.feedTab}):null}var NA=a(787133);let NL="add_collaborators--emailListItem--dnvC-";function NR({selectedView:e}){let[t,a]=o.useState(["","",""]),r=(0,s.d4)(t=>t.teams[e.teamId]),n=(0,s.d4)(e=>e.teamCreation),l=(0,s.d4)(e=>e.payment),i=(0,s.wA)(),c=o.useCallback(()=>{r&&i(A.$T({view:"team",teamId:r.id}))},[i,r]),d=o.useCallback((e,r)=>{if(r>=t.length)return;let n=[...t];n[r]=e,a(n)},[t]),m=o.useCallback(()=>{a([...t,""])},[t]),u=o.useCallback(()=>{let e=!!n.isEduTeam;l.promo?i(F.g_({teamId:r.id,teamName:r.name,previousView:{view:"team",teamId:r.id}})):e?i(D.Vm({teamId:r.id,showBreadcrumbs:!0})):i(A.$T({view:"teamUpgrade",teamFlowType:ee.SC.UPGRADE_EXISTING_TEAM,teamId:r.id,paymentStep:Z.tn.UPGRADE_NEW_TEAM,previousView:{view:"team",teamId:r.id},planType:ee.Sc.TEAM}))},[i,r,l.promo,n.isEduTeam]),_=o.useCallback(()=>t.filter(e=>e).map(e=>e.trim()),[t]),p=o.useCallback(()=>{i((0,t1.rq)({emails:_(),resourceType:z.vt.TEAM,resourceIdOrKey:r.id,level:t8.e6.EDITOR,onSuccess:()=>{i(Tg.r1({loading:!1})),u()}}))},[_,r,u,i]);return o.createElement(O.fu,{name:"Add Collaborators",properties:{teamId:null==r?void 0:r.id}},o.createElement("div",null,o.createElement(az,{menu:o.createElement(aG,{onClick:c},o.createElement(es.B,{svg:aQ.default,className:"add_collaborators--modalCloseX--sJGp5"}))},o.createElement(aY.J,{index:2}),o.createElement(aD.JR,null,(0,S.tx)("team_creation.add_your_collaborators")),o.createElement(aD.Kh,null,(0,S.tx)("team_creation.you_can_update_user_permissions_on_the_team_page_after_setting_up")),o.createElement("div",{className:"add_collaborators--formContainer--zTKXv"},o.createElement("div",{className:"add_collaborators--emailInputsContainer--19ZBc"},t.map((e,t)=>o.createElement(I.il,{key:`collaborator-email-input-${t}`,className:NL,value:e,onChange:e=>d(e.target.value,t),maxLength:255,placeholder:(0,S.t)("team_creation.email")}))),o.createElement(I.nR,{className:NL,onClick:m},(0,S.tx)("team_creation.add_another")),o.createElement("div",{className:"add_collaborators--spacing--2VA7s"}),o.createElement("div",{className:"add_collaborators--ctaContainer--VGMvb"},o.createElement(I.nD,{disabled:0===_().length,onClick:p,trackingProperties:{numCollaborators:_().length}},(0,S.tx)("team_creation.continue")),o.createElement(I.Ph,{onClick:u,trusted:!0},(0,S.tx)("team_creation.skip_for_now")))))))}var ND=a(994190),NF=a(316082),NP=a(632376),NM=a(955066),NO=a(63104),NB=a(132367),NU=a(167198);let NV=["recentFiles","folder","team","search","recentsAndSharing"];function NH(){let e=(0,s.d4)(e=>e.autosave),t=(0,ry._6)(),a=(0,NF.y)(),{unsyncedFiles:r,localUnsyncedFiles:n}=(0,y3.Gg)();return!a||null!=e.lastSnoozeTime&&Date.now()-e.lastSnoozeTime<864e5?null:(r.length>0||n.length>0)&&NV.includes(t.view)?o.createElement(Nj,{unsyncedFiles:r,localUnsyncedFiles:n}):null}let NW=!1;function Nj(e){let t=(0,s.wA)();o.useEffect(()=>{let e=()=>{t(NM.Jw())};return NB.hp.register(NB.a,e),function(){NB.hp.unregister(NB.a,e),t(R.ES({type:NP.EO.type}))}},[t]);let a=(0,ry._6)(),[r,n]=o.useState(!1);o.useEffect(()=>{NW||(NW=!0,(0,ND.Mw)()),r||(n(!0),(0,tK.sx)("Autosave Notification",{hasUnsyncedFiles:e.unsyncedFiles.length>0,hasLocalUnsyncedFiles:e.localUnsyncedFiles.length>0,firstUnsyncedFile:e.unsyncedFiles.length>0?e.unsyncedFiles[0].fileKey:null,firstLocalUnsyncedFile:e.localUnsyncedFiles.length>0?e.localUnsyncedFiles[0].fileKey:null,view:a.view},{forwardToDatadog:!0}))},[t,e.unsyncedFiles,e.localUnsyncedFiles,r,a]);let l=(0,$.iZ)(),i=[...e.unsyncedFiles,...e.localUnsyncedFiles];if(0===i.length||!l)return o.createElement(o.Fragment,null);let c=i.length>1,d=i[0],u=(0,NO.y8)(d)?d.file.name:d.name,_=u.length>40?u.substring(0,40)+"\u2026":u,p=c?(0,S.t)("autosave.notification.message.more_than_one_file"):(0,S.t)("autosave.notification.message.one_file",{fileName:_}),f=c?(0,S.tx)("autosave.notification.action_review"):(0,S.tx)("autosave.notification.action_open_to_sync");return o.createElement("div",{className:"autosave_notification--notification--u3sx0 text--_negText--j9g-L"},o.createElement(es.B,{className:"autosave_notification--icon--uvtXB",svg:NU.A,width:"24",height:"24"}),o.createElement("div",{className:"autosave_notification--message--yAhFz"},p),o.createElement("div",{className:"autosave_notification--actions--dk-yq"},o.createElement("div",{className:"autosave_notification--mainAction--sidqJ autosave_notification--action--Brz-5",onClick:()=>{c?t(R.to({type:NP.EO})):(0,NO.y8)(d)?m.Ay.redirect((0,lb.r1)(d.file,!0),"_blank"):t(yL.NA({file:d,openNewFileIn:hw.ai.NEW_TAB,source:yO.U.AUTOSAVE_NOTIFICATION}))}},f),o.createElement("div",{className:"autosave_notification--action--Brz-5",onClick:()=>{(0,tK.sx)("Autosave Notification Snooze",{files:i.length,firstFile:d.fileKey}),t(NM.zE(Date.now()))}},(0,S.tx)("autosave.notification.action_later"))))}var N$=a(27182),NG=a(701283),Nz=a(761070);function NY(){return(0,NF.w)()?null:o.createElement(NK,null)}function NK(){let[e,t]=o.useState(!0);return o.createElement("div",{className:"offline_notification--notification--hEP5F notification--notification--Q5PkV text--_negText--j9g-L _overlayBase--_overlayBase--Rkj8l"},o.createElement(es.B,{className:NG.Kk,svg:Nz.A,width:"24",height:"24"}),o.createElement("div",{className:NG.iU},(0,S.tx)(e?"file_browser.offline_notification.youre_offline_message_body":"file_browser.offline_notification.youre_offline_message_body_no_create",{youreOfflineMessagePrefix:o.createElement("span",{className:"offline_notification--messageBold--QAlE3"},(0,S.tx)("file_browser.offline_notification.youre_offline_message_prefix"))})),e&&o.createElement("div",{className:NG.o1},o.createElement(NQ,{onClick:()=>t(!1)})))}function NQ({onClick:e}){let t=(0,s.wA)(),a=(0,wV.B)();return o.createElement("div",{className:"offline_notification--createFileButton--BWecZ notification--action--v-pvn",role:"button",tabIndex:0,onClick:()=>{e(),t(yL.zE({state:a,editorType:z._Y.DESIGN,team:void 0,from:hw.f6.OFFLINE_NOTIFICATION,openNewFileIn:hw.ai.SAME_TAB}))}},(0,S.tx)("file_browser.offline_notification.create_file"))}var Nq=a(694772);let NX="team_creation--createTeamText--VjY8f";function NJ({currentTeamId:e,currentUserOrgId:t,user:a,selectedView:r,dropdownShown:n,teamCreation:l,orgById:i}){let c=(0,s.wA)(),[d,u]=(0,o.useState)(null),[p,f]=(0,o.useState)(z.bU.PUBLIC),g=r.ignoreCurrentPlan,E=t&&!g?i[t]:null,v=!e&&!t,h=(0,o.useRef)(null);(0,o.useEffect)(()=>{if(h.current)for(let e=0;e<h.current.elements.length;e++){let t=h.current.elements[e];if(!t.value){t.focus();break}}t&&!g&&(0,tK.sx)("team_creation_started",{user_id:(null==a?void 0:a.id)??"",org_id:t})},[t,a,g]);let y=e=>{e.preventDefault(),e.stopPropagation(),d?(c((0,H.KQ)({teamName:d,orgAccess:p,dontRedirect:!!r.onSubmitReturnToPrevView,ignoreCurrentPlan:g})),r.onSubmitReturnToPrevView&&c(A.$T((0,m.Gl)()||{view:"recentFiles"}))):c(C.s.error((0,S.t)("team_creation.your_team_name_cannot_be_empty")))},b=!(t&&!g)&&!r.onSubmitReturnToPrevView,w=(0,_.kc)().ps_benchmark&&v?null:o.createElement(aG,{onClick:()=>{c(A.$T((0,m.Gl)()||{view:"recentFiles"}))}},o.createElement(es.B,{svg:aQ.default,className:"team_creation--modalCloseX--TTg32"}));return o.createElement(O.fu,{name:"Team Creation"},o.createElement("div",null,o.createElement(az,{menu:w},b&&o.createElement(aY.J,{index:1}),o.createElement("form",{ref:h,onSubmit:y},o.createElement(aD.JR,null,(0,S.tx)("team_creation.create_a_team_title")),o.createElement("div",{className:"team_creation--newTeamContainer--43mWz team_creation--newTeamContainerBase--nwYzU"},o.createElement("div",{className:"team_creation--teamNameContainer--B6Pc3"},o.createElement("div",{className:"team_creation--teamNameLabel--ohZWy"},(0,S.tx)("team_creation.team_name_label")),o.createElement(I.il,{value:d||"",onChange:e=>{u(e.target.value)},className:"team_creation--newTeamInput--PdjEW",maxLength:255,placeholder:(0,S.t)("team_creation.team_name_input_placeholder")})),E?o.createElement("div",{className:"team_creation--orgTeamSettings--bDW2R"},o.createElement("div",{className:ef.cx.flex.$},o.createElement("div",{className:ef.cx.fontSemiBold.$},(0,S.tx)("team_creation.access_within_the_organization")),o.createElement(Nq.V,{orgAccess:p,dropdownShown:n,onChangeOrgAccess:e=>{f(e)}})),o.createElement("div",{className:NX},(0,Nq.o)(E.name)[p])):o.createElement("div",{className:NX},(0,S.tx)("team_creation.after_creating_a_team_you_can_invite_others_to_join")),o.createElement(I.nD,{className:t?"team_creation--createTeamButtonOrg--2rnOw":"team_creation--createTeamButton--C8IV7",type:"submit",disabled:l.loading,onClick:y},(0,S.tx)("team_creation.create_team_button")))))))}function NZ({selectedView:e}){var t,a,r;let n=(0,s.wA)(),l=(0,rv.dq)(),i=(0,s.d4)(e=>e.orgById),c=(0,$.iZ)(),d=(0,s.d4)(e=>e.currentTeamId),u=(0,rE.Um)(),p=(0,s.d4)(e=>e.teamCreation),f=l?i[l]:null,g=null==(r=null==(a=null==(t=(0,ns.a9)())?void 0:t.workspace_users)?void 0:a.find(e=>e.is_main_workspace))?void 0:r.workspace_id,{cannotCreateTeamReason:E}=(0,G.l6)(f,g);return(0,rb.R$)(c,l)||E===G.z4.TEAM_CREATION_CONTROL&&!(0,_.kc)().ps_benchmark?(m.Ay.redirect("/"),n(C.s.error((0,S.t)("team_creation.missing_team_creation_controls"))),null):o.createElement(NJ,{currentTeamId:d,currentUserOrgId:l,user:c,dropdownShown:u,teamCreation:p,orgById:i,selectedView:e})}var N0=a(845213);let N1="team_restore--page--cMEe2",N2="team_restore--section--AmfWe",N4="team_restore--button--C-gOz";function N8({selectedView:e}){let t,a;let r=(0,s.wA)(),[n,l]=o.useState(!1),i=e.teamId,c=(0,s.d4)(e=>e.teams[i]);o.useEffect(()=>{l(!0),N0.$.getDeleted({teamId:i}).then(({data:e})=>{r(Tg.bE({team:e.meta})),l(!1)}).catch(e=>{400!==e.status&&(r(A.$T({view:"recentFiles"})),r(C.s.error(`${e.data.message}`))),l(!1)})},[r,i]);let d=()=>{r(A.$T({view:"recentFiles"}))},m=o.createElement(I.vd,{className:N4,onClick:d},(0,S.tx)("team_restore.back"));if(c){if(c.deleted_at){let e=(0,y5.A)(c.deleted_at).add(28,"days").toDate();t=(0,S.t)("team_restore.confirm_restore_header",{teamName:c.name}),a=o.createElement("div",null,(0,S.tx)("team_restore.confirm_restore"),o.createElement("br",null),o.createElement("br",null),(0,S.tx)("team_restore.confirm_restore_deadline",{deleteDeadline:e})),m=o.createElement(I.vd,{className:N4,onClick:()=>{r(Tg.I9({teamId:i}))}},(0,S.tx)("team_restore.restore"))}else t=(0,S.t)("team_restore.ineligible"),a=(0,S.t)("team_restore.questions_contact_support",{supportEmail:(0,_.W4)()})}else{if(n)return o.createElement("div",{className:N1},o.createElement("div",{className:N2},o.createElement(tc.kt,null)));t=(0,S.t)("team_restore.expired_header"),a=o.createElement("div",null,(0,S.tx)("team_restore.expired"),o.createElement("br",null),o.createElement("br",null),(0,S.tx)("team_restore.questions_contact_support",{supportEmail:(0,_.W4)()}))}return o.createElement(O.fu,{name:"Team Restore",properties:{teamId:i}},o.createElement(az,{menu:o.createElement(es.B,{svg:aQ.default,onClick:d,className:"team_restore--modalCloseX--XNErW"})},o.createElement("div",{className:N1},o.createElement("div",{className:N2},o.createElement("div",{className:"team_restore--header--NgU8v text--fontPos20--Bcz97 text--_fontBase--QdLsd"},t),o.createElement("div",{className:"team_restore--text--F18dW text--fontPos12--YsUAh text--_fontBase--QdLsd"},a),m))))}var N3=a(49891),N5=a(507590);let N9="legacy_upgrade--closeButton--zJ0JO";var N6=a(474263);function N7({selectedView:e}){let t=(0,s.wA)(),a=(0,s.d4)(t=>t.teams[e.teamId]),{taxes:r,numDesignEditors:n,numWhiteboardEditors:l,submitPending:i}=(0,s.d4)(e=>e.payment),c=(0,s.d4)(e=>e.teamUserByTeamId[a.id]||{}),d=(0,s.d4)(e=>e.teamBilling.summary.currency),m=(0,s.d4)(e=>e.loadingState),u=bS.Be.loadingKeyForPayload({teamId:a.id}),_=(0,gE.VP)(m,u)&&!(0,gE.D2)(m,u),p=(0,tq.N1)(tq.Fq.TEAM_ADMIN_CONSOLE),f=_||"loading"===p.status;if((0,o.useEffect)(()=>{(0,gE.VP)(m,u)||(0,gE.D2)(m,u)||t(bS.Be({teamId:a.id}))},[m,t,u,a.id]),f)return o.createElement(tc.kt,{className:N5.w8});let g=o.createElement(es.B,{svg:aQ.default,onClick:()=>{(0,tK.sx)("Add Annual Plan Canceled",{teamId:e.teamId}),window.history.length<=1?t(A.$T({view:"team",teamId:e.teamId})):history.go(-1)},className:N9}),E=a.editors,v=Object.keys(c).filter(e=>{var t;return(null==(t=c[e])?void 0:t.whiteboard_paid_status)===te.Zf.FULL}).length,h=new Y.vr(d),y=(0,tJ.He)(p.data,h.currency,eO.lM.DESIGN),b=(0,tJ.He)(p.data,h.currency,eO.lM.FIGJAM),w=(0,tJ.G7)(p.data,h.currency,eO.lM.DESIGN),T=(0,tJ.G7)(p.data,h.currency,eO.lM.FIGJAM);return o.createElement("div",{className:"legacy_upgrade--addAnnualPlan--ZH1cn"},o.createElement(az,{menu:g},o.createElement(O.fu,{name:"Step Pay"},o.createElement("div",{className:N6.yU},o.createElement(aD.JR,null,(0,S.tx)("payments.add_annual_plan.title")),o.createElement(aD.Kh,null,o.createElement("p",{className:"legacy_upgrade--addAnnualPlanInstructions--MmsnZ"},(0,S.tx)("payments.add_annual_plan.intro.seat_rename",{monthlyDesignEditorCost:h.formatMoney(y,{showCents:!1}),monthlyFigjamEditorCost:h.formatMoney(b,{showCents:!1})}))),o.createElement("div",{className:N6.fI},o.createElement(N3.tG,{totalDesignEditors:E,totalWhiteboardEditors:v,numAnnualDesignEditors:n||0,numAnnualWhiteboardEditors:l||0,onNumAnnualDesignEditorsChange:e=>{t(D.js({numDesignEditors:e}))},onNumAnnualWhiteboardEditorsChange:e=>{t(D.Az({numWhiteboardEditors:e}))},showAdminPage:()=>{t(A.$T({view:"team",teamId:e.teamId,teamViewTab:hT.A.SETTINGS}))},isTeamPro:!0,dispatch:t,taxes:r,teamId:e.teamId,currency:d,submitPending:i,monthlyDesignAmount:y,monthlyFigjamAmount:b,annualMonthlyDesignAmount:w,annualMonthlyFigjamAmount:T}),o.createElement("form",{onSubmit:a=>{a.preventDefault(),t(P.b({completed_pro_cart_flow:!0})),t(D.I2({submitPending:!0})),t(D.XF({teamId:e.teamId}))}},o.createElement("div",{className:N6.ay},(0,S.tx)("payments.add_annual_plan.auto_renew.seat_rename",{cancellingIsEasyLink:o.createElement("a",{target:"_blank",rel:"noopener",href:"/pricing-faq#how-do-i-cancel-my-paid-plan"},(0,S.tx)("payments.add_annual_plan.cancelling_is_easy_link_text"))}),o.createElement("br",null),o.createElement("br",null),(0,S.tx)("payments.add_annual_plan.tos",{tosLink:o.createElement("a",{target:"_blank",rel:"noopener",href:"/tos"},(0,S.tx)("payments.add_annual_plan.tos_link_text"))})),o.createElement("div",{className:`${N6.Ou} ${N6.nM}`},o.createElement(I.vd,{type:"submit",disabled:i,className:`${N6.XX}`},(0,S.tx)("payments.add_annual_plan.cta_text")))))))))}function Ce(e){let t=(0,$.iZ)(),[a,r]=o.useState(()=>(0,Y.LN)()),n=J.b.UPGRADE_NEW_TEAM,l=(0,s.wA)(),i=(0,M.WQ)({isInDevMode:!1,isProCurrent:!1,hasFeatureListOverride:!1})&&(0,to.Hw)(t),c=(t,r)=>{let n=e.selectedView;l(D.WX({teamId:e.selectedView.teamId,selectedView:n,newTeam:!0,currency:a,billingPeriod:r}))},d=null===e.selectedView.teamId?void 0:()=>{let a=(0,_.kc)().ps_benchmark,r=null==t?void 0:t.id;if(a&&r){let t={userId:r,orgId:null,teamId:e.selectedView.teamId};l(L._l({workspace:t,view:{view:"allProjects"}}))}else l(A.$T({view:"team",teamId:e.selectedView.teamId}))},m=e.selectedView.teamId,u=o.useRef(null);return o.createElement(O.fu,{name:"Upgrade Team",properties:{teamId:m,step:Z.tn.UPGRADE_NEW_TEAM}},o.createElement("div",{className:"legacy_upgrade--teamUpgrade--auGJz"},o.createElement(az,{menu:o.createElement(aG,{onClick:()=>{let a=(0,_.kc)().ps_benchmark,r=null==t?void 0:t.id,n=e.selectedView.teamId;if(a){let t={view:"recentFiles"};r&&n?l(L._l({workspace:{userId:r,teamId:n,orgId:null},view:e.selectedView.previousView||t})):l(A.$T(e.selectedView.previousView||t))}else l(A.$T(e.selectedView.previousView||(n?{view:"team",teamId:n}:{view:"recentFiles"})))}},o.createElement(es.B,{svg:aQ.default,className:N9})),pageRef:u},o.createElement(aY.J,{index:3}),o.createElement(O.fu,{name:"Upgrade New Team",properties:{teamId:m,trackingDescriptor:ew.c.UPGRADE_YOUR_TEAM}},o.createElement("div",{className:ey()(e.className,{"step_upgrade_new_team--container--BixhQ":!i})},o.createElement(aD.JR,{className:"step_upgrade_new_team--stepTitleComparisonChart--yyzB5 step_upgrade_new_team--stepTitle--yFYG8"},o.createElement("span",null,(0,S.tx)("plan_details.choose_your_team_plan"))),o.createElement(tl.O,{currency:a,chooseStarterPlan:d,chooseProPlan:e=>c(null,e),chooseOrgPlan:()=>{l(D.Bq({currency:a,upsellSource:n}))},updateCurrency:e=>{r(e),l(A.oB())},upsellSource:n,parentRef:u}),i&&o.createElement(ti.V,null))))))}var Ct=a(340159),Ca=a(657193),Cr=a(611886),Cn=a(351226),Cl=a(833629),Ci=a(966537);function Co(){return o.createElement("svg",{width:"310",height:"167",viewBox:"0 0 310 167",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("rect",{x:"280.007",y:"103.275",width:"9.9157",height:"10.5949",fill:"#FFC9C1"}),o.createElement("rect",{x:"280.007",y:"124.465",width:"9.9157",height:"10.5949",fill:"#FFC9C1"}),o.createElement("rect",{x:"280.007",y:"113.871",width:"9.9157",height:"10.5949",fill:"#B98E01"}),o.createElement("rect",{x:"299.833",y:"103.275",width:"9.9157",height:"10.5949",fill:"#FFC9C1"}),o.createElement("rect",{x:"299.833",y:"124.465",width:"9.9157",height:"10.5949",fill:"#FFC9C1"}),o.createElement("rect",{x:"299.833",y:"113.871",width:"9.9157",height:"10.5949",fill:"#B98E01"}),o.createElement("rect",{x:"289.928",y:"103.275",width:"9.9157",height:"10.5949",fill:"#B98E01"}),o.createElement("rect",{x:"289.928",y:"124.465",width:"9.9157",height:"10.5949",fill:"#B98E01"}),o.createElement("rect",{x:"289.928",y:"113.871",width:"9.9157",height:"10.5949",fill:"#FFC9C1"}),o.createElement("rect",{x:"280.007",y:"134.49",width:"9.9157",height:"10.5949",fill:"#FFC9C1"}),o.createElement("rect",{x:"280.007",y:"155.679",width:"9.9157",height:"10.5949",fill:"#FFC9C1"}),o.createElement("rect",{x:"280.007",y:"145.085",width:"9.9157",height:"10.5949",fill:"#B98E01"}),o.createElement("rect",{x:"299.833",y:"134.49",width:"9.9157",height:"10.5949",fill:"#FFC9C1"}),o.createElement("rect",{x:"299.833",y:"155.679",width:"9.9157",height:"10.5949",fill:"#FFC9C1"}),o.createElement("rect",{x:"299.833",y:"145.085",width:"9.9157",height:"10.5949",fill:"#B98E01"}),o.createElement("rect",{x:"289.928",y:"134.49",width:"9.9157",height:"10.5949",fill:"#B98E01"}),o.createElement("rect",{x:"289.928",y:"155.679",width:"9.9157",height:"10.5949",fill:"#B98E01"}),o.createElement("rect",{x:"289.928",y:"145.085",width:"9.9157",height:"10.5949",fill:"#FFC9C1"}),o.createElement("circle",{cx:"10.751",cy:"63.5",r:"10.5",fill:"#FF01E6"}),o.createElement("circle",{cx:"31.751",cy:"63.5",r:"10.5",fill:"#FFC9C1"}),o.createElement("circle",{cx:"10.751",cy:"84.5",r:"10.5",fill:"#0A5C35"}),o.createElement("circle",{cx:"31.751",cy:"84.5",r:"10.5",fill:"#FF7237"}),o.createElement("rect",{width:"161",height:"106",transform:"translate(76.2148 28.0273)",fill:"#874FFF"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M101.186 28.0273C115.125 28.0273 126.424 39.3269 126.424 53.2657C126.424 67.2045 115.125 78.5041 101.186 78.5041H76.2158L76.2158 28.0273L101.186 28.0273ZM76.2191 83.5506H126.427V134.027H76.2191V83.5506ZM181.319 83.5501L131.111 83.5501L131.111 108.923C131.111 122.787 142.351 134.027 156.215 134.027C170.08 134.027 181.319 122.787 181.319 108.923L181.319 83.5501ZM186.006 134.027V83.5506V33.0739H236.215V83.5506C236.215 111.28 213.735 134.027 186.006 134.027Z",fill:"#95B9AC"}),o.createElement("rect",{x:"126.087",y:"83.5518",width:"5.02083",height:"25.5749",fill:"#95B9AC"}),o.createElement("rect",{x:"76.2148",y:"83.5518",width:"5.04767",height:"25.4389",transform:"rotate(-90 76.2148 83.5518)",fill:"#95B9AC"}),o.createElement("rect",{x:"180.983",y:"83.5518",width:"5.02083",height:"25.5749",fill:"#95B9AC"}),o.createElement("rect",{x:"60.251",y:"12",width:"16",height:"16",fill:"#33DFDF"}),o.createElement("rect",{x:"60.251",y:"134",width:"16",height:"16",fill:"#33DFDF"}),o.createElement("rect",{x:"237.251",y:"134",width:"16",height:"16",fill:"#33DFDF"}),o.createElement("rect",{x:"195.738",width:"85",height:"85",fill:"#0A5C35"}),o.createElement("path",{d:"M214.06 53.9162C219.483 51.1514 260.1 29.4353 256.283 27.5269",stroke:"#67FF7F",strokeWidth:"5.5",strokeLinecap:"round"}),o.createElement("path",{d:"M225.934 13.0127C231.093 24.7758 243.087 48.6871 243.087 61.8329",stroke:"#67FF7F",strokeWidth:"5.5",strokeLinecap:"round"}),o.createElement("path",{d:"M247.047 13.6724C242.127 26.6618 233.88 55.8409 227.915 67.7704",stroke:"#67FF7F",strokeWidth:"5.5",strokeLinecap:"round"}),o.createElement("path",{d:"M214.06 32.8047C230.842 33.737 255.224 44.4138 269.478 53.9161",stroke:"#67FF7F",strokeWidth:"5.5",strokeLinecap:"round"}))}function Cs(e){return o.createElement(O.fu,{name:"Continue Duplication after Verification Modal"},o.createElement(eW.XV,{headerSize:"hidden",maxWidth:348,containerClassName:"continue_after_verification--modalContainer--L-0LF",innerContainerClassName:"continue_after_verification--innerModal--JmgbP",title:" ",onClose:e.onClose,paddingLeft:40,paddingRight:40},o.createElement("div",{className:ef.cx.mxAuto.$},o.createElement(Co,null)),o.createElement("h1",{className:"continue_after_verification--title---5Cuw"},(0,S.tx)("community.duplicate_modal.youre_all_set")),o.createElement("div",null,(0,S.tx)("community.duplicate_modal.youve_verified_your_email_at",{userEmail:o.createElement("b",null,e.userEmail)})),o.createElement(I.LA,{fullWidth:!0,onClick:e.onDuplicateClick,type:"button",role:"button",trackingProperties:{trackingDescriptor:ew.c.CONTINUE_TO_FILE}},(0,S.tx)("community.duplicate_modal.continue_to_file"))))}let Cc=(0,eU.Ju)(function(e){let t=(0,s.d4)(e=>{var t;return null==(t=e.user)?void 0:t.email}),a=(0,s.wA)(),r=(0,s.d4)(t=>t.hubFiles[e.hubFileId]),n=gE.mC(gR.ts.loadingKeyForPayload({hubFileId:e.hubFileId})),l=(0,ry._6)(),i=()=>{a(R.Ce())};return(o.useEffect(()=>{r||a(gR.ts({hubFileId:e.hubFileId}))},[a,r,e.hubFileId]),n)?t&&(r||!n)?o.createElement(Cs,{onClose:i,userEmail:t,onDuplicateClick:()=>{a(P.b({signed_up_from_community:!0}));let t=Cr.gE(e=>{a((0,R.to)({type:Cn._,data:{payload:e}}))},{isFreemiumPreview:e.isFreemiumPreview});i(),a(t(r)),new URLSearchParams(m.Ay.location.search).has(ua._O)&&a(A.$T({...l,triggerFreemiumPreview:void 0}))}}):(i(),null):null},"ContinueAfterVerificationModal");var Cd=a(186799),Cm=a(472503);function Cu(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.fileImport.step),r=(0,Cd.B2)().unwrapOr(!1),[n,l]=o.useState(!1),i=o.useCallback(()=>l(!0),[]),c=o.useCallback(()=>l(!1),[]),d=o.useCallback(e=>{l(!1),r&&t((0,Cd.b6)({dataTransfer:e}))},[t,r]);return o.createElement(a4.Y,{className:ef.cx.flex.flexColumn.$,isDragTarget:Cd.al,onTargetDragEnter:i,onTargetDragLeave:c,onTargetDrop:d},e.children,r&&o.createElement(C_,{step:a,dragging:n}))}function C_({step:e,dragging:t}){switch(e){case Cm.Y5.CONFIRM_PDF_IMPORT:return null;case Cm.Y5.START:case Cm.Y5.FILE_IMPORT_WITH_CANCELED_PDF:case Cm.Y5.FILE_IMPORT_WITH_CONFIRMED_PDF:return o.createElement("div",{className:t?"file_browser_drop_zone--dragTargetDragging--giyPY file_browser_drop_zone--dragTargetNormal--TOR0f":"file_browser_drop_zone--dragTargetNormal--TOR0f"});default:(0,el.xb)(e)}}let Cp="file_browser_view--filebrowserHtml--v2BLN",Cf="file_browser_view--filebrowserBody--6MX2i",Cg="file_browser_view--desktop--5VrC1";class CE extends o.Component{constructor(){super(...arguments),this.state={viewHistoryStackSize:0,viewHistoryStackPosition:0,screenChangedFromNavigationButtons:!1},this.goBack=()=>{this.state.viewHistoryStackPosition>0&&(history.back(),this.setState({viewHistoryStackPosition:this.state.viewHistoryStackPosition-1,screenChangedFromNavigationButtons:!0}))},this.goForward=()=>{this.state.viewHistoryStackPosition<this.state.viewHistoryStackSize&&(history.forward(),this.setState({viewHistoryStackPosition:this.state.viewHistoryStackPosition+1,screenChangedFromNavigationButtons:!0}))}}componentDidMount(){document.body.classList.add(Cf),document.documentElement.classList.add(Cp),(0,uX.OS)(this.props.dispatch),(0,eP.I0)(this.props.selectedView),(d.eD||(0,c.ce)())&&(this.desktopBackgroundElement=document.createElement("div"),this.desktopBackgroundElement.classList.add("file_browser_view--desktopBackground--kte3I"),document.body.appendChild(this.desktopBackgroundElement),document.body.classList.add(Cg)),(0,E.hW)("exp_aa_test_file_browser_view").catch(f.lQ),"communityHub"===this.props.selectedView.view&&function(e,t){let a=t.figjam_editor_onboarded||(0,Cl._q)(t)||t.editor_community_duplicate_onboarded||t.orgs_onboarded||t.welcome_onboarded,r=(0,TE.QL)("after-auth-duplicate-file-id"),n=(0,TE.QL)("show_eula");r&&(n?e((0,R.to)({type:Ci.F,data:{hubFileId:r}})):a||e((0,R.to)({type:Cc,data:{hubFileId:r}})))}(this.props.dispatch,this.props.userFlags)}componentDidUpdate(e){this.shouldScrollToTop(e)&&window.scrollTo(0,0),e.selectedView!==this.props.selectedView&&(this.state.screenChangedFromNavigationButtons?this.setState({screenChangedFromNavigationButtons:!1}):this.setState({viewHistoryStackSize:this.state.viewHistoryStackPosition+1,viewHistoryStackPosition:this.state.viewHistoryStackPosition+1}))}componentWillUnmount(){document.body.classList.remove(Cf),document.documentElement.classList.remove(Cp),this.desktopBackgroundElement&&(document.body.classList.remove(Cg),document.body.removeChild(this.desktopBackgroundElement)),this.props.dispatch(R.AS())}shouldScrollToTop(e){return(0,Ca.SW)(e.selectedView,this.props.selectedView)}render(){var e,t,a;let r=this.props.selectedView,n=(0,ou.d9)(this.props.selectedView),l=g.g3&&!(0,_.kc)().file_browser_enable_mweb&&!n,i=(g.uG&&(0,_.kc)().file_browser_enable_mweb||g.mZ)&&!n;if("teamUpgrade"===r.view)return r.paymentStep===Z.tn.UPGRADE_NEW_TEAM?o.createElement(Ce,{selectedView:r}):o.createElement(tz,{selectedView:r});if("addAnnualPlan"===r.view)return o.createElement(N7,{selectedView:r});if("teamCreation"===r.view)return r.fromNewTab?void this.props.dispatch(L.Dw({previousView:r.previousView,onSubmitReturnToPrevView:r.onSubmitReturnToPrevView,isEduTeam:r.isEduTeam})):o.createElement(NZ,{selectedView:r});if("addCollaborators"===r.view)return o.createElement(NR,{selectedView:r});if("orgSelfServe"===r.view)return o.createElement(aH,{step:r.step||t4.X1.Initial,initialDesignSeats:r.initialDesignEditors||0,orgMigrated:!!r.orgMigrated,dropdownShown:this.props.dropdownShown,newTeamProps:r.newTeamProps,upsellSource:r.upsellSource});if("teamRestore"===r.view)return o.createElement(N8,{selectedView:r});if("promoReview"===r.view)return o.createElement(aj,{promo:null==(e=this.props.payment)?void 0:e.promo,selectedView:r});else if("eduReview"===r.view)return o.createElement(aX,{selectedView:r});if(!this.props.user){let{content:e}=hh(r);return e?m.Ay.reload("Logged-out Community Hub"):(console.error(`Signed out page: unrecognized route ${m.Ay.location.pathname}, redirecting to /`),m.Ay.redirect("/")),null}if((0,_.kc)().ps_benchmark&&!this.props.currentUserOrgId&&!this.props.currentTeamId)return console.error("No current organization or team plan set for user. Redirecting to /files"),m.Ay.redirect("/files"),null;let s=l&&o.createElement(v.R,{userIdForTracking:null==(t=this.props.user)?void 0:t.id,renderBlockingPrompt:!0});return o.createElement(N$.C.Provider,{value:{goBack:this.goBack,goForward:this.goForward,canGoBack:this.state.viewHistoryStackPosition>0,canGoForward:this.state.viewHistoryStackPosition<this.state.viewHistoryStackSize}},l?s:o.createElement(o.Fragment,null,i&&o.createElement(v.R,{userIdForTracking:null==(a=this.props.user)?void 0:a.id}),o.createElement(Cu,null,o.createElement(NH,null),o.createElement(NY,null),o.createElement(NN,{...this.props,user:this.props.user,showingFileBrowserLoader:this.props.showingFileBrowserLoader}))))}}function Cv(){let e=(0,s.wA)(),t=(0,rv.dq)(),a=(0,rE.Um)(),r=(0,s.d4)(e=>e.teams),n=(0,$.iZ)(),l=(0,s.d4)(e=>e.userFlags),i=(0,s.d4)(e=>e.folders),c=(0,ry._6)(),d=NA.q.useIsLoading(),m=(0,s.d4)(e=>e.autosave),f=(0,s.d4)(e=>e.payment),g=(0,s.d4)(e=>e.teamUserByTeamId),E=(0,s.d4)(e=>e.teamBilling),v=(0,s.d4)(e=>e.teamCreation),h=(0,s.d4)(e=>e.loadingState),y=(0,s.d4)(e=>e.orgById),b=(0,s.d4)(e=>e.favorites),w=(0,s.d4)(e=>e.currentTeamId),T=(0,s.d4)(e=>e.mobileNavShown),I=(0,s.d4)(e=>e.userTeamFlags),x=(0,s.d4)(e=>e.search),N=(0,s.d4)(e=>e.dragState),C=(0,s.d4)(e=>e.userStateLoaded);return!function(){let e=(0,s.Pj)(),t=o.useMemo(()=>(0,mu.g)(),[]),a=(0,rr.Rs)(rl.__y,{cacheNonce:t});o.useEffect(()=>{var t;if("loaded"===a.status&&a.data.currentUser.assetTransferReload.status===r1.tT.Loaded){let r=(0,r1.oA)(a.data.currentUser.assetTransferReload);if(!r)return;let n=null==(t=(0,_.Ay)().user_data)?void 0:t.id,l=e.getState(),i="folder"===l.selectedView.view&&l.selectedView.folderId===r.folderId,o="team"===l.selectedView.view&&l.selectedView.teamId===r.teamId,s="folder"===l.selectedView.view&&l.folders[l.selectedView.folderId],c=s&&s.team_id===r.teamId,d=r.folderId?i:o||c,m={view:"folder",folderId:r.folderId||""},u={view:"team",teamId:r.teamId||"",teamViewTab:hT.A.HOME};if(n&&r.userId===n){let t={userId:r.userId,orgId:r.destOrgId},a=r.folderId?m:u;if(d){let n=r.folderId?(0,S.t)("realtime.asset_reload.project_has_been_transferred_redirecting"):(0,S.t)("realtime.asset_reload.team_has_been_transferred_redirecting");e.dispatch(ec.F.enqueue({message:n})),setTimeout(()=>{e.dispatch(L._l({workspace:t,view:a}))},2e3)}else e.dispatch(A.Dl({now:!0}))}}},[e,a])}(),(0,u.h)(()=>{n&&e(NM.Jw())}),(0,p.IT)((0,Ct.XZ)({currentOrgId:t??void 0,currentTeamId:w??void 0,fileTags:["figjam_template","figma_basics"]}),{enabled:(0,_.kc)().create_starter_files_from_file_browser&&ee.Gn.includes(c.view)}),o.createElement(CE,{showingFileBrowserLoader:d,dispatch:e,currentUserOrgId:t,dropdownShown:a,teams:r,user:n,userFlags:l,folders:i,selectedView:c,autosave:m,payment:f,teamUserByTeamId:g,teamBilling:E,teamCreation:v,loadingState:h,orgById:y,favorites:b,currentTeamId:w,mobileNavShown:T,userTeamFlags:I,search:x,dragState:N,userStateLoaded:C})}CE.displayName="FileBrowserView"},855736:(e,t,a)=>{"use strict";a.r(t),a.d(t,{FOLDER_TEAM_ACCESS_CHANGE_DROPDOWN:()=>er,FolderCreationModal:()=>ea,FolderTeamAccessRow:()=>en});var r=a(411855),n=a(188507),l=a(367253),i=a(966712),o=a(915440),s=a(268537),c=a(946689),d=a(493323),m=a(574176),u=a(939863),_=a(694443),p=a(738269),f=a(270056),g=a(662275),E=a(672517),v=a(385111),h=a(860178),y=a(99506),b=a(279453),w=a(623746),T=a(643067),I=a(243987),x=a(147206),N=a(297536),C=a(389643),S=a(206193),k=a(668860),A=a(501256),L=a(143678),R=a(613077),D=a(320063),F=a(374626),P=a(762638),M=a(456104),O=a(582947),B=a(397065),U=a(340514),V=a(864114),H=a(493364),W=a(463546);let j=(0,O.r1)("seen_sharing_clarity_project_modal_overlay"),$="sc_project_creation_permission_onboarding_key";function G(){let e=(0,F.md)(j),{show:t,isShowing:a,complete:n}=(0,M.e)({overlay:W.QpH,priority:B.N.DEFAULT_MODAL},[e]);(0,D.h)(()=>{t({canShow:e=>!e})});let l=r.createElement("a",{href:"https://help.figma.com/hc/en-us/articles/360038006494-Create-a-new-project",className:P.cx.colorTextOnbrand.underline.$},(0,u.tx)("rcs.sharing_clarity.learn_more"));return r.createElement(U.rq,{isShowing:a,title:(0,u.tx)("rcs.sharing_clarity.project_creation_permissions_title"),description:r.createElement("p",null,(0,u.tx)("rcs.sharing_clarity.project_creation_permissions_description",{learnMoreLink:l})),trackingContextName:"Sharing Clarity Project Creation Permission Onboarding",onClose:n,targetKey:$,arrowPosition:H.F_.LEFT_TITLE,zIndex:V.R.MODAL,emphasized:!0,disableHighlight:!0})}var z=a(988722),Y=a(585878),K=a(542059),Q=a(299410),q=a(268787),X=a(479842),J=a(515471);let Z="folder_creation_modal--sectionHeader--EcWYc text--fontPos11--2LvXf text--_fontBase--QdLsd";var ee=a(289298),et=a(562128);function ea(e){let t=(0,n.wA)(),[a,s]=r.useState(""),[m,_]=r.useState(!1),[I,D]=r.useState(0),[F,P]=r.useState(y.eD.TEAM_ACCESS_EDIT),M=v.h.useTrackingContext({trigger:S.b.FOLDER_CREATION_MODAL}),O=(0,n.d4)(e=>e.contacts),B=(0,n.d4)(e=>e.dropdownShown),U=(0,n.d4)(e=>e.autocomplete),V=(0,h.iZ)(),H=(0,o.Rs)(b.mCn,{teamId:e.teamId}),W=(0,i.kc)().sc_workspace_audience,j=r.useMemo(()=>{var t;if("loading"===H.status||!H.data)return null;let a=H.data.team;if(!a)return null;let r="loaded"===a.workspace.status?a.workspace.data:void 0;return{team:{id:e.teamId,name:a.name,imgUrl:a.imgUrl,subscription:a.subscription,student_team:!!a.studentTeamAt,grace_period_end:a.gracePeriodEnd,restrictions_list:a.restrictionsList,canAdmin:a.canAdmin,canEdit:a.canEdit,sharing_audience_control:a.sharingAudienceControl},org:a.org&&{id:a.org.id,name:a.org.name,img_url:a.org.imgUrl,org_domains:(0,w.vy)(a.org.orgDomains),domain_capture:a.org.domainCapture,invite_whitelist_guest_invite_setting:null==(t=a.org.inviteWhitelist)?void 0:t.guestInviteSetting}||null,orgUser:a.org&&a.org.currentBaseOrgUser,workspace:r}},[H,e.teamId]),z=j&&j.team,K=j&&j.org,J=K&&K.org_domains?K.org_domains:{domains:[],isFetching:!1,fetchedAt:null},ee=r.useCallback(()=>z&&z.sharing_audience_control!==y.PQ.ORG_EDIT&&z.sharing_audience_control!==y.PQ.ORG_VIEW?z.sharing_audience_control===y.PQ.WORKSPACE_EDIT||z.sharing_audience_control===y.PQ.WORKSPACE_VIEW?Q._9.WORKSPACE:Q._9.INVITE_ONLY:Q._9.ORG,[z]),et=r.useCallback(()=>z&&(z.sharing_audience_control===y.PQ.ORG_EDIT||z.sharing_audience_control===y.PQ.WORKSPACE_EDIT)?Q.J4.EDIT:Q.J4.VIEW,[z]),[ea,er]=r.useState(ee()),[el,ei]=r.useState(et()),[eo,es]=r.useState(k.e6.EDITOR);r.useEffect(()=>{er(ee()),ei(et())},[ee,et]);let ec=()=>{1===I?D(0):(t(g.Lo()),t(p.bx()))},ed=e=>(0,N.t9)(e,K,J),em=e=>(0,N.yI)(e,O.usersByEmail[e]||e,K,J,V.email),eu=()=>K&&K.domain_capture&&J.domains.length>0?(0,A.Z)(U).filter(e=>(0,l.xf)(e)&&!(0,T.H_)(J.domains,e)):[],e_=e=>{if(K&&(null==K?void 0:K.invite_whitelist_guest_invite_setting)==null&&e.length>0){t((0,g.to)({type:X.F,data:{emails:e,onConfirm:()=>{ep()},popStack:!0,orgName:K.name}}));return}},ep=()=>{let r;ea===Q._9.ORG?r=el===Q.J4.EDIT?y.PQ.ORG_EDIT:y.PQ.ORG_VIEW:ea===Q._9.WORKSPACE?r=el===Q.J4.EDIT?y.PQ.WORKSPACE_EDIT:y.PQ.WORKSPACE_VIEW:ea===Q._9.INVITE_ONLY&&(r=y.PQ.INVITE_ONLY),t(f.vt({shouldRedirect:!e.modalShown,name:a.trim(),teamId:e.teamId,isInviteOnly:void 0,isViewOnly:void 0,sharingAudienceControl:K?r:void 0,teamAccess:F,inviteEmails:(0,A.Z)(U),inviteLevel:eo,orgId:null==K?void 0:K.id,onFolderCreated:e.onFolderCreated}))};return r.createElement(E.fu,{name:L.e0.CREATE_NEW_PROJECT_MODAL,properties:{teamId:null==z?void 0:z.id,...M}},r.createElement(Y.XV,{title:0===I?(0,u.t)("project_creation.create_project"):(0,u.t)("project_creation.add_people_to_project_name",{projectName:a}),onClose:ec,maxWidth:468},j?r.createElement("div",{className:"folder_creation_modal--modalContainer--DmgME"},0===I?r.createElement(r.Fragment,null,r.createElement("div",{className:Z},(0,u.t)("project_creation.name")),r.createElement(c.ks,{className:"folder_creation_modal--folderNameInput--Lcn4c",onChange:e=>s(e.target.value),onFocus:()=>_(!0),onBlur:()=>_(!1),value:a,autoFocus:!0,required:!0,maxLength:c.wG,minLength:1,placeholder:(0,u.t)("project_creation.ex_growth_experiments"),"aria-label":(0,u.t)("project_creation.project_name")}),0===a.trim().length&&!m&&r.createElement("div",{className:"folder_creation_modal--inputErrorMessage--AGzQC"},(0,u.t)("project_creation.project_name_empty")),K&&z&&r.createElement(r.Fragment,null,r.createElement("div",{className:Z,"data-onboarding-key":$},(0,u.t)("project_creation.who_has_access")),r.createElement(G,null),r.createElement(Q.YU,{resourceType:y.vt.FOLDER,value:ea,onChange:er,org:K,team:z,audienceAccessLevel:el,workspace:W?j.workspace:void 0}),ea!==Q._9.INVITE_ONLY&&r.createElement(r.Fragment,null,r.createElement("div",{className:Z},(0,u.t)("folder_permissions_modal.what_they_can_do")),r.createElement(Q.Iz,{selectedPermissionsLevel:el,setSelectedPermissionsLevel:ei}),r.createElement("div",{className:"folder_creation_modal--subtitle--H3qLc text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos11--2LvXf text--_fontBase--QdLsd"},el===Q.J4.VIEW?(0,u.t)("project_creation.can_view_and_comment"):(0,u.t)("project_creation.can_create_and_edit_files"))))):(()=>{let e=K?K.id:null,a=j&&j.orgUser,n=[k.e6.EDITOR,k.e6.VIEWER];return r.createElement("div",{className:"folder_creation_modal--stepTwoContainer--7Oi4o"},r.createElement(R.e,{autocomplete:U,dispatch:t,dropdownShown:B,dropdownKey:"permissions-invite-dropdown",inviteLevel:eo,onInviteLevelChange:es,getSelectText:x.C1,options:n,searchResultToken:ed,fetchAsyncSearchResults:t=>(0,C.Wj)(t,O.usersByEmail,V,[],e,null,null,(null==a?void 0:a.permission)===y._D.GUEST),searchResults:e=>(0,C.Uj)(e,O.usersByEmail,V,[]),validateToken:em,TokenComponent:q.g,SearchResultComponent:q.o,joinLinkShown:!1,shouldAutoFocus:!0,placeholderText:(0,u.t)("team_creation.add_a_name_or_email")}),z&&r.createElement(en,{team:z,teamAccess:F,setTeamAccess:P,orgId:e}))})(),r.createElement("div",{className:"folder_creation_modal--bottomRow--CWsIx"},r.createElement("div",{className:"folder_creation_modal--footer--9Hie8 folder_creation_modal--subtitle--H3qLc text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,u.tx)("project_creation.step_number_of_max_steps",{currentStep:I+1,maxSteps:2})),r.createElement("div",{className:"folder_creation_modal--buttons--6cjVs"},r.createElement(c.tM,{onClick:ec},0===I?(0,u.tx)("project_creation.cancel"):(0,u.tx)("project_creation.back")),r.createElement(c.vd,{onClick:()=>{if(0===I)D(1);else if(K){let e=eu();e.length>0?e_(e):ep()}else ep()},disabled:0===I&&0===a.trim().length},0===I?(0,u.tx)("general.continue"):(0,u.tx)("project_creation.create_project"))))):r.createElement("div",{className:"folder_creation_modal--loading--9KmQd"},r.createElement(d.qc,null))))}let er="FOLDER_TEAM_ACCESS_CHANGE_DROPDOWN";function en(e){let t=t=>{(0,I.w5)(e.team)?e.setTeamAccess(t):(e.setTeamAccess(y.eD.TEAM_ACCESS_EDIT),t===y.eD.TEAM_ACCESS_VIEW?l((0,g.to)({type:K.Ni,data:{team:e.team,editorType:null,upsellSource:S.b.FOLDER_CREATION_MODAL}})):l((0,g.to)({type:K.Dp,data:{team:e.team,editorType:null,upsellSource:S.b.FOLDER_CREATION_MODAL}})))},a=r.createElement(_.n,{team:e.team,size:24,avatarSvg:et.A,opacity:e.teamAccess===y.eD.TEAM_ACCESS_DISABLED?"0.7":void 0}),l=(0,n.wA)(),i=(0,n.d4)(e=>e.dropdownShown),o=e.team.id&&e.team.canEdit,c=()=>i&&i.type===er,d=null,f={};return c()&&i.data&&i.data.position&&(f={...i.data.position}),r.createElement(r.Fragment,null,r.createElement("div",{className:J.xf},r.createElement("div",{className:"folder_creation_modal--teamAvatarContainer--KL-B-"},a),r.createElement("div",{className:J.$S},r.createElement("div",{className:J.yb},r.createElement("div",{className:e.teamAccess===y.eD.TEAM_ACCESS_DISABLED?"folder_creation_modal--teamNameFaded--ugwhq folder_creation_modal--teamName--P9n7q ellipsis--ellipsis--Tjyfa folder_creation_modal--fadedText--KyLSq":"folder_creation_modal--teamName--P9n7q ellipsis--ellipsis--Tjyfa"},e.team.name),r.createElement(r.Fragment,null,e.teamAccess===y.eD.TEAM_ACCESS_DISABLED&&o&&r.createElement("button",{className:J.KU,onClick:()=>t(y.eD.TEAM_ACCESS_EDIT)},(0,u.tx)("folder_access_row.give_access")),e.teamAccess!==y.eD.TEAM_ACCESS_DISABLED&&o&&r.createElement(r.Fragment,null,r.createElement("button",{ref:e=>{e&&(d=e)},onClick:()=>{if(c())l(p.oB());else if(d){let t=d.getBoundingClientRect(),a=e.teamAccess===y.eD.TEAM_ACCESS_VIEW;l(p.j7({type:er,data:{position:{top:t.top+-((a?1:0)*24),bottom:"auto",left:t.left,right:"auto"}}}))}},className:J.Lt,"data-onboarding-key":z.I},r.createElement("span",null,e.teamAccess===y.eD.TEAM_ACCESS_VIEW?(0,u.t)("permissions.level_name.can_view"):(0,u.t)("permissions.level_name.can_access")),r.createElement("div",{className:J.Lo},r.createElement(m.B,{svg:ee.A}))),r.createElement(z.S,null)),c()&&r.createElement(s.ms,{className:J.N1,style:{position:"fixed",...f}},r.createElement("div",{"data-testid":"folder-level-edit"},r.createElement(s.MM,{checked:e.teamAccess===y.eD.TEAM_ACCESS_EDIT,onClick:()=>t(y.eD.TEAM_ACCESS_EDIT)},(0,u.tx)("permissions.level_name.can_access"))),r.createElement("div",{"data-testid":"folder-level-view"},r.createElement(s.MM,{checked:e.teamAccess===y.eD.TEAM_ACCESS_VIEW,onClick:()=>t(y.eD.TEAM_ACCESS_VIEW)},(0,u.tx)("permissions.level_name.can_view"))),r.createElement(s.wv,null),r.createElement(s.c$,{onClick:()=>t(y.eD.TEAM_ACCESS_DISABLED)},(0,u.tx)("folder_access_row.remove"))))))))}},365879:(e,t,a)=>{"use strict";a.d(t,{I:()=>m});var r=a(411855),n=a(188507),l=a(776250),i=a(939863),o=a(688083),s=a(451e3),c=a(945020),d=a(732813);function m(e){let t=(0,n.wA)(),a=r.useCallback(a=>{a.stopPropagation(),e.team.canEdit&&((0,l.sx)("New Folder",{trackingContext:e.trackingContextName}),t((0,o.SX)({where:s.Ah.FolderListView,team:{...(0,c.Ws)(e.team),canEdit:e.team.canEdit,canEditTeamContents:e.team.canEdit,canAdmin:e.team.canAdmin}})))},[t,e.team,e.trackingContextName]);return e.team.canEdit?r.createElement(d.f,{data_tooltip:(0,i.t)("sidebar.new_project"),data_onboarding_key:"new-project-icon",innerText:"Creates new project",onClick:a,isBackgroundTransparent:e.isBackgroundTransparent}):null}},49891:(e,t,a)=>{"use strict";a.d(t,{Mv:()=>I,tG:()=>b});var r=a(411855),n=a(966712),l=a(498750),i=a(946689),o=a(762638),s=a(881388),c=a(939863),d=a(662275),m=a(720647),u=a(99506),_=a(820113),p=a(243987),f=a(265361),g=a(237870),E=a(488578),v=a(474263);function h(e){let t=r.useRef(null),[a,u]=r.useState(!1),[g,E]=r.useState(null),h=new _.vr(e.currency),y=!e.allowZeroSeats,b=e.numAnnualEditors,T=b>0,x=t=>{e.onNumAnnualEditorsChange(t)},N=r.createElement("button",{type:"button",className:v.J,"data-testid":`add-${e.editorType}-seats`,onClick:()=>u(!0)},(0,c.tx)("payments.step_pay.add_more_seats"));return r.createElement("div",{className:v.wD,key:`${e.editorType}-step-pay-row`,"data-testid":`${e.editorType}-step-pay-row`},r.createElement("div",null,r.createElement("div",{className:v.Uu},r.createElement("span",null,(0,c.tx)("payments.step_pay.editors_on_annual_plan.seat_rename",{numAnnualEditors:e.numAnnualEditors,numAnnualEditorsNumberOrInput:a?r.createElement(i.ks,{ref:t,className:v.jD,value:null==g?e.numAnnualEditors:g,onChange:e=>{E(e.target.value)},onBlur:()=>{let t=parseInt(g);if(!isNaN(t)){if(t<0)e.dispatch(s.s.error((0,c.t)("flash.no_negative_seats")));else if(0===t)y?e.dispatch(s.s.error((0,c.t)("flash.at_least_one_editor.seat_rename"))):x(0);else if(t>p.m){let t=r.createElement("a",{href:`mailto:${(0,n.W4)()}`},(0,c.tx)("flash.annual_plan.contact_support_link"));e.dispatch(s.s.error((0,c.tx)("flash.annual_plan.contact_support",{contactSupport:t,maxAnnualSubscriptions:p.m})))}else t>100?e.dispatch(d.to({type:I,data:{numAnnualEditors:t,onConfirm:()=>x(t)}})):x(t)}E(null),u(!1)},onKeyDown:e=>{let t=e.target;e.keyCode===l.Uz.ENTER?(e.preventDefault(),t.blur()):e.keyCode===l.Uz.ESCAPE&&u(!1)}}):e.numAnnualEditors,productType:(0,f.E)((0,m.vc)(e.editorType))}))),!a&&r.createElement("div",{className:o.cx.flex.flexColumn.gap4.$},e.editorBreakdown,r.createElement("p",{className:v.eK},(0,c.tx)("payments.step_pay.add_more_editors",{addMoreSeats:N})))),r.createElement(w,{amount:e.totalCost,lineItem:T?b>0?(0,c.t)("payments.step_pay.price_per_editor_12_months",{price:h.formatMoney(e.annualMonthlyCost,{showCents:!1}),editorString:(0,c.t)("payments.step_pay.num_editors.seat_rename",{numEditors:b})}):(0,c.t)("payments.step_pay.none_selected"):void 0,shouldShowAmount:e.numAnnualEditors>0,currency:e.currency}))}function y(){return r.createElement("div",{className:v.me})}function b(e){let{numAnnualDesignEditors:t,numAnnualWhiteboardEditors:a,isTeamPro:n,totalDesignEditors:l,totalWhiteboardEditors:i,monthlyDesignAmount:o,monthlyFigjamAmount:s,annualMonthlyDesignAmount:d,annualMonthlyFigjamAmount:m}=e,_=l-t,p=t*d*12+(!n&&_>0?_*o:0),f=i-a,g=a*m*12+(!n&&f>0?f*s:0);return r.createElement("div",null,r.createElement(h,{dispatch:e.dispatch,editorType:u._Y.DESIGN,onNumAnnualEditorsChange:e.onNumAnnualDesignEditorsChange,numAnnualEditors:t,allowZeroSeats:0!==a,currency:e.currency,totalCost:p,annualMonthlyCost:d}),r.createElement(h,{dispatch:e.dispatch,editorType:u._Y.WHITEBOARD,onNumAnnualEditorsChange:e.onNumAnnualWhiteboardEditorsChange,numAnnualEditors:a,allowZeroSeats:0!==t,currency:e.currency,totalCost:g,annualMonthlyCost:m}),r.createElement(y,null),r.createElement("div",{className:v.wD},r.createElement("div",{className:v.YK},(0,c.tx)("payments.step_pay.subscription")),r.createElement(T,{amount:p+g,plusTax:!0,dataTestId:"subscription-total-cost",currency:e.currency})))}function w(e){let t=new _.vr(e.currency);return r.createElement("div",{className:v.R6},e.shouldShowAmount?t.formatMoney(e.amount,{showCents:!1}):"--",r.createElement("div",{className:o.cx.flex.flexColumn.gap4.$},e.lineItem&&r.createElement("div",{className:v.eK},e.lineItem)))}function T(e){let t=new _.vr(e.currency);return r.createElement("div",{className:v.X5},r.createElement("p",{className:v.IW,"data-testid":e.dataTestId},t.formatMoney(e.amount,{showCents:!1})),e.plusTax&&r.createElement("p",{className:v.B8},(0,c.tx)("payments.step_pay.plus_sales_tax")))}let I="confirm-seats-modal";function x(e){let t=e.modalShown.data.numAnnualEditors;return r.createElement(E.Rw,{confirmationTitle:(0,c.t)("payments.step_pay.thats_a_lot_of_seats",{numAnnualEditors:t}),onConfirm:e.modalShown.data.onConfirm,confirmText:(0,c.t)("payments.step_pay.confirm_seats"),...e},(0,c.tx)("payments.step_pay.happy_you_want_to_buy_seats",{numAnnualEditors:t}))}(0,g.qK)(I,e=>r.createElement(x,{...e}))},487973:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AddPinModal:()=>h});var r=a(411855),n=a(188507),l=a(935283),i=a(609494),o=a(915440),s=a(776621),c=a(304783),d=a(881388),m=a(939863),u=a(809840),_=a(662275),p=a(988022),f=a(279453),g=a(936682),E=a(515669),v=a(119735);function h({fileKey:e,source:t,open:a,onClose:l}){var u;let h=(0,n.wA)(),b=(0,E.p)((0,m.t)("file_browser.pinning.pin_modal.confirmation_bell"),"file-browser-workspace-add-pin"),w=(0,o.Rs)(f.wtK,{fileKey:e}),T=function(e){let[t,a]=r.useState(!1),n="loaded"===e.status&&e.data.file&&!e.data.file.isWorkspaceVisible&&e.data.file.canEdit;return n&&!t&&a(!0),n||t}(w);if("loaded"!==w.status)return null;let{file:I}=w.data;if(!I)return(0,s.$D)(c.e.WAYFINDING,Error("AddPinModal unable to lookup file by ID")),h(_.Lo()),null;let x=null==(u=I.team)?void 0:u.workspace;if(!x)return(0,s.$D)(c.e.WAYFINDING,Error("AddPinModal opened for file with no workspace")),h(_.Lo()),null;let N=(0,v.KR)(I),C=async e=>{try{await g.p.pinFile({resourceType:v.AH,resourceId:x.id,fileKey:I.key,description:e,shouldUpdatePermissions:T}),(0,p.E9)("file_browser_file_pinned_to_resource",I,{resourceType:v.AH,resourceId:x.id,source:t,pinDescription:(0,i._Z)(e)}),b(x.id)}catch(e){throw h(d.s.error((0,m.t)("file_browser.pinning.pin_modal.error"))),e}},S=T?r.createElement(y,{file:I,workspace:x}):null;return r.createElement(E.N,{title:(0,m.t)("file_browser.pinning.pin_modal.pin_file_to_workspace"),confirmText:(0,m.t)("file_browser.pinning.pin_file"),onSubmit:C,file:N,initialDescription:null,warningContent:S,open:a,onClose:l})}function y({file:e,workspace:t}){let a=e.parentOrgId;(0,l.B1)(a);let i=(0,n.d4)(({orgById:e})=>e[a].name);return r.createElement(u.E,null,(0,m.tx)("file_browser.pinning.update_permissions.content",{workspaceName:t.name,permission:r.createElement(u.E,{fontWeight:"bold"},(0,m.tx)("file_browser.pinning.update_permissions.content.permission",{orgName:i}))}))}},923967:(e,t,a)=>{"use strict";a.r(t),a.d(t,{DeletePinModal:()=>v});var r=a(411855),n=a(188507),l=a(609494),i=a(915440),o=a(776621),s=a(304783),c=a(886839),d=a(881388),m=a(939863),u=a(988022),_=a(860178),p=a(99506),f=a(279453),g=a(936682),E=a(515669);function v({pinnedFileId:e,open:t,onClose:a}){let v=(0,_.TA)(),h=(0,n.wA)(),y=(0,E.p)((0,m.t)("file_browser.pinning.delete_pin_modal.confirmation_bell"),"file-browser-workspace-delete-pin"),[b,w]=r.useState(!1),T=(0,i.Rs)(f.qBf,{pinnedFileId:e});if("loaded"!==T.status)return null;let{pinnedFile:I}=T.data;if(!I)return(0,o.$D)(s.e.WAYFINDING,Error("DeletePinModal unable to lookup pinned file by ID")),a(),null;if(I.resourceType!==p.rP.WORKSPACE)return(0,o.$D)(s.e.WAYFINDING,Error("DeletePinModal opened for pinned file with non-workspace resource type"),{extra:{resourceType:I.resourceType}}),a(),null;let x=async t=>{var r;t.preventDefault();try{w(!0),await g.p.deletePin({pinnedFileId:e}),(0,u.E9)("file_browser_file_unpinned_from_resource",I.file,{resourceId:I.resourceId,resourceType:I.resourceType,isPinCreator:(null==(r=I.creator)?void 0:r.id)===v,pinDescription:(0,l._Z)(I.description)}),y(I.resourceId),a()}catch(e){h(d.s.error((0,m.t)("file_browser.pinning.delete_pin_modal.error")))}finally{w(!1)}};return r.createElement(c.R,{title:(0,m.t)("file_browser.pinning.delete_pin_modal.header"),confirmText:(0,m.t)("file_browser.pinning.delete_pin_modal.confirm"),onConfirm:x,destructive:!0,isLoading:b,open:t,onClose:a},(0,m.t)("file_browser.pinning.delete_pin_modal.content"))}},542406:(e,t,a)=>{"use strict";a.r(t),a.d(t,{EditPinModal:()=>g});var r=a(411855),n=a(188507),l=a(915440),i=a(776621),o=a(304783),s=a(881388),c=a(939863),d=a(662275),m=a(99506),u=a(279453),_=a(936682),p=a(515669),f=a(119735);function g({pinnedFileId:e,open:t,onClose:a}){let g=(0,n.wA)(),E=(0,p.p)((0,c.t)("file_browser.pinning.pin_modal.edit.confirmation_bell"),"file-browser-workspace-edit-pin"),v=(0,l.Rs)(u.vgO,{pinnedFileId:e});if("loaded"!==v.status)return null;let{pinnedFile:h}=v.data;if(!h)return(0,i.$D)(o.e.WAYFINDING,Error("EditPinModal unable to lookup pinned file by ID")),g(d.Lo()),null;if(h.resourceType!==m.rP.WORKSPACE)return(0,i.$D)(o.e.WAYFINDING,Error("EditPinModal opened for pinned file with non-workspace resource type"),{extra:{resourceType:h.resourceType}}),g(d.Lo()),null;let y=h.resourceId,b=async t=>{try{await _.p.updatePin({pinnedFileId:e,description:t}),E(y)}catch(e){throw g(s.s.error((0,c.t)("file_browser.pinning.pin_modal.edit.error"))),e}},w=(0,f.KR)(h.file);return r.createElement(p.N,{title:(0,c.t)("file_browser.pinning.pin_modal.edit_pin_description"),confirmText:(0,c.t)("file_browser.pinning.pin_modal.save"),onSubmit:b,file:w,initialDescription:h.description,open:t,onClose:a})}},515669:(e,t,a)=>{"use strict";a.d(t,{N:()=>M,p:()=>O});var r=a(411855),n=a(188507),l=a(782754),i=a(421757),o=a(880112),s=a(609494),c=a(493323),d=a(773362),m=a(762638),u=a(939863),_=a(392592),p=a(172522),f=a(167893),g=a(738269),E=a(477782),v=a(611978),h=a(352898),y=a(629019),b=a.n(y),w=a(27050),T=a(377750),I=a(966712),x=a(374626),N=a(860601),C=a(827586),S=a(428322),k=a(883211),A=a(229443),L=a(896474),R=a(555648);function D({buttonClassName:e,onInsert:t,closeOnInsert:a}){let[n,l]=r.useState(null),i=r.useRef(null),o=r.useCallback(()=>{i.current&&l(i.current.getBoundingClientRect())},[l]),s=r.useCallback(e=>{t(e),a&&l(null)},[t,a,l]);return r.createElement("button",{className:e,ref:i,onClick:o},r.createElement(L.In,{icon:"smiley-32"}),n&&r.createElement(R._,{onInsert:s,onCancel:()=>l(null),targetRect:n}))}let F={library:{list:()=>Promise.resolve([]),search:()=>Promise.resolve([]),maxResultsLength:()=>0}};function P({placeholder:e,text:t,onChange:a,maxLength:l,onSubmit:i,textAreaClassName:o}){let c=(0,n.wA)(),d=x.zl.get(k.ph),[u,_]=r.useState(!1),p=r.useRef(null),f=r.useCallback(e=>{e.preventDefault(),e.stopPropagation(),p.current&&p.current.focus()},[]),g=(0,s.Kq)(t,{includeTrailingWhitespace:!0});return r.createElement("div",{className:"emoji_text_area--textAreaContainer--4FHeL",onClick:f},r.createElement(C.P,{className:b()(m.cx.flexGrow1.overflowAuto.maxWFull.borderBox.if(u,m.cx.bb1.bSolid.colorBorder).$,o),innerClassName:m.cx.hFull.$},r.createElement(A.iX,{dispatch:c,ref:p,typeahead:d,updateMessage:([e,t])=>{a(e)},placeholderText:e,mountInputFocused:!0,submitOnEnter:!1,onSubmit:i??N.lQ,messageMeta:t,mentionables:F,className:m.cx.pt16.px16.borderBox.if(u,m.cx.pb4).$,onUpdateTextArea:N.lQ,editorOnInsert:N.lQ,onFocus:N.lQ,onCancel:N.lQ,editorOnClear:N.lQ,setIsEditorFocused:N.lQ,currentOrgUsers:{orgUsers:{}}}),r.createElement(S.a,{onInitialLoad:e=>_(!e),onIntersectionChange:e=>_(!e.isIntersecting)})),r.createElement("div",{className:m.cx.flex.justifyBetween.itemsCenter.pl12.pr16.py12.$},r.createElement(D,{buttonClassName:"emoji_text_area--emojiPickerButton--CGYqF",onInsert:e=>{if(p.current){let t=((0,I.kc)().emoji_15_upgrade?T.dN:w.dN).get(e.id);t&&(p.current.insertEmoji(t),p.current.focus())}},closeOnInsert:!0}),l&&r.createElement("div",{className:m.cx.if(g>l,m.cx.colorTextDanger,m.cx.colorTextSecondary).cursorDefault.$},g,"/",l)))}function M({title:e,confirmText:t,onSubmit:a,file:n,initialDescription:_,warningContent:g,open:v,onClose:h}){let[y,b]=r.useState(_??[]),[w,T]=r.useState(!1),I=(0,E.fA)(n),x=(0,p.l)(n.folder_id),N=(0,s.Kq)(y,{includeTrailingWhitespace:!0}),C=N<=100&&N>0,S=r.useCallback(async()=>{if(C)try{T(!0),await a(y),h()}finally{T(!1)}},[a,C,h,y]),k=l.a.useModal({open:v,onClose:h}),A=r.createElement(r.Fragment,null,r.createElement("div",{className:m.cx.p16.gap16.flex.flexColumn.$},r.createElement("div",{className:m.cx.flex.flexColumn.gap16.$},r.createElement("div",null,r.createElement(d.Z,{tile:I,borderRadius:6})),r.createElement("div",{className:m.cx.flex.flexRow.gap8.itemsCenter.$},r.createElement(f.x,{tile:I,usePageIcon:!0}),r.createElement("div",{className:m.cx.flex.flexColumn.gap2.flexGrow1.justifyCenter.overflowHidden.cursorDefault.$},r.createElement("div",{className:m.cx.textBodyLargeStrong.truncate.$},n.name),"loaded"===x.status&&x.data?r.createElement("div",{className:m.cx.colorTextSecondary.truncate.$},x.data):null))),r.createElement(P,{placeholder:(0,u.t)("file_browser.pinning.pin_modal.description_textarea_placeholder"),text:y,onChange:b,onSubmit:S,maxLength:100,textAreaClassName:m.cx.maxH100.$})),g?r.createElement("div",{className:m.cx.colorBgWarningTertiary.px16.py12.flex.columnGap8.$},r.createElement(o.R,{className:m.cx.flexShrink0.$}),r.createElement("span",null,g)):null);return r.createElement(l.a.Root,{manager:k,width:"lg"},r.createElement(l.a.Contents,null,r.createElement(l.a.Header,null,r.createElement(l.a.Title,null,e)),r.createElement(l.a.Body,{noPadding:!0},A),r.createElement(l.a.Footer,null,r.createElement(l.a.ActionStrip,null,r.createElement(i.$n,{variant:"secondary",onClick:h},(0,u.tx)("modal.cancel")),w?r.createElement(i.$n,{disabled:!0},r.createElement(c.kt,{className:m.cx.colorIconOnbrand.$})):r.createElement(i.$n,{disabled:!C,variant:"primary",onClick:S},t)))))}function O(e,t){let a=(0,n.wA)(),l=(0,v._6)();return r.useCallback(r=>{let n;("workspace"!==l.view||l.subView!==h.V0.DIRECTORY)&&(n={text:(0,u.t)("file_browser.pinning.pin_modal.confirmation_bell.view_workspace"),action:()=>{a(g.$T({view:"workspace",subView:h.V0.DIRECTORY,workspaceId:r,selectedTab:h.dN.TEAMS}))}}),a(_.F.enqueue({type:t,message:e,button:n}))},[a,e,t,l])}},600081:(e,t,a)=>{"use strict";a.d(t,{J:()=>v});var r=a(411855),n=a(188507),l=a(946689),i=a(939863),o=a(799569);function s({header:e,onClose:t,rightTextCta:a,tilesContent:n}){return r.createElement("div",{className:"recommendation_banner--container--BEaKR"},r.createElement("div",{className:"recommendation_banner--headerContainer--4UjAz"},r.createElement("div",{className:"recommendation_banner--header--desVL text--fontPos13--xW8hS text--_fontBase--QdLsd"},e),r.createElement("div",{className:"recommendation_banner--headerRight--0PUxN"},r.createElement("div",{className:"recommendation_banner--rightTextCta--q0Iat text--fontPos11--2LvXf text--_fontBase--QdLsd"},a),r.createElement(o.Jn,{className:"recommendation_banner--closeButton--PIXj1",onClick:t}))),r.createElement("div",{className:"recommendation_banner--tilesContainer--WZvDf tiles_view--tilesGrid--gtDcv tiles_view--tiles--PQRwh"},n.map((e,t)=>r.createElement("div",{key:t,className:"recommendation_banner--tile--c1rU7"},e))))}var c=a(760824),d=a(672517),m=a(7e3),u=a(106472),_=a(746869),p=a(611047),f=a(218934),g=a(927625);let E=[{featureType:"unlimited_files_and_projects",getTileTitle:()=>(0,i.t)("team_view.pro_trials.feature_awareness_banner.consumption_limit"),imgSrc:"https://static.figma.com/uploads/7b0a8059eef8715404092dd314a2259303f727ed",gifSrc:"https://static.figma.com/uploads/519c3e21c17f32b5f0180b52d1e0f9ba6b1e6a93",href:"https://help.figma.com/hc/articles/360038006494"},{featureType:p.qv.COMPONENT_PUBLISHING,getTileTitle:()=>(0,i.t)("team_view.pro_trials.feature_awareness_banner.component_libraries"),imgSrc:"https://static.figma.com/uploads/597204c016801ba12cab10e9c048b1c6d5807a46",gifSrc:"https://static.figma.com/uploads/948d9b9b25fe5c298216981f3b67871986136b72",href:"https://help.figma.com/hc/articles/360041051154-Guide-to-libraries-in-Figma"},{featureType:p.qv.PASSWORD_PROTECTION,getTileTitle:()=>(0,i.t)("team_view.pro_trials.feature_awareness_banner.password_protection"),imgSrc:"https://static.figma.com/uploads/bd1e60801b4b2b5e3d8f85d570d909f8e6aecd46",gifSrc:"https://static.figma.com/uploads/c736fefeffa56ad1fef0e503f3a806a34376a24e",href:"https://help.figma.com/hc/articles/5726720100247-Add-password-protection-to-files"},{featureType:p.qv.OPEN_SESSIONS,getTileTitle:()=>(0,i.t)("team_view.pro_trials.feature_awareness_banner.collaboration"),imgSrc:"https://static.figma.com/uploads/d718a8c9af11f5689629e016beb629c0a1aded39",gifSrc:"https://static.figma.com/uploads/389ab0b9dcb7f7c2ce3b597b4b7aa8d12a762d79",href:"https://help.figma.com/hc/articles/4410786053911-Invite-visitors-to-an-open-session"},{featureType:"voting",getTileTitle:()=>(0,i.t)("team_view.pro_trials.feature_awareness_banner.voting"),imgSrc:"https://static.figma.com/uploads/07061babefc345310003bf470a357f7c1a4f039d",gifSrc:"https://static.figma.com/uploads/15206fd8262e4243eb5b6a466c4227a6f8e700e6",href:"https://help.figma.com/hc/articles/9359912208663-Run-voting-sessions-in-FigJam"},{featureType:p.qv.AUDIO,getTileTitle:()=>(0,i.t)("team_view.pro_trials.feature_awareness_banner.audio"),imgSrc:"https://static.figma.com/uploads/d44e0e27103010a5a793e2481a49b37baf284fe9",gifSrc:"https://static.figma.com/uploads/9320e75867473c558394562fe255795e975bac3e",href:"https://help.figma.com/hc/articles/1500004414622-Use-audio-to-chat-with-your-team"}];function v({teamId:e}){let t=(0,m.TN)(e),a=(0,n.wA)(),o=!!(0,u.q)({flag:"pro_trials_feature_awareness_banner_dismissed",teamId:e});return!_.ng.canSeeProTrialUx(t)||o?null:r.createElement(d.fu,{name:"Pro trials feature awareness banner",properties:_.ng.getTrackingProperties()},r.createElement("div",{className:"pro_feature_awareness_banner--container--Lxd1X"},r.createElement(s,{header:(0,i.tx)("team_view.pro_trials.feature_awareness_banner.title"),rightTextCta:r.createElement(l.Ph,{className:"pro_feature_awareness_banner--learnMoreLink--7R3te text--fontPos11--2LvXf text--_fontBase--QdLsd",trusted:!0,href:"https://www.figma.com/professional/",target:"_blank"},(0,i.tx)("team_view.pro_trials.feature_awareness_banner.learn_more")),onClose:()=>{a(c.bE({all_team_flags:[{team_id:e,flags:{pro_trials_feature_awareness_banner_dismissed:!0}}]}))},tilesContent:E.map(({getTileTitle:e,imgSrc:t,gifSrc:a,href:n,featureType:l},i)=>r.createElement(h,{key:i,getTileTitle:e,imgSrc:t,gifSrc:a,href:n,featureType:l}))})))}function h({getTileTitle:e,imgSrc:t,gifSrc:a,href:n,featureType:i}){let[o,s]=(0,r.useState)(!1);return r.createElement("div",{onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1)},r.createElement(f.zq,{image:r.createElement("div",{className:"pro_feature_awareness_banner--imageContainer--IezW9 pro_feature_awareness_banner--base_cardImageContainer--zhCs- pro_feature_awareness_banner--_hasBorder--lcXN7"},r.createElement("div",{className:"pro_feature_awareness_banner--imageAspectRatio--00Fbt"}),r.createElement("div",{className:"pro_feature_awareness_banner--imageWrapper--isZpL"},r.createElement(l.Ph,{trusted:!0,target:"_blank",href:n,trackingProperties:{featureType:i}},r.createElement(g.Ho,{image:o?a:t,isSet:!0,isWhiteboard:!1,hubFileId:void 0,alt:e(),includeChromiumDownscalingFix:!0})))),bottomRow:r.createElement("div",{className:"pro_feature_awareness_banner--tileTitle--bO70s text--fontPos13--xW8hS text--_fontBase--QdLsd"},e())}))}},805447:(e,t,a)=>{"use strict";a.d(t,{J:()=>o});var r=a(411855),n=a(188507),l=a(48793),i=a(939863);function o({index:e}){let t=(0,n.d4)(e=>!!e.payment.promo);return r.createElement("div",{className:"team_creation_breadcrumbs--stepBreadcrumbs--tP08U step_breadcrumb--stepBreadcrumbs--E4Woe"},r.createElement(l.On,{selected:1===e,number:1,text:(0,i.t)("team_creation.name_your_team")}),r.createElement(l.On,{selected:2===e,number:2,text:(0,i.t)("team_creation.add_team_members")}),!t&&r.createElement(l.On,{selected:3===e,number:3,text:(0,i.t)("team_creation.finish_setup")}))}},336191:(e,t,a)=>{"use strict";a.d(t,{X:()=>s,o:()=>o});var r=a(411855),n=a(629019),l=a.n(n),i=a(493323),o=(e=>(e.Medium="Medium",e.Large="Large",e))(o||{});function s(e){let t;return e.isLoading?r.createElement("div",{className:"tile_grid--loadingContainer--1gQIv"},r.createElement(i.kt,null)):!e.children||Array.isArray(e.children)&&!e.children.length?r.createElement("div",{className:"tile_grid--emptyContainer--y8P1H text--fontPos11--2LvXf text--_fontBase--QdLsd"},e.emptyView):(t="Large"===e.tileSize?"tile_grid--gridLarge--EZC2-":"tile_grid--gridMedium--fzult",r.createElement("div",{className:l()("tile_grid--gridContainer--cn4vx",e.containerClassName)},r.createElement("div",{className:t},e.children)))}},392922:(e,t,a)=>{"use strict";a.d(t,{H:()=>y});var r=a(411855),n=a(188507),l=a(966712),i=a(939863),o=a(611886),s=a(351226),c=a(837324),d=a(162895),m=a(662275),u=a(694687),_=a(860178),p=a(215822),f=a(239671),g=a(407844),E=a(164795),v=a(146555);if(443==a.j)var h=a(967063);function y(e){let t=(0,_.iZ)(),a=(0,u.sZ)(),y=(0,n.wA)(),[b,w]=r.useState(!0),T=e.resource,I=(0,p.uF)(T),x=(0,v.o)(I,a,f.nT.Whiteboard);if(!b||!t||!(0,l.kc)().community_hub_admin_reviewer)return r.createElement(r.Fragment,null);function N(t){return"hub_file"===(0,c.Vm)(e.resource)}let C=N(e.resource)?(0,i.tx)("community.duplicate.duplicate"):(0,i.tx)("community.detail_view.try_it_out"),S={id:E.om.communityResourceInReviewBanner,bannerType:E.x1.INFO,icon:h.A,mainText:(0,i.t)("community.resource.admin_bypass_payment_banner.viewing_as_community_reviewer_admin"),description:(0,i.tx)("community.resource.admin_bypass_payment_banner.you_are_viewing_this_page_as_an_admin_reviewer"),button:{buttonText:C,onClick:()=>{if(N(e.resource)){let t=o.gE(e=>{y((0,m.to)({type:s._,data:{payload:e}}))},{adminReviewerOverride:!0});y(t(e.resource))}else y(d.aI({resource:T,fullscreenEditorType:x,isPlaygroundFile:!!(I.playground_fig_file||x===f.nT.DevHandoff)}))}},dismissible:!0,positionStatic:!0};return r.createElement(g.C,{content:S,editorType:f.nT.Design,onDismiss:()=>w(!1)})}},385422:(e,t,a)=>{"use strict";a.d(t,{S:()=>k});var r=a(411855),n=a(188507),l=a(776250),i=a(966712),o=a(881388),s=a(939863),c=a(206144),d=a(952540),m=a(662275),u=a(931828),_=a(611978),p=a(860178),f=a(239671),g=a(583894),E=a(59530),v=a(407844),h=a(946689),y=a(493323),b=a(164795),w=a(478398),T=a(971951),I=a(894513),x=a(10388),N=a(247866);function C({isLoading:e,text:t}){return r.createElement("span",{style:{position:"relative"}},e?r.createElement("div",{className:T.sl},r.createElement(y.kt,{shouldMatchTextColor:!0})):void 0,r.createElement("span",{style:{opacity:e?0:1}},t))}var S=a(607121);function k(e){let[t,a]=r.useState(!1),[y,T]=r.useState(!1),k=(0,n.wA)(),A=(0,n.d4)(e=>e.userFlags),L=(0,p.iZ)(),R=(0,_._6)(),[D,F]=r.useState(!1),P=y||e.isFirstTimeLoading,M="isFirstTimeLoading"in e;if(D&&!M||!L)return r.createElement(r.Fragment,null);let{stripe_account_status:O}=L;if(!M&&(!O||O===g.P5.NONE))return r.createElement(r.Fragment,null);let B=O===g.P5.NONE&&(0,i.kc)().cmty_expand_extension_m10n||O===g.P5.ACCEPTED||P?{userFlag:E.WE,bannerContent:function({isLoading:e,onClick:t,showCTA:a}){let n=r.createElement(h.CY,{className:w.$J,target:"_blank",href:"https://help.figma.com/hc/articles/12067637274519-About-selling-Community-resources",trusted:!0},(0,s.t)("general.learn_more"));return{id:b.om.communityM10nApprovalBanner,bannerType:b.x1.INFO,mainText:(0,i.kc)().cmty_expand_extension_m10n?(0,s.t)("community.seller.sell_on_community_v2"):(0,s.t)("community.seller.good_news"),icon:x.A,button:a?{buttonText:r.createElement(C,{isLoading:e,text:(0,s.t)("community.seller.set_up_stripe")}),onClick:t,className:w.mj}:void 0,description:(0,s.tx)("community.seller.you_may_be_eligible_with_link",{learnMoreLink:n}),dismissible:!!a,positionStatic:!0}}({isLoading:t,onClick:()=>{T(!0),k((0,m.to)({type:S.s,data:{setupStripeCallback:e=>{T(!1),e||k(o.s.error((0,s.t)("community.seller.unable_to_launch_stripe_onboarding_please_check_your_details")))}}}))},showCTA:!M})}:O===g.P5.STARTED_ONBOARDING?{userFlag:E.BY,bannerContent:function({onClick:e,isLoading:t,showCTA:a}){return{id:b.om.communityM10nFinishSetupBanner,bannerType:b.x1.INFO,icon:I.A,button:a?{buttonText:r.createElement(C,{isLoading:t,text:(0,s.t)("community.seller.finish_set_up")}),onClick:e,className:w.mj}:void 0,mainText:(0,s.t)("community.seller.finish_stripe_setup"),description:(0,s.t)("community.seller.few_steps_left_stripe"),dismissible:!!a,positionStatic:!0}}({isLoading:t,onClick:()=>{a(!0),k(d.j({callback:()=>a(!1),user:L,selectedView:R}))},showCTA:!M})}:O===g.P5.DISABLED?{userFlag:E.Q7,bannerContent:function({onClick:e,isLoading:t,showCTA:a}){return{id:b.om.communityM10nAdtlInfoNeededBanner,bannerType:b.x1.WARN,icon:N.A,button:a?{buttonText:r.createElement(C,{isLoading:t,text:(0,s.t)("community.seller.visit_stripe")}),onClick:e,className:w.mj}:void 0,mainText:(0,s.t)("community.seller.stripe_needs_your_attention"),description:(0,s.t)("community.seller.you_can_resolve"),dismissible:!!a,positionStatic:!0}}({isLoading:t,onClick:()=>{},showCTA:!M})}:void 0;if(!B)return r.createElement(r.Fragment,null);let{userFlag:U,bannerContent:V}=B,H=()=>{var e;null==(e=(0,c.ik)())||e(u.b({[U]:!0}))};return A[U]&&!M?r.createElement(r.Fragment,null):r.createElement(v.C,{containerClassName:M?w.hL:void 0,content:V,editorType:f.nT.Design,onDismiss:()=>{H(),F(!0),(0,l.sx)("cmty_m10n_banner_dismissed",{userFlag:U})}})}},699651:(e,t,a)=>{"use strict";a.d(t,{u:()=>Q});var r=a(411855),n=a(188507),l=a(966712),i=a(385422),o=a(860601),s=a(939863),c=a(99506),d=a(401730),m=a(239671),u=a(407844),_=a(164795),p=a(967063);function f(e){let{hasPublisherAdminAccess:t,resource:a}=e,n=(()=>{var e,r,n;if(t)return a.publishing_status===c.KB.DELISTED_CREATOR_STRIPE_DISABLED?(0,s.tx)("community.resource.delisted_stripe_issues"):(null==(e=null==a?void 0:a.monetized_resource_metadata)?void 0:e.is_subscription)?(0,s.tx)("community.resource.delisted_prev_purchasers_can_still_access__subscription"):(0,s.tx)("community.resource.delisted_prev_purchasers_can_still_access");if(null==(r=null==a?void 0:a.community_resource_payment)?void 0:r.subscription_expires_at){let e=new Date(a.community_resource_payment.subscription_expires_at).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"});return(0,s.tx)("community.resource.delisted_you_ll_continue_to_have_access_until",{dateString:e})}return(null==(n=null==a?void 0:a.community_resource_payment)?void 0:n.status)===d.G3.SUCCEEDED?(0,s.tx)("community.resource.delisted_you_ll_continue_to_have_access_to_it"):(0,s.tx)("community.resource.if_you_have_questions_reach_out_to_creator")})(),l={id:_.om.communityResourceInReviewBanner,bannerType:_.x1.WARN,icon:p.A,mainText:(0,s.t)("community.resource.delisted_title"),description:n,dismissible:!1,positionStatic:!0};return r.createElement(u.C,{content:l,editorType:m.nT.Design,onDismiss:o.lQ})}var g=a(837324),E=a(860178);function v(e){if(!(0,E.iZ)())return r.createElement(r.Fragment,null);let t="hub_file"===(0,g.Vm)(e.resource)?(0,s.t)("community.seller.only_you_can_see_your_file"):"plugin"===(0,g.Vm)(e.resource)?(0,s.t)("community.seller.only_you_can_see_your_plugin"):"widget"===(0,g.Vm)(e.resource)?(0,s.t)("community.seller.only_you_can_see_your_widget"):r.createElement(r.Fragment,null),a={id:_.om.communityResourceInReviewBanner,bannerType:_.x1.WARN,icon:p.A,mainText:(0,s.t)("community.seller.this_page_is_private"),description:t,dismissible:!1,positionStatic:!0};return r.createElement(u.C,{content:a,editorType:m.nT.Design,onDismiss:o.lQ})}function h(e){if(!(0,E.iZ)())return r.createElement(r.Fragment,null);let t="hub_file"===(0,g.Vm)(e.resource)?(0,s.t)("community.resource.unpublished_banner.only_you_can_see_this_page.hub_file"):"plugin"===(0,g.Vm)(e.resource)?(0,s.t)("community.resource.unpublished_banner.only_you_can_see_this_page.plugin"):"widget"===(0,g.Vm)(e.resource)?(0,s.t)("community.resource.unpublished_banner.only_you_can_see_this_page.widget"):r.createElement(r.Fragment,null),a={id:_.om.communityResourceInReviewBanner,bannerType:_.x1.WARN,icon:p.A,mainText:(0,s.t)("community.resource.unpublished_banner.your_resource_is_unpublished"),description:t,dismissible:!1,positionStatic:!0};return r.createElement(u.C,{content:a,editorType:m.nT.Design,onDismiss:o.lQ})}var y=a(545941),b=a(782501),w=a(555328);let T=a(392922).H;function I(e){let t={id:_.om.communityResourceInReviewBanner,bannerType:_.x1.WARN,icon:p.A,mainText:(0,s.t)("community.resource.admin_blocked_resource_banner.this_resource_is_blocked"),description:(0,s.t)("community.resource.admin_blocked_resource_banner.you_can_only_view_this_page_as_an_admin"),dismissible:!1,positionStatic:!0};return r.createElement(u.C,{content:t,onDismiss:o.lQ})}var x=a(737947),N=a(313496),C=a(749949),S=(e=>(e.EDIT_THIS_PAGE="edit_this_page",e.OPEN_ORIGINAL_FILE="open_original_file",e.UNPUBLISH="unpublish",e.DELIST="delist",e.MANAGE_RESOURCE="manage_resource",e))(S||{}),k=a(410424),A=a(941381),L=a(446686),R=a(442597),D=a(738269),F=a(662275),P=a(672517),M=a(988022),O=a(820642),B=a(741477),U=a(813408),V=a(143678),H=a(237870),W=a(350913),j=a(206074),$=a(488578),G=a(109361);let z="MANAGE_RESOURCE_DROPDOWN_TYPE",Y=(0,H.Ju)($.Rw);function K(e){var t;let{resource:a,fileKey:l}=e,i=(0,n.wA)(),c=r.useRef(null),d=(0,n.d4)((0,B.E)(z)),p=(0,n.d4)(e=>e.currentUserOrgId),f=(0,C.J)(),v=(0,g.U0)(a),h=(0,w.U)(e.resource)?V.e0.COMMUNITY_HUB_FILE:(0,w.xQ)(a)?V.e0.COMMUNITY_HUB_WIDGET:V.e0.COMMUNITY_HUB_PLUGIN,b=(0,E.iZ)();if(r.useEffect(()=>{(0,w.U)(e.resource)?i((0,k.ts)({hubFileId:e.resource.id})):i((0,A.af)({id:e.resource.id,resourceType:(0,w.I0)(e.resource)?w.bD.PLUGIN:w.bD.WIDGET}))},[i,e.resource,p]),!b)return null;let T=(0,w.m3)(a),I=[],H=(0,s.t)("community.resource.edit_this_page");if(I.push({displayText:H,callback:()=>{(0,w.U)(a)?((0,M.Cu)({name:S.EDIT_THIS_PAGE,hubFileId:a.id,isMonetized:T,text:H,trackingContext:V.e0.COMMUNITY_HUB_FILE,searchSessionId:f,has_carousel_media_nudge:v}),l&&i((0,L.t)({fileKey:l,isFullscreenOpen:!1,isEditHubFilePageMode:!0,entryPoint:U.k2.RESOURCE_PAGE,canvasThumbnailPromise:(0,O.$2)(l,b)}))):((0,M.Cu)({pluginId:a.id,name:S.EDIT_THIS_PAGE,isMonetized:T,text:H,trackingContext:h,searchSessionId:f,has_carousel_media_nudge:v}),i((0,R.r)({publishedPluginId:a.id,entryPoint:U.k2.RESOURCE_PAGE})))}}),(0,w.U)(a)){let e=(0,s.t)("community.hub_files.open_original_file");if(I.push({displayText:e,callback:()=>{(0,M.Cu)({name:S.OPEN_ORIGINAL_FILE,hubFileId:a.id,isMonetized:T,text:e,trackingContext:V.e0.COMMUNITY_HUB_FILE,searchSessionId:f,has_carousel_media_nudge:v}),x.Ay.redirect(`/file/${l}`,"_blank")}}),!(0,y.Pg)(a)){I.push({displayText:"",disabled:!0,separator:!0});let e=(0,s.t)(T?"community.resource.delist":"community.resource.unpublish");I.push({displayText:e,callback:()=>{(0,M.Cu)({name:T?S.DELIST:S.UNPUBLISH,hubFileId:a.id,isMonetized:T,text:e,trackingContext:V.e0.COMMUNITY_HUB_FILE}),i((0,F.to)({type:Y,data:{confirmationTitle:T?(0,s.t)("community.hub_files.delist_file_from_community_hub"):(0,s.t)("community.hub_files.remove_file_from_community_hub"),content:T?(0,s.t)("community.hub_files.delisting_this_resource_will_prevent_people_from_discovering_or_purchasing_this_resource"):(0,s.t)("community.hub_files.unpublishing_this_file_will_remove_it_from_the_community_hub_and_prevent_people_from_finding_and_using_this_file"),confirmText:T?(0,s.t)("community.resource.delist"):(0,s.t)("community.resource.unpublish"),cancelText:(0,s.t)("general.cancel"),onConfirm:()=>{i((0,k.ax)({hubFileId:a.id,redirectLink:(0,W.bL)(a.publisher.profile_handle)}))},destructive:!0}}))}})}}let $=r.createElement(N.g,{ref:c,buttonClassName:"show_resource_creator_banner--manageResourceCTA--lYOcA text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:()=>{d||((0,M.Cu)({name:S.MANAGE_RESOURCE,resourceId:a.id,has_carousel_media_nudge:v,trackingContext:h,searchSessionId:f}),i((0,D.j7)({type:z})))},isShowingDropdown:!1},(0,s.t)("community.resource.manage_resource")),K={id:_.om.CommunityResourceCreatorBanner,bannerType:_.x1.INFO,icon:G.A,iconSize:"large",mainText:(0,s.t)("community.resource.your_resource_is_live"),description:v?(0,w.U)(a)?(0,s.t)("community.resource.next_we_recommend_adding_more_images"):(0,w.xQ)(a)?(0,s.t)("community.resource.next_we_recommend_adding_more_images_and_videos",{resourceType:(0,s.t)("community.plugins.widget")}):(0,s.t)("community.resource.next_we_recommend_adding_more_images_and_videos",{resourceType:(0,s.t)("community.plugins.plugin")}):void 0,dismissible:!1,positionStatic:!0,button:{type:_.MA.CUSTOM,element:$}};return r.createElement(P.fu,{name:"RDP Creator Banner",properties:{name:"rdp_creator_banner",resourceId:a.id,resourceType:(0,g.Vm)(a),hasCarouselMediaNudge:v}},r.createElement(u.C,{content:K,editorType:m.nT.Design,onDismiss:o.lQ}),c.current&&d&&r.createElement(j.j,{dispatch:i,items:I,showPoint:!0,parentRect:null==(t=c.current)?void 0:t.getBoundingClientRect(),onSelectItem:e=>{e.callback&&e.callback("",null,i)},minWidth:120}))}function Q(e){var t;let{resource:a}=e,o=(0,n.d4)(e=>(0,b.MK)(e,a)),s=(0,n.d4)(e=>(0,w.U)(a)?(0,b.cN)(e,a,o):(0,b.Wd)(e,a)),c=(0,b.RB)(a),d=(0,w.Uz)(a)?null==(t=a.fig_file_metadata)?void 0:t.key:void 0;return(0,l.kc)().community_hub_admin&&(0,y.lT)(a)?r.createElement(I,{resource:a}):(0,l.kc)().community_hub_admin_reviewer&&(0,w.m3)(a)?r.createElement(T,{resource:a}):a.publishing_status?s&&(0,y.AC)(a)?r.createElement(v,{resource:a}):(0,y.Pg)(a)?r.createElement(f,{hasPublisherAdminAccess:s,resource:a}):(0,w.U)(a)&&c?r.createElement(K,{resource:a,fileKey:d}):((0,w.I0)(a)||(0,w.xQ)(a))&&c?r.createElement(K,{resource:a}):r.createElement(i.S,null):r.createElement(h,{resource:a})}},751325:(e,t,a)=>{"use strict";a.d(t,{i:()=>O});var r=a(411855),n=a(188507),l=a(563706),i=a(776621),o=a(304783),s=a(877723),c=a(799569),d=a(939863),m=a(629019),u=a.n(m);let _="lazy_input--lazyInput--uH0Ln";class p extends r.PureComponent{constructor(e){super(e),this.procrastinating=!1,this.procrastinationTimer=null,this.onLazyUpdate=()=>{this.procrastinating=!1,this.updateIfNotLazy(this.state.requestedValue)},this.onChange=e=>{this.procrastinate(),this.setState({value:e.target.value}),this.props.onChange(e)},this.state={value:this.props.value}}componentDidMount(){var e;this.props.autoFocus&&(null==(e=this.props.innerRef)?void 0:e.current)&&this.props.innerRef.current.focus()}UNSAFE_componentWillReceiveProps(e){this.updateIfNotLazy(e.value)}componentWillUnmount(){this.procrastinationTimer&&(clearTimeout(this.procrastinationTimer),this.procrastinating=!1)}updateIfNotLazy(e){this.procrastinating?this.setState({requestedValue:e}):this.state.value!==e&&this.setState({value:e,requestedValue:void 0})}procrastinate(){this.procrastinating=!0,this.procrastinationTimer&&clearTimeout(this.procrastinationTimer),this.procrastinationTimer=setTimeout(this.onLazyUpdate,this.props.delay)}getProps(){let e={...this.props};return delete e.delay,delete e.innerRef,e.value=this.state.value,e.onChange&&(e.onChange=this.onChange),null==e.value&&(e.value=void 0),e.className?e.className=`${e.className} ${_}`:e.className=_,e}render(){return r.createElement("input",{...this.getProps(),ref:this.props.innerRef,dir:"auto"})}}p.displayName="LazyInput",p.defaultProps={type:"text",delay:1e3};let f=r.forwardRef((e,t)=>r.createElement(p,{...e,innerRef:t}));var g=a(3453);class E extends r.Component{constructor(){super(...arguments),this.onKeyDown=e=>{this.props.onKeyDown&&this.props.onKeyDown(e),27===e.keyCode&&e.target.blur()},this.onClick=e=>{this.props.onClick&&this.props.onClick(e)}}render(){let e={...this.props};e.className=`${this.props.defaultClass} ${this.props.className||""}`;let t=this.props.dataTestId;return delete e.defaultClass,delete e.dataTestId,this.props.onClick&&(e.onClick=this.onClick),r.createElement("button",{onKeyDown:this.onKeyDown,...e,"data-testid":t},this.props.children)}}E.displayName="ButtonBase";class v extends r.Component{render(){let{fullWidth:e,...t}=this.props;return r.createElement(E,{defaultClass:u()(g.xZ,e&&g.Ij),...t})}}v.displayName="ButtonPrimary";class h extends r.Component{render(){let e=this.props;return r.createElement(E,{defaultClass:g.HM,type:"button",...e})}}h.displayName="ButtonSecondary",r.forwardRef(function({className:e,...t},a){return r.createElement(f,{className:u()(g._Z,e),...t,ref:a})});class y extends r.PureComponent{constructor(e){super(e),this.documentKeyDown=e=>{9===e.keyCode&&this.setState({showFocus:!0})},this.documentMouseDown=()=>{this.setState({showFocus:!1})},this.onFocus=e=>{this.state.showFocus||e.target.blur()},this.classNameForInput=()=>{let e=`${g.kv} ${this.props.className||""}`;return this.state.showFocus&&(e+=` ${g.hP}`),e},this.state={showFocus:!1}}componentDidMount(){document.addEventListener("keydown",this.documentKeyDown),document.addEventListener("mousedown",this.documentMouseDown)}componentWillUnmount(){document.removeEventListener("keydown",this.documentKeyDown),document.removeEventListener("mousedown",this.documentMouseDown)}render(){let e=this.props.classOverride||this.classNameForInput(),t={...this.props,className:e};return delete t.classOverride,r.createElement("input",{type:"checkbox",onFocus:this.onFocus,...t})}}y.displayName="Checkbox";var b=a(662275),w=a(237870),T=a(488578);let I=(0,w.Ju)(function(e){return r.createElement(T.aF,{title:r.createElement("div",{className:"feature_not_available_modal--title--kPAVe text--fontPos14--OL9Hp text--_fontBase--QdLsd"},(0,d.tx)("community.collections.this_feature_isnt_available")),className:"feature_not_available_modal--modalContainer--Etu7A"},r.createElement(c.s_,{dispatch:e.dispatch}),r.createElement("div",{className:"feature_not_available_modal--modalBody--Dhwo0 text--fontPos14--OL9Hp text--_fontBase--QdLsd"},(0,d.tx)("community.collections.this_feature_isnt_available_body")," ",r.createElement("a",{className:"feature_not_available_modal--learnMore--L4kDU modal--blueLink--9GcJu blue_link--blueLink--9rlnd",target:"_blank",href:"https://help.figma.com/hc/en-us/articles/17725942479127-Access-or-opt-out-of-AI-features"},(0,d.tx)("community.collections.learn_more"))),r.createElement("div",{className:"feature_not_available_modal--buttonContainer--9-Zwv"},r.createElement(v,{onClick:()=>{e.dispatch(b.Ce())}},(0,d.tx)("general.got_it"))))}," FeatureNotAvailableModal");var x=a(281297),N=a(119198),C=a(988022),S=a(102310),k=a(99506),A=a(945020),L=a(435898),R=a(999021),D=a(375360),F=a(620268),P=a(152462);function M({title:e,description:t,imageUrl:a,onClick:n}){let i=(0,l.o4)();return r.createElement("div",{className:u()(F.Ui,"figjam_ai_card--cardContainer--kCDdk"),"data-testid":"collection-figjam-ai-card"},r.createElement("div",{className:u()(F.Nr,"figjam_ai_card--card--KTu46")},i?r.createElement("div",{className:"figjam_ai_card--mobileOverlay--EhOsZ"},r.createElement("button",{className:u()("figjam_ai_card--invisibleButton--LuV4E"),onClick:n})):r.createElement("div",{className:"figjam_ai_card--overlayContainer--dDIiY"},r.createElement("div",{className:"figjam_ai_card--overlay--g6q4O"}),r.createElement("button",{className:u()("figjam_ai_card--ctaButton--wveh5",P.jx,P.tt,P.hh),onClick:n},(0,d.tx)("community.collections.generate"))),r.createElement(D.tL,{title:e,description:t}),r.createElement(R.c,{srcSet:"",src:a,image_type:"COMMUNITY_HUB_FILE_THUMBNAIL",alt:e,className:u()(F.Sl,"figjam_ai_card--image--L-R2C"),imageProps:{onLoad:e=>e.currentTarget.style.opacity="1"}})))}function O({title:e,description:t,imageUrl:a,prompt:c,promptCategory:d}){let m=(0,n.wA)(),u=(0,S.B)(),_=(0,l.o4)(),p=(0,s.q8)(),f=(e,t)=>{m(N.zE({state:u,from:A.f6.COMMUNITY_COLLECTIONS_PAGE,editorType:k._Y.WHITEBOARD,team:void 0,openNewFileIn:A.ai.NEW_TAB,figjamAiNewFileData:{prompt:e,subtitle:e,useCaseCategory:t,entrypoint:L.fV.COMMUNITY}}))};return r.createElement(M,{onClick:()=>{(0,C.Cu)({name:"community_collections_figjam_ai",prompt:c,title:e,description:t,promptCategory:d,isMobile:`${_}`}),_?m((0,b.to)({type:x.s,data:{dispatch:m}})):p?m((0,b.to)({type:I,data:{dispatch:m}})):Object.values(L.es).includes(d)?f(c,d):(0,i.$D)(o.e.COMMUNITY,Error(`Invalid use case category (${d}) for figjam ai card: ${e}`))},title:e,description:t,imageUrl:a})}},281297:(e,t,a)=>{"use strict";a.d(t,{s:()=>d});var r=a(411855),n=a(799569),l=a(939863),i=a(662275),o=a(137459),s=a(237870),c=a(488578);let d=(0,s.Ju)(function(e){let t=(0,l.t)("rcs.redirect_from_mobile_to_desktop.head_to_figjam_on_desktop"),a=(0,l.t)("community.collections.head_to_desktop"),s="https://static.figma.com/uploads/f95cfc857cdc5c164958966add0665b69673667c";return e.editorType===o.LE.SLIDES&&(t=(0,l.t)("rcs.redirect_from_mobile_to_desktop.head_to_slides_on_desktop"),a=(0,l.t)("community.collections.head_to_desktop_slides"),s="https://static.figma.com/uploads/d5fbdadc97f3d94063357e9819c314ade9055df3"),r.createElement(c.aF,{className:"head_to_desktop_modal--modalContainer--BRiSA"},r.createElement(n.s_,{dispatch:e.dispatch}),r.createElement("img",{width:"100%",alt:a,src:s}),r.createElement("div",{className:"head_to_desktop_modal--modalBody--n9Et8 text--fontPos14--OL9Hp text--_fontBase--QdLsd"},r.createElement("h1",{className:"head_to_desktop_modal--title--kJAKG text--fontPos18--rYXJb text--_fontBase--QdLsd"},t),r.createElement("p",null,a),r.createElement("button",{className:"head_to_desktop_modal--gotIt--StOau",onClick:()=>{e.dispatch(i.Ce())}},(0,l.tx)("general.got_it"))))}," HeadToDesktopModal")},375360:(e,t,a)=>{"use strict";a.d(t,{rS:()=>f,tL:()=>h});var r=a(411855);if(443==a.j)var n=a(860601);var l=a(999021),i=a(939863),o=a(674694),s=a(240411),c=a(629732),d=a(568424),m=a(837324),u=a(672517),_=a(555328),p=a(620268);function f({resource:e,title:t,description:a}){switch((0,m.Vm)(e)){case _.vt.HUB_FILE:return r.createElement(g,{hubFile:e,title:t,description:a,key:e.id});case _.vt.WIDGET:return r.createElement(E,{widget:e,title:t,description:a,key:e.id});case _.vt.PLUGIN:return r.createElement(v,{plugin:e,title:t,description:a,key:e.id});default:return null}}function g({hubFile:e,title:t,description:a}){let l=(0,m.qD)(e),i=(0,m._t)({resource:e});return r.createElement("div",{className:p.Ui,"data-testid":"collection-resource-card"},r.createElement(u.o3,{className:p.Nr,to:i,trackingEventName:"community_collections",trackingProperties:{name:"hub_file_card_clicked",href:i},target:"_blank"},r.createElement(h,{title:t??l.name,description:a??l.description}),r.createElement(o.Xy,{className:p.Sl,image:e.thumbnail_url,hubFileId:e.id,onLoad:n.lQ,alt:l.name,resizedThumbnailUrls:e.resized_thumbnail_urls})),r.createElement(y,{resource:e}))}function E({widget:e,title:t,description:a}){let n=(0,m.qD)(e),i=(0,m._t)({resource:e});return r.createElement("div",{className:p.Ui,"data-testid":"collection-resource-card"},r.createElement(u.o3,{className:p.Nr,to:i,trackingEventName:"community_collections",trackingProperties:{name:"widget_card_clicked",href:i},target:"_blank"},r.createElement(h,{title:t??n.name,description:a??n.description}),r.createElement(l.c,{srcSet:"",src:n.redirect_snapshot_url||n.redirect_icon_url,image_type:"COMMUNITY_HUB_FILE_THUMBNAIL",alt:n.name,className:p.Sl,imageProps:{onLoad:e=>e.target.style.opacity="1"}})),r.createElement(y,{resource:e}))}function v({plugin:e,title:t,description:a}){let n=(0,m.qD)(e),i=(0,m._t)({resource:e});return r.createElement("div",{className:p.Ui,"data-testid":"collection-resource-card"},r.createElement(u.o3,{className:p.Nr,to:i,trackingEventName:"community_collections",trackingProperties:{name:"plugin_card_clicked",href:i},target:"_blank"},r.createElement(l.c,{srcSet:"",src:n.redirect_icon_url,image_type:"COMMUNITY_HUB_FILE_THUMBNAIL",alt:n.name,className:p.t3,imageProps:{onLoad:e=>e.target.style.opacity="1"}}),r.createElement(h,{title:t??n.name,description:a??n.description})),r.createElement(y,{resource:e}))}function h({title:e,description:t}){return r.createElement("div",{className:p.pq},r.createElement("div",{className:p.DD},e),r.createElement("div",{className:p.h_},r.createElement(d._,{description:t})))}function y({resource:e}){var t,a;return r.createElement("div",{className:p.qr},r.createElement("div",{className:p.ME},r.createElement(c.L,{publishers:(null==(t=e.community_publishers)?void 0:t.accepted)||[]}),r.createElement("div",{className:p.vR},(0,i.tx)("community.cards.by"),r.createElement(c.I,{publishers:(null==(a=e.community_publishers)?void 0:a.accepted)||[],removeByLabel:!0,openInNewTab:!0}))),r.createElement("div",{className:p.uK},r.createElement(s.cz,{resource:e,currentUserLiked:!1}),r.createElement(s.i8,{resource:e})))}},62258:(e,t,a)=>{"use strict";a.d(t,{X:()=>eP});var r=a(411855),n=a(188507),l=a(697551),i=a(782501),o=a(560718),s=a(860178),c=a(776250),d=a(183297),m=a(493323);function u(e){let t=r.useRef(null);return r.useEffect(()=>{let a=()=>{var a;window.innerHeight<((null==(a=t.current)?void 0:a.getBoundingClientRect().bottom)||1/0)||e.onScrollToBottom()};return window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)},[e]),r.createElement("div",{ref:t},e.children,e.showLoader&&r.createElement("div",{className:"infinite_scroll_container--loadingSpinner--UMKR8"},r.createElement(m.kt,null)))}function _(e){let{onScrollToBottom:t,children:a,showLoader:n}=e;return r.createElement(u,{onScrollToBottom:t,children:a,showLoader:n})}_.displayName="WithInfiniteScroll";var p=a(135876),f=a(428322),g=a(939863),E=a(749949),v=a(837324),h=a(612776),y=a(609271),b=a(63397),w=a(107877),T=a(820642),I=a(555328),x=a(323667),N=a(738269),C=a(994988),S=a(318812),k=a(459343),A=a(206074);let L="comments_view--loader--tz-FD",R="comments-sort-dropdown",D="SHOW_RESOLVED",F=function({labelClassName:e,includeShowResolved:t,isLoggedIn:a}){var l;let i=(0,n.wA)(),o=(0,S.Um)(),s=(0,n.d4)(e=>e.communityHub.comments.activeFeedType),d=(0,n.d4)(e=>e.communityHub.comments.showResolved),m=r.useRef(null),[u,_]=r.useState(null),p=(null==o?void 0:o.type)===R,f={ALL:"All",ME:"Your comments",COMMENTS:"Comments only",RATINGS_REVIEWS:"Reviews only"},E=e=>{switch(e){case f.ALL:return(0,g.t)("community.comments.all");case f.ME:return(0,g.t)("community.comments.your_comments");case f.COMMENTS:return(0,g.t)("community.comments.comments_only");case f.RATINGS_REVIEWS:return(0,g.t)("community.comments.reviews_only");default:return""}},v=null==(l=null==o?void 0:o.data)?void 0:l.targetRect;r.useEffect(()=>{v&&_(v)},[v]);let h=Object.keys(f).filter(e=>a||e!==I.Qv.ME).filter(e=>e!==I.Qv.RATINGS_REVIEWS&&e!==I.Qv.COMMENTS).map(e=>({displayText:E(f[e]),name:e,isChecked:e===s}));return t&&(h.push({displayText:"",separator:!0,name:void 0}),h.push({displayText:(0,g.t)("community.comments.show_resolved"),isChecked:d,name:D})),r.createElement("div",null,r.createElement("div",{onClick:e=>{e.stopPropagation();let t=m.current;p?i(N.oB()):t&&(_(t.getBoundingClientRect()),i(N.j7({type:R})))},className:e||"comments_view--commentsSortLabel--mpkGD"},E(f[s]),r.createElement(k.c,{className:"comments_view--commentsSortChevron--989-q",dispatch:i,dropdownKey:R,showingDropdown:p,divRef:m,toggleOnClick:!0})),p&&u&&r.createElement(A.j,{dispatch:i,items:h,parentRect:u,onSelectItem:e=>{(0,c.sx)("Comments Filter Changed",{thread_type:"community_preview",view:e.name}),e.name&&(e.name===D?i(C.mH(!d)):i(b.Zj(e.name)))},minWidth:164,showPoint:!0}))};var P=a(460845),M=a(629019),O=a.n(M),B=a(564577),U=a(574176),V=a(498480);function H(){return r.createElement(V.Ex,{text:(0,g.t)("community.comments.creator"),color:V.zE.TOOLBAR,className:"creator_badge--creatorBadge--P5vsL"})}var W=a(498606),j=a(558867);let $="comment_tile--commentContainerFadeOut--AMWrR",G="comment_tile--nextSiblingCommentReset--4shUj",z="comment_tile--iconButton--MZmz1";function Y(e){return document.querySelector(`[data-comment-id="${e}"]`)}let K={fadeOut:async(e,t)=>{t||(t={resetNextComment:!1});let a=Y(e);if(!a)return;let r=a.getBoundingClientRect();a.classList.add($);let n=a.nextSibling;return n&&(n.style.marginTop=`-${r.height-1}px`),await new Promise(e=>setTimeout(e,K.ANIMATION_LENGTH)),t.resetNextComment&&K.resetNextComment(null==n?void 0:n.dataset.commentId),null==n?void 0:n.dataset.commentId},resetNextComment:e=>{let t=e&&Y(e);t&&(t.classList.add(G),t.style.marginTop="0px",setTimeout(()=>t.classList.remove(G),50))},fadeIn:e=>{let t=document.querySelector(`[data-comment-id="${e}"]`);if(!t)return;t.classList.remove($);let a=t.nextSibling;a&&(a.style.marginTop="0px")},ANIMATION_LENGTH:400};var Q=a(400333),q=a(227795),X=a(800576),J=a(392592),Z=a(62589),ee=a(97128),et=a(970516),ea=a(662275),er=a(965837),en=a(688734),el=a(946689),ei=a(67294),eo=a(237870),es=a(488578),ec=a(596049);let ed=(0,eo.Ju)(function(e){let t=e.reportType===o.nI.REPORT_AND_HIDE,a=t?(0,g.t)("community.comments.report_and_hide_author_name_s_comment",{authorName:e.comment.author.name}):(0,g.t)("community.comments.report_author_name_s_comment",{authorName:e.comment.author.name}),n=r.createElement("p",{className:ec.zC},t?(0,g.t)("community.comments.this_will_flag_the_comment_for_review_and_hide_it_for_everyone"):(0,g.t)("community.comments.this_will_flag_the_comment_for_review")," ",(0,g.t)("community.comments.comment_author_will_not_be_notified",{authorName:e.comment.author.name})," ",(0,g.tx)("community.comments.please_read_our_link_before_reporting",{link:r.createElement(el.CY,{href:"https://help.figma.com/hc/articles/360038510573-Figma-Community-Guidelines",target:"_blank",trusted:!0},(0,g.tx)("community.community_guidelines"))}));return r.createElement(es.Rw,{confirmationTitle:a,confirmText:(0,g.t)("community.comments.report"),onConfirm:()=>e.onReport(e.comment.id),destructive:!0},r.createElement("div",{className:ec.RZ,"data-testid":"comment-confirm-report-modal-content"},r.createElement(ei.H8,{user:e.comment.author,size:ei.Pf.LARGE}),n))},"CommentConfirmReportModal");var em=(e=>(e.COPY_LINK="Copy link",e.EDIT="Edit",e.DELETE="Delete",e.DELETE_THREAD="Delete thread",e.FOLLOW_PROFILE="Follow",e.UNFOLLOW_PROFILE="Unfollow",e.BLOCK_PROFILE_COMMENTING="Restrict user's comments",e.UNBLOCK_PROFILE_COMMENTING="Unrestrict user's comments",e.REPORT_COMMENT="Report",e.REPLY="Reply",e))(em||{});function eu(e){return{name:e,displayText:function(e){switch(e){case"Copy link":return(0,g.t)("community.comments.copy_link");case"Edit":return(0,g.t)("community.comments.edit");case"Delete":return(0,g.t)("community.comments.delete");case"Delete thread":return(0,g.t)("community.comments.delete_thread");case"Follow":return(0,g.t)("community.follow.follow");case"Unfollow":return(0,g.t)("community.follow.unfollow");case"Restrict user's comments":return(0,g.t)("community.comments.restrict_user_s_comments");case"Unrestrict user's comments":return(0,g.t)("community.comments.unrestrict_user_s_comments");case"Report":return(0,g.t)("community.comments.report_comment");case"Reply":return(0,g.t)("community.comments.reply")}}(e)}}function e_(e){let t=(0,n.wA)(),a=(0,s.iZ)(),{apiResourceType:l,resourceId:i}=(0,Z.Rd)(ee.ax),d=()=>{var t;null==(t=e.onEdit)||t.call(e)},m=()=>{e.onDelete&&t((0,ea.to)({type:er.h,data:{onConfirm:()=>e.onDelete()}}))},u=()=>{t(et.lW({stringToCopy:(0,X.ky)(new ee.ax({apiResourceType:l,resourceId:i},{comment:e.comment.id}).href)}))},_=(r,n)=>{t(b._8({blockedProfileId:n,profileId:r,onSuccess:()=>{t(C.BV({authorId:n,removeCommentsCallback:async e=>{e.map(e=>K.fadeOut(e.id,{resetNextComment:!0})),await new Promise(e=>setTimeout(e,K.ANIMATION_LENGTH))}})),t(J.F.enqueue({message:(0,g.t)("community.comments.restricted_this_user_s_comments"),type:"profile-restricted-change"})),(0,c.sx)("comment_profile_restricted",{restricted_by_profile_id:null==a?void 0:a.community_profile_id,restricted_profile_id:n,entry_point:"comment",comment_id:e.comment.id})}}))},p=(a,r)=>{t(b.dL({blockedProfileId:r,profileId:a,onSuccess:()=>{t(J.F.enqueue({message:(0,g.t)("community.comments.unrestricted_this_user_s_comments"),type:"profile-restricted-change",button:{text:(0,g.t)("community.comments.undo"),action:()=>{_(a,r)}}})),(0,c.sx)("comment_profile_unrestricted",{unrestricted_by_profile_id:a,unrestricted_profile_id:r,comment_id:e.comment.id,entry_point:"comment"})}}))},f=()=>{var a;let{profileIdToAdminResourceAs:r}=e,n=null==(a=e.comment)?void 0:a.author.id;r&&n&&t((0,ea.to)({type:en.H,data:{onBlock:()=>_(r,n),confirmationTitle:(0,g.t)("community.comments.remove_comment_and_restrict_user"),confirmButtonText:(0,g.t)("community.comments.remove_and_restrict")}}))},E=e=>{t(b.e6(e))},v=e=>{t(b.X2(e))},h=async a=>{let r=await K.fadeOut(a);t(C.eG({commentId:a,userIsAdmin:!!e.userIsAdmin,onFinish:e=>{e?K.fadeIn(a):r&&K.resetNextComment(r)}}))},y=e=>{t((0,ea.to)({type:ed,data:{comment:e,reportType:o.nI.REPORT_AND_HIDE,onReport:h}}))},w=e=>{t((0,ea.to)({type:ed,data:{comment:e,reportType:o.nI.REPORT,onReport:h}}))};return r.createElement(A.j,{dispatch:t,items:e.items,showPoint:!0,parentRect:e.parentRect,onSelectItem:(t,a)=>{var r;"Edit"===t.name?d():"Delete"===t.name||"Delete thread"===t.name?m():"Copy link"===t.name?u():"Follow"===t.name&&e.comment.author.id?E(e.comment.author.id):"Unfollow"===t.name&&e.comment.author.id?v(e.comment.author.id):"Restrict user's comments"===t.name&&e.comment.author.id&&e.profileIdToAdminResourceAs?f():"Unrestrict user's comments"===t.name&&e.comment.author.id&&e.profileIdToAdminResourceAs?p(e.profileIdToAdminResourceAs,e.comment.author.id):"Report"===t.name?e.userIsAdmin?y(e.comment):w(e.comment):"Reply"===t.name&&(null==(r=e.onReply)||r.call(e))},minWidth:96,dataTestId:"comment-menu"})}function ep(e){let t=[eu(em.EDIT),eu(e.isThreadParent?em.DELETE_THREAD:em.DELETE)];return e.hideCopyLink||t.push(eu(em.COPY_LINK)),r.createElement(e_,{comment:e.comment,parentRect:e.parentRect,items:t,onEdit:e.onEdit,onDelete:e.onDelete})}function ef(e){let t=[];return e.canReplyToComment&&t.push(eu(em.REPLY)),e.hideCopyLink||t.push(eu(em.COPY_LINK)),t.push(eu(e.author.is_restricted_by_current_user?em.UNBLOCK_PROFILE_COMMENTING:em.BLOCK_PROFILE_COMMENTING)),t.push(eu(em.REPORT_COMMENT)),r.createElement(e_,{profileIdToAdminResourceAs:e.profileIdToAdminResourceAs,comment:e.comment,parentRect:e.parentRect,items:t,onDelete:e.onDelete,onReply:e.onReply,userIsAdmin:!0})}function eg(e){let t=[];return e.userExists&&t.push(eu(em.REPORT_COMMENT)),e.hideCopyLink||t.unshift(eu(em.COPY_LINK)),r.createElement(e_,{comment:e.comment,parentRect:e.parentRect,items:t})}function eE(e){var t;let a=(0,s.iZ)(),i=(0,n.d4)(e=>e.authedActiveCommunityProfile),c=(0,n.d4)(t=>t.communityHub.comments.commentsById[e.comment.id]),d=(0,n.d4)(e=>e.communityHub.comments.authorsById[c.author.id]),m=(t=o.ej.COMMUNITY,!!a&&t===o.ej.COMMUNITY&&!(0,l.cs)(i)&&c.author.profile_handle===a.community_profile_handle),u=(null==i?void 0:i.id)===e.profileIdToAdminResourceAs;return m?r.createElement(ep,{comment:c,parentRect:e.parentRect,onEdit:()=>e.onEdit(c),onDelete:()=>e.onDelete(c),hideCopyLink:e.hideCopyLink,isThreadParent:e.isThreadParent}):e.profileIdToAdminResourceAs&&u?r.createElement(ef,{profileIdToAdminResourceAs:e.profileIdToAdminResourceAs,author:d,comment:c,parentRect:e.parentRect,onDelete:e.onDelete,hideCopyLink:e.hideCopyLink,canReplyToComment:!!e.onReply,onReply:()=>{var t;return null==(t=e.onReply)?void 0:t.call(e,c)}}):r.createElement(eg,{comment:c,parentRect:e.parentRect,userExists:!!a,hideCopyLink:e.hideCopyLink})}var ev=a(503457);let eh=(0,ev.kf)("lazy_create_comment_composer",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(5343),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(7481),a.e(3630),a.e(8410)]).then(a.bind(a,815988))).CreateCommentComposer})}),ey=(0,ev.kf)("lazy_edit_comment_composer",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(5343),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(7481),a.e(3630),a.e(8410)]).then(a.bind(a,439827))).EditCommentComposer})}),eb=(0,ev.kf)("lazy_reply_comment_composer",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(5343),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(7481),a.e(3630),a.e(8410)]).then(a.bind(a,711379))).ReplyCommentComposer})});(0,ev.kf)("lazy_comment_editable_typeahead",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(5343),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(7481),a.e(3630),a.e(8410)]).then(a.bind(a,815988))).CommentEditableTypeahead})});var ew=a(95779),eT=a(210105);function eI(e){let{comment:t,author:a,userIsAuthor:l,isAuthorAcceptedPublisher:i}=e,[s,d]=r.useState(!1),m=r.useRef(null),u=(0,n.d4)(e=>e.dropdownShown),_=(0,n.wA)(),[p,f]=r.useState(!1),[v,h]=r.useState(null),y=r.useCallback(()=>{(null==u?void 0:u.type)===o.Ng&&_(N.oB())},[u,_]);r.useEffect(()=>(window.addEventListener("scroll",y,!1),()=>{window.removeEventListener("scroll",y,!1)}),[y]);let b=(0,E.J)();if(!t||!a)return r.createElement(r.Fragment,null);let w=async()=>{let a=await K.fadeOut(t.id);_(C.Tu({commentId:t.id,commentType:e.commentType,onFinish:e=>{e?K.fadeIn(t.id):K.resetNextComment(a)}}))};if(p)return r.createElement(ey,{fallback:null,errorFallback:null,commentType:e.commentType,commentId:t.id,message:t.message,messageMeta:t.message_meta??[],onComplete:()=>{(0,c.sx)(x.E,{commentId:null==t?void 0:t.id,message:null==t?void 0:t.message,userId:a.primary_user_id,profileId:a.id,resourceType:e.resourceType,resourceId:e.resourceId,searchSessionId:b},{forwardToDatadog:!0}),f(!1)}});let T=e.selected&&!e.isCreatorReply,I=t.reply_count,S=!!(u&&u.type===o.Ng&&u.data.commentId===t.id),k=!!t.hidden_at&&!l,A=`/@${a.profile_handle}`;return r.createElement("div",{className:O()(T?"comment_tile--tempSelectedCommentTile--eo1zi comment_tile--selectedCommentTile--9xoJJ comment_tile--commentTile--Y-2jW comment_tile--commentContainer--alB5v":"comment_tile--commentTile--Y-2jW comment_tile--commentContainer--alB5v",{"comment_tile--creatorReplySelectedParent--aVNCs comment_tile--creatorReply--OO0It":!!e.selected&&e.isCreatorReply,"comment_tile--creatorReply--OO0It":!e.selected&&e.isCreatorReply,"comment_tile--noSeparator--RL2vm":e.hideSeparator}),"data-comment-id":t.id,role:"button",tabIndex:0},r.createElement(P.N_,{className:"comment_tile--commentAvatarContainer--e8z35",to:A},r.createElement(j.Ro,{entity:a,size:32,className:"comment_tile--commentAvatar--5xfu2 community_hub_view--creatorInsetBorder--z2InY community_hub_view--creatorInsetBorderNoHover--27smC"})),r.createElement("div",{className:e.hideSeparator||T?"comment_tile--commentContentWrapperNoBorder--Poey3 comment_tile--commentContentWrapper--L2vv2":"comment_tile--commentContentWrapper--L2vv2"},r.createElement("div",{className:"comment_tile--commentContent--QUN--"},r.createElement("div",{className:"comment_tile--commentMetaAndOptions--Avk6k"},r.createElement("div",null,r.createElement(P.N_,{className:"comment_tile--commentAuthorLink--3Q-Ty ellipsis--ellipsis--Tjyfa",to:A},r.createElement("span",{className:"comment_tile--commentAuthor--X2tiN text--fontPos13--xW8hS text--_fontBase--QdLsd"},a.name),r.createElement("span",{className:"comment_tile--commentAuthorHandle--qrjUX comment_tile--commentTime--Zz1IX text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},`@${a.profile_handle}`)),i&&r.createElement(H,null),r.createElement("span",{className:"comment_tile--commentMetaDivider--pzekb text--fontPos13--xW8hS text--_fontBase--QdLsd"},"\xb7"),r.createElement(B.h1,{className:"comment_tile--commentTime--Zz1IX text--fontPos11--2LvXf text--_fontBase--QdLsd",date:t.created_at})),r.createElement("div",{className:"comment_tile--commentOptions--hNQQM"},k&&r.createElement(U.B,{className:"comment_tile--isHiddenIcon--isUzt",svg:eT.A}),r.createElement("div",{className:z},r.createElement(q.K0,{svg:ew.A,ref:m,onClick:e=>{let a=m.current;u?y():a&&(h(a.getBoundingClientRect()),_(N.j7({type:o.Ng,data:{commentId:t.id}}))),e.stopPropagation()},className:S?"comment_tile--iconButtonSelected--CaL6y raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6":z,"data-tooltip-type":W.Ib.TEXT,"data-tooltip":(0,g.t)("community.comments.comment_actions")})))),r.createElement("div",{className:k?"comment_tile--messageIsHidden--e-XiE comment_tile--commentMessage--W-vWb comment_tile--commentMessageText---N-OK text--fontPos13--xW8hS text--_fontBase--QdLsd":"comment_tile--commentMessage--W-vWb comment_tile--commentMessageText---N-OK text--fontPos13--xW8hS text--_fontBase--QdLsd"},r.createElement(Q.HH,{messageMeta:t.message_meta??[],className:"comment_tile--commentMessageText---N-OK text--fontPos13--xW8hS text--_fontBase--QdLsd",showEditedIndicator:!!t.edited_at,commentId:t.id})),s&&r.createElement("div",{className:"comment_tile--replyComposerContainer--Cfzby"},r.createElement(eb,{fallback:null,errorFallback:null,commentType:e.commentType,parentId:t.id,resourceId:e.resourceId,resourceType:e.resourceType,onSuccessCallback:()=>d(!1),onComplete:()=>d(!1)})))),S&&v&&r.createElement(eE,{parentRect:v,comment:t,profileIdToAdminResourceAs:e.profileIdToAdminResourceAs,onEdit:()=>{f(!0)},onDelete:w,hideCopyLink:!!t.parent_id,isThreadParent:I>0,onReply:0===t.reply_count?()=>{d(!0)}:void 0}))}let ex=(0,n.Ng)((e,t)=>{var a,r;let{comments:n}=e.communityHub,l=n.commentsById[t.id],i=t.replyId?n.commentsById[t.replyId]:void 0;if(!l)return{user:e.user||null};let o=n.authorsById[l.author.id],s=n&&n.selectedCommentId===l.id,c=i?n.authorsById[i.author.id]:void 0;return{user:e.user||null,comment:l,creatorReply:i,replyAuthor:c,author:o,userIsResponder:(null==c?void 0:c.id)===(null==(a=e.user)?void 0:a.community_profile_id),userIsAuthor:o.id===(null==(r=e.user)?void 0:r.community_profile_id),selected:s}})(function(e){return r.createElement(r.Fragment,null,r.createElement(eI,{id:e.id,user:e.user,comment:e.comment,author:e.author,selected:e.selected,userIsAuthor:e.userIsAuthor,commentType:e.commentType,isAuthorAcceptedPublisher:e.isAuthorAcceptedPublisher,profileIdToAdminResourceAs:e.profileIdToAdminResourceAs,hideSeparator:e.hideSeparator||!!e.creatorReply,resourceType:e.resourceType,resourceId:e.resourceId}),!!e.replyId&&r.createElement(eI,{id:e.replyId,user:e.user,comment:e.creatorReply,author:e.replyAuthor,selected:e.selected,userIsAuthor:e.userIsResponder,commentType:e.commentType,isAuthorAcceptedPublisher:!0,profileIdToAdminResourceAs:e.profileIdToAdminResourceAs,hideSeparator:e.hideSeparator,isCreatorReply:!!e.replyId,resourceType:e.resourceType,resourceId:e.resourceId}))});function eN(){return r.createElement("svg",{width:"288",height:"200",viewBox:"0 0 288 200",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("rect",{width:"288",height:"200",fill:"var(--color-bg, white)"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M121.5 60.5C147.457 60.5 168.5 81.5426 168.5 107.5C168.5 133.457 147.457 154.5 121.5 154.5C113.522 154.5 106.013 152.514 99.4356 149.01L98.9861 148.77L77.5743 152.339L85.893 138.197L85.2249 137.387C78.5239 129.264 74.5 118.854 74.5 107.5C74.5 81.5426 95.5426 60.5 121.5 60.5ZM171.5 107.5C171.5 79.8858 149.114 57.5 121.5 57.5C93.8858 57.5 71.5 79.8858 71.5 107.5C71.5 119.197 75.5183 129.959 82.2484 138.476L71.7319 156.354L98.4789 151.896C105.371 155.477 113.201 157.5 121.5 157.5C149.114 157.5 171.5 135.114 171.5 107.5Z",fill:"var(--color-icon-secondary, #BBBBBB)"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M196.932 119.342C203.847 110.959 208 100.215 208 88.5C208 61.7142 186.286 40 159.5 40C132.714 40 111 61.7142 111 88.5C111 115.286 132.714 137 159.5 137C167.729 137 175.48 134.95 182.27 131.334L206.347 135.347L196.932 119.342Z",fill:"var(--color-bg, white)"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M153.901 38.8101C155.739 38.6052 157.608 38.5 159.5 38.5C161.392 38.5 163.261 38.6052 165.099 38.8101L164.767 41.7917C163.038 41.599 161.281 41.5 159.5 41.5C157.719 41.5 155.962 41.599 154.233 41.7917L153.901 38.8101ZM169.531 39.5067C173.248 40.2639 176.816 41.4337 180.184 42.9659L178.942 45.6966C175.777 44.2568 172.425 43.1578 168.932 42.4464L169.531 39.5067ZM138.816 42.9659C142.184 41.4337 145.752 40.2639 149.469 39.5067L150.068 42.4464C146.575 43.1578 143.223 44.2568 140.058 45.6966L138.816 42.9659ZM184.181 45.0062C187.446 46.863 190.481 49.0766 193.234 51.5939L191.209 53.8077C188.621 51.4405 185.767 49.3593 182.698 47.6141L184.181 45.0062ZM125.766 51.5939C128.519 49.0766 131.554 46.863 134.819 45.0062L136.302 47.6141C133.233 49.3593 130.379 51.4405 127.791 53.8077L125.766 51.5939ZM196.406 54.7662C198.923 57.5187 201.137 60.5541 202.994 63.8194L200.386 65.3023C198.641 62.2331 196.559 59.3792 194.192 56.7908L196.406 54.7662ZM116.006 63.8194C117.863 60.5541 120.077 57.5187 122.594 54.7662L124.808 56.7908C122.441 59.3792 120.359 62.2331 118.614 65.3023L116.006 63.8194ZM205.034 67.8159C206.566 71.1837 207.736 74.7516 208.493 78.4694L205.554 79.0681C204.842 75.5749 203.743 72.2228 202.303 69.0582L205.034 67.8159ZM110.507 78.4694C111.264 74.7516 112.434 71.1837 113.966 67.8159L116.697 69.0582C115.257 72.2228 114.158 75.5749 113.446 79.0681L110.507 78.4694ZM209.19 82.9007C209.395 84.7394 209.5 86.6077 209.5 88.5C209.5 90.5773 209.373 92.6257 209.127 94.6378L206.149 94.2732C206.381 92.3818 206.5 90.4552 206.5 88.5C206.5 86.719 206.401 84.9616 206.208 83.2331L209.19 82.9007ZM109.5 88.5C109.5 86.6077 109.605 84.7394 109.81 82.9007L112.792 83.2331C112.599 84.9616 112.5 86.719 112.5 88.5C112.5 90.281 112.599 92.0384 112.792 93.7669L109.81 94.0993C109.605 92.2606 109.5 90.3923 109.5 88.5ZM113.966 109.184C112.434 105.816 111.264 102.248 110.507 98.5306L113.446 97.9319C114.158 101.425 115.257 104.777 116.697 107.942L113.966 109.184ZM208.289 99.4872C207.378 103.549 205.973 107.424 204.14 111.045L201.464 109.69C203.186 106.287 204.506 102.647 205.361 98.8307L208.289 99.4872ZM122.594 122.234C120.077 119.481 117.863 116.446 116.006 113.181L118.614 111.698C120.359 114.767 122.441 117.621 124.808 120.209L122.594 122.234ZM198.752 119.476C199.804 118.144 200.79 116.758 201.705 115.321L199.174 113.71C198.136 115.34 197 116.902 195.775 118.387L195.107 119.197L199.002 125.818L201.588 124.297L198.752 119.476ZM134.819 131.994C131.554 130.137 128.519 127.923 125.766 125.406L127.791 123.192C130.379 125.559 133.233 127.641 136.302 129.386L134.819 131.994ZM204.277 128.87L209.268 137.354L201.801 136.11L202.294 133.15L203.426 133.339L201.692 130.391L204.277 128.87ZM182.014 129.77L186.816 130.571L186.323 133.53L182.521 132.896C181.385 133.487 180.224 134.034 179.039 134.538L177.865 131.777C179.128 131.241 180.361 130.651 181.564 130.01L182.014 129.77ZM198.361 135.536L189.762 134.103L190.255 131.144L198.854 132.577L198.361 135.536ZM149.469 137.493C145.752 136.736 142.184 135.566 138.816 134.034L140.058 131.303C143.223 132.743 146.575 133.842 150.068 134.554L149.469 137.493ZM175.78 135.789C173.059 136.726 170.231 137.434 167.32 137.892L166.855 134.928C169.59 134.498 172.247 133.833 174.804 132.953L175.78 135.789ZM159.5 138.5C157.608 138.5 155.739 138.395 153.901 138.19L154.233 135.208C155.962 135.401 157.719 135.5 159.5 135.5C160.881 135.5 162.248 135.44 163.598 135.324L163.856 138.313C162.42 138.437 160.967 138.5 159.5 138.5Z",fill:"var(--color-icon-secondary, #BBBBBB)"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M158 98H161L161 90H169V87L161 87L161 79H158L158 87L150 87V90H158L158 98Z",fill:"var(--color-icon-secondary, #BBBBBB)"}))}ex.displayName="CommentTile";let eC="comments_list--emptyStateWrapper--utBdd",eS="comments_list--emptyStateHeader--72NAJ text--fontPos13--xW8hS text--_fontBase--QdLsd";function ek(e){var t;let a=(0,n.d4)(e=>e.communityHub.comments.commentsById),s=(0,n.d4)(e=>e.communityHub.comments.showResolved),c=(0,n.d4)(e=>(0,l.cs)(e.authedActiveCommunityProfile)),{parentCommentIds:d,replies:m}=function(e,t){let a=[],r={};return e.forEach(e=>{if(t[e]){let{parent_id:n}=t[e];n&&t[n]?r[n]=e:n||a.push(e)}}),{parentCommentIds:a,replies:r}}(e.comments,a),u=s?d:d.reduce((e,t)=>{var r;return(null==(r=a[t])?void 0:r.resolved_at)||e.push(t),e},[]),_=(0,v.Vm)(e.resource);if(0===u.length&&!e.hasSelectedComment&&e.resource.comments_setting!==o.Ni.ALL_DISABLED)return r.createElement(eA,{isTeamOrOrgProfileActive:c});let p=[];if((_===I.vt.PLUGIN||_===I.vt.WIDGET)&&(null==(t=e.resource)?void 0:t.versions)&&e.resource.current_plugin_version_id){let t=e.resource,n=t.versions[t.current_plugin_version_id].id;u.forEach(l=>{let o=a[l],s=null==o?void 0:o.resource_version_id,c=t.versions[s];if(s&&c){if(s!==n){let e=new Date(c.created_at).toLocaleDateString(navigator.language,{year:"numeric",month:"long",day:"numeric"}),t=s===n&&c?void 0:`Version ${c.version} \xb7 ${e}`,a=p.pop();a&&p.push(r.cloneElement(a,{hideSeparator:!0})),p.push(r.createElement("div",{key:`divider-${s}`,className:"comments_list--versionDivider--NHliU text--fontPos11--2LvXf text--_fontBase--QdLsd"},t)),n=s}p.push(r.createElement(ex,{key:l,id:l,replyId:m[l],isAuthorAcceptedPublisher:(0,i.PR)(o,e.resource),commentType:e.commentType,resourceType:_,resourceId:e.resource.id,profileIdToAdminResourceAs:e.profileIdToAdminResourceAs}))}})}else p=u.map(t=>{let n=a[t];return r.createElement(ex,{key:t,id:t,replyId:m[t],isAuthorAcceptedPublisher:(0,i.PR)(n,e.resource),commentType:e.commentType,resourceType:_,resourceId:e.resource.id,profileIdToAdminResourceAs:e.profileIdToAdminResourceAs})});return r.createElement(r.Fragment,null,p)}function eA({isTeamOrOrgProfileActive:e}){return e?r.createElement("div",{className:eC},r.createElement(eN,null),r.createElement("div",{className:eS},(0,g.tx)("community.comments.to_comment_switch_to_your_personal_profile"))):r.createElement("div",{className:eC},r.createElement(eN,null),r.createElement("div",{className:eS},(0,g.tx)("community.comments.your_kudos_and_feedback_are_welcome")),r.createElement("div",{className:"comments_list--emptyStateSubheader--L5hsL text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,g.tx)("community.comments.share_your_thoughts_using_the_comment_box_above"),r.createElement("br",null)))}var eL=a(975350);function eR(e){let t=(0,n.wA)(),a=e.className?e.className:e.isShowing?"new_comments_toast--newCommentsToast--LpAPa text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L":"new_comments_toast--newCommentsToastHidden--QFXlr new_comments_toast--newCommentsToast--LpAPa text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L";return r.createElement("div",{className:a},r.createElement("div",{className:"new_comments_toast--text--yQ1Nw"},(0,g.tx)("community.comments.new_comments")),r.createElement("div",{className:"new_comments_toast--cta---bSfb",onClick:a=>{a.stopPropagation(),t(eL.UU()),t(b._F()),e.onRefresh()}},(0,g.tx)("community.comments.refresh")))}let eD=!1;function eF(e){var t;let a;let i=(0,n.wA)(),o=(0,s.iZ)(),[m,u]=(0,r.useState)(!1),[N,C]=(0,r.useState)(!1),S=(0,h.o5)(),[k,A]=(0,r.useState)(!0),R=r.useRef(null),D=(0,n.d4)(e=>"communityHub"===e.selectedView.view&&"hubFile"===e.selectedView.subView&&e.selectedView.fullscreenState&&(0,T.t0)(e.selectedView.fullscreenState)),P=(0,n.d4)(e=>e.communityHub.comments.activeFeedType),M=(0,n.d4)(e=>e.communityHub.comments.newCommentsQueue),O=(0,n.d4)(e=>e.communityHub.comments.feeds),{feed:B,pagination:U}=r.useMemo(()=>O[P]||{feed:[]},[O,P]),V=(0,n.d4)(e=>e.communityHub.comments.selectedCommentId),H=(0,n.d4)(e=>e.selectedView.commentThreadId),W=(0,n.d4)(e=>{var t;return!!(null==(t=e.user)?void 0:t.community_profile_id)}),j=V||H,$=P===I.Qv.ALL?e.numCommentsForResource:null==(t=O[P])?void 0:t.totalNumberOfComments,{resource:G}=e,z=(0,v.Vm)(G),Y=M.length>0,K=()=>{if(eD)return;eD=!0,u(!0);let e={resourceId:G.id,resourceType:z,selectedCommentId:j,pagination:U,activeFeedType:P,numCommentsForResource:$,pageSizeOverride:S()?w.zn:w.VK};i(b.p4({...e,onSuccess:e=>{i(b.vr(e)),eD=!1,u(!1)},onError:()=>{eD=!1,u(!1)}}))},Q=void 0===U&&(0,l.e5)(G);r.useEffect(()=>{Q&&K()},[P,Q]);let q=!!U,X=null==U?void 0:U.selected_comment;r.useEffect(()=>{k&&X&&(R.current&&window.scroll({left:0,top:R.current.offsetTop-36,behavior:"smooth"}),A(!1))},[k,X]),r.useEffect(()=>{i(b.cO())},[G.id]);let J=()=>q&&(0,d.u9)({pagination:U})&&K(),Z=B.filter(e=>{var t;return e!==(null==(t=null==U?void 0:U.selected_comment)?void 0:t.id)});(null==U?void 0:U.selected_comment)&&Z.unshift(null==U?void 0:U.selected_comment.id);let ee=(0,E.J)();return(0,l.e5)(G)?r.createElement(r.Fragment,null,r.createElement("div",{className:"comments_view--commentsViewWrapper--SURB9",ref:R},!e.commentingIsRestricted&&r.createElement(eh,{fallback:null,errorFallback:null,commentType:e.commentType,resourceType:z,resourceId:G.id,onSuccessCallback:e=>{(0,c.sx)(x.d,{commentId:null==e?void 0:e.id,message:null==e?void 0:e.message,userId:null==o?void 0:o.id,profileId:null==o?void 0:o.community_profile_id,resourceType:z,resourceId:G.id,searchSessionId:ee})}}),r.createElement("div",{className:"comments_view--commentsListHeader--3uRw8 text--fontPos11--2LvXf text--_fontBase--QdLsd"},r.createElement("div",{className:"comments_view--numCommentsForResource--J0QKb"},(a=$||0,(0,g.t)("community.comments.pluralize_comments",{numComments:a}))),!D&&!e.commentingIsRestricted&&r.createElement(F,{includeShowResolved:!1,isLoggedIn:W})),r.createElement(f.a,{onIntersectionChange:e=>{N||(C(!0),(0,c.sx)("Community Comments Section Impressed",{resourceType:z,resourceId:G.id}))}}),r.createElement(y.hJ,null,r.createElement(p.x,{isLoading:void 0===U,className:L},()=>r.createElement(_,{onScrollToBottom:J,showLoader:m&&(0,d.u9)({pagination:U})},r.createElement(ek,{comments:Z,commentType:e.commentType,resource:G,profileIdToAdminResourceAs:e.profileIdToAdminResourceAs,hasSelectedComment:!!(null==U?void 0:U.selected_comment)})))),r.createElement(y.XY,null,r.createElement(p.x,{isLoading:void 0===U,className:L},()=>r.createElement(r.Fragment,null,r.createElement(ek,{comments:Z,commentType:e.commentType,resource:G,profileIdToAdminResourceAs:e.profileIdToAdminResourceAs}),(0,d.u9)({pagination:U})&&r.createElement("div",{className:"comments_view--mobileLoadMore--tqxIs text--fontPos13--xW8hS text--_fontBase--QdLsd",onClick:J},(0,g.tx)("community.comments.load_more_comments")))))),r.createElement("div",{className:"comments_view--notifications--ZuAh9"},r.createElement(eR,{onRefresh:()=>{var e;let t=null==(e=R.current)?void 0:e.offsetTop;t&&window.scrollY>t&&window.scroll({top:t,left:0,behavior:"smooth"})},isShowing:Y}))):null}function eP({resource:e}){var t;let a=(0,s.iZ)(),c=(0,n.d4)(t=>(0,i.MK)(t,e))>=i.Cw.ADMIN&&((null==(t=(0,l.cV)(e))?void 0:t.id)||(null==a?void 0:a.community_profile_id))||null,d=(0,n.d4)(e=>e.authedActiveCommunityProfile);return r.createElement(eF,{commentType:o.ej.COMMUNITY,resource:e,numCommentsForResource:e.comment_count,profileIdToAdminResourceAs:c,commentingIsRestricted:!(0,l.LI)(a,e)||(0,l.cs)(d)})}},895587:(e,t,a)=>{"use strict";a.d(t,{s:()=>f});var r=a(411855),n=a(188507),l=a(939863),i=a(227020),o=a(351226),s=a(837324),c=a(662275),d=a(988022),m=a(697551),u=a(860178),_=a(555328),p=a(498606);function f({resource:e,viewContext:t}){let a=(0,n.wA)(),f=(0,u.iZ)(),g=Object.values((0,n.d4)(e=>(0,m.Tm)(e))).filter(t=>(0,_.I0)(e)&&t.plugins_whitelist_enforced||(0,_.xQ)(e)&&t.widgets_whitelist_enforced),E=(e,t)=>{a((0,c.to)({type:(0,i.W)(),data:{extensionId:e.id,orgId:t,extensionType:(0,_.I0)(e)?"plugin":"widget",isAllowed:!1,source:"community"}}))};return r.createElement("button",{className:"approve_button--buttonContainer--lDvpx cta_button--buttonBase--xMT0c text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",onClick:()=>{if((0,d.Cu)({viewContext:t,resourceId:e.id,resourceType:(0,s.Vm)(e),allowlistOrgs:g.length},"approve-button-clicked"),1===g.length){E(e,g[0].id);return}if(!f)return;let r=g.map(e=>({orgId:e.id,workspaceName:e.name,user:f,userId:(null==f?void 0:f.id)||""}));a((0,c.to)({type:o._,data:{payload:{extension:e,workspaces:r,onSelectWorkspace:t=>{E(e,t.orgId)},mode:"manage_allowlist"}}}))},"data-testid":"approve-button","data-onboarding-key":"approve-button","data-tooltip-type":p.Ib.TEXT},(0,l.tx)("community.plugins.approve_ellipsis"))}},443474:(e,t,a)=>{"use strict";a.d(t,{b:()=>s});var r=a(411855),n=a(939863);let l=r.createElement("span",null,r.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("rect",{width:"16",height:"16",fill:"var(--color-background)"}),r.createElement("path",{d:"M1.8843 3.04791L2.23141 3.40779L1.8843 3.04791ZM7.12543 3.04791L7.47254 2.68802L7.12543 3.04791ZM1.8843 8.10293L2.23141 7.74304L2.23141 7.74304L1.8843 8.10293ZM2.75826 8.94585L3.10528 9.30582L3.47859 8.94594L3.10536 8.58597L2.75826 8.94585ZM2.75823 8.94588L2.41121 8.58591L2.0379 8.9458L2.41112 9.30577L2.75823 8.94588ZM7.99935 14.0009L7.65225 14.3608L7.99935 14.6956L8.34646 14.3608L7.99935 14.0009ZM14.114 8.10338L13.7669 7.74349L13.7669 7.74349L14.114 8.10338ZM14.114 3.04836L14.4611 2.68847L14.4611 2.68847L14.114 3.04836ZM8.87288 3.04836L8.52577 2.68847L8.52577 2.68847L8.87288 3.04836ZM7.99939 3.89083L7.65228 4.25072L7.99939 4.5855L8.34649 4.25072L7.99939 3.89083ZM2.23141 3.40779C3.48501 2.19871 5.52472 2.19871 6.77832 3.40779L7.47254 2.68802C5.83154 1.1053 3.17819 1.1053 1.53719 2.68802L2.23141 3.40779ZM2.23141 7.74304C0.987968 6.54376 0.987968 4.60708 2.23141 3.40779L1.5372 2.68802C-0.113961 4.28055 -0.113961 6.87029 1.5372 8.46281L2.23141 7.74304ZM3.10536 8.58597L2.23141 7.74304L1.5372 8.46281L2.41115 9.30574L3.10536 8.58597ZM3.10525 9.30585L3.10528 9.30582L2.41124 8.58588L2.41121 8.58591L3.10525 9.30585ZM8.34646 13.641L3.10533 8.586L2.41112 9.30577L7.65225 14.3608L8.34646 13.641ZM13.7669 7.74349L7.65225 13.641L8.34646 14.3608L14.4611 8.46326L13.7669 7.74349ZM13.7669 3.40824C15.0103 4.60753 15.0103 6.54421 13.7669 7.74349L14.4611 8.46326C16.1123 6.87074 16.1123 4.281 14.4611 2.68847L13.7669 3.40824ZM9.21998 3.40824C10.4736 2.19916 12.5133 2.19916 13.7669 3.40824L14.4611 2.68847C12.8201 1.10575 10.1668 1.10575 8.52577 2.68847L9.21998 3.40824ZM8.34649 4.25072L9.21998 3.40824L8.52577 2.68847L7.65228 3.53094L8.34649 4.25072ZM6.77832 3.40779L7.65228 4.25072L8.34649 3.53094L7.47254 2.68802L6.77832 3.40779Z",fill:"var(--color-icon)"}))),i=r.createElement("span",null,r.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("rect",{width:"16",height:"16",fill:"var(--color-background)"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.12543 3.04791C5.67813 1.652 3.3316 1.652 1.8843 3.04791C0.437004 4.44381 0.437004 6.70702 1.8843 8.10293L2.75826 8.94585L2.75823 8.94588L7.99935 14.0009L14.114 8.10338C15.5613 6.70747 15.5613 4.44426 14.114 3.04836C12.6667 1.65245 10.3202 1.65245 8.87288 3.04836L7.99939 3.89083L7.12543 3.04791Z",fill:"#F24822"}),r.createElement("path",{d:"M1.8843 3.04791L2.23141 3.40779L1.8843 3.04791ZM7.12543 3.04791L7.47254 2.68802L7.12543 3.04791ZM1.8843 8.10293L2.23141 7.74304L2.23141 7.74304L1.8843 8.10293ZM2.75826 8.94585L3.10528 9.30582L3.47859 8.94594L3.10536 8.58597L2.75826 8.94585ZM2.75823 8.94588L2.41121 8.58591L2.0379 8.9458L2.41112 9.30577L2.75823 8.94588ZM7.99935 14.0009L7.65225 14.3608L7.99935 14.6956L8.34646 14.3608L7.99935 14.0009ZM14.114 8.10338L13.7669 7.74349L13.7669 7.74349L14.114 8.10338ZM14.114 3.04836L14.4611 2.68847L14.4611 2.68847L14.114 3.04836ZM8.87288 3.04836L8.52577 2.68847L8.52577 2.68847L8.87288 3.04836ZM7.99939 3.89083L7.65228 4.25072L7.99939 4.5855L8.34649 4.25072L7.99939 3.89083ZM2.23141 3.40779C3.48501 2.19871 5.52472 2.19871 6.77832 3.40779L7.47254 2.68802C5.83154 1.1053 3.17819 1.1053 1.53719 2.68802L2.23141 3.40779ZM2.23141 7.74304C0.987968 6.54376 0.987968 4.60708 2.23141 3.40779L1.5372 2.68802C-0.113961 4.28055 -0.113961 6.87029 1.5372 8.46281L2.23141 7.74304ZM3.10536 8.58597L2.23141 7.74304L1.5372 8.46281L2.41115 9.30574L3.10536 8.58597ZM3.10525 9.30585L3.10528 9.30582L2.41124 8.58588L2.41121 8.58591L3.10525 9.30585ZM8.34646 13.641L3.10533 8.586L2.41112 9.30577L7.65225 14.3608L8.34646 13.641ZM13.7669 7.74349L7.65225 13.641L8.34646 14.3608L14.4611 8.46326L13.7669 7.74349ZM13.7669 3.40824C15.0103 4.60753 15.0103 6.54421 13.7669 7.74349L14.4611 8.46326C16.1123 6.87074 16.1123 4.281 14.4611 2.68847L13.7669 3.40824ZM9.21998 3.40824C10.4736 2.19916 12.5133 2.19916 13.7669 3.40824L14.4611 2.68847C12.8201 1.10575 10.1668 1.10575 8.52577 2.68847L9.21998 3.40824ZM8.34649 4.25072L9.21998 3.40824L8.52577 2.68847L7.65228 3.53094L8.34649 4.25072ZM6.77832 3.40779L7.65228 4.25072L8.34649 3.53094L7.47254 2.68802L6.77832 3.40779Z",fill:"#F24822"})));var o=a(498606);function s(e){let t=r.useRef(null);return e.disabled?r.createElement("button",{className:"base_like_button--buttonContainerDisabled--sOWAD base_like_button--buttonContainer--vfBIa cta_button--buttonBase--xMT0c text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",disabled:e.disabled},r.createElement("div",{className:"base_like_button--likeIconDisabled--dfrWS base_like_button--likeIcon--70nFu text--fontPos18--rYXJb text--_fontBase--QdLsd"},l)):r.createElement("button",{className:"base_like_button--buttonContainer--vfBIa cta_button--buttonBase--xMT0c text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",onClick:e.onClick,"data-tooltip":(0,n.t)("community.like"),"data-tooltip-type":o.Ib.TEXT,"data-testid":"like-button"},r.createElement("div",{className:"base_like_button--likeIcon--70nFu text--fontPos18--rYXJb text--_fontBase--QdLsd",ref:t},e.isResourceLiked?i:l))}},342646:(e,t,a)=>{"use strict";a.d(t,{G:()=>p});var r=a(411855),n=a(188507),l=a(654923),i=a(466636),o=a(225266),s=a(782501),c=a(860178),d=a(820642),m=a(215822),u=a(555328),_=a(624618);function p({resource:e}){var t;let a=(0,n.wA)(),p=(0,n.d4)(e=>e.authedActiveCommunityProfile),f=(0,n.d4)(t=>(0,s.MK)(t,e)),g=s.Gl.includes(f)&&((null==(t=e.community_publishers)?void 0:t.accepted)||[]).length>1&&(null==p?void 0:p.primary_user_id),E=r.useCallback(()=>{(0,u.U)(e)?a((0,o.bb)({hub_file_id:e.id})):(0,u.xQ)(e)?a((0,o.bb)({widget_id:e.id})):a((0,o.bb)({plugin_id:e.id}))},[a,e]),v=(0,u.m3)(e),h=(0,l.I)(e),y=(0,c.iZ)(),b=(0,u.U)(e)?(0,d.a6)(e):(0,m.uF)(e);return r.createElement(r.Fragment,null,g&&r.createElement(_.d,{onClick:E,className:"metadata_additional_actions_logged_in--link--Hgvm- text--fontPos13--xW8hS text--_fontBase--QdLsd"}),v&&(0,i.QQ)(h)&&r.createElement(_.NY,{resource:e,payment:h}),v&&y&&(0,i.QQ)(h)&&(0,i.C)(h)&&r.createElement(_.EV,{user:y,name:b.name,monetizedResource:e.monetized_resource_metadata}))}},258520:(e,t,a)=>{"use strict";a.d(t,{U:()=>$});var r=a(411855),n=a(188507),l=a(776250),i=a(22332),o=a(966712),s=a(939863),c=a(611886),d=a(320063),m=a(860601),u=a(67833),_=a(574176),p=a(762638),f=a(809840),g=a(351226),E=a(662275),v=a(151283),h=a(860178),y=a(237870),b=a(488578),w=a(215460);let T="use_preset_options_modal--presetOptionsModal__optionText--BPEmi",I="use_preset_options_modal--presetOptionsModal__chevron--dF5v3";var x=a(816679),N=a(250167);let C=(0,y.Ju)(function({hubFile:e}){let t=(0,n.wA)(),a=(0,h.iZ)();(0,d.h)(()=>{l.az.trackDefinedEvent("preset_libraries.preset_options_modal_displayed",{userId:null==a?void 0:a.id,hubFileId:e.id,partnerType:(0,v.X)(e.id)})});let i=r.useCallback(()=>{t(E.Ce())},[t]),o=r.useCallback(()=>{i(),l.az.trackDefinedEvent("preset_libraries.preset_options_modal_option_clicked",{userId:null==a?void 0:a.id,hubFileId:e.id,partnerType:(0,v.X)(e.id),option:"cancel"})},[i,e,a]),y=r.useCallback(()=>{let r=c.Q4(e=>{t((0,E.to)({type:g._,data:{payload:e}}))});i(),t(r(e)),l.az.trackDefinedEvent("preset_libraries.preset_options_modal_option_clicked",{userId:null==a?void 0:a.id,hubFileId:e.id,partnerType:(0,v.X)(e.id),option:"show_in_figma"})},[t,i,e,a]),C=r.useCallback(()=>{let r=c.gE(e=>{t((0,E.to)({type:g._,data:{payload:e}}))});i(),t(r(e)),l.az.trackDefinedEvent("preset_libraries.preset_options_modal_option_clicked",{userId:null==a?void 0:a.id,hubFileId:e.id,partnerType:(0,v.X)(e.id),option:"make_a_copy"})},[t,i,e,a]);return r.createElement(b.Nb,{hide:m.lQ,disableClickOutsideToHide:!0,className:"use_preset_options_modal--presetOptionsModal--MPCAv"},r.createElement("div",{className:"use_preset_options_modal--presetOptionsModal__header--7Ul9l"},r.createElement(f.E,{fontWeight:"medium",fontSize:20},(0,s.tx)("community.preset_modal.header"))),r.createElement("div",{className:"use_preset_options_modal--presetOptionsModal__description--GD8wZ"},r.createElement(f.E,{fontSize:13},(0,s.tx)("community.preset_modal.description"))),r.createElement("div",{className:w.sw},r.createElement("button",{className:w.tW,onClick:y},r.createElement(u.oS,{type:u.y1.DESIGN,size:u.LE.MEDIUM,className:p.cx.pl12.pr12.$}),r.createElement("div",{className:T},r.createElement(f.E,{fontSize:13},(0,s.tx)("community.preset_modal.show_in_figma"))),r.createElement(_.B,{className:I,svg:x.A})),r.createElement("button",{className:w.tW,onClick:C},r.createElement(_.B,{svg:N.A,className:"use_preset_options_modal--presetOptionsModal__copyIcon--OFXiM"}),r.createElement("div",{className:T},r.createElement(f.E,{fontSize:13},(0,s.tx)("community.preset_modal.make_a_copy"))),r.createElement(_.B,{className:I,svg:x.A}))),r.createElement("button",{className:"use_preset_options_modal--presetOptionsModal__cancel--vne9o text--fontPos13--xW8hS text--_fontBase--QdLsd",onClick:o},(0,s.t)("community.try.pick_workspace.cancel")))},"USE_PRESET_OPTIONS_MODAL_TYPE",y.ZU.YES);var S=a(342),k=a(654923),A=a(466636),L=a(545941),R=a(107877),D=a(101505),F=a(672517),P=a(697551),M=a(941448),O=a(830445),B=a(99506),U=a(137459),V=a(498606),H=a(966537),W=a(964675),j=a(152462);function $({hubFile:e,enableWideButtonForStickyFooter:t}){let a=r.createRef(),d=(0,n.wA)(),m=(0,n.d4)(e=>(0,P.cs)(e.authedActiveCommunityProfile)),u=(0,n.d4)(e=>e.userFlags).apple_eula_accepted,_=(0,k.I)(e),p=(0,M.IE)(e),f=e.viewer_mode===B.y4.WHITEBOARD,v=(0,S.R)(d),h=(0,i.N)(`(max-width: ${R.YW}px)`),y=f?(0,s.tx)("community.duplicate.open_in_figjam"):(0,s.tx)("community.duplicate.open_in_figma"),b=r.useCallback(()=>{let t=()=>{if((0,o.kc)().dse_preset_libraries&&(0,o.kc)().presets_on_cmty&&(0,O.TX)(e.id)&&v&&!h)d((0,E.to)({type:C,data:{hubFile:e}}));else{let t=c.gE(e=>{(0,l.sx)("try_it_out_drafts_picker_menu_opened",p),d((0,E.to)({type:g._,data:{payload:e}}))});d(t(e))}};(0,L.mA)(e)&&!u?d(E.to({type:H.F,data:{hubFileId:e.id,onUseHubFile:t}})):t()},[d,e,p,u,v,h]);if(m||(0,L.lT)(e)){let t;return(0,L.lT)(e)?t=(0,s.t)("community.resource.admin_blocked_resource_banner.this_resource_is_blocked"):m&&(t=(0,s.t)("community.duplicate.to_duplicate_switch_to_your_personal_profile")),r.createElement("div",{"data-tooltip-type":V.Ib.TEXT,"data-tooltip":t,"data-tooltip-show-immediately":!0},r.createElement("div",{className:j.nu},r.createElement("div",{className:j.uD},y)))}return(({buttonText:e,onClick:n})=>r.createElement(F.fu,{name:"Duplicate button",properties:{trackingDescriptor:D.c.HUB_FILE_DUPLICATE_BUTTON,...p}},r.createElement("div",{ref:a},r.createElement(W.H,{buttonText:e,onClick:n,useNoIconStyle:!0,editorType:f?U.LE.FIGJAM:U.LE.FIGMA,enableWideButtonForStickyFooter:t}))))((0,A.QQ)(_)?{buttonText:(0,s.tx)("community.duplicate.open"),onClick:b}:{buttonText:y,onClick:b})}},964675:(e,t,a)=>{"use strict";a.d(t,{H:()=>c});var r=a(411855),n=a(629019),l=a.n(n),i=a(672517),o=a(137459),s=a(152462);function c({buttonText:e,onClick:t,useNoIconStyle:a,editorType:n,enableWideButtonForStickyFooter:c,dataTestId:d}){let m=function(e){switch(e){case o.LE.FIGJAM:return"whiteboard";case o.LE.SLIDES:return"piper";default:return"design"}}(n);return r.createElement(i.$z,{className:l()({[s.tt]:a,[s.Vi]:!a,[s.uw]:c}),onClick:t,dataTestId:d||"community-duplicate-button","data-editor-theme":m},r.createElement("div",{className:s.uD},e))}},226900:(e,t,a)=>{"use strict";a.d(t,{z:()=>n});var r=a(411855);function n(e){return r.createElement("div",{className:"metadata_section--metadataSection--3wssk ellipsis--ellipsis--Tjyfa"},e.title&&r.createElement("div",{className:"metadata_section--subheader--Zk7ID"},e.title),r.createElement("div",{className:"metadata_section--metadataSectionText--7ruPx text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.children))}},10588:(e,t,a)=>{"use strict";a.d(t,{l:()=>b});var r=a(411855),n=a(188507),l=a(776250),i=a(22332),o=a(939863),s=a(611886),c=a(281297),d=a(964675),m=a(351226),u=a(342),_=a(662275),p=a(107877),f=a(101505),g=a(672517),E=a(941448),v=a(137459),h=a(498606),y=a(152462);function b({resource:e,enableWideButtonForStickyFooter:t}){let a=(0,E.IE)(e),b=(0,n.wA)(),w=(0,i.N)(`(max-width: ${p.YW}px)`),T=(0,r.useCallback)(()=>{if(w){b((0,_.to)({type:c.s,data:{dispatch:b,editorType:v.LE.SLIDES}}));return}let t=s.u5(e=>{(0,l.sx)("try_it_out_drafts_picker_menu_opened",a),b((0,_.to)({type:m._,data:{payload:e}}))});b(t(e))},[b,e,a,w]),I=(0,u.v)(b),x=(0,o.tx)("community.use_slide_template"),N=r.createElement("div",{"data-testid":"slide-template-use-button",className:y.nu},r.createElement("div",{className:y.uD},x));if(!I){let e=(0,o.t)("community.use_slide_template.disabled_tooltip");return r.createElement(g.fu,{name:"slide_template_use_button",properties:{trackingDescriptor:f.c.SLIDE_TEMPLATE_USE_BUTTON,...a,isEnabled:!1}},r.createElement("div",{"data-tooltip-type":h.Ib.TEXT,"data-tooltip":e,"data-tooltip-show-immediately":!0},N))}return r.createElement(g.fu,{name:"slide_template_use_button",properties:{trackingDescriptor:f.c.SLIDE_TEMPLATE_USE_BUTTON,...a,isEnabled:!0}},r.createElement(d.H,{buttonText:x,onClick:T,useNoIconStyle:!0,editorType:v.LE.SLIDES,enableWideButtonForStickyFooter:t,dataTestId:"slide-template-use-button"}))}},568424:(e,t,a)=>{"use strict";a.d(t,{_:()=>d,u:()=>m});var r=a(411855),n=a(296210),l=a.n(n),i=a(981952),o=a(939863),s=a(107877);let c="truncated_description_view--blueLink--v3wsX blue_link--blueLink--9rlnd";function d({description:e}){let t=r.useRef(null);return r.useEffect(()=>{var a;if(!t.current)return;let r=document.createElement("div");r.innerHTML=l().sanitize(e);let n=s.Ep.map(e=>`:not(${e})`).join("");for(let e of r.querySelectorAll(n))null==(a=e.parentNode)||a.removeChild(e);t.current.innerHTML=r.innerHTML},[t,e]),r.createElement("div",{ref:t})}function m({description:e,hideDivider:t=!1}){let a=r.useRef(null),[n,l]=r.useState(!1),[m,u]=r.useState(!1),_=(0,i.R)(s.YW)?s.dz:s.Un;return r.useEffect(()=>{a.current&&a.current.getBoundingClientRect().height>_&&(l(!0),u(!0))},[_]),r.createElement(r.Fragment,null,r.createElement("div",{style:n?{maxHeight:`${_}px`}:{},className:n?"truncated_description_view--truncatedDescription--H3ST8 truncated_description_view--description--7qZxm text--fontPos14--OL9Hp text--_fontBase--QdLsd":"truncated_description_view--description--7qZxm text--fontPos14--OL9Hp text--_fontBase--QdLsd",ref:a},r.createElement(d,{description:e}),!n&&m&&r.createElement("div",{className:c,onClick:()=>{l(!0)},role:"button",tabIndex:0},(0,o.tx)("community.detail_view.show_less"))),n&&r.createElement("div",{className:"truncated_description_view--readMoreWrapper--4ruCR text--fontPos14--OL9Hp text--_fontBase--QdLsd"},r.createElement("div",{className:c,onClick:()=>{l(!1)},role:"button",tabIndex:0},(0,o.tx)("community.detail_view.read_more"))),!t&&r.createElement("div",{className:"truncated_description_view--divider--RK37w"}))}},897088:(e,t,a)=>{"use strict";a.d(t,{N:()=>n,b:()=>r});let r=12,n=10},342:(e,t,a)=>{"use strict";a.d(t,{R:()=>f,v:()=>g});var r=a(411855),n=a(966712);if(443==a.j)var l=a(374626);var i=a(586459),o=a(776621),s=a(77604),c=a(298527),d=a(6974),m=a(935308),u=a(860178),_=a(984968);function p(e){let t=(0,n.kc)().ps_benchmark,a=(0,l.md)(d.g),s=(0,u.iZ)();return r.useEffect(()=>{a===i.r.INIT&&t&&(0,m.nm)()(e).catch(e=>{(0,o.x1)("Error loading plans for authed users",e,{reportErrorToSentry:!0})})},[e,t,a]),r.useMemo(()=>{let e=[],r=[];if(!s||!t||a===i.r.LOADING||a===i.r.INIT)return{teams:e,orgs:r};let n=a.plansByUserId[s.id];return null==n||n.map(t=>{if("team"===t.plan_type){let r=a.teams.find(e=>e.id===t.plan_id);r&&e.push(r)}if("org"===t.plan_type){let e=a.orgs.find(e=>e.id===t.plan_id);e&&r.push(e)}}),{teams:e,orgs:r}},[a,s,t])}function f(e){let t=(0,u.iZ)(),a=(0,s.P9)()||null,n=(0,_.ol)(),{teams:l,orgs:i}=p(e);return r.useMemo(()=>!!t&&(l.length||i.length?Object.values(l).some(e=>(0,c.MJ)(null,e))||Object.values(i).some(e=>(0,c.MJ)(e,null)):(0,c.MJ)(a,n)),[t,l,i,a,n])}function g(e){let t=(0,u.iZ)(),a=(0,s.P9)(),{teams:n,orgs:l}=p(e);return r.useMemo(()=>!!t&&(n.length||l.length?n.length>0||l.some(e=>!e.is_slides_disabled):!(null==a?void 0:a.is_slides_disabled)),[t,n,l,a])}},20130:(e,t,a)=>{"use strict";a.d(t,{i:()=>E});var r=a(411855),n=a(188507),l=a(776250),i=a(939863),o=a(662275),s=a(115826),c=a(697551),d=a(611978),m=a(860178),u=a(555328),_=a(368361),p=a(746806),f=a(63666);let g="community_universal_publish_button--publishContextAction--l-h6g action--root--aRLIQ chevron--chevronContainer--0MO2x";function E(){let e=(0,n.wA)(),t="CommunityUniversalPublishButtonTooltipKey",a=(0,m.Pc)(),E=(0,n.d4)(e=>!e.currentUserOrgId||!!(0,c.Tm)(e)[e.currentUserOrgId]),[v,h]=r.useState(!1),y=r.useRef(),b=(0,d._6)();return E?r.createElement("div",{className:g},r.createElement("div",{className:"subView"in b&&("hubFile"===b.subView||"plugin"===b.subView||"widget"===b.subView)?"community_universal_publish_button--publishButton__DARK--TM73r community_universal_publish_button--publishButton--YumhB":"community_universal_publish_button--publishButton--YumhB",role:"button",tabIndex:0,onClick:()=>{(0,l.sx)("community_publish_modal",{user:a.id,step:s.M.OPENED}),e(o.to({type:_.R,data:{source:u.Zm.NAVBAR}}))}},(0,i.tx)("navbar.navbar.publish_button_label"))):r.createElement("div",{className:g,"data-onboarding-key":t,onMouseEnter:()=>{y.current&&clearTimeout(y.current),h(!0)},onMouseLeave:()=>{y.current=setTimeout(()=>h(!1),300)}},r.createElement("div",{className:"community_universal_publish_button--publishButtonDisabled--b7SqN community_universal_publish_button--publishButton--YumhB",role:"button",tabIndex:0},(0,i.tx)("navbar.navbar.publish_button_label")),v&&r.createElement(f.NJ,{targetKey:t,width:264,className:"community_universal_publish_button--disabledPublishButtonTooltip--uZ-YL pointer_modal--pointerModal--wrpFz text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",shouldCenterArrow:p.EL.FALLBACK,backgroundColor:"var(--color-bg-tooltip, #000)"},r.createElement("div",null,(0,i.tx)("navbar.navbar.disabled_publish_button_label"))))}},952540:(e,t,a)=>{"use strict";a.d(t,{j:()=>m});var r=a(776250),n=a(517333),l=a(737947),i=a(27087),o=a(980820),s=a(677664),c=a(320741),d=a(583894);let m=(0,o.nF)(async(e,t,{loadingKey:a})=>{var o;let m=t.user.stripe_account_status===d.P5.STARTED_ONBOARDING?"stripe_onboarding_continue":"stripe_onboarding_start";(0,r.sx)(m,{userId:t.user.id,entrypoint:t.selectedView.subView});try{let r=i.Ay.post("/api/community/seller/onboard",{accepted_seller_tos:!0,is_desktop:!!n.eD,first_name:t.firstName,last_name:t.lastName,address:t.address,vat_id:t.vatId});(0,c.N)(r,e,a);let d=await r;if(!(null==(o=null==d?void 0:d.data)?void 0:o.meta)){t.callback(!1);return}let m=d.data.meta;n.eD?e.dispatch((0,s.RK)({rawInput:m})):l.Ay.unsafeRedirect(m),setTimeout(()=>{t.callback(!0)},1e3)}catch(e){t.callback(!1)}})},657544:(e,t,a)=>{"use strict";a.d(t,{J:()=>r,o:()=>n});let r="https://play.google.com/store/apps/details?id=com.figma.mirror",n="https://apps.apple.com/us/app/figma-mirror/id1152747299#"},843309:(e,t,a)=>{"use strict";a.d(t,{wn:()=>A,Ix:()=>S,dl:()=>L,Op:()=>k});var r=a(411855),n=a(776250),l=a(157663),i=a(966712),o=a(776621),s=a(304783),c=a(27087),d=a(939863),m=a(622139);function u({defaultCountry:e,initialAddress:t}={}){let[a,n]=(0,r.useState)({...(0,m.EB)(e),...t??{}}),l=async()=>{try{await c.Ay.post("/api/validate_address",{address:a})}catch(e){return(0,d.Jv)(e)||e.message}return null};return{address:a,updateAddress:e=>{n(t=>({...t,...e}))},trimAddress:()=>{let e;for(e in a)a[e]=a[e].trim()},validateAddress:l}}var _=a(195971),p=a(820113),f=a(452353);let g={API_CONNECTION_ERROR:"api_connection_error",API_ERROR:"api_error",AUTHENTICATION_ERROR:"authentication_error",CARD_ERROR:"card_error",INVALID_REQUEST_ERROR:"invalid_request_error",RATE_LIMIT_ERROR:"rate_limit_error",VALIDATION_ERROR:"validation_error"},E=Object.values(g);function v(e){return!!e&&"object"==typeof e&&E.includes(e.type)}function h(e){return v(e)&&e.type===g.CARD_ERROR}function y(e){return v(e)&&e.type===g.VALIDATION_ERROR}var b=(e=>(e.NETSUITE_ITEM_ID_ORG_DESIGN_DEPRECATED="2011",e.NETSUITE_ITEM_ID_ORG_FIGJAM_DEPRECATED="2635",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_DEPRECATED="2636",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_DEPRECATED="2637",e.NETSUITE_ITEM_ID_ORG_DESIGN_JPY_DEPRECATED="3092",e.NETSUITE_ITEM_ID_ORG_FIGJAM_JPY_DEPRECATED="3082",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_JPY_DEPRECATED="3071",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_JPY_DEPRECATED="3075",e.NETSUITE_ITEM_ID_ORG_DESIGN_EUR_DEPRECATED="3090",e.NETSUITE_ITEM_ID_ORG_FIGJAM_EUR_DEPRECATED="3084",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_EUR_DEPRECATED="3073",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_EUR_DEPRECATED="3077",e.NETSUITE_ITEM_ID_ORG_DESIGN_GBP_DEPRECATED="3091",e.NETSUITE_ITEM_ID_ORG_FIGJAM_GBP_DEPRECATED="3083",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_GBP_DEPRECATED="3072",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_GBP_DEPRECATED="3076",e.NETSUITE_ITEM_ID_ORG_DESIGN_CAD_DEPRECATED="3089",e.NETSUITE_ITEM_ID_ORG_FIGJAM_CAD_DEPRECATED="3085",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_CAD_DEPRECATED="3074",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_CAD_DEPRECATED="3078",e.NETSUITE_ITEM_ID_ORG_DESIGN="190686",e.NETSUITE_ITEM_ID_ORG_FIGJAM="190681",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN="190657",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM="190669",e.NETSUITE_ITEM_ID_ORG_DESIGN_JPY="190685",e.NETSUITE_ITEM_ID_ORG_FIGJAM_JPY="190680",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_JPY="190656",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_JPY="190668",e.NETSUITE_ITEM_ID_ORG_DESIGN_EUR="190683",e.NETSUITE_ITEM_ID_ORG_FIGJAM_EUR="190678",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_EUR="190654",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_EUR="190665",e.NETSUITE_ITEM_ID_ORG_DESIGN_GBP="190684",e.NETSUITE_ITEM_ID_ORG_FIGJAM_GBP="190679",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_GBP="190655",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_GBP="190667",e.NETSUITE_ITEM_ID_ORG_DESIGN_CAD="190682",e.NETSUITE_ITEM_ID_ORG_FIGJAM_CAD="190677",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_CAD="190653",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_CAD="190665",e))(b||{}),w=a(831429),T=a(845213),I=a(479296),x=a(168039),N=a(621216);function C(e,t,a){let r=a[e];return r&&!r.match(/rgba|color/)?r:("dark"===t?{colorBg:"#2c2c2c",colorBgSelected:"#4a5878",colorBorder:"#444",colorBorderBrand:"#105cad",colorBorderDanger:"#963323",colorBorderSelected:"#0c8ce9",colorIcon:"#fff",colorIconDanger:"#f24822",colorIconSecondary:"rgba(255, 255, 255, 0.7)",colorText:"#fff",colorTextBrand:"#7cc4f8",colorTextDanger:"#fca397",colorTextDisabled:"rgba(255, 255, 255, 0.4)",colorTextSecondary:"rgba(255, 255, 255, 0.7)"}:{colorBg:"#fff",colorBgSelected:"#e5f4ff",colorBorder:"#e6e6e6",colorBorderBrand:"#bde3ff",colorBorderDanger:"#ffc7c2",colorBorderSelected:"#0d99ff",colorIcon:"#191919",colorIconDanger:"#e03e1a",colorIconSecondary:"rgba(0, 0, 0, 0.5)",colorText:"rgba(0, 0, 0, 0.9)",colorTextBrand:"#007be5",colorTextDanger:"#dc3412",colorTextDisabled:"rgba(0, 0, 0, .3)",colorTextSecondary:"rgba(0, 0, 0, .5)"})[e]}let S="stripe-payment-element",k=(0,I.D)(e=>{let{address:t,updateAddress:a,trimAddress:c,validateAddress:g}=u({defaultCountry:e.defaultCountry,initialAddress:e.initialBillingAddress}),{address:E,updateAddress:b,trimAddress:I}=u({defaultCountry:e.defaultCountry,initialAddress:e.initialShippingAddress}),[k,A]=(0,r.useState)(null),[L,D]=(0,r.useState)(e.initialVatGstId??""),[F,P]=(0,r.useState)(e.initialRegionalVatGstId??""),[M,O]=(0,r.useState)(e.initialCustomerLegalName??""),[B,U]=(0,r.useState)(e.initialNameOnPaymentMethod??""),V=(0,r.useRef)(null),H=(0,i.Ay)().user_data,W=function(){let e=(0,x.yM)(),t=(0,x.DP)();return{loader:"never",fonts:[{family:"Inter",src:"url(https://static.figma.com/webfont/1/Inter-Regular.woff2?v=3.10)",weight:"400"}],appearance:{labels:"floating",variables:{fontFamily:N.sq,fontSizeBase:"13px",borderRadius:"3px",spacingGridRow:"0px",colorBackground:C("colorBg",t,e),colorText:C("colorText",t,e),colorTextPlaceholder:C("colorTextSecondary",t,e),colorDanger:C("colorTextDanger",t,e),colorIcon:C("colorIcon",t,e),colorIconCardError:C("colorIconDanger",t,e),colorIconCardCvcError:C("colorIconDanger",t,e),colorIconTab:C("colorIconSecondary",t,e),colorIconTabHover:C("colorIconSecondary",t,e),colorIconTabSelected:C("colorIconSecondary",t,e)},rules:{".Input":{padding:"0 16px",marginTop:"6px",marginBottom:"10px",lineHeight:"28px",boxShadow:"none",borderColor:C("colorBorder",t,e)},".Input:focus":{border:`1px solid ${C("colorBorderSelected",t,e)}`,boxShadow:`0 0 0 1px ${C("colorBorderSelected",t,e)}`},".Input--invalid, .Input--invalid:focus":{color:C("colorText",t,e),border:`1px solid ${C("colorBorderDanger",t,e)}`,boxShadow:`0 0 0 1px ${C("colorBorderDanger",t,e)}`},".Label":{transition:"none"},".Label--invalid":{color:C("colorTextDanger",t,e)},".Label--floating":{color:C("colorTextSecondary",t,e),opacity:1,margin:"5px 0 2px",fontSize:"9px"},".Label--resting":{color:C("colorTextSecondary",t,e)},".Tab":{padding:"12px",marginBottom:"10px",borderColor:C("colorBorder",t,e),color:C("colorTextDisabled",t,e),boxShadow:"none",transition:"none"},".Tab:hover":{backgroundColor:C("colorBgSelected",t,e),borderColor:C("colorBorderBrand",t,e),color:C("colorTextDisabled",t,e)},".Tab:focus, .Tab:active, .Tab--selected, .Tab--selected:hover,, .Tab--selected:focus, .Tab--selected:active":{backgroundColor:C("colorBgSelected",t,e),border:`1px solid ${C("colorBorderSelected",t,e)}`,boxShadow:`0 0 0 1px ${C("colorBorderSelected",t,e)}`,color:C("colorTextBrand",t,e)},".TabLabel":{paddingTop:"4px",lineHeight:1.5,letterSpacing:"0.055px",fontWeight:500}}}}}(),j=function(e){return{layout:{type:"tabs",defaultCollapsed:!1},fields:{billingDetails:{address:"never"}},terms:{auBecsDebit:"never",bancontact:"never",card:"never",ideal:"never",sepaDebit:"never",sofort:"never",usBankAccount:"never"},wallets:{applePay:"never",googlePay:"never"},defaultValues:{billingDetails:{name:null==e?void 0:e.name,email:null==e?void 0:e.email}}}}(H),[$,G]=(0,r.useState)(void 0);async function z(){let t=await R(e.setupIntentParams);return(0,n.sx)("setup_intent_creation_attempted",Q(),{forwardToDatadog:!0}),t}async function Y(){if(V.current)return V.current;try{let[t,a]=await Promise.all([(0,f.eV)(),z()]),r=t.elements({clientSecret:a.clientSecret,currency:e.currency,...W});return V.current=r,r}catch(e){(0,n.sx)("setup_intent_creation_failed",Q(),{forwardToDatadog:!0}),K({error:e,code:"uninitialized-stripe-elements-error",message:(0,d.t)("payments.errors.error_loading_payment_form")})}}function K({error:e,code:t,message:a,extra:r={}}){A({code:t,message:a}),"currency-validation-error"===t||h(e)||y(e)||(0,o.$D)(s.e.BILLING,Error(`[Billing] ${"string"==typeof e?e:e.code??"StripeError"}`),t=>{let a="object"==typeof e?{stripe_error_details:(0,o.V5)((0,f.pV)(e)),...r}:r;return t.setExtras(a),v(e)&&(t.setTag("stripe_error_type",e.type),h(e)&&t.setLevel("warning")),t})}function Q(){return{...e.customerInfo,paymentFlowSource:e.paymentFlowSource,currency:e.currency}}async function q(){if(e.canSeeBillingAddressExp&&!B)return A({code:"name-on-payment-method-required",message:"Name on payment method is required"}),!0;if(!(0,m.$V)(E)&&!M||M&&(0,m.$V)(E))return A({code:"legal-name-and-shipping-address-required",message:"You must provide both legal name and shipping address"}),!0;if(e.canSeeBillingAddressExp)try{await T.$.validateAddresses({billingAddress:t,shippingAddress:E,teamId:e.customerInfo.teamId,isCheckout:e.isCheckout})}catch(e){return A({code:"address-validation-error",message:(0,d.Jv)(e)||e.message}),!0}else{let e=await g();if(e)return A({code:"address-validation-error",message:e}),!0}if(L&&!await (0,w.V)(L,t.country,()=>{},e=>{A({code:"vat-gst-id-verification-error",message:e})})||F&&!await (0,w.V)(F,t.country,()=>{},e=>{A({code:"vat-gst-id-verification-error",message:e})},t.region))return!0;if(e.canSeeBillingAddressExp){if(e.currency)try{await T.$.validateCurrency({teamId:e.customerInfo.teamId,currency:e.currency,billingAddress:t,shippingAddress:E,isCheckout:e.isCheckout})}catch(a){return K({error:"Currency/Address Mismatch",code:"currency-validation-error",message:(0,d.t)("payments.errors.currency_mismatch_with_country_error",{selected_currency:e.currency.toUpperCase()}),extra:{country:t.country,currency:e.currency}}),!0}else if(e.shouldCheckIpCurrency)try{await T.$.validateCurrency({teamId:e.customerInfo.teamId,currency:(0,p.LN)(),billingAddress:t,shippingAddress:E,isCheckout:e.isCheckout})}catch(a){return K({error:`Currency & IP address mismatch error: ${JSON.stringify(e.customerInfo)}, country: ${t.country}, currency: ${(0,p.LN)()}`,code:"currency-validation-error",message:(0,d.t)("payments.errors.currency_ip_mismatch_error")}),!0}}else{if(e.currency&&!(0,p.bu)(e.currency,t.country))return K({error:"Currency/Address Mismatch",code:"currency-validation-error",message:(0,d.t)("payments.errors.currency_mismatch_error",{selected_currency:e.currency.toUpperCase()}),extra:{country:t.country,currency:e.currency}}),!0;if(e.shouldCheckIpCurrency&&(0,p.ub)()!==t.country)return K({error:`Currency & IP address mismatch error: ${JSON.stringify(e.customerInfo)}, country: ${t.country}, currency: ${(0,p.LN)()}`,code:"currency-validation-error",message:(0,d.t)("payments.errors.currency_ip_mismatch_error")}),!0}return!1}return(0,r.useEffect)(()=>{let t=V.current;t&&t.update({currency:e.currency})},[e.currency]),{createPaymentElement:async(e={})=>{let t=await Y();if(!t){K({error:"Failed to get stripe elements",code:"uninitialized-stripe-elements-error",message:(0,d.t)("payments.errors.error_loading_payment_form")});return}let a=t.getElement("payment")??t.create("payment",j);a.on("ready",t=>{var a,r;let l=null==(a=t.value)?void 0:a.type;(0,n.sx)("Payment Form Loaded",{...Q(),paymentMethod:l,availableCurrencies:(0,p.B9)()}),G(l),null==(r=e.ready)||r.call(e,t)}),a.on("change",t=>{var a,r;let l=null==(a=t.value)?void 0:a.type;(0,n.sx)("Choose Payment Method Type",{...Q(),paymentMethod:l}),G(l),null==(r=e.change)||r.call(e,t)}),a.mount(`#${S}`)},unmountPaymentElement:async()=>{var e;let t=await Y();null==(e=null==t?void 0:t.getElement("payment"))||e.unmount()},savePayment:async()=>{if(A(null),await q())return;if(!V.current){K({error:"Cannot save payment without Stripe elements",code:"confirm-setup-error",message:(0,d.t)("payments.errors.confirm_setup_error")});return}c(),I();let a=()=>document.querySelectorAll("[name*=privateStripeFrame]").length,r=a(),i=setInterval(()=>{let t=!1;if(r!==a()&&((0,n.sx)("Stripe Authentication Modal"),clearInterval(i),t=!0),H){let a=(0,_.lX)({teamId:e.customerInfo.teamId,userId:H.id});if(a){let e={...a,is3DS:t};(0,_.dT)(H.id,e)}}},1e3);(0,n.sx)("Add payment method",{...Q(),paymentMethod:$},{forwardToDatadog:!0});let o=e.canSeeBillingAddressExp&&!(0,m.$V)(E)?{shipping_line1:E.line1||null,shipping_line2:E.line2||null,shipping_country:e.canSeeBillingAddressExp&&E.country||null,shipping_city:E.city||null,shipping_state:E.region||null,shipping_postal_code:E.postal_code||null}:null,s=await (0,f.eV)(),{error:u}=await s.confirmSetup({elements:V.current,confirmParams:{return_url:function({customerInfo:{teamId:e,orgId:t},currency:a,billingPeriod:r,teamName:n,userId:i,isCheckout:o}){let s,c;let d=new URLSearchParams;if(n&&d.append("team_name",n),r&&d.append("billing_period",`${r}`),a&&d.append("selected_currency",a),i&&d.append("fuid",i),o&&d.append("is_checkout",o.toString()),e)s="team",c=e;else if(t)s="org",c=t;else{if(null==e&&void 0!==e)return`https://${window.location.host}/team/validate_payment_method?${d.toString()}`;l.k.error("No valid ID was passed")}return`https://${window.location.host}/${s}/${c}/set_payment_method?${d.toString()}`}({customerInfo:e.customerInfo,currency:e.currency,billingPeriod:e.billingPeriod,teamName:e.teamName,userId:null==H?void 0:H.id,isCheckout:e.isCheckout}),payment_method_data:{billing_details:{name:B,address:{line1:t.line1,line2:t.line2,country:t.country,city:t.city,state:t.region,postal_code:t.postal_code}},metadata:{vat_gst_id:L,regional_vat_gst_id:F||null,...o,customer_legal_name:M||null}}}});clearInterval(i),u&&K({error:u,code:"confirm-setup-error",message:h(u)||y(u)?u.message:(0,d.t)("payments.errors.confirm_setup_error")})},billingAddress:t,updateBillingAddress:a,shippingAddress:E,updateShippingAddress:b,customerLegalName:M,setCustomerLegalName:O,nameOnPaymentMethod:B,setNameOnPaymentMethod:U,vatGstId:L,setVatGstId:D,regionalVatGstId:F,setRegionalVatGstId:P,paymentMethodType:$,error:k}});var A=(e=>(e.PRO_UPGRADE="pro_upgrade",e.PRO_CHANGE_PAYMENT="pro_change_payment",e))(A||{}),L=(e=>(e.ADDRESS_VALIDATION_ERROR="address-validation-error",e.CONFIRM_SETUP_ERROR="confirm-setup-error",e.CURRENCY_VALIDATION_ERROR="currency-validation-error",e.UNINITIALIZED_STRIPE_ELEMENTS_ERROR="uninitialized-stripe-elements-error",e.VAT_GST_ID_VERIFICATION_ERROR="vat-gst-id-verification-error",e.NAME_ON_PAYMENT_METHOD_REQUIRED="name-on-payment-method-required",e.LEGAL_NAME_AND_SHIPPING_ADDRESS_REQUIRED="legal-name-and-shipping-address-required",e))(L||{});async function R({redirect_url:e,error_redirect_url:t,success_message:a,subtotal_estimate:r,currency:n}){let{data:{meta:{client_secret:l}}}=await c.Ay.post("/api/subscriptions-2018-11-08/setup_intent",{redirect_url:e,error_redirect_url:t,subtotal_estimate:r,currency:n,...a?{success_message:a}:{}});return{clientSecret:l}}},941448:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>c,IE:()=>d});var r=a(411855),n=a(749949),l=a(837324),i=a(107877),o=a(555328),s=a(143678);function c(e){let t=(0,o.m3)(e);return(0,o.U)(e)?{name:s.e0.COMMUNITY_HUB_FILE,properties:m(e)}:(0,o.xQ)(e)?{name:s.e0.COMMUNITY_HUB_WIDGET,properties:{widgetId:e.id,isMonetized:t}}:{name:s.e0.COMMUNITY_HUB_PLUGIN,properties:{pluginId:e.id,isMonetized:t}}}function d(e){let t=(0,n.J)();return r.useMemo(()=>({...m(e),searchSessionId:t}),[e,t])}function m(e){return{hubFileId:e.id,viewerMode:e.viewer_mode,editorType:(0,l.JJ)(e.viewer_mode),isMonetized:(0,o.m3)(e),isMobileView:window.innerWidth<=i.YW}}},323667:(e,t,a)=>{"use strict";a.d(t,{E:()=>n,d:()=>r});let r="community_comment_creation",n="community_comment_edit"},936682:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var r=a(27087);let n=new class{async pinFile({resourceType:e,resourceId:t,fileKey:a,description:n,shouldUpdatePermissions:l}){await r.Ay.post(`/api/pinned_files/${e}/${t}`,{file_key:a,description:n,should_update_permissions:l})}async updatePin({pinnedFileId:e,description:t}){await r.Ay.put(`/api/pinned_files/${e}`,{description:t})}async deletePin({pinnedFileId:e}){await r.Ay.del(`/api/pinned_files/${e}`)}}},840083:(e,t,a)=>{"use strict";a.d(t,{G:()=>_,Q:()=>u});var r=a(411855),n=a(629019),l=a.n(n),i=a(966712),o=a(374626),s=a(192437),c=a(259927),d=a(977230),m=a(726732),u=(e=>(e.FILE_BROWSER="file_browser",e))(u||{});function _({entryPoint:e}){return r.createElement(s.tH,{boundaryKey:"figment-debugger",fallback:r.createElement("div",null)},r.createElement(p,{entryPoint:e}))}function p({entryPoint:e}){let[t,a]=(0,o.fp)(d.eE);return(0,r.useEffect)(()=>{a(!!(0,m.wh)())},[]),t&&(0,i.kc)().figment_debugger?r.createElement("div",{className:l()("file_browser"===e?"figment_debugger--fileBrowserContainer--KNMPr figment_debugger--container--4qsMx":"figment_debugger--container--4qsMx",c.s4,c.Dm)},r.createElement(f,null)):null}function f(){let[e,t]=(0,o.fp)(d.a4),[a,n]=(0,r.useState)([]),l=(0,r.useRef)(null),i=l.current&&l.current.value.length>0,s=i?a:e;return r.createElement("div",{className:"figment_debugger--mainWrapper--Tty8t",tabIndex:0,"data-fullscreen-intercept":!0},r.createElement(g,null,r.createElement("input",{ref:l,placeholder:"\u{1F50E} Event name",className:"figment_debugger--searchBar--uECKp",onInput:t=>{let a=t.target.value.toLowerCase();a.length<3&&n([]),n(e.filter(e=>e.requestJson.event.toLowerCase().includes(a)))}})),r.createElement(g,null,r.createElement("button",{onClick:()=>{t("clear")}},"[clear]")),i&&r.createElement(g,null,"Showing "+s.length+" of "+e.length+" most recent events"),s.map(e=>r.createElement(E,{key:e.requestJson.figment_debugger_uuid,req:e})))}function g(e){return r.createElement("div",{className:"figment_debugger--sectionWrapper--Zr0-r","data-fullscreen-intercept":!0},e.children)}function E({req:e}){let[t,a]=(0,r.useState)(!1),[n,l]=(0,r.useState)(!1),i=e.requestJson,o=(0,r.useMemo)(()=>t&&null!=i.properties?Object.entries(i.properties).map(([e,t])=>r.createElement("div",{key:e},e,": ",JSON.stringify(t))):[],[i,t]);return r.createElement(r.Fragment,null,r.createElement("div",{className:"figment_debugger--logrow--dxWpW",tabIndex:0,role:"button",onClick:()=>{a(!t),l(!1)},"data-fullscreen-intercept":!0},r.createElement("span",null,t?"\uFF0D":"\uFF0B"),"\xa0",r.createElement("span",null,e.networkState===d.tM.SUCCESS?"\u{1F49A}":e.networkState===d.tM.FAILURE?"\u{1F494}":"\u{1F9E1}"),"\xa0",r.createElement("span",{className:"figment_debugger--timestamp--BaHtN"},i.sentAt.slice(11,16)),"\xa0",i.event),t&&r.createElement("div",{className:"figment_debugger--propertiesWrapper--hZGnc"},r.createElement("div",{className:"figment_debugger--propertiesButtonsRow--ZL1rH"},r.createElement("button",{onClick:()=>{navigator.clipboard.writeText(JSON.stringify(e.requestJson.properties)),l(!0)}},"[",n?"copied":"copy","]")),o))}},688734:(e,t,a)=>{"use strict";a.d(t,{H:()=>c});var r=a(411855),n=a(946689),l=a(939863),i=a(237870),o=a(488578),s=a(596049);let c=(0,i.Ju)(function(e){return r.createElement(o.Rw,{confirmationTitle:e.confirmationTitle,confirmText:e.confirmButtonText,onConfirm:e.onBlock,destructive:!0},r.createElement("div",null,r.createElement("p",{className:s._q},(0,l.tx)("community.comments.this_will_remove_their_comments_from_all_your_community_files_and_plugins_it_also_prevents_them_from_leaving_comments_on_your_resources_or_mentioning_you_in_the_future")),r.createElement("p",{className:s._q},(0,l.tx)("community.comments.link_about_managing_restricted_commenters",{link:r.createElement(n.CY,{href:"https://help.figma.com/hc/articles/1500002628062",target:"_blank",trusted:!0},(0,l.tx)("community.comments.learn_more"))}))))},"CommentConfirmBlockModal")},354438:(e,t,a)=>{"use strict";a.d(t,{H:()=>_});var r=a(411855),n=a(188507);a(966712);var l=a(946689),i=a(574176),o=a(939863),s=a(662275),c=a(265355),d=a(727475),m=a(514931);class u extends r.Component{constructor(){super(...arguments),this.getBannerText=()=>{var e,t,a,r,n;let l={strongText:"",ctaPreText:""},i=(0,o.t)("community.banner.a_space_for_figma_users_to_share_things_they_create"),s=(0,o.t)("community.banner.community_is_a_space_for_figma_users_to_share_things_they_create");return l={strongText:(0,o.t)("community.banner.this_is_the_figma_community"),ctaPreText:i},this.props.profile?((null==(e=this.props.user)?void 0:e.community_profile_handle)?this.props.profile.id===(null==(t=this.props.user)?void 0:t.community_profile_id)?l.strongText=(0,o.t)("community.banner.this_is_your_figma_community_profile"):(l.strongText="",l.ctaPreText=""):l.strongText=(0,o.t)("community.banner.this_is_a_figma_community_profile"),l.ctaPreText=s):this.props.selectedView&&"communityHub"===this.props.selectedView.view&&("hubFile"===this.props.selectedView.subView?(l.strongText=(0,o.t)("community.banner.this_is_a_figma_community_file"),l.ctaPreText=s):"plugin"===this.props.selectedView.subView?(l.strongText=(0,o.t)("community.banner.this_is_a_figma_community_plugin"),l.ctaPreText=s):"widget"===this.props.selectedView.subView&&(l.strongText=(0,o.t)("community.banner.this_is_a_figma_community_widget"),l.ctaPreText=s)),this.props.user?(this.props.user.community_profile_handle?this.props.selectedView&&"communityHub"===this.props.selectedView.view&&(null==(a=this.props.selectedView)?void 0:a.subView)==="plugin"&&(l.showPluginDocsCta=!0):l.showProfileCta=!0,(null==(r=this.props.selectedView)?void 0:r.view)==="communityHub"&&(null==(n=this.props.selectedView)?void 0:n.subView)==="landing"||(l.ctaPreText="")):l.showAccountCta=!0,l},this.onProfileCreateClick=e=>{e.stopPropagation(),e.preventDefault(),this.props.user&&this.props.dispatch(s.to({type:c.S3,data:{userId:this.props.user.id}}))}}render(){let{strongText:e,ctaPreText:t,showPluginDocsCta:a,showProfileCta:n,showAccountCta:s}=this.getBannerText();return e||t||a||n||s?r.createElement("div",{className:this.props.className||""},r.createElement("div",{className:d.cI},r.createElement("div",{className:d.zc},r.createElement(i.B,{svg:m.A,className:d.q3})),r.createElement("span",null,r.createElement("span",{className:d.bv},e," "),r.createElement("span",null,t," "),n&&r.createElement(r.Fragment,null,(0,o.tx)("community.banner.to_follow_creators_and_like_resources",{link:r.createElement(l.N_,{onClick:this.onProfileCreateClick,className:d.nf,trusted:!0},(0,o.t)("community.banner.create_your_own_profile"),"\xa0\u2192"," ")})),s&&r.createElement(l.N_,{href:"https://www.figma.com/signup",target:"_blank",className:d.nf,trusted:!0},(0,o.t)("community.banner.get_started_with_a_free_account"),"\xa0\u2192"," "),a&&r.createElement(r.Fragment,null,(0,o.tx)("community.banner.to_create_your_own_plugin",{link:r.createElement(l.N_,{href:"https://www.figma.com/plugin-docs",target:"_blank",className:d.nf,trusted:!0},(0,o.t)("community.banner.visit_the_docs"),"\xa0\u2192"," ")}))))):null}}u.displayName="CommunityBetaPromoBannerInner";let _=(0,n.Ng)((e,t)=>({selectedView:e.selectedView,user:e.user}))(u)},892123:(e,t,a)=>{"use strict";a.d(t,{Q:()=>y,o:()=>r});var r,n=a(411855),l=a(188507),i=a(939863),o=a(443474),s=a(749949),c=a(837324),d=a(410424),m=a(853799),u=a(662275),_=a(107877),p=a(988022),f=a(697551),g=a(860178),E=a(555328),v=a(498606),h=a(332086);function y(e){var t,a,s;let{resource:d,viewContext:m}=e,u=(0,l.d4)(e=>e.authedActiveCommunityProfile),_=(0,f.cs)(u),p=(0,c.Bl)(d.id,(0,c.Vm)(d)),g=!!(null==(t=p.data)?void 0:t[0]),E=r.useLikeActions(d,!!(null==(a=p.data)?void 0:a[0]),(null==(s=p.data)?void 0:s[1])||null,m);return _?n.createElement("div",{"data-tooltip-type":v.Ib.TEXT,"data-tooltip":(0,i.t)("community.likes.to_like_switch_to_your_personal_profile"),"data-tooltip-show-immediately":!0},n.createElement(o.b,{isResourceLiked:!1,disabled:!0})):n.createElement(o.b,{onClick:E(),isResourceLiked:g})}(r||(r={})).useLikeActions=function(e,t,a,r){let n=(0,l.wA)(),i=(0,g.iZ)(),o=(0,s.J)(),c=()=>{(0,p.Cu)(b()),(0,E.U)(e)?n(d.zm({hubFileId:e.id})):(0,E.xQ)(e)?n(m.C({id:e.id,resourceType:E.vt.WIDGET})):n(m.C({id:e.id,resourceType:E.vt.PLUGIN}))},f=e=>{if(e.stopPropagation(),i){if(!i.community_profile_id){n(u.to({type:h.G$,data:{userId:i.id,variations:[h.FF.OPT_IN],onFinish:()=>c()}}));return}c()}},v=t=>{if(t.stopPropagation(),!i)throw Error(`Tried to unlike a ${y} as a signed out user`);(0,p.Cu)(b()),(0,E.U)(e)?n(d.Qi({hubFileId:e.id,likeId:a||void 0})):(0,E.xQ)(e)?n(m.$({id:e.id,resourceType:E.vt.WIDGET,likeId:a||void 0})):n(m.$({id:e.id,resourceType:E.vt.PLUGIN,likeId:a||void 0}))},y=(0,E.U)(e)?"hub file":(0,E.xQ)(e)?"widget":"plugin",b=()=>({action:(0,E.U)(e)?t?_.s0.HUB_FILE_UNLIKE:_.s0.HUB_FILE_LIKE:(0,E.xQ)(e)?t?_.s0.WIDGET_UNLIKE:_.s0.WIDGET_LIKE:t?_.s0.PLUGIN_UNLIKE:_.s0.PLUGIN_LIKE,pluginId:e.id,profileId:e.publisher.id,viewContext:r,searchSessionId:o});return function(){return t?e=>v(e):e=>f(e)}}},966537:(e,t,a)=>{"use strict";a.d(t,{F:()=>_});var r=a(411855),n=a(188507),l=a(776250),i=a(611886),o=a(351226),s=a(749949),c=a(662275),d=a(289104),m=a(237870),u=a(517127);let _=(0,m.Ju)(function({hubFileId:e,onUseHubFile:t}){let a=(0,d.HI)(e),m=(0,s.J)(),_=(0,n.wA)();return a?r.createElement(u.x,{onAgree:()=>{if(t)_(c.AS()),t();else{let e=i.gE(e=>{(0,l.sx)("try_it_out_drafts_picker_menu_opened",{hubFileId:a.id,searchSessionId:m}),_((0,c.to)({type:o._,data:{payload:e}}))});_(c.AS()),_(e({id:a.id,viewer_mode:a.viewerMode,monetized_resource_metadata:a.monetizedResourceMetadataId?{id:a.monetizedResourceMetadataId}:void 0}))}}}):null},"APPLE_EULA_MODAL_ON_USE_HUBFILE_TYPE",m.ZU.YES)},607121:(e,t,a)=>{"use strict";a.d(t,{s:()=>w});var r=a(411855),n=a(188507),l=a(768137),i=a(799569),o=a(946689),s=a(493323),c=a(881388),d=a(939863),m=a(952540),u=a(6024),_=a(611978),p=a(860178),f=a(593803),g=a(267931),E=a(622139),v=a(237870),h=a(488578),y=a(978436),b=a(173067);let w=(0,v.Ju)(function(e){let t=(0,n.wA)(),a=(0,p.iZ)(),v=(0,_._6)(),w=(0,g.H)(),[T,I]=r.useState(""),[x,N]=r.useState(""),[C,S]=r.useState((0,E.EB)()),[k,A]=r.useState(""),[L,R]=r.useState(!0),[D,F]=r.useState(!1);return(0,u.G)(),r.createElement(h.aF,{className:"collect_tax_info_modal--container--F6VXQ"},r.createElement(i.s_,{dispatch:t}),r.createElement("div",{className:"collect_tax_info_modal--title--wFmJh text--fontPos20--Bcz97 text--_fontBase--QdLsd"},(0,d.tx)("community.seller.collect_tax_info_modal.title")),r.createElement("div",{className:"collect_tax_info_modal--body--M1wrr text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,d.tx)("community.seller.collect_tax_info_modal.body")),r.createElement("div",null,r.createElement(o.Lf,{value:T,htmlName:"firstName",label:(0,d.t)("community.seller.collect_tax_info_modal.first_name"),onChange:e=>{I(e.target.value)},trackingFieldName:"First name",dataTestId:"first-name"}),r.createElement(o.Lf,{value:x,htmlName:"lastName",label:(0,d.t)("community.seller.collect_tax_info_modal.last_name"),onChange:e=>{N(e.target.value)},trackingFieldName:"Last name",dataTestId:"last-name"}),r.createElement(y.X,{updateAddress:S,address:C,countryCodesOverride:f.qE,dontSeeYourCountryLink:"https://help.figma.com/hc/articles/12067637274519-About-selling-Community-resources#What_countries_are_supported?"}),r.createElement(b.A,{onChange:A,country:C.country,setIsVatIdValid:R,vatId:k,isCommunityCheckout:!0})),r.createElement(l.$$,{className:"collect_tax_info_modal--button--ZOQrQ text--fontPos13--xW8hS text--_fontBase--QdLsd",onClick:()=>{if(!a)return;if(!T){t(c.s.error((0,d.t)("community.seller.collect_tax_info_modal.enter_a_first_name")));return}if(!x){t(c.s.error((0,d.t)("community.seller.collect_tax_info_modal.enter_a_last_name")));return}let{line1:r,city:n,country:l,region:i,postal_code:o}=C;if(!r||!n||!l||!o||"US"===l&&!i){t(c.s.error((0,d.t)("community.seller.collect_tax_info_modal.enter_a_valid_address")));return}if(k&&!L){t(c.s.error((0,d.t)("community.seller.collect_tax_info_modal.enter_a_valid_vat_id")));return}F(!0),t(m.j({user:a,callback:t=>{e.setupStripeCallback(t),F(!1),t&&w()},selectedView:v,firstName:T,lastName:x,address:C,vatId:k}))}},r.createElement("div",{className:"collect_tax_info_modal--buttonContent--Nsj1d"},D&&r.createElement("div",{className:"collect_tax_info_modal--loadingIcon--iCbii"},r.createElement(s.kt,{shouldMatchTextColor:!0})),(0,d.tx)("community.seller.collect_tax_info_modal.continue_to_stripe"))))},"CommunityCollectTaxInfoModal")},624618:(e,t,a)=>{"use strict";a.d(t,{EV:()=>w,NY:()=>T,d:()=>x,dx:()=>b,vR:()=>h});var r=a(411855),n=a(188507),l=a(91408),i=a(946689);a(455057);var o=a(939863);a(226900);var s=a(709595),c=a(662275);a(782501);var d=a(269167),m=a(860178);a(99506);var u=a(596607),_=a(555328),p=a(178787);a(354438);var f=a(877655);a(580999);var g=a(350913),E=a(860168),v=a(183846);function h(e){return r.createElement("div",{className:v.Xk},r.createElement("p",null,e.label),r.createElement(i.nR,{onClick:e.onClickDecline,className:v.LL},(0,o.tx)("community.detail_view.decline")),r.createElement(i.$$,{onClick:e.onClickAccept,className:v.LL},(0,o.tx)("community.detail_view.accept")))}(0,l.hG)(E.dOH);class y extends r.PureComponent{constructor(){super(...arguments),this.getSubjectBodyForResource=()=>(0,_.U)(this.props.resource)?{resourceSubject:(0,o.t)("community.reporting.reporting_an_inappropriate_file"),resourceBody:(0,o.t)("community.reporting.i_want_to_report_this_file_for_violating_the_community_guidelines_resource_url",{resourceUrl:(0,g.cU)(this.props.resource.id)})}:(0,_.xQ)(this.props.resource)?{resourceSubject:(0,o.t)("community.reporting.reporting_an_inappropriate_widget"),resourceBody:(0,o.t)("community.reporting.i_want_to_report_this_widget_for_violating_the_community_guidelines_resource_url",{resourceUrl:(0,g.ox)(this.props.resource.id)})}:{resourceSubject:(0,o.t)("community.reporting.reporting_an_inappropriate_plugin"),resourceBody:(0,o.t)("community.reporting.i_want_to_report_this_plugin_for_violating_the_plugin_guidelines_resource_url",{resourceUrl:(0,g.ab)(this.props.resource.id)})}}render(){let{resourceSubject:e,resourceBody:t}=this.getSubjectBodyForResource(),a=t;return a=`${a}${this.props.user?`
${(0,o.t)("community.reporting.my_figma_user_id_is_user_id",{userId:this.props.user.id})}`:""}
${(0,o.t)("community.reporting.add_your_description_here")}`,r.createElement(i.N_,{href:`mailto:content-reviews@figma.com?subject=${encodeURIComponent(e)}&body=${encodeURIComponent(a)}`,className:v.iZ,trusted:!0},(0,o.tx)("community.detail_view.report_resource"))}}function b(){let e=(0,m.iZ)();return e?r.createElement(i.Ph,{className:v._1,trackingEventName:"Detail View - Report Resource",onClick:()=>{(0,s.jt)(e)},trusted:!0},(0,o.tx)("community.detail_view.report_resource")):null}function w(e){let{user:t,name:a,monetizedResource:l}=e,s=(0,n.wA)();return r.createElement(i.Ph,{className:v._1,trackingEventName:"Detail View - Request Refund",onClick:()=>{s((0,c.to)({type:f.bX,data:{user:t,name:a,monetizedResource:l}}))},trusted:!0},(0,o.tx)("community.buyer.request_refund"))}function T(e){let t=(0,d.R$)(e.resource),a="Detail View - View Order Details",n=(0,o.t)("community.buyer.view_order_details");return(0,p.Uv)(e.resource.monetized_resource_metadata)&&(a="Detail View - Manage Subscription",n=(0,o.t)("community.buyer.manage_subscription")),r.createElement(i.Ph,{className:v._1,onClick:()=>t(),trackingEventName:a,trusted:!0},n)}(0,n.Ng)(e=>({hasOrgs:(0,u.Yj)(e),teams:Object.keys(e.teams).map(t=>e.teams[t]),user:e.user}))(y);var I=(e=>(e[e.PROMO=0]="PROMO",e[e.PAID=1]="PAID",e))(I||{});function x(e){return r.createElement(i.N_,{className:e.className,onClick:e.onClick,trusted:!0},(0,o.tx)("community.detail_view.remove_myself_as_creator"))}},512077:(e,t,a)=>{"use strict";a.d(t,{F:()=>h});var r=a(411855),n=a(320063),l=a(946689),i=a(455057),o=a(493323),s=a(574176),c=a(939863),d=a(278733),m=a(865618),u=a(843309),_=a(117480),p=a(452353),f=a(622139),g=a(978436),E=a(173067),v=a(265871);function h({createPaymentElement:e,unmountPaymentElement:t,billingAddress:a,updateBillingAddress:h,legalCompanyName:y,updateLegalCompanyName:b,nameOnPaymentMethod:w,updateNameOnPaymentMethod:T,shippingAddress:I,updateShippingAddress:x,error:N,paymentMethodType:C,paymentElementEventHandlers:S,vatGstId:k,onVatGstIdChange:A,regionalVatGstId:L,onRegionalVatGstIdChange:R,isCommunityCheckout:D,isCheckout:F,canSeeBillingAddressExp:P}){let[M,O]=(0,r.useState)(!1),[B,U]=r.useState(!!I&&!(0,f.$V)(I)&&!!y);return(0,n.h)(()=>((async function(){await e({ready:e=>{var t;O(!0),null==(t=null==S?void 0:S.ready)||t.call(S,e)},change:null==S?void 0:S.change})})(),()=>{t()})),(null==N?void 0:N.code)===u.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR?r.createElement("div",{className:"stripe_payment_and_address--errorContainer--vjs9-"},r.createElement(s.B,{svg:v.A,className:"stripe_payment_and_address--errorIcon--vMQyn"}),r.createElement("p",{className:"stripe_payment_and_address--errorMessage--eZnrd"},N.message)):r.createElement("div",{className:"stripe_payment_and_address--container--1Xdbp"},N&&r.createElement("div",{className:"stripe_payment_and_address--error--z-IbH"},r.createElement(i._,{color:i.S.ERROR,text:N.message})),r.createElement("div",{id:u.Ix}),M?r.createElement("div",{style:d.sx.add({marginTop:"7px"}).if(C&&p.d2.includes(C),{marginTop:"15px"}).$},P&&T&&r.createElement(l.Lf,{value:w||"",htmlName:"name_on_card",label:(0,c.t)("pro_cart.payment.name_on_payment_method_label"),placeholder:(0,c.t)("pro_cart.payment.name_on_payment_method"),onChange:e=>{T(e.target.value.trim())},autoCompleteName:"name on payment method",trackingFieldName:"Name On Payment Method",dataTestId:"name-on-payment-method"}),r.createElement(g.X,{address:a,updateAddress:h,canSeeBillingAddressExp:P,isBillingAddress:!0}),!!A&&r.createElement(E.A,{onChange:A,country:a.country,vatId:k,isCommunityCheckout:D}),!!R&&r.createElement(E.A,{onChange:R,country:a.country,region:a.region,vatId:L,isCommunityCheckout:D,variant:"regional"}),C===p.lB.SEPA&&r.createElement("p",{className:"stripe_payment_and_address--mandateText--hH8C3"},(0,c.tx)("pro_cart.payment.sepa_direct_debit_mandate")),F&&P&&r.createElement("div",{className:"stripe_payment_and_address--paymentDetailsCheckbox--34fJx"},r.createElement(m.S,{checked:B,onChange:e=>{U(e.currentTarget.checked),!e.currentTarget.checked&&(b&&b(""),x&&x((0,f.EB)()))}}),r.createElement("p",null,(0,c.tx)("pro_cart.payment.different_legal_name_or_shipping_address"))),B&&r.createElement(_.E,{canSeeBillingAddressExp:P,shippingAddress:I,updateShippingAddress:x,legalCompanyName:y,updateLegalCompanyName:b})):r.createElement("div",{className:"stripe_payment_and_address--spinnerContainer--hg5Vy"},r.createElement(o.kt,null)))}},37153:(e,t,a)=>{"use strict";a.d(t,{R:()=>h});var r=a(411855),n=a(629019),l=a.n(n),i=a(776250),o=a(563706),s=a(286640),c=a(946689),d=a(939863),m=a(657544),u=a(101505),_=a(672517);let p="mobile_download_prompt--mobilePromptTitle--7Tgsn text--fontPos13--xW8hS text--_fontBase--QdLsd",f="mobile_download_prompt--mobilePromptOption--TbF2D",g="mobile_download_prompt--mobilePromptOptionTitle--mMUYW text--fontPos13--xW8hS text--_fontBase--QdLsd",E="mobile_download_prompt--mobilePromptOptionImage--Cp9zK",v="mobile_download_prompt_dismissed";function h(e){let{isCompact:t}=e,a=o.aR?m.o:m.J,n=(0,s.UG)(),p=!t&&!!e.renderBlockingPrompt,[h,w]=r.useState(!p),[T,I]=r.useState(!p);r.useEffect(()=>{null===n.get(v)&&(w(!1),I(!1))},[n,p]);let x=()=>{p||(w(!0),(0,i.sx)("mobile_web_mobile_app_download_prompt_dismissed",{userId:e.userIdForTracking}),setTimeout(()=>{I(!0)},300),n.set(v,!0))};return null!==n.get(v)?null:r.createElement(_.fu,{name:"Mobile Download Prompt"},r.createElement("div",{className:l()({"mobile_download_prompt--overlay--OzW6J":!0,"mobile_download_prompt--overlayClosed--2FWpY":h,"mobile_download_prompt--overlayAnimateEnd--dBvI0":T}),style:{transitionDuration:"300ms"},onClick:x},r.createElement("div",{className:l()("mobile_download_prompt--mobilePromptContainer--FKz5e","mobile_download_prompt--mobileDownloadPromptContainer--FaI33",{"mobile_download_prompt--mobileDownloadPromptContainerClosed--DHusv":h,"mobile_download_prompt--mobileDownloadPromptContainerFullHeightBlocking--B100f":p}),onClick:e=>{e.stopPropagation()}},r.createElement("div",{className:l()("mobile_download_prompt--mobilePromptDescriptionContainer--1PhoH",{"mobile_download_prompt--fullHeightPrompt--U6KWw":p})},t?r.createElement(b,null):r.createElement(y,{renderBlockingPrompt:p??!1})),r.createElement("hr",{className:l()({"mobile_download_prompt--mobilePromptHR--UpOqS":!0,"mobile_download_prompt--fullWidthHR--B-2i1":p})}),r.createElement("div",{className:f},r.createElement("img",{className:E,src:"https://static.figma.com/uploads/249f0f055b922ecef6bffc592a8420e7e6eddcea",alt:(0,d.t)("file_browser.mobile_prompt.app_image_alt")}),r.createElement("div",null,r.createElement("h3",{className:g},(0,d.tx)("file_browser.mobile_prompt.app_title")),r.createElement("p",{className:"mobile_download_prompt--mobilePromptOptionDescription--APlZp text--fontPos11--2LvXf text--_fontBase--QdLsd"},p?(0,d.tx)("file_browser.mobile_prompt.app_description_new"):(0,d.tx)("file_browser.mobile_prompt.app_description"))),r.createElement(c.pY,{trackingProperties:{userId:e.userIdForTracking,appLink:a,trackingDescriptor:u.c.MOBILE_WEB_MOBILE_APP_DOWNLOAD_PROMPT_CLICKED},href:a,className:"mobile_download_prompt--downloadActionButton--lOsEh"},(0,d.tx)("file_browser.mobile_prompt.app_action"))),!p&&r.createElement("div",{className:f},r.createElement("img",{className:E,src:"https://static.figma.com/uploads/741698fed49afa5e8f3becdd906e66d32c8e7fae",alt:(0,d.t)("file_browser.mobile_prompt.browser_image_alt")}),r.createElement("div",null,r.createElement("h3",{className:g},(0,d.tx)("file_browser.mobile_prompt.browser_title"))),r.createElement(c.p6,{onClick:()=>x(),className:"mobile_download_prompt--continueActionButton--7yKGD"},(0,d.tx)("file_browser.mobile_prompt.browser_action"))))))}function y(e){return r.createElement(r.Fragment,null,r.createElement("img",{className:"mobile_download_prompt--mobilePromptImage--U2Yqj",src:"https://static.figma.com/uploads/5f1dc37f397dbddf711d3d950bee5dd46c07fc72",alt:(0,d.t)("file_browser.mobile_prompt.image_alt")}),r.createElement("div",{className:"mobile_download_prompt--mobilePromptTitleContainer--o8VIK"},r.createElement("h2",{className:p},e.renderBlockingPrompt?(0,d.tx)("file_browser.mobile_prompt.modal_title_blocking"):(0,d.tx)("file_browser.mobile_prompt.modal_title")),r.createElement("p",{className:"mobile_download_prompt--mobilePromptSubTitle--GFR67 text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.renderBlockingPrompt?(0,d.tx)("file_browser.mobile_prompt.modal_body_blocking"):(0,d.tx)("file_browser.mobile_prompt.modal_body"))))}function b(){return r.createElement(r.Fragment,null,r.createElement("h2",{className:p},(0,d.tx)("file_browser.mobile_prompt.modal_title_compact")))}},324666:(e,t,a)=>{"use strict";function r(){return null}a.d(t,{GO:()=>p,H5:()=>n,Mr:()=>v,Qc:()=>s,eg:()=>_,g9:()=>h,go:()=>o,i_:()=>y,j8:()=>f,kD:()=>l,l:()=>u,li:()=>m,lt:()=>i,mh:()=>E,oT:()=>g,rC:()=>c,rf:()=>d});let n=r,l=r,i=r,o=r,s=r,c=r,d=r,m=r,u=r,_=r,p=r,f=r,g=r,E=r,v=r,h=r,y=r},67048:(e,t,a)=>{"use strict";a.d(t,{G:()=>c});var r=a(411855),n=a(629019),l=a.n(n),i=a(498480),o=a(762638),s=a(939863);function c({location:e,overrideText:t,hoverStyleClassName:a}){return r.createElement(i.Ex,{className:l()(o.cx.font11.fontNormal.h16.px4.b1.bRadius5.mr0.hFitContent.if("MODAL"===e||"FILE_BROWSER_BAR"===e||"SLIDES_REWRITE_MODAL"===e,o.cx.colorTextSecondary.colorBorder).if("SUMMARIZE_NUDGE"===e,o.cx.colorTextOnbrand.colorBorderBrand).if("SUMMARIZE_NUDGE_DISABLED"===e,o.cx.colorTextOnbrand.colorBorderDisabled).if("INLINE_TOOLBAR"===e,o.cx.colorTextMenuSecondary.colorBorderMenu).if("SLIDES_REWRITE_MODAL"===e,o.cx.textBodySmall).$,a),color:i.zE.INVERT,subtle:!0,text:t??(0,s.t)("whiteboard.ai_modal.beta_badge")})}},3794:e=>{e.exports=function(e){for(var t=-1,a=null==e?0:e.length,r=0,n=[];++t<a;){var l=e[t];l&&(n[r++]=l)}return n}}}]);

//# debugId=d3652dda-4d20-547f-bfe9-33afe829bba4

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/8c6d0a575a68e2b0456915292adebe4990bc78c8/file_browser-edaa03aaa78f5647.min.js.map